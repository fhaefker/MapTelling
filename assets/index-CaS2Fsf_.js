var Ez=Object.defineProperty;var Tz=(e,t,r)=>t in e?Ez(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Pi=(e,t,r)=>Tz(e,typeof t!="symbol"?t+"":t,r);function Az(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(n,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}})();var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OL(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Pz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var FL={exports:{}},m2={},BL={exports:{}},mi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky=Symbol.for("react.element"),Iz=Symbol.for("react.portal"),Mz=Symbol.for("react.fragment"),kz=Symbol.for("react.strict_mode"),Lz=Symbol.for("react.profiler"),Dz=Symbol.for("react.provider"),Rz=Symbol.for("react.context"),Nz=Symbol.for("react.forward_ref"),Oz=Symbol.for("react.suspense"),Fz=Symbol.for("react.memo"),Bz=Symbol.for("react.lazy"),ZA=Symbol.iterator;function zz(e){return e===null||typeof e!="object"?null:(e=ZA&&e[ZA]||e["@@iterator"],typeof e=="function"?e:null)}var zL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$L=Object.assign,jL={};function Tg(e,t,r){this.props=e,this.context=t,this.refs=jL,this.updater=r||zL}Tg.prototype.isReactComponent={};Tg.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Tg.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function UL(){}UL.prototype=Tg.prototype;function fC(e,t,r){this.props=e,this.context=t,this.refs=jL,this.updater=r||zL}var dC=fC.prototype=new UL;dC.constructor=fC;$L(dC,Tg.prototype);dC.isPureReactComponent=!0;var XA=Array.isArray,VL=Object.prototype.hasOwnProperty,pC={current:null},qL={key:!0,ref:!0,__self:!0,__source:!0};function GL(e,t,r){var n,s={},l=null,f=null;if(t!=null)for(n in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(l=""+t.key),t)VL.call(t,n)&&!qL.hasOwnProperty(n)&&(s[n]=t[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var y=Array(a),v=0;v<a;v++)y[v]=arguments[v+2];s.children=y}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:Ky,type:e,key:l,ref:f,props:s,_owner:pC.current}}function $z(e,t){return{$$typeof:Ky,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function mC(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ky}function jz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var YA=/\/+/g;function Ux(e,t){return typeof e=="object"&&e!==null&&e.key!=null?jz(""+e.key):t.toString(36)}function N1(e,t,r,n,s){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case Ky:case Iz:f=!0}}if(f)return f=e,s=s(f),e=n===""?"."+Ux(f,0):n,XA(s)?(r="",e!=null&&(r=e.replace(YA,"$&/")+"/"),N1(s,t,r,"",function(v){return v})):s!=null&&(mC(s)&&(s=$z(s,r+(!s.key||f&&f.key===s.key?"":(""+s.key).replace(YA,"$&/")+"/")+e)),t.push(s)),1;if(f=0,n=n===""?".":n+":",XA(e))for(var a=0;a<e.length;a++){l=e[a];var y=n+Ux(l,a);f+=N1(l,t,r,y,s)}else if(y=zz(e),typeof y=="function")for(e=y.call(e),a=0;!(l=e.next()).done;)l=l.value,y=n+Ux(l,a++),f+=N1(l,t,r,y,s);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function Wv(e,t,r){if(e==null)return e;var n=[],s=0;return N1(e,n,"","",function(l){return t.call(r,l,s++)}),n}function Uz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bl={current:null},O1={transition:null},Vz={ReactCurrentDispatcher:Bl,ReactCurrentBatchConfig:O1,ReactCurrentOwner:pC};function HL(){throw Error("act(...) is not supported in production builds of React.")}mi.Children={map:Wv,forEach:function(e,t,r){Wv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Wv(e,function(){t++}),t},toArray:function(e){return Wv(e,function(t){return t})||[]},only:function(e){if(!mC(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mi.Component=Tg;mi.Fragment=Mz;mi.Profiler=Lz;mi.PureComponent=fC;mi.StrictMode=kz;mi.Suspense=Oz;mi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vz;mi.act=HL;mi.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=$L({},e.props),s=e.key,l=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,f=pC.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(y in t)VL.call(t,y)&&!qL.hasOwnProperty(y)&&(n[y]=t[y]===void 0&&a!==void 0?a[y]:t[y])}var y=arguments.length-2;if(y===1)n.children=r;else if(1<y){a=Array(y);for(var v=0;v<y;v++)a[v]=arguments[v+2];n.children=a}return{$$typeof:Ky,type:e.type,key:s,ref:l,props:n,_owner:f}};mi.createContext=function(e){return e={$$typeof:Rz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dz,_context:e},e.Consumer=e};mi.createElement=GL;mi.createFactory=function(e){var t=GL.bind(null,e);return t.type=e,t};mi.createRef=function(){return{current:null}};mi.forwardRef=function(e){return{$$typeof:Nz,render:e}};mi.isValidElement=mC;mi.lazy=function(e){return{$$typeof:Bz,_payload:{_status:-1,_result:e},_init:Uz}};mi.memo=function(e,t){return{$$typeof:Fz,type:e,compare:t===void 0?null:t}};mi.startTransition=function(e){var t=O1.transition;O1.transition={};try{e()}finally{O1.transition=t}};mi.unstable_act=HL;mi.useCallback=function(e,t){return Bl.current.useCallback(e,t)};mi.useContext=function(e){return Bl.current.useContext(e)};mi.useDebugValue=function(){};mi.useDeferredValue=function(e){return Bl.current.useDeferredValue(e)};mi.useEffect=function(e,t){return Bl.current.useEffect(e,t)};mi.useId=function(){return Bl.current.useId()};mi.useImperativeHandle=function(e,t,r){return Bl.current.useImperativeHandle(e,t,r)};mi.useInsertionEffect=function(e,t){return Bl.current.useInsertionEffect(e,t)};mi.useLayoutEffect=function(e,t){return Bl.current.useLayoutEffect(e,t)};mi.useMemo=function(e,t){return Bl.current.useMemo(e,t)};mi.useReducer=function(e,t,r){return Bl.current.useReducer(e,t,r)};mi.useRef=function(e){return Bl.current.useRef(e)};mi.useState=function(e){return Bl.current.useState(e)};mi.useSyncExternalStore=function(e,t,r){return Bl.current.useSyncExternalStore(e,t,r)};mi.useTransition=function(){return Bl.current.useTransition()};mi.version="18.3.1";BL.exports=mi;var vt=BL.exports;const Oe=OL(vt),p5=Az({__proto__:null,default:Oe},[vt]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qz=vt,Gz=Symbol.for("react.element"),Hz=Symbol.for("react.fragment"),Wz=Object.prototype.hasOwnProperty,Zz=qz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xz={key:!0,ref:!0,__self:!0,__source:!0};function WL(e,t,r){var n,s={},l=null,f=null;r!==void 0&&(l=""+r),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(f=t.ref);for(n in t)Wz.call(t,n)&&!Xz.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Gz,type:e,key:l,ref:f,props:s,_owner:Zz.current}}m2.Fragment=Hz;m2.jsx=WL;m2.jsxs=WL;FL.exports=m2;var Ar=FL.exports,ZL={exports:{}},$u={},XL={exports:{}},YL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ze,tt){var Ot=Ze.length;Ze.push(tt);e:for(;0<Ot;){var St=Ot-1>>>1,ne=Ze[St];if(0<s(ne,tt))Ze[St]=tt,Ze[Ot]=ne,Ot=St;else break e}}function r(Ze){return Ze.length===0?null:Ze[0]}function n(Ze){if(Ze.length===0)return null;var tt=Ze[0],Ot=Ze.pop();if(Ot!==tt){Ze[0]=Ot;e:for(var St=0,ne=Ze.length,Ee=ne>>>1;St<Ee;){var Ne=2*(St+1)-1,qe=Ze[Ne],Je=Ne+1,gt=Ze[Je];if(0>s(qe,Ot))Je<ne&&0>s(gt,qe)?(Ze[St]=gt,Ze[Je]=Ot,St=Je):(Ze[St]=qe,Ze[Ne]=Ot,St=Ne);else if(Je<ne&&0>s(gt,Ot))Ze[St]=gt,Ze[Je]=Ot,St=Je;else break e}}return tt}function s(Ze,tt){var Ot=Ze.sortIndex-tt.sortIndex;return Ot!==0?Ot:Ze.id-tt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var y=[],v=[],S=1,P=null,D=3,E=!1,F=!1,z=!1,W=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Ze){for(var tt=r(v);tt!==null;){if(tt.callback===null)n(v);else if(tt.startTime<=Ze)n(v),tt.sortIndex=tt.expirationTime,t(y,tt);else break;tt=r(v)}}function K(Ze){if(z=!1,Q(Ze),!F)if(r(y)!==null)F=!0,pt(xe);else{var tt=r(v);tt!==null&&At(K,tt.startTime-Ze)}}function xe(Ze,tt){F=!1,z&&(z=!1,$(me),me=-1),E=!0;var Ot=D;try{for(Q(tt),P=r(y);P!==null&&(!(P.expirationTime>tt)||Ze&&!le());){var St=P.callback;if(typeof St=="function"){P.callback=null,D=P.priorityLevel;var ne=St(P.expirationTime<=tt);tt=e.unstable_now(),typeof ne=="function"?P.callback=ne:P===r(y)&&n(y),Q(tt)}else n(y);P=r(y)}if(P!==null)var Ee=!0;else{var Ne=r(v);Ne!==null&&At(K,Ne.startTime-tt),Ee=!1}return Ee}finally{P=null,D=Ot,E=!1}}var de=!1,be=null,me=-1,ve=5,Re=-1;function le(){return!(e.unstable_now()-Re<ve)}function G(){if(be!==null){var Ze=e.unstable_now();Re=Ze;var tt=!0;try{tt=be(!0,Ze)}finally{tt?Ae():(de=!1,be=null)}}else de=!1}var Ae;if(typeof Y=="function")Ae=function(){Y(G)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,lt=we.port2;we.port1.onmessage=G,Ae=function(){lt.postMessage(null)}}else Ae=function(){W(G,0)};function pt(Ze){be=Ze,de||(de=!0,Ae())}function At(Ze,tt){me=W(function(){Ze(e.unstable_now())},tt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ze){Ze.callback=null},e.unstable_continueExecution=function(){F||E||(F=!0,pt(xe))},e.unstable_forceFrameRate=function(Ze){0>Ze||125<Ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<Ze?Math.floor(1e3/Ze):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_getFirstCallbackNode=function(){return r(y)},e.unstable_next=function(Ze){switch(D){case 1:case 2:case 3:var tt=3;break;default:tt=D}var Ot=D;D=tt;try{return Ze()}finally{D=Ot}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ze,tt){switch(Ze){case 1:case 2:case 3:case 4:case 5:break;default:Ze=3}var Ot=D;D=Ze;try{return tt()}finally{D=Ot}},e.unstable_scheduleCallback=function(Ze,tt,Ot){var St=e.unstable_now();switch(typeof Ot=="object"&&Ot!==null?(Ot=Ot.delay,Ot=typeof Ot=="number"&&0<Ot?St+Ot:St):Ot=St,Ze){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Ot+ne,Ze={id:S++,callback:tt,priorityLevel:Ze,startTime:Ot,expirationTime:ne,sortIndex:-1},Ot>St?(Ze.sortIndex=Ot,t(v,Ze),r(y)===null&&Ze===r(v)&&(z?($(me),me=-1):z=!0,At(K,Ot-St))):(Ze.sortIndex=ne,t(y,Ze),F||E||(F=!0,pt(xe))),Ze},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(Ze){var tt=D;return function(){var Ot=D;D=tt;try{return Ze.apply(this,arguments)}finally{D=Ot}}}})(YL);XL.exports=YL;var Yz=XL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kz=vt,Fu=Yz;function Sr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KL=new Set,hy={};function bp(e,t){cg(e,t),cg(e+"Capture",t)}function cg(e,t){for(hy[e]=t,e=0;e<t.length;e++)KL.add(t[e])}var cf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m5=Object.prototype.hasOwnProperty,Jz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,KA={},JA={};function Qz(e){return m5.call(JA,e)?!0:m5.call(KA,e)?!1:Jz.test(e)?JA[e]=!0:(KA[e]=!0,!1)}function e7(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function t7(e,t,r,n){if(t===null||typeof t>"u"||e7(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zl(e,t,r,n,s,l,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=f}var js={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){js[e]=new zl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];js[t]=new zl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){js[e]=new zl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){js[e]=new zl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){js[e]=new zl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){js[e]=new zl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){js[e]=new zl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){js[e]=new zl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){js[e]=new zl(e,5,!1,e.toLowerCase(),null,!1,!1)});var gC=/[\-:]([a-z])/g;function yC(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gC,yC);js[t]=new zl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gC,yC);js[t]=new zl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gC,yC);js[t]=new zl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){js[e]=new zl(e,1,!1,e.toLowerCase(),null,!1,!1)});js.xlinkHref=new zl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){js[e]=new zl(e,1,!1,e.toLowerCase(),null,!0,!0)});function vC(e,t,r,n){var s=js.hasOwnProperty(t)?js[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(t7(t,r,s,n)&&(r=null),n||s===null?Qz(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var vf=Kz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zv=Symbol.for("react.element"),Rm=Symbol.for("react.portal"),Nm=Symbol.for("react.fragment"),_C=Symbol.for("react.strict_mode"),g5=Symbol.for("react.profiler"),JL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),bC=Symbol.for("react.forward_ref"),y5=Symbol.for("react.suspense"),v5=Symbol.for("react.suspense_list"),xC=Symbol.for("react.memo"),jf=Symbol.for("react.lazy"),e6=Symbol.for("react.offscreen"),QA=Symbol.iterator;function g0(e){return e===null||typeof e!="object"?null:(e=QA&&e[QA]||e["@@iterator"],typeof e=="function"?e:null)}var ua=Object.assign,Vx;function O0(e){if(Vx===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Vx=t&&t[1]||""}return`
`+Vx+e}var qx=!1;function Gx(e,t){if(!e||qx)return"";qx=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(v){var n=v}Reflect.construct(e,[],t)}else{try{t.call()}catch(v){n=v}e.call(t.prototype)}else{try{throw Error()}catch(v){n=v}e()}}catch(v){if(v&&n&&typeof v.stack=="string"){for(var s=v.stack.split(`
`),l=n.stack.split(`
`),f=s.length-1,a=l.length-1;1<=f&&0<=a&&s[f]!==l[a];)a--;for(;1<=f&&0<=a;f--,a--)if(s[f]!==l[a]){if(f!==1||a!==1)do if(f--,a--,0>a||s[f]!==l[a]){var y=`
`+s[f].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=f&&0<=a);break}}}finally{qx=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?O0(e):""}function r7(e){switch(e.tag){case 5:return O0(e.type);case 16:return O0("Lazy");case 13:return O0("Suspense");case 19:return O0("SuspenseList");case 0:case 2:case 15:return e=Gx(e.type,!1),e;case 11:return e=Gx(e.type.render,!1),e;case 1:return e=Gx(e.type,!0),e;default:return""}}function _5(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Nm:return"Fragment";case Rm:return"Portal";case g5:return"Profiler";case _C:return"StrictMode";case y5:return"Suspense";case v5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case QL:return(e.displayName||"Context")+".Consumer";case JL:return(e._context.displayName||"Context")+".Provider";case bC:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xC:return t=e.displayName||null,t!==null?t:_5(e.type)||"Memo";case jf:t=e._payload,e=e._init;try{return _5(e(t))}catch{}}return null}function n7(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _5(t);case 8:return t===_C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ad(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function t6(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function i7(e){var t=t6(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(f){n=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(f){n=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xv(e){e._valueTracker||(e._valueTracker=i7(e))}function r6(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=t6(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function u_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function b5(e,t){var r=t.checked;return ua({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function eP(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ad(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function n6(e,t){t=t.checked,t!=null&&vC(e,"checked",t,!1)}function x5(e,t){n6(e,t);var r=ad(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?w5(e,t.type,r):t.hasOwnProperty("defaultValue")&&w5(e,t.type,ad(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function w5(e,t,r){(t!=="number"||u_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var F0=Array.isArray;function Ym(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ad(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function S5(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Sr(91));return ua({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Sr(92));if(F0(r)){if(1<r.length)throw Error(Sr(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ad(r)}}function i6(e,t){var r=ad(t.value),n=ad(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function nP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function o6(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function C5(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?o6(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yv,a6=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yv=Yv||document.createElement("div"),Yv.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yv.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Y0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o7=["Webkit","ms","Moz","O"];Object.keys(Y0).forEach(function(e){o7.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Y0[t]=Y0[e]})});function s6(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Y0.hasOwnProperty(e)&&Y0[e]?(""+t).trim():t+"px"}function l6(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=s6(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var a7=ua({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function E5(e,t){if(t){if(a7[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Sr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Sr(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Sr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Sr(62))}}function T5(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var A5=null;function wC(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var P5=null,Km=null,Jm=null;function iP(e){if(e=ev(e)){if(typeof P5!="function")throw Error(Sr(280));var t=e.stateNode;t&&(t=b2(t),P5(e.stateNode,e.type,t))}}function u6(e){Km?Jm?Jm.push(e):Jm=[e]:Km=e}function c6(){if(Km){var e=Km,t=Jm;if(Jm=Km=null,iP(e),t)for(e=0;e<t.length;e++)iP(t[e])}}function h6(e,t){return e(t)}function f6(){}var Hx=!1;function d6(e,t,r){if(Hx)return e(t,r);Hx=!0;try{return h6(e,t,r)}finally{Hx=!1,(Km!==null||Jm!==null)&&(f6(),c6())}}function dy(e,t){var r=e.stateNode;if(r===null)return null;var n=b2(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Sr(231,t,typeof r));return r}var I5=!1;if(cf)try{var y0={};Object.defineProperty(y0,"passive",{get:function(){I5=!0}}),window.addEventListener("test",y0,y0),window.removeEventListener("test",y0,y0)}catch{I5=!1}function s7(e,t,r,n,s,l,f,a,y){var v=Array.prototype.slice.call(arguments,3);try{t.apply(r,v)}catch(S){this.onError(S)}}var K0=!1,c_=null,h_=!1,M5=null,l7={onError:function(e){K0=!0,c_=e}};function u7(e,t,r,n,s,l,f,a,y){K0=!1,c_=null,s7.apply(l7,arguments)}function c7(e,t,r,n,s,l,f,a,y){if(u7.apply(this,arguments),K0){if(K0){var v=c_;K0=!1,c_=null}else throw Error(Sr(198));h_||(h_=!0,M5=v)}}function xp(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function p6(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function oP(e){if(xp(e)!==e)throw Error(Sr(188))}function h7(e){var t=e.alternate;if(!t){if(t=xp(e),t===null)throw Error(Sr(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return oP(s),e;if(l===n)return oP(s),t;l=l.sibling}throw Error(Sr(188))}if(r.return!==n.return)r=s,n=l;else{for(var f=!1,a=s.child;a;){if(a===r){f=!0,r=s,n=l;break}if(a===n){f=!0,n=s,r=l;break}a=a.sibling}if(!f){for(a=l.child;a;){if(a===r){f=!0,r=l,n=s;break}if(a===n){f=!0,n=l,r=s;break}a=a.sibling}if(!f)throw Error(Sr(189))}}if(r.alternate!==n)throw Error(Sr(190))}if(r.tag!==3)throw Error(Sr(188));return r.stateNode.current===r?e:t}function m6(e){return e=h7(e),e!==null?g6(e):null}function g6(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=g6(e);if(t!==null)return t;e=e.sibling}return null}var y6=Fu.unstable_scheduleCallback,aP=Fu.unstable_cancelCallback,f7=Fu.unstable_shouldYield,d7=Fu.unstable_requestPaint,Pa=Fu.unstable_now,p7=Fu.unstable_getCurrentPriorityLevel,SC=Fu.unstable_ImmediatePriority,v6=Fu.unstable_UserBlockingPriority,f_=Fu.unstable_NormalPriority,m7=Fu.unstable_LowPriority,_6=Fu.unstable_IdlePriority,g2=null,Sh=null;function g7(e){if(Sh&&typeof Sh.onCommitFiberRoot=="function")try{Sh.onCommitFiberRoot(g2,e,void 0,(e.current.flags&128)===128)}catch{}}var jc=Math.clz32?Math.clz32:_7,y7=Math.log,v7=Math.LN2;function _7(e){return e>>>=0,e===0?32:31-(y7(e)/v7|0)|0}var Kv=64,Jv=4194304;function B0(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function d_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,l=e.pingedLanes,f=r&268435455;if(f!==0){var a=f&~s;a!==0?n=B0(a):(l&=f,l!==0&&(n=B0(l)))}else f=r&~s,f!==0?n=B0(f):l!==0&&(n=B0(l));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-jc(t),s=1<<r,n|=e[r],t&=~s;return n}function b7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x7(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var f=31-jc(l),a=1<<f,y=s[f];y===-1?(!(a&r)||a&n)&&(s[f]=b7(a,t)):y<=t&&(e.expiredLanes|=a),l&=~a}}function k5(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function b6(){var e=Kv;return Kv<<=1,!(Kv&4194240)&&(Kv=64),e}function Wx(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Jy(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jc(t),e[t]=r}function w7(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-jc(r),l=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~l}}function CC(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-jc(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Qi=0;function x6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var w6,EC,S6,C6,E6,L5=!1,Qv=[],Kf=null,Jf=null,Qf=null,py=new Map,my=new Map,Gf=[],S7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sP(e,t){switch(e){case"focusin":case"focusout":Kf=null;break;case"dragenter":case"dragleave":Jf=null;break;case"mouseover":case"mouseout":Qf=null;break;case"pointerover":case"pointerout":py.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":my.delete(t.pointerId)}}function v0(e,t,r,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},t!==null&&(t=ev(t),t!==null&&EC(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function C7(e,t,r,n,s){switch(t){case"focusin":return Kf=v0(Kf,e,t,r,n,s),!0;case"dragenter":return Jf=v0(Jf,e,t,r,n,s),!0;case"mouseover":return Qf=v0(Qf,e,t,r,n,s),!0;case"pointerover":var l=s.pointerId;return py.set(l,v0(py.get(l)||null,e,t,r,n,s)),!0;case"gotpointercapture":return l=s.pointerId,my.set(l,v0(my.get(l)||null,e,t,r,n,s)),!0}return!1}function T6(e){var t=Hd(e.target);if(t!==null){var r=xp(t);if(r!==null){if(t=r.tag,t===13){if(t=p6(r),t!==null){e.blockedOn=t,E6(e.priority,function(){S6(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function F1(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=D5(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);A5=n,r.target.dispatchEvent(n),A5=null}else return t=ev(r),t!==null&&EC(t),e.blockedOn=r,!1;t.shift()}return!0}function lP(e,t,r){F1(e)&&r.delete(t)}function E7(){L5=!1,Kf!==null&&F1(Kf)&&(Kf=null),Jf!==null&&F1(Jf)&&(Jf=null),Qf!==null&&F1(Qf)&&(Qf=null),py.forEach(lP),my.forEach(lP)}function _0(e,t){e.blockedOn===t&&(e.blockedOn=null,L5||(L5=!0,Fu.unstable_scheduleCallback(Fu.unstable_NormalPriority,E7)))}function gy(e){function t(s){return _0(s,e)}if(0<Qv.length){_0(Qv[0],e);for(var r=1;r<Qv.length;r++){var n=Qv[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Kf!==null&&_0(Kf,e),Jf!==null&&_0(Jf,e),Qf!==null&&_0(Qf,e),py.forEach(t),my.forEach(t),r=0;r<Gf.length;r++)n=Gf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Gf.length&&(r=Gf[0],r.blockedOn===null);)T6(r),r.blockedOn===null&&Gf.shift()}var Qm=vf.ReactCurrentBatchConfig,p_=!0;function T7(e,t,r,n){var s=Qi,l=Qm.transition;Qm.transition=null;try{Qi=1,TC(e,t,r,n)}finally{Qi=s,Qm.transition=l}}function A7(e,t,r,n){var s=Qi,l=Qm.transition;Qm.transition=null;try{Qi=4,TC(e,t,r,n)}finally{Qi=s,Qm.transition=l}}function TC(e,t,r,n){if(p_){var s=D5(e,t,r,n);if(s===null)nw(e,t,n,m_,r),sP(e,n);else if(C7(s,e,t,r,n))n.stopPropagation();else if(sP(e,n),t&4&&-1<S7.indexOf(e)){for(;s!==null;){var l=ev(s);if(l!==null&&w6(l),l=D5(e,t,r,n),l===null&&nw(e,t,n,m_,r),l===s)break;s=l}s!==null&&n.stopPropagation()}else nw(e,t,n,null,r)}}var m_=null;function D5(e,t,r,n){if(m_=null,e=wC(n),e=Hd(e),e!==null)if(t=xp(e),t===null)e=null;else if(r=t.tag,r===13){if(e=p6(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return m_=e,null}function A6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p7()){case SC:return 1;case v6:return 4;case f_:case m7:return 16;case _6:return 536870912;default:return 16}default:return 16}}var Wf=null,AC=null,B1=null;function P6(){if(B1)return B1;var e,t=AC,r=t.length,n,s="value"in Wf?Wf.value:Wf.textContent,l=s.length;for(e=0;e<r&&t[e]===s[e];e++);var f=r-e;for(n=1;n<=f&&t[r-n]===s[l-n];n++);return B1=s.slice(e,1<n?1-n:void 0)}function z1(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function e1(){return!0}function uP(){return!1}function ju(e){function t(r,n,s,l,f){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?e1:uP,this.isPropagationStopped=uP,this}return ua(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=e1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=e1)},persist:function(){},isPersistent:e1}),t}var Ag={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PC=ju(Ag),Qy=ua({},Ag,{view:0,detail:0}),P7=ju(Qy),Zx,Xx,b0,y2=ua({},Qy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IC,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==b0&&(b0&&e.type==="mousemove"?(Zx=e.screenX-b0.screenX,Xx=e.screenY-b0.screenY):Xx=Zx=0,b0=e),Zx)},movementY:function(e){return"movementY"in e?e.movementY:Xx}}),cP=ju(y2),I7=ua({},y2,{dataTransfer:0}),M7=ju(I7),k7=ua({},Qy,{relatedTarget:0}),Yx=ju(k7),L7=ua({},Ag,{animationName:0,elapsedTime:0,pseudoElement:0}),D7=ju(L7),R7=ua({},Ag,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),N7=ju(R7),O7=ua({},Ag,{data:0}),hP=ju(O7),F7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=z7[e])?!!t[e]:!1}function IC(){return $7}var j7=ua({},Qy,{key:function(e){if(e.key){var t=F7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=z1(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?B7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IC,charCode:function(e){return e.type==="keypress"?z1(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?z1(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),U7=ju(j7),V7=ua({},y2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fP=ju(V7),q7=ua({},Qy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IC}),G7=ju(q7),H7=ua({},Ag,{propertyName:0,elapsedTime:0,pseudoElement:0}),W7=ju(H7),Z7=ua({},y2,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),X7=ju(Z7),Y7=[9,13,27,32],MC=cf&&"CompositionEvent"in window,J0=null;cf&&"documentMode"in document&&(J0=document.documentMode);var K7=cf&&"TextEvent"in window&&!J0,I6=cf&&(!MC||J0&&8<J0&&11>=J0),dP=" ",pP=!1;function M6(e,t){switch(e){case"keyup":return Y7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Om=!1;function J7(e,t){switch(e){case"compositionend":return k6(t);case"keypress":return t.which!==32?null:(pP=!0,dP);case"textInput":return e=t.data,e===dP&&pP?null:e;default:return null}}function Q7(e,t){if(Om)return e==="compositionend"||!MC&&M6(e,t)?(e=P6(),B1=AC=Wf=null,Om=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I6&&t.locale!=="ko"?null:t.data;default:return null}}var e9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!e9[e.type]:t==="textarea"}function L6(e,t,r,n){u6(n),t=g_(t,"onChange"),0<t.length&&(r=new PC("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Q0=null,yy=null;function t9(e){V6(e,0)}function v2(e){var t=zm(e);if(r6(t))return e}function r9(e,t){if(e==="change")return t}var D6=!1;if(cf){var Kx;if(cf){var Jx="oninput"in document;if(!Jx){var gP=document.createElement("div");gP.setAttribute("oninput","return;"),Jx=typeof gP.oninput=="function"}Kx=Jx}else Kx=!1;D6=Kx&&(!document.documentMode||9<document.documentMode)}function yP(){Q0&&(Q0.detachEvent("onpropertychange",R6),yy=Q0=null)}function R6(e){if(e.propertyName==="value"&&v2(yy)){var t=[];L6(t,yy,e,wC(e)),d6(t9,t)}}function n9(e,t,r){e==="focusin"?(yP(),Q0=t,yy=r,Q0.attachEvent("onpropertychange",R6)):e==="focusout"&&yP()}function i9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return v2(yy)}function o9(e,t){if(e==="click")return v2(t)}function a9(e,t){if(e==="input"||e==="change")return v2(t)}function s9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vc=typeof Object.is=="function"?Object.is:s9;function vy(e,t){if(Vc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!m5.call(t,s)||!Vc(e[s],t[s]))return!1}return!0}function vP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _P(e,t){var r=vP(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vP(r)}}function N6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function O6(){for(var e=window,t=u_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=u_(e.document)}return t}function kC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function l9(e){var t=O6(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&N6(r.ownerDocument.documentElement,r)){if(n!==null&&kC(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,l=Math.min(n.start,s);n=n.end===void 0?l:Math.min(n.end,s),!e.extend&&l>n&&(s=n,n=l,l=s),s=_P(r,l);var f=_P(r,n);s&&f&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var u9=cf&&"documentMode"in document&&11>=document.documentMode,Fm=null,R5=null,ey=null,N5=!1;function bP(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;N5||Fm==null||Fm!==u_(n)||(n=Fm,"selectionStart"in n&&kC(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ey&&vy(ey,n)||(ey=n,n=g_(R5,"onSelect"),0<n.length&&(t=new PC("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Fm)))}function t1(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Bm={animationend:t1("Animation","AnimationEnd"),animationiteration:t1("Animation","AnimationIteration"),animationstart:t1("Animation","AnimationStart"),transitionend:t1("Transition","TransitionEnd")},Qx={},F6={};cf&&(F6=document.createElement("div").style,"AnimationEvent"in window||(delete Bm.animationend.animation,delete Bm.animationiteration.animation,delete Bm.animationstart.animation),"TransitionEvent"in window||delete Bm.transitionend.transition);function _2(e){if(Qx[e])return Qx[e];if(!Bm[e])return e;var t=Bm[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in F6)return Qx[e]=t[r];return e}var B6=_2("animationend"),z6=_2("animationiteration"),$6=_2("animationstart"),j6=_2("transitionend"),U6=new Map,xP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yd(e,t){U6.set(e,t),bp(t,[e])}for(var ew=0;ew<xP.length;ew++){var tw=xP[ew],c9=tw.toLowerCase(),h9=tw[0].toUpperCase()+tw.slice(1);yd(c9,"on"+h9)}yd(B6,"onAnimationEnd");yd(z6,"onAnimationIteration");yd($6,"onAnimationStart");yd("dblclick","onDoubleClick");yd("focusin","onFocus");yd("focusout","onBlur");yd(j6,"onTransitionEnd");cg("onMouseEnter",["mouseout","mouseover"]);cg("onMouseLeave",["mouseout","mouseover"]);cg("onPointerEnter",["pointerout","pointerover"]);cg("onPointerLeave",["pointerout","pointerover"]);bp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bp("onBeforeInput",["compositionend","keypress","textInput","paste"]);bp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var z0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f9=new Set("cancel close invalid load scroll toggle".split(" ").concat(z0));function wP(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,c7(n,t,void 0,e),e.currentTarget=null}function V6(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var f=n.length-1;0<=f;f--){var a=n[f],y=a.instance,v=a.currentTarget;if(a=a.listener,y!==l&&s.isPropagationStopped())break e;wP(s,a,v),l=y}else for(f=0;f<n.length;f++){if(a=n[f],y=a.instance,v=a.currentTarget,a=a.listener,y!==l&&s.isPropagationStopped())break e;wP(s,a,v),l=y}}}if(h_)throw e=M5,h_=!1,M5=null,e}function Do(e,t){var r=t[$5];r===void 0&&(r=t[$5]=new Set);var n=e+"__bubble";r.has(n)||(q6(t,e,2,!1),r.add(n))}function rw(e,t,r){var n=0;t&&(n|=4),q6(r,e,n,t)}var r1="_reactListening"+Math.random().toString(36).slice(2);function _y(e){if(!e[r1]){e[r1]=!0,KL.forEach(function(r){r!=="selectionchange"&&(f9.has(r)||rw(r,!1,e),rw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[r1]||(t[r1]=!0,rw("selectionchange",!1,t))}}function q6(e,t,r,n){switch(A6(t)){case 1:var s=T7;break;case 4:s=A7;break;default:s=TC}r=s.bind(null,t,r,e),s=void 0,!I5||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function nw(e,t,r,n,s){var l=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(f===4)for(f=n.return;f!==null;){var y=f.tag;if((y===3||y===4)&&(y=f.stateNode.containerInfo,y===s||y.nodeType===8&&y.parentNode===s))return;f=f.return}for(;a!==null;){if(f=Hd(a),f===null)return;if(y=f.tag,y===5||y===6){n=l=f;continue e}a=a.parentNode}}n=n.return}d6(function(){var v=l,S=wC(r),P=[];e:{var D=U6.get(e);if(D!==void 0){var E=PC,F=e;switch(e){case"keypress":if(z1(r)===0)break e;case"keydown":case"keyup":E=U7;break;case"focusin":F="focus",E=Yx;break;case"focusout":F="blur",E=Yx;break;case"beforeblur":case"afterblur":E=Yx;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=cP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=M7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=G7;break;case B6:case z6:case $6:E=D7;break;case j6:E=W7;break;case"scroll":E=P7;break;case"wheel":E=X7;break;case"copy":case"cut":case"paste":E=N7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=fP}var z=(t&4)!==0,W=!z&&e==="scroll",$=z?D!==null?D+"Capture":null:D;z=[];for(var Y=v,Q;Y!==null;){Q=Y;var K=Q.stateNode;if(Q.tag===5&&K!==null&&(Q=K,$!==null&&(K=dy(Y,$),K!=null&&z.push(by(Y,K,Q)))),W)break;Y=Y.return}0<z.length&&(D=new E(D,F,null,r,S),P.push({event:D,listeners:z}))}}if(!(t&7)){e:{if(D=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",D&&r!==A5&&(F=r.relatedTarget||r.fromElement)&&(Hd(F)||F[hf]))break e;if((E||D)&&(D=S.window===S?S:(D=S.ownerDocument)?D.defaultView||D.parentWindow:window,E?(F=r.relatedTarget||r.toElement,E=v,F=F?Hd(F):null,F!==null&&(W=xp(F),F!==W||F.tag!==5&&F.tag!==6)&&(F=null)):(E=null,F=v),E!==F)){if(z=cP,K="onMouseLeave",$="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&(z=fP,K="onPointerLeave",$="onPointerEnter",Y="pointer"),W=E==null?D:zm(E),Q=F==null?D:zm(F),D=new z(K,Y+"leave",E,r,S),D.target=W,D.relatedTarget=Q,K=null,Hd(S)===v&&(z=new z($,Y+"enter",F,r,S),z.target=Q,z.relatedTarget=W,K=z),W=K,E&&F)t:{for(z=E,$=F,Y=0,Q=z;Q;Q=rm(Q))Y++;for(Q=0,K=$;K;K=rm(K))Q++;for(;0<Y-Q;)z=rm(z),Y--;for(;0<Q-Y;)$=rm($),Q--;for(;Y--;){if(z===$||$!==null&&z===$.alternate)break t;z=rm(z),$=rm($)}z=null}else z=null;E!==null&&SP(P,D,E,z,!1),F!==null&&W!==null&&SP(P,W,F,z,!0)}}e:{if(D=v?zm(v):window,E=D.nodeName&&D.nodeName.toLowerCase(),E==="select"||E==="input"&&D.type==="file")var xe=r9;else if(mP(D))if(D6)xe=a9;else{xe=i9;var de=n9}else(E=D.nodeName)&&E.toLowerCase()==="input"&&(D.type==="checkbox"||D.type==="radio")&&(xe=o9);if(xe&&(xe=xe(e,v))){L6(P,xe,r,S);break e}de&&de(e,D,v),e==="focusout"&&(de=D._wrapperState)&&de.controlled&&D.type==="number"&&w5(D,"number",D.value)}switch(de=v?zm(v):window,e){case"focusin":(mP(de)||de.contentEditable==="true")&&(Fm=de,R5=v,ey=null);break;case"focusout":ey=R5=Fm=null;break;case"mousedown":N5=!0;break;case"contextmenu":case"mouseup":case"dragend":N5=!1,bP(P,r,S);break;case"selectionchange":if(u9)break;case"keydown":case"keyup":bP(P,r,S)}var be;if(MC)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Om?M6(e,r)&&(me="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(me="onCompositionStart");me&&(I6&&r.locale!=="ko"&&(Om||me!=="onCompositionStart"?me==="onCompositionEnd"&&Om&&(be=P6()):(Wf=S,AC="value"in Wf?Wf.value:Wf.textContent,Om=!0)),de=g_(v,me),0<de.length&&(me=new hP(me,e,null,r,S),P.push({event:me,listeners:de}),be?me.data=be:(be=k6(r),be!==null&&(me.data=be)))),(be=K7?J7(e,r):Q7(e,r))&&(v=g_(v,"onBeforeInput"),0<v.length&&(S=new hP("onBeforeInput","beforeinput",null,r,S),P.push({event:S,listeners:v}),S.data=be))}V6(P,t)})}function by(e,t,r){return{instance:e,listener:t,currentTarget:r}}function g_(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=dy(e,r),l!=null&&n.unshift(by(e,l,s)),l=dy(e,t),l!=null&&n.push(by(e,l,s))),e=e.return}return n}function rm(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function SP(e,t,r,n,s){for(var l=t._reactName,f=[];r!==null&&r!==n;){var a=r,y=a.alternate,v=a.stateNode;if(y!==null&&y===n)break;a.tag===5&&v!==null&&(a=v,s?(y=dy(r,l),y!=null&&f.unshift(by(r,y,a))):s||(y=dy(r,l),y!=null&&f.push(by(r,y,a)))),r=r.return}f.length!==0&&e.push({event:t,listeners:f})}var d9=/\r\n?/g,p9=/\u0000|\uFFFD/g;function CP(e){return(typeof e=="string"?e:""+e).replace(d9,`
`).replace(p9,"")}function n1(e,t,r){if(t=CP(t),CP(e)!==t&&r)throw Error(Sr(425))}function y_(){}var O5=null,F5=null;function B5(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var z5=typeof setTimeout=="function"?setTimeout:void 0,m9=typeof clearTimeout=="function"?clearTimeout:void 0,EP=typeof Promise=="function"?Promise:void 0,g9=typeof queueMicrotask=="function"?queueMicrotask:typeof EP<"u"?function(e){return EP.resolve(null).then(e).catch(y9)}:z5;function y9(e){setTimeout(function(){throw e})}function iw(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),gy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);gy(t)}function ed(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function TP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Pg=Math.random().toString(36).slice(2),bh="__reactFiber$"+Pg,xy="__reactProps$"+Pg,hf="__reactContainer$"+Pg,$5="__reactEvents$"+Pg,v9="__reactListeners$"+Pg,_9="__reactHandles$"+Pg;function Hd(e){var t=e[bh];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hf]||r[bh]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=TP(e);e!==null;){if(r=e[bh])return r;e=TP(e)}return t}e=r,r=e.parentNode}return null}function ev(e){return e=e[bh]||e[hf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Sr(33))}function b2(e){return e[xy]||null}var j5=[],$m=-1;function vd(e){return{current:e}}function Fo(e){0>$m||(e.current=j5[$m],j5[$m]=null,$m--)}function Eo(e,t){$m++,j5[$m]=e.current,e.current=t}var sd={},xl=vd(sd),iu=vd(!1),ip=sd;function hg(e,t){var r=e.type.contextTypes;if(!r)return sd;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in r)s[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ou(e){return e=e.childContextTypes,e!=null}function v_(){Fo(iu),Fo(xl)}function AP(e,t,r){if(xl.current!==sd)throw Error(Sr(168));Eo(xl,t),Eo(iu,r)}function G6(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Sr(108,n7(e)||"Unknown",s));return ua({},r,n)}function __(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||sd,ip=xl.current,Eo(xl,e),Eo(iu,iu.current),!0}function PP(e,t,r){var n=e.stateNode;if(!n)throw Error(Sr(169));r?(e=G6(e,t,ip),n.__reactInternalMemoizedMergedChildContext=e,Fo(iu),Fo(xl),Eo(xl,e)):Fo(iu),Eo(iu,r)}var ef=null,x2=!1,ow=!1;function H6(e){ef===null?ef=[e]:ef.push(e)}function b9(e){x2=!0,H6(e)}function _d(){if(!ow&&ef!==null){ow=!0;var e=0,t=Qi;try{var r=ef;for(Qi=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ef=null,x2=!1}catch(s){throw ef!==null&&(ef=ef.slice(e+1)),y6(SC,_d),s}finally{Qi=t,ow=!1}}return null}var jm=[],Um=0,b_=null,x_=0,Yu=[],Ku=0,op=null,rf=1,nf="";function $d(e,t){jm[Um++]=x_,jm[Um++]=b_,b_=e,x_=t}function W6(e,t,r){Yu[Ku++]=rf,Yu[Ku++]=nf,Yu[Ku++]=op,op=e;var n=rf;e=nf;var s=32-jc(n)-1;n&=~(1<<s),r+=1;var l=32-jc(t)+s;if(30<l){var f=s-s%5;l=(n&(1<<f)-1).toString(32),n>>=f,s-=f,rf=1<<32-jc(t)+s|r<<s|n,nf=l+e}else rf=1<<l|r<<s|n,nf=e}function LC(e){e.return!==null&&($d(e,1),W6(e,1,0))}function DC(e){for(;e===b_;)b_=jm[--Um],jm[Um]=null,x_=jm[--Um],jm[Um]=null;for(;e===op;)op=Yu[--Ku],Yu[Ku]=null,nf=Yu[--Ku],Yu[Ku]=null,rf=Yu[--Ku],Yu[Ku]=null}var Ru=null,Lu=null,Zo=!1,Oc=null;function Z6(e,t){var r=rc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function IP(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ru=e,Lu=ed(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ru=e,Lu=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=op!==null?{id:rf,overflow:nf}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=rc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ru=e,Lu=null,!0):!1;default:return!1}}function U5(e){return(e.mode&1)!==0&&(e.flags&128)===0}function V5(e){if(Zo){var t=Lu;if(t){var r=t;if(!IP(e,t)){if(U5(e))throw Error(Sr(418));t=ed(r.nextSibling);var n=Ru;t&&IP(e,t)?Z6(n,r):(e.flags=e.flags&-4097|2,Zo=!1,Ru=e)}}else{if(U5(e))throw Error(Sr(418));e.flags=e.flags&-4097|2,Zo=!1,Ru=e}}}function MP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ru=e}function i1(e){if(e!==Ru)return!1;if(!Zo)return MP(e),Zo=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!B5(e.type,e.memoizedProps)),t&&(t=Lu)){if(U5(e))throw X6(),Error(Sr(418));for(;t;)Z6(e,t),t=ed(t.nextSibling)}if(MP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Sr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Lu=ed(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Lu=null}}else Lu=Ru?ed(e.stateNode.nextSibling):null;return!0}function X6(){for(var e=Lu;e;)e=ed(e.nextSibling)}function fg(){Lu=Ru=null,Zo=!1}function RC(e){Oc===null?Oc=[e]:Oc.push(e)}var x9=vf.ReactCurrentBatchConfig;function x0(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Sr(309));var n=r.stateNode}if(!n)throw Error(Sr(147,e));var s=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(f){var a=s.refs;f===null?delete a[l]:a[l]=f},t._stringRef=l,t)}if(typeof e!="string")throw Error(Sr(284));if(!r._owner)throw Error(Sr(290,e))}return e}function o1(e,t){throw e=Object.prototype.toString.call(t),Error(Sr(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kP(e){var t=e._init;return t(e._payload)}function Y6(e){function t($,Y){if(e){var Q=$.deletions;Q===null?($.deletions=[Y],$.flags|=16):Q.push(Y)}}function r($,Y){if(!e)return null;for(;Y!==null;)t($,Y),Y=Y.sibling;return null}function n($,Y){for($=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function s($,Y){return $=id($,Y),$.index=0,$.sibling=null,$}function l($,Y,Q){return $.index=Q,e?(Q=$.alternate,Q!==null?(Q=Q.index,Q<Y?($.flags|=2,Y):Q):($.flags|=2,Y)):($.flags|=1048576,Y)}function f($){return e&&$.alternate===null&&($.flags|=2),$}function a($,Y,Q,K){return Y===null||Y.tag!==6?(Y=fw(Q,$.mode,K),Y.return=$,Y):(Y=s(Y,Q),Y.return=$,Y)}function y($,Y,Q,K){var xe=Q.type;return xe===Nm?S($,Y,Q.props.children,K,Q.key):Y!==null&&(Y.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===jf&&kP(xe)===Y.type)?(K=s(Y,Q.props),K.ref=x0($,Y,Q),K.return=$,K):(K=H1(Q.type,Q.key,Q.props,null,$.mode,K),K.ref=x0($,Y,Q),K.return=$,K)}function v($,Y,Q,K){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Q.containerInfo||Y.stateNode.implementation!==Q.implementation?(Y=dw(Q,$.mode,K),Y.return=$,Y):(Y=s(Y,Q.children||[]),Y.return=$,Y)}function S($,Y,Q,K,xe){return Y===null||Y.tag!==7?(Y=Qd(Q,$.mode,K,xe),Y.return=$,Y):(Y=s(Y,Q),Y.return=$,Y)}function P($,Y,Q){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Y=fw(""+Y,$.mode,Q),Y.return=$,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Zv:return Q=H1(Y.type,Y.key,Y.props,null,$.mode,Q),Q.ref=x0($,null,Y),Q.return=$,Q;case Rm:return Y=dw(Y,$.mode,Q),Y.return=$,Y;case jf:var K=Y._init;return P($,K(Y._payload),Q)}if(F0(Y)||g0(Y))return Y=Qd(Y,$.mode,Q,null),Y.return=$,Y;o1($,Y)}return null}function D($,Y,Q,K){var xe=Y!==null?Y.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return xe!==null?null:a($,Y,""+Q,K);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Zv:return Q.key===xe?y($,Y,Q,K):null;case Rm:return Q.key===xe?v($,Y,Q,K):null;case jf:return xe=Q._init,D($,Y,xe(Q._payload),K)}if(F0(Q)||g0(Q))return xe!==null?null:S($,Y,Q,K,null);o1($,Q)}return null}function E($,Y,Q,K,xe){if(typeof K=="string"&&K!==""||typeof K=="number")return $=$.get(Q)||null,a(Y,$,""+K,xe);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Zv:return $=$.get(K.key===null?Q:K.key)||null,y(Y,$,K,xe);case Rm:return $=$.get(K.key===null?Q:K.key)||null,v(Y,$,K,xe);case jf:var de=K._init;return E($,Y,Q,de(K._payload),xe)}if(F0(K)||g0(K))return $=$.get(Q)||null,S(Y,$,K,xe,null);o1(Y,K)}return null}function F($,Y,Q,K){for(var xe=null,de=null,be=Y,me=Y=0,ve=null;be!==null&&me<Q.length;me++){be.index>me?(ve=be,be=null):ve=be.sibling;var Re=D($,be,Q[me],K);if(Re===null){be===null&&(be=ve);break}e&&be&&Re.alternate===null&&t($,be),Y=l(Re,Y,me),de===null?xe=Re:de.sibling=Re,de=Re,be=ve}if(me===Q.length)return r($,be),Zo&&$d($,me),xe;if(be===null){for(;me<Q.length;me++)be=P($,Q[me],K),be!==null&&(Y=l(be,Y,me),de===null?xe=be:de.sibling=be,de=be);return Zo&&$d($,me),xe}for(be=n($,be);me<Q.length;me++)ve=E(be,$,me,Q[me],K),ve!==null&&(e&&ve.alternate!==null&&be.delete(ve.key===null?me:ve.key),Y=l(ve,Y,me),de===null?xe=ve:de.sibling=ve,de=ve);return e&&be.forEach(function(le){return t($,le)}),Zo&&$d($,me),xe}function z($,Y,Q,K){var xe=g0(Q);if(typeof xe!="function")throw Error(Sr(150));if(Q=xe.call(Q),Q==null)throw Error(Sr(151));for(var de=xe=null,be=Y,me=Y=0,ve=null,Re=Q.next();be!==null&&!Re.done;me++,Re=Q.next()){be.index>me?(ve=be,be=null):ve=be.sibling;var le=D($,be,Re.value,K);if(le===null){be===null&&(be=ve);break}e&&be&&le.alternate===null&&t($,be),Y=l(le,Y,me),de===null?xe=le:de.sibling=le,de=le,be=ve}if(Re.done)return r($,be),Zo&&$d($,me),xe;if(be===null){for(;!Re.done;me++,Re=Q.next())Re=P($,Re.value,K),Re!==null&&(Y=l(Re,Y,me),de===null?xe=Re:de.sibling=Re,de=Re);return Zo&&$d($,me),xe}for(be=n($,be);!Re.done;me++,Re=Q.next())Re=E(be,$,me,Re.value,K),Re!==null&&(e&&Re.alternate!==null&&be.delete(Re.key===null?me:Re.key),Y=l(Re,Y,me),de===null?xe=Re:de.sibling=Re,de=Re);return e&&be.forEach(function(G){return t($,G)}),Zo&&$d($,me),xe}function W($,Y,Q,K){if(typeof Q=="object"&&Q!==null&&Q.type===Nm&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Zv:e:{for(var xe=Q.key,de=Y;de!==null;){if(de.key===xe){if(xe=Q.type,xe===Nm){if(de.tag===7){r($,de.sibling),Y=s(de,Q.props.children),Y.return=$,$=Y;break e}}else if(de.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===jf&&kP(xe)===de.type){r($,de.sibling),Y=s(de,Q.props),Y.ref=x0($,de,Q),Y.return=$,$=Y;break e}r($,de);break}else t($,de);de=de.sibling}Q.type===Nm?(Y=Qd(Q.props.children,$.mode,K,Q.key),Y.return=$,$=Y):(K=H1(Q.type,Q.key,Q.props,null,$.mode,K),K.ref=x0($,Y,Q),K.return=$,$=K)}return f($);case Rm:e:{for(de=Q.key;Y!==null;){if(Y.key===de)if(Y.tag===4&&Y.stateNode.containerInfo===Q.containerInfo&&Y.stateNode.implementation===Q.implementation){r($,Y.sibling),Y=s(Y,Q.children||[]),Y.return=$,$=Y;break e}else{r($,Y);break}else t($,Y);Y=Y.sibling}Y=dw(Q,$.mode,K),Y.return=$,$=Y}return f($);case jf:return de=Q._init,W($,Y,de(Q._payload),K)}if(F0(Q))return F($,Y,Q,K);if(g0(Q))return z($,Y,Q,K);o1($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,Y!==null&&Y.tag===6?(r($,Y.sibling),Y=s(Y,Q),Y.return=$,$=Y):(r($,Y),Y=fw(Q,$.mode,K),Y.return=$,$=Y),f($)):r($,Y)}return W}var dg=Y6(!0),K6=Y6(!1),w_=vd(null),S_=null,Vm=null,NC=null;function OC(){NC=Vm=S_=null}function FC(e){var t=w_.current;Fo(w_),e._currentValue=t}function q5(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function eg(e,t){S_=e,NC=Vm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ru=!0),e.firstContext=null)}function oc(e){var t=e._currentValue;if(NC!==e)if(e={context:e,memoizedValue:t,next:null},Vm===null){if(S_===null)throw Error(Sr(308));Vm=e,S_.dependencies={lanes:0,firstContext:e}}else Vm=Vm.next=e;return t}var Wd=null;function BC(e){Wd===null?Wd=[e]:Wd.push(e)}function J6(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,BC(t)):(r.next=s.next,s.next=r),t.interleaved=r,ff(e,n)}function ff(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Uf=!1;function zC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function af(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function td(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Mi&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ff(e,r)}return s=n.interleaved,s===null?(t.next=t,BC(n)):(t.next=s.next,s.next=t),n.interleaved=t,ff(e,r)}function $1(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,CC(e,r)}}function LP(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var f={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?s=l=f:l=l.next=f,r=r.next}while(r!==null);l===null?s=l=t:l=l.next=t}else s=l=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function C_(e,t,r,n){var s=e.updateQueue;Uf=!1;var l=s.firstBaseUpdate,f=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var y=a,v=y.next;y.next=null,f===null?l=v:f.next=v,f=y;var S=e.alternate;S!==null&&(S=S.updateQueue,a=S.lastBaseUpdate,a!==f&&(a===null?S.firstBaseUpdate=v:a.next=v,S.lastBaseUpdate=y))}if(l!==null){var P=s.baseState;f=0,S=v=y=null,a=l;do{var D=a.lane,E=a.eventTime;if((n&D)===D){S!==null&&(S=S.next={eventTime:E,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var F=e,z=a;switch(D=t,E=r,z.tag){case 1:if(F=z.payload,typeof F=="function"){P=F.call(E,P,D);break e}P=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=z.payload,D=typeof F=="function"?F.call(E,P,D):F,D==null)break e;P=ua({},P,D);break e;case 2:Uf=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,D=s.effects,D===null?s.effects=[a]:D.push(a))}else E={eventTime:E,lane:D,tag:a.tag,payload:a.payload,callback:a.callback,next:null},S===null?(v=S=E,y=P):S=S.next=E,f|=D;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;D=a,a=D.next,D.next=null,s.lastBaseUpdate=D,s.shared.pending=null}}while(!0);if(S===null&&(y=P),s.baseState=y,s.firstBaseUpdate=v,s.lastBaseUpdate=S,t=s.shared.interleaved,t!==null){s=t;do f|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);sp|=f,e.lanes=f,e.memoizedState=P}}function DP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Sr(191,s));s.call(n)}}}var tv={},Ch=vd(tv),wy=vd(tv),Sy=vd(tv);function Zd(e){if(e===tv)throw Error(Sr(174));return e}function $C(e,t){switch(Eo(Sy,t),Eo(wy,e),Eo(Ch,tv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:C5(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=C5(t,e)}Fo(Ch),Eo(Ch,t)}function pg(){Fo(Ch),Fo(wy),Fo(Sy)}function eD(e){Zd(Sy.current);var t=Zd(Ch.current),r=C5(t,e.type);t!==r&&(Eo(wy,e),Eo(Ch,r))}function jC(e){wy.current===e&&(Fo(Ch),Fo(wy))}var aa=vd(0);function E_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aw=[];function UC(){for(var e=0;e<aw.length;e++)aw[e]._workInProgressVersionPrimary=null;aw.length=0}var j1=vf.ReactCurrentDispatcher,sw=vf.ReactCurrentBatchConfig,ap=0,la=null,cs=null,Ss=null,T_=!1,ty=!1,Cy=0,w9=0;function dl(){throw Error(Sr(321))}function VC(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vc(e[r],t[r]))return!1;return!0}function qC(e,t,r,n,s,l){if(ap=l,la=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,j1.current=e===null||e.memoizedState===null?T9:A9,e=r(n,s),ty){l=0;do{if(ty=!1,Cy=0,25<=l)throw Error(Sr(301));l+=1,Ss=cs=null,t.updateQueue=null,j1.current=P9,e=r(n,s)}while(ty)}if(j1.current=A_,t=cs!==null&&cs.next!==null,ap=0,Ss=cs=la=null,T_=!1,t)throw Error(Sr(300));return e}function GC(){var e=Cy!==0;return Cy=0,e}function gh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?la.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function ac(){if(cs===null){var e=la.alternate;e=e!==null?e.memoizedState:null}else e=cs.next;var t=Ss===null?la.memoizedState:Ss.next;if(t!==null)Ss=t,cs=e;else{if(e===null)throw Error(Sr(310));cs=e,e={memoizedState:cs.memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},Ss===null?la.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function Ey(e,t){return typeof t=="function"?t(e):t}function lw(e){var t=ac(),r=t.queue;if(r===null)throw Error(Sr(311));r.lastRenderedReducer=e;var n=cs,s=n.baseQueue,l=r.pending;if(l!==null){if(s!==null){var f=s.next;s.next=l.next,l.next=f}n.baseQueue=s=l,r.pending=null}if(s!==null){l=s.next,n=n.baseState;var a=f=null,y=null,v=l;do{var S=v.lane;if((ap&S)===S)y!==null&&(y=y.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),n=v.hasEagerState?v.eagerState:e(n,v.action);else{var P={lane:S,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};y===null?(a=y=P,f=n):y=y.next=P,la.lanes|=S,sp|=S}v=v.next}while(v!==null&&v!==l);y===null?f=n:y.next=a,Vc(n,t.memoizedState)||(ru=!0),t.memoizedState=n,t.baseState=f,t.baseQueue=y,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do l=s.lane,la.lanes|=l,sp|=l,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function uw(e){var t=ac(),r=t.queue;if(r===null)throw Error(Sr(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,l=t.memoizedState;if(s!==null){r.pending=null;var f=s=s.next;do l=e(l,f.action),f=f.next;while(f!==s);Vc(l,t.memoizedState)||(ru=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function tD(){}function rD(e,t){var r=la,n=ac(),s=t(),l=!Vc(n.memoizedState,s);if(l&&(n.memoizedState=s,ru=!0),n=n.queue,HC(oD.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||Ss!==null&&Ss.memoizedState.tag&1){if(r.flags|=2048,Ty(9,iD.bind(null,r,n,s,t),void 0,null),Es===null)throw Error(Sr(349));ap&30||nD(r,t,s)}return s}function nD(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=la.updateQueue,t===null?(t={lastEffect:null,stores:null},la.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function iD(e,t,r,n){t.value=r,t.getSnapshot=n,aD(t)&&sD(e)}function oD(e,t,r){return r(function(){aD(t)&&sD(e)})}function aD(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vc(e,r)}catch{return!0}}function sD(e){var t=ff(e,1);t!==null&&Uc(t,e,1,-1)}function RP(e){var t=gh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ey,lastRenderedState:e},t.queue=e,e=e.dispatch=E9.bind(null,la,e),[t.memoizedState,e]}function Ty(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=la.updateQueue,t===null?(t={lastEffect:null,stores:null},la.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function lD(){return ac().memoizedState}function U1(e,t,r,n){var s=gh();la.flags|=e,s.memoizedState=Ty(1|t,r,void 0,n===void 0?null:n)}function w2(e,t,r,n){var s=ac();n=n===void 0?null:n;var l=void 0;if(cs!==null){var f=cs.memoizedState;if(l=f.destroy,n!==null&&VC(n,f.deps)){s.memoizedState=Ty(t,r,l,n);return}}la.flags|=e,s.memoizedState=Ty(1|t,r,l,n)}function NP(e,t){return U1(8390656,8,e,t)}function HC(e,t){return w2(2048,8,e,t)}function uD(e,t){return w2(4,2,e,t)}function cD(e,t){return w2(4,4,e,t)}function hD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fD(e,t,r){return r=r!=null?r.concat([e]):null,w2(4,4,hD.bind(null,t,e),r)}function WC(){}function dD(e,t){var r=ac();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&VC(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function pD(e,t){var r=ac();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&VC(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function mD(e,t,r){return ap&21?(Vc(r,t)||(r=b6(),la.lanes|=r,sp|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ru=!0),e.memoizedState=r)}function S9(e,t){var r=Qi;Qi=r!==0&&4>r?r:4,e(!0);var n=sw.transition;sw.transition={};try{e(!1),t()}finally{Qi=r,sw.transition=n}}function gD(){return ac().memoizedState}function C9(e,t,r){var n=nd(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},yD(e))vD(t,r);else if(r=J6(e,t,r,n),r!==null){var s=Fl();Uc(r,e,n,s),_D(r,t,n)}}function E9(e,t,r){var n=nd(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(yD(e))vD(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,a=l(f,r);if(s.hasEagerState=!0,s.eagerState=a,Vc(a,f)){var y=t.interleaved;y===null?(s.next=s,BC(t)):(s.next=y.next,y.next=s),t.interleaved=s;return}}catch{}finally{}r=J6(e,t,s,n),r!==null&&(s=Fl(),Uc(r,e,n,s),_D(r,t,n))}}function yD(e){var t=e.alternate;return e===la||t!==null&&t===la}function vD(e,t){ty=T_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function _D(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,CC(e,r)}}var A_={readContext:oc,useCallback:dl,useContext:dl,useEffect:dl,useImperativeHandle:dl,useInsertionEffect:dl,useLayoutEffect:dl,useMemo:dl,useReducer:dl,useRef:dl,useState:dl,useDebugValue:dl,useDeferredValue:dl,useTransition:dl,useMutableSource:dl,useSyncExternalStore:dl,useId:dl,unstable_isNewReconciler:!1},T9={readContext:oc,useCallback:function(e,t){return gh().memoizedState=[e,t===void 0?null:t],e},useContext:oc,useEffect:NP,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,U1(4194308,4,hD.bind(null,t,e),r)},useLayoutEffect:function(e,t){return U1(4194308,4,e,t)},useInsertionEffect:function(e,t){return U1(4,2,e,t)},useMemo:function(e,t){var r=gh();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=gh();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=C9.bind(null,la,e),[n.memoizedState,e]},useRef:function(e){var t=gh();return e={current:e},t.memoizedState=e},useState:RP,useDebugValue:WC,useDeferredValue:function(e){return gh().memoizedState=e},useTransition:function(){var e=RP(!1),t=e[0];return e=S9.bind(null,e[1]),gh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=la,s=gh();if(Zo){if(r===void 0)throw Error(Sr(407));r=r()}else{if(r=t(),Es===null)throw Error(Sr(349));ap&30||nD(n,t,r)}s.memoizedState=r;var l={value:r,getSnapshot:t};return s.queue=l,NP(oD.bind(null,n,l,e),[e]),n.flags|=2048,Ty(9,iD.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=gh(),t=Es.identifierPrefix;if(Zo){var r=nf,n=rf;r=(n&~(1<<32-jc(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Cy++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=w9++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},A9={readContext:oc,useCallback:dD,useContext:oc,useEffect:HC,useImperativeHandle:fD,useInsertionEffect:uD,useLayoutEffect:cD,useMemo:pD,useReducer:lw,useRef:lD,useState:function(){return lw(Ey)},useDebugValue:WC,useDeferredValue:function(e){var t=ac();return mD(t,cs.memoizedState,e)},useTransition:function(){var e=lw(Ey)[0],t=ac().memoizedState;return[e,t]},useMutableSource:tD,useSyncExternalStore:rD,useId:gD,unstable_isNewReconciler:!1},P9={readContext:oc,useCallback:dD,useContext:oc,useEffect:HC,useImperativeHandle:fD,useInsertionEffect:uD,useLayoutEffect:cD,useMemo:pD,useReducer:uw,useRef:lD,useState:function(){return uw(Ey)},useDebugValue:WC,useDeferredValue:function(e){var t=ac();return cs===null?t.memoizedState=e:mD(t,cs.memoizedState,e)},useTransition:function(){var e=uw(Ey)[0],t=ac().memoizedState;return[e,t]},useMutableSource:tD,useSyncExternalStore:rD,useId:gD,unstable_isNewReconciler:!1};function Rc(e,t){if(e&&e.defaultProps){t=ua({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function G5(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ua({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var S2={isMounted:function(e){return(e=e._reactInternals)?xp(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Fl(),s=nd(e),l=af(n,s);l.payload=t,r!=null&&(l.callback=r),t=td(e,l,s),t!==null&&(Uc(t,e,s,n),$1(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Fl(),s=nd(e),l=af(n,s);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=td(e,l,s),t!==null&&(Uc(t,e,s,n),$1(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Fl(),n=nd(e),s=af(r,n);s.tag=2,t!=null&&(s.callback=t),t=td(e,s,n),t!==null&&(Uc(t,e,n,r),$1(t,e,n))}};function OP(e,t,r,n,s,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,f):t.prototype&&t.prototype.isPureReactComponent?!vy(r,n)||!vy(s,l):!0}function bD(e,t,r){var n=!1,s=sd,l=t.contextType;return typeof l=="object"&&l!==null?l=oc(l):(s=ou(t)?ip:xl.current,n=t.contextTypes,l=(n=n!=null)?hg(e,s):sd),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=S2,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function FP(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&S2.enqueueReplaceState(t,t.state,null)}function H5(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},zC(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=oc(l):(l=ou(t)?ip:xl.current,s.context=hg(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(G5(e,t,l,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&S2.enqueueReplaceState(s,s.state,null),C_(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function mg(e,t){try{var r="",n=t;do r+=r7(n),n=n.return;while(n);var s=r}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function cw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function W5(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var I9=typeof WeakMap=="function"?WeakMap:Map;function xD(e,t,r){r=af(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){I_||(I_=!0,nS=n),W5(e,t)},r}function wD(e,t,r){r=af(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){W5(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){W5(e,t),typeof n!="function"&&(rd===null?rd=new Set([this]):rd.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),r}function BP(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new I9;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=V9.bind(null,e,t,r),t.then(e,e))}function zP(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $P(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=af(-1,1),t.tag=2,td(r,t,1))),r.lanes|=1),e)}var M9=vf.ReactCurrentOwner,ru=!1;function Ol(e,t,r,n){t.child=e===null?K6(t,null,r,n):dg(t,e.child,r,n)}function jP(e,t,r,n,s){r=r.render;var l=t.ref;return eg(t,s),n=qC(e,t,r,n,l,s),r=GC(),e!==null&&!ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,df(e,t,s)):(Zo&&r&&LC(t),t.flags|=1,Ol(e,t,n,s),t.child)}function UP(e,t,r,n,s){if(e===null){var l=r.type;return typeof l=="function"&&!tE(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,SD(e,t,l,n,s)):(e=H1(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&s)){var f=l.memoizedProps;if(r=r.compare,r=r!==null?r:vy,r(f,n)&&e.ref===t.ref)return df(e,t,s)}return t.flags|=1,e=id(l,n),e.ref=t.ref,e.return=t,t.child=e}function SD(e,t,r,n,s){if(e!==null){var l=e.memoizedProps;if(vy(l,n)&&e.ref===t.ref)if(ru=!1,t.pendingProps=n=l,(e.lanes&s)!==0)e.flags&131072&&(ru=!0);else return t.lanes=e.lanes,df(e,t,s)}return Z5(e,t,r,n,s)}function CD(e,t,r){var n=t.pendingProps,s=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Eo(Gm,Mu),Mu|=r;else{if(!(r&1073741824))return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Eo(Gm,Mu),Mu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,Eo(Gm,Mu),Mu|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,Eo(Gm,Mu),Mu|=n;return Ol(e,t,s,r),t.child}function ED(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Z5(e,t,r,n,s){var l=ou(r)?ip:xl.current;return l=hg(t,l),eg(t,s),r=qC(e,t,r,n,l,s),n=GC(),e!==null&&!ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,df(e,t,s)):(Zo&&n&&LC(t),t.flags|=1,Ol(e,t,r,s),t.child)}function VP(e,t,r,n,s){if(ou(r)){var l=!0;__(t)}else l=!1;if(eg(t,s),t.stateNode===null)V1(e,t),bD(t,r,n),H5(t,r,n,s),n=!0;else if(e===null){var f=t.stateNode,a=t.memoizedProps;f.props=a;var y=f.context,v=r.contextType;typeof v=="object"&&v!==null?v=oc(v):(v=ou(r)?ip:xl.current,v=hg(t,v));var S=r.getDerivedStateFromProps,P=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function";P||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==n||y!==v)&&FP(t,f,n,v),Uf=!1;var D=t.memoizedState;f.state=D,C_(t,n,f,s),y=t.memoizedState,a!==n||D!==y||iu.current||Uf?(typeof S=="function"&&(G5(t,r,S,n),y=t.memoizedState),(a=Uf||OP(t,r,a,n,D,y,v))?(P||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=y),f.props=n,f.state=y,f.context=v,n=a):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{f=t.stateNode,Q6(e,t),a=t.memoizedProps,v=t.type===t.elementType?a:Rc(t.type,a),f.props=v,P=t.pendingProps,D=f.context,y=r.contextType,typeof y=="object"&&y!==null?y=oc(y):(y=ou(r)?ip:xl.current,y=hg(t,y));var E=r.getDerivedStateFromProps;(S=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==P||D!==y)&&FP(t,f,n,y),Uf=!1,D=t.memoizedState,f.state=D,C_(t,n,f,s);var F=t.memoizedState;a!==P||D!==F||iu.current||Uf?(typeof E=="function"&&(G5(t,r,E,n),F=t.memoizedState),(v=Uf||OP(t,r,v,n,D,F,y)||!1)?(S||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(n,F,y),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(n,F,y)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=F),f.props=n,f.state=F,f.context=y,n=v):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&D===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&D===e.memoizedState||(t.flags|=1024),n=!1)}return X5(e,t,r,n,l,s)}function X5(e,t,r,n,s,l){ED(e,t);var f=(t.flags&128)!==0;if(!n&&!f)return s&&PP(t,r,!1),df(e,t,l);n=t.stateNode,M9.current=t;var a=f&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&f?(t.child=dg(t,e.child,null,l),t.child=dg(t,null,a,l)):Ol(e,t,a,l),t.memoizedState=n.state,s&&PP(t,r,!0),t.child}function TD(e){var t=e.stateNode;t.pendingContext?AP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&AP(e,t.context,!1),$C(e,t.containerInfo)}function qP(e,t,r,n,s){return fg(),RC(s),t.flags|=256,Ol(e,t,r,n),t.child}var Y5={dehydrated:null,treeContext:null,retryLane:0};function K5(e){return{baseLanes:e,cachePool:null,transitions:null}}function AD(e,t,r){var n=t.pendingProps,s=aa.current,l=!1,f=(t.flags&128)!==0,a;if((a=f)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Eo(aa,s&1),e===null)return V5(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=n.children,e=n.fallback,l?(n=t.mode,l=t.child,f={mode:"hidden",children:f},!(n&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=T2(f,n,0,null),e=Qd(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=K5(r),t.memoizedState=Y5,e):ZC(t,f));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return k9(e,t,f,n,a,s,r);if(l){l=n.fallback,f=t.mode,s=e.child,a=s.sibling;var y={mode:"hidden",children:n.children};return!(f&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=y,t.deletions=null):(n=id(s,y),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?l=id(a,l):(l=Qd(l,f,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,f=e.child.memoizedState,f=f===null?K5(r):{baseLanes:f.baseLanes|r,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=e.childLanes&~r,t.memoizedState=Y5,n}return l=e.child,e=l.sibling,n=id(l,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ZC(e,t){return t=T2({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function a1(e,t,r,n){return n!==null&&RC(n),dg(t,e.child,null,r),e=ZC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function k9(e,t,r,n,s,l,f){if(r)return t.flags&256?(t.flags&=-257,n=cw(Error(Sr(422))),a1(e,t,f,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,s=t.mode,n=T2({mode:"visible",children:n.children},s,0,null),l=Qd(l,s,f,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,t.mode&1&&dg(t,e.child,null,f),t.child.memoizedState=K5(f),t.memoizedState=Y5,l);if(!(t.mode&1))return a1(e,t,f,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,l=Error(Sr(419)),n=cw(l,n,void 0),a1(e,t,f,n)}if(a=(f&e.childLanes)!==0,ru||a){if(n=Es,n!==null){switch(f&-f){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|f)?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,ff(e,s),Uc(n,e,s,-1))}return eE(),n=cw(Error(Sr(421))),a1(e,t,f,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=q9.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,Lu=ed(s.nextSibling),Ru=t,Zo=!0,Oc=null,e!==null&&(Yu[Ku++]=rf,Yu[Ku++]=nf,Yu[Ku++]=op,rf=e.id,nf=e.overflow,op=t),t=ZC(t,n.children),t.flags|=4096,t)}function GP(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),q5(e.return,t,r)}function hw(e,t,r,n,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=s)}function PD(e,t,r){var n=t.pendingProps,s=n.revealOrder,l=n.tail;if(Ol(e,t,n.children,r),n=aa.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&GP(e,r,t);else if(e.tag===19)GP(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Eo(aa,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&E_(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),hw(t,!1,s,r,l);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&E_(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}hw(t,!0,r,null,l);break;case"together":hw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function V1(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function df(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),sp|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Sr(153));if(t.child!==null){for(e=t.child,r=id(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=id(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function L9(e,t,r){switch(t.tag){case 3:TD(t),fg();break;case 5:eD(t);break;case 1:ou(t.type)&&__(t);break;case 4:$C(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Eo(w_,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Eo(aa,aa.current&1),t.flags|=128,null):r&t.child.childLanes?AD(e,t,r):(Eo(aa,aa.current&1),e=df(e,t,r),e!==null?e.sibling:null);Eo(aa,aa.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return PD(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Eo(aa,aa.current),n)break;return null;case 22:case 23:return t.lanes=0,CD(e,t,r)}return df(e,t,r)}var ID,J5,MD,kD;ID=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};J5=function(){};MD=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Zd(Ch.current);var l=null;switch(r){case"input":s=b5(e,s),n=b5(e,n),l=[];break;case"select":s=ua({},s,{value:void 0}),n=ua({},n,{value:void 0}),l=[];break;case"textarea":s=S5(e,s),n=S5(e,n),l=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=y_)}E5(r,n);var f;r=null;for(v in s)if(!n.hasOwnProperty(v)&&s.hasOwnProperty(v)&&s[v]!=null)if(v==="style"){var a=s[v];for(f in a)a.hasOwnProperty(f)&&(r||(r={}),r[f]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(hy.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in n){var y=n[v];if(a=s!=null?s[v]:void 0,n.hasOwnProperty(v)&&y!==a&&(y!=null||a!=null))if(v==="style")if(a){for(f in a)!a.hasOwnProperty(f)||y&&y.hasOwnProperty(f)||(r||(r={}),r[f]="");for(f in y)y.hasOwnProperty(f)&&a[f]!==y[f]&&(r||(r={}),r[f]=y[f])}else r||(l||(l=[]),l.push(v,r)),r=y;else v==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,a=a?a.__html:void 0,y!=null&&a!==y&&(l=l||[]).push(v,y)):v==="children"?typeof y!="string"&&typeof y!="number"||(l=l||[]).push(v,""+y):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(hy.hasOwnProperty(v)?(y!=null&&v==="onScroll"&&Do("scroll",e),l||a===y||(l=[])):(l=l||[]).push(v,y))}r&&(l=l||[]).push("style",r);var v=l;(t.updateQueue=v)&&(t.flags|=4)}};kD=function(e,t,r,n){r!==n&&(t.flags|=4)};function w0(e,t){if(!Zo)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pl(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function D9(e,t,r){var n=t.pendingProps;switch(DC(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pl(t),null;case 1:return ou(t.type)&&v_(),pl(t),null;case 3:return n=t.stateNode,pg(),Fo(iu),Fo(xl),UC(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(i1(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Oc!==null&&(aS(Oc),Oc=null))),J5(e,t),pl(t),null;case 5:jC(t);var s=Zd(Sy.current);if(r=t.type,e!==null&&t.stateNode!=null)MD(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Sr(166));return pl(t),null}if(e=Zd(Ch.current),i1(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[bh]=t,n[xy]=l,e=(t.mode&1)!==0,r){case"dialog":Do("cancel",n),Do("close",n);break;case"iframe":case"object":case"embed":Do("load",n);break;case"video":case"audio":for(s=0;s<z0.length;s++)Do(z0[s],n);break;case"source":Do("error",n);break;case"img":case"image":case"link":Do("error",n),Do("load",n);break;case"details":Do("toggle",n);break;case"input":eP(n,l),Do("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Do("invalid",n);break;case"textarea":rP(n,l),Do("invalid",n)}E5(r,l),s=null;for(var f in l)if(l.hasOwnProperty(f)){var a=l[f];f==="children"?typeof a=="string"?n.textContent!==a&&(l.suppressHydrationWarning!==!0&&n1(n.textContent,a,e),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&n1(n.textContent,a,e),s=["children",""+a]):hy.hasOwnProperty(f)&&a!=null&&f==="onScroll"&&Do("scroll",n)}switch(r){case"input":Xv(n),tP(n,l,!0);break;case"textarea":Xv(n),nP(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=y_)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{f=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=o6(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=f.createElement(r,{is:n.is}):(e=f.createElement(r),r==="select"&&(f=e,n.multiple?f.multiple=!0:n.size&&(f.size=n.size))):e=f.createElementNS(e,r),e[bh]=t,e[xy]=n,ID(e,t,!1,!1),t.stateNode=e;e:{switch(f=T5(r,n),r){case"dialog":Do("cancel",e),Do("close",e),s=n;break;case"iframe":case"object":case"embed":Do("load",e),s=n;break;case"video":case"audio":for(s=0;s<z0.length;s++)Do(z0[s],e);s=n;break;case"source":Do("error",e),s=n;break;case"img":case"image":case"link":Do("error",e),Do("load",e),s=n;break;case"details":Do("toggle",e),s=n;break;case"input":eP(e,n),s=b5(e,n),Do("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ua({},n,{value:void 0}),Do("invalid",e);break;case"textarea":rP(e,n),s=S5(e,n),Do("invalid",e);break;default:s=n}E5(r,s),a=s;for(l in a)if(a.hasOwnProperty(l)){var y=a[l];l==="style"?l6(e,y):l==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&a6(e,y)):l==="children"?typeof y=="string"?(r!=="textarea"||y!=="")&&fy(e,y):typeof y=="number"&&fy(e,""+y):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(hy.hasOwnProperty(l)?y!=null&&l==="onScroll"&&Do("scroll",e):y!=null&&vC(e,l,y,f))}switch(r){case"input":Xv(e),tP(e,n,!1);break;case"textarea":Xv(e),nP(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ad(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Ym(e,!!n.multiple,l,!1):n.defaultValue!=null&&Ym(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=y_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pl(t),null;case 6:if(e&&t.stateNode!=null)kD(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Sr(166));if(r=Zd(Sy.current),Zd(Ch.current),i1(t)){if(n=t.stateNode,r=t.memoizedProps,n[bh]=t,(l=n.nodeValue!==r)&&(e=Ru,e!==null))switch(e.tag){case 3:n1(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&n1(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[bh]=t,t.stateNode=n}return pl(t),null;case 13:if(Fo(aa),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zo&&Lu!==null&&t.mode&1&&!(t.flags&128))X6(),fg(),t.flags|=98560,l=!1;else if(l=i1(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(Sr(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Sr(317));l[bh]=t}else fg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pl(t),l=!1}else Oc!==null&&(aS(Oc),Oc=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||aa.current&1?hs===0&&(hs=3):eE())),t.updateQueue!==null&&(t.flags|=4),pl(t),null);case 4:return pg(),J5(e,t),e===null&&_y(t.stateNode.containerInfo),pl(t),null;case 10:return FC(t.type._context),pl(t),null;case 17:return ou(t.type)&&v_(),pl(t),null;case 19:if(Fo(aa),l=t.memoizedState,l===null)return pl(t),null;if(n=(t.flags&128)!==0,f=l.rendering,f===null)if(n)w0(l,!1);else{if(hs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=E_(e),f!==null){for(t.flags|=128,w0(l,!1),n=f.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,e=f.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Eo(aa,aa.current&1|2),t.child}e=e.sibling}l.tail!==null&&Pa()>gg&&(t.flags|=128,n=!0,w0(l,!1),t.lanes=4194304)}else{if(!n)if(e=E_(f),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),w0(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Zo)return pl(t),null}else 2*Pa()-l.renderingStartTime>gg&&r!==1073741824&&(t.flags|=128,n=!0,w0(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(r=l.last,r!==null?r.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Pa(),t.sibling=null,r=aa.current,Eo(aa,n?r&1|2:r&1),t):(pl(t),null);case 22:case 23:return QC(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Mu&1073741824&&(pl(t),t.subtreeFlags&6&&(t.flags|=8192)):pl(t),null;case 24:return null;case 25:return null}throw Error(Sr(156,t.tag))}function R9(e,t){switch(DC(t),t.tag){case 1:return ou(t.type)&&v_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pg(),Fo(iu),Fo(xl),UC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jC(t),null;case 13:if(Fo(aa),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Sr(340));fg()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Fo(aa),null;case 4:return pg(),null;case 10:return FC(t.type._context),null;case 22:case 23:return QC(),null;case 24:return null;default:return null}}var s1=!1,bl=!1,N9=typeof WeakSet=="function"?WeakSet:Set,rn=null;function qm(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){_a(e,t,n)}else r.current=null}function Q5(e,t,r){try{r()}catch(n){_a(e,t,n)}}var HP=!1;function O9(e,t){if(O5=p_,e=O6(),kC(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var f=0,a=-1,y=-1,v=0,S=0,P=e,D=null;t:for(;;){for(var E;P!==r||s!==0&&P.nodeType!==3||(a=f+s),P!==l||n!==0&&P.nodeType!==3||(y=f+n),P.nodeType===3&&(f+=P.nodeValue.length),(E=P.firstChild)!==null;)D=P,P=E;for(;;){if(P===e)break t;if(D===r&&++v===s&&(a=f),D===l&&++S===n&&(y=f),(E=P.nextSibling)!==null)break;P=D,D=P.parentNode}P=E}r=a===-1||y===-1?null:{start:a,end:y}}else r=null}r=r||{start:0,end:0}}else r=null;for(F5={focusedElem:e,selectionRange:r},p_=!1,rn=t;rn!==null;)if(t=rn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rn=e;else for(;rn!==null;){t=rn;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var z=F.memoizedProps,W=F.memoizedState,$=t.stateNode,Y=$.getSnapshotBeforeUpdate(t.elementType===t.type?z:Rc(t.type,z),W);$.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:var Q=t.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Sr(163))}}catch(K){_a(t,t.return,K)}if(e=t.sibling,e!==null){e.return=t.return,rn=e;break}rn=t.return}return F=HP,HP=!1,F}function ry(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Q5(t,r,l)}s=s.next}while(s!==n)}}function C2(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function eS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function LD(e){var t=e.alternate;t!==null&&(e.alternate=null,LD(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bh],delete t[xy],delete t[$5],delete t[v9],delete t[_9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function DD(e){return e.tag===5||e.tag===3||e.tag===4}function WP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||DD(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=y_));else if(n!==4&&(e=e.child,e!==null))for(tS(e,t,r),e=e.sibling;e!==null;)tS(e,t,r),e=e.sibling}function rS(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(rS(e,t,r),e=e.sibling;e!==null;)rS(e,t,r),e=e.sibling}var Bs=null,Nc=!1;function Of(e,t,r){for(r=r.child;r!==null;)RD(e,t,r),r=r.sibling}function RD(e,t,r){if(Sh&&typeof Sh.onCommitFiberUnmount=="function")try{Sh.onCommitFiberUnmount(g2,r)}catch{}switch(r.tag){case 5:bl||qm(r,t);case 6:var n=Bs,s=Nc;Bs=null,Of(e,t,r),Bs=n,Nc=s,Bs!==null&&(Nc?(e=Bs,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Bs.removeChild(r.stateNode));break;case 18:Bs!==null&&(Nc?(e=Bs,r=r.stateNode,e.nodeType===8?iw(e.parentNode,r):e.nodeType===1&&iw(e,r),gy(e)):iw(Bs,r.stateNode));break;case 4:n=Bs,s=Nc,Bs=r.stateNode.containerInfo,Nc=!0,Of(e,t,r),Bs=n,Nc=s;break;case 0:case 11:case 14:case 15:if(!bl&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var l=s,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&Q5(r,t,f),s=s.next}while(s!==n)}Of(e,t,r);break;case 1:if(!bl&&(qm(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){_a(r,t,a)}Of(e,t,r);break;case 21:Of(e,t,r);break;case 22:r.mode&1?(bl=(n=bl)||r.memoizedState!==null,Of(e,t,r),bl=n):Of(e,t,r);break;default:Of(e,t,r)}}function ZP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new N9),t.forEach(function(n){var s=G9.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function kc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var l=e,f=t,a=f;e:for(;a!==null;){switch(a.tag){case 5:Bs=a.stateNode,Nc=!1;break e;case 3:Bs=a.stateNode.containerInfo,Nc=!0;break e;case 4:Bs=a.stateNode.containerInfo,Nc=!0;break e}a=a.return}if(Bs===null)throw Error(Sr(160));RD(l,f,s),Bs=null,Nc=!1;var y=s.alternate;y!==null&&(y.return=null),s.return=null}catch(v){_a(s,t,v)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ND(t,e),t=t.sibling}function ND(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kc(t,e),fh(e),n&4){try{ry(3,e,e.return),C2(3,e)}catch(z){_a(e,e.return,z)}try{ry(5,e,e.return)}catch(z){_a(e,e.return,z)}}break;case 1:kc(t,e),fh(e),n&512&&r!==null&&qm(r,r.return);break;case 5:if(kc(t,e),fh(e),n&512&&r!==null&&qm(r,r.return),e.flags&32){var s=e.stateNode;try{fy(s,"")}catch(z){_a(e,e.return,z)}}if(n&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,f=r!==null?r.memoizedProps:l,a=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&n6(s,l),T5(a,f);var v=T5(a,l);for(f=0;f<y.length;f+=2){var S=y[f],P=y[f+1];S==="style"?l6(s,P):S==="dangerouslySetInnerHTML"?a6(s,P):S==="children"?fy(s,P):vC(s,S,P,v)}switch(a){case"input":x5(s,l);break;case"textarea":i6(s,l);break;case"select":var D=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var E=l.value;E!=null?Ym(s,!!l.multiple,E,!1):D!==!!l.multiple&&(l.defaultValue!=null?Ym(s,!!l.multiple,l.defaultValue,!0):Ym(s,!!l.multiple,l.multiple?[]:"",!1))}s[xy]=l}catch(z){_a(e,e.return,z)}}break;case 6:if(kc(t,e),fh(e),n&4){if(e.stateNode===null)throw Error(Sr(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(z){_a(e,e.return,z)}}break;case 3:if(kc(t,e),fh(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{gy(t.containerInfo)}catch(z){_a(e,e.return,z)}break;case 4:kc(t,e),fh(e);break;case 13:kc(t,e),fh(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(KC=Pa())),n&4&&ZP(e);break;case 22:if(S=r!==null&&r.memoizedState!==null,e.mode&1?(bl=(v=bl)||S,kc(t,e),bl=v):kc(t,e),fh(e),n&8192){if(v=e.memoizedState!==null,(e.stateNode.isHidden=v)&&!S&&e.mode&1)for(rn=e,S=e.child;S!==null;){for(P=rn=S;rn!==null;){switch(D=rn,E=D.child,D.tag){case 0:case 11:case 14:case 15:ry(4,D,D.return);break;case 1:qm(D,D.return);var F=D.stateNode;if(typeof F.componentWillUnmount=="function"){n=D,r=D.return;try{t=n,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(z){_a(n,r,z)}}break;case 5:qm(D,D.return);break;case 22:if(D.memoizedState!==null){YP(P);continue}}E!==null?(E.return=D,rn=E):YP(P)}S=S.sibling}e:for(S=null,P=e;;){if(P.tag===5){if(S===null){S=P;try{s=P.stateNode,v?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=P.stateNode,y=P.memoizedProps.style,f=y!=null&&y.hasOwnProperty("display")?y.display:null,a.style.display=s6("display",f))}catch(z){_a(e,e.return,z)}}}else if(P.tag===6){if(S===null)try{P.stateNode.nodeValue=v?"":P.memoizedProps}catch(z){_a(e,e.return,z)}}else if((P.tag!==22&&P.tag!==23||P.memoizedState===null||P===e)&&P.child!==null){P.child.return=P,P=P.child;continue}if(P===e)break e;for(;P.sibling===null;){if(P.return===null||P.return===e)break e;S===P&&(S=null),P=P.return}S===P&&(S=null),P.sibling.return=P.return,P=P.sibling}}break;case 19:kc(t,e),fh(e),n&4&&ZP(e);break;case 21:break;default:kc(t,e),fh(e)}}function fh(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(DD(r)){var n=r;break e}r=r.return}throw Error(Sr(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(fy(s,""),n.flags&=-33);var l=WP(e);rS(e,l,s);break;case 3:case 4:var f=n.stateNode.containerInfo,a=WP(e);tS(e,a,f);break;default:throw Error(Sr(161))}}catch(y){_a(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function F9(e,t,r){rn=e,OD(e)}function OD(e,t,r){for(var n=(e.mode&1)!==0;rn!==null;){var s=rn,l=s.child;if(s.tag===22&&n){var f=s.memoizedState!==null||s1;if(!f){var a=s.alternate,y=a!==null&&a.memoizedState!==null||bl;a=s1;var v=bl;if(s1=f,(bl=y)&&!v)for(rn=s;rn!==null;)f=rn,y=f.child,f.tag===22&&f.memoizedState!==null?KP(s):y!==null?(y.return=f,rn=y):KP(s);for(;l!==null;)rn=l,OD(l),l=l.sibling;rn=s,s1=a,bl=v}XP(e)}else s.subtreeFlags&8772&&l!==null?(l.return=s,rn=l):XP(e)}}function XP(e){for(;rn!==null;){var t=rn;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bl||C2(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!bl)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Rc(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&DP(t,l,n);break;case 3:var f=t.updateQueue;if(f!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}DP(t,f,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&r.focus();break;case"img":y.src&&(r.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var v=t.alternate;if(v!==null){var S=v.memoizedState;if(S!==null){var P=S.dehydrated;P!==null&&gy(P)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Sr(163))}bl||t.flags&512&&eS(t)}catch(D){_a(t,t.return,D)}}if(t===e){rn=null;break}if(r=t.sibling,r!==null){r.return=t.return,rn=r;break}rn=t.return}}function YP(e){for(;rn!==null;){var t=rn;if(t===e){rn=null;break}var r=t.sibling;if(r!==null){r.return=t.return,rn=r;break}rn=t.return}}function KP(e){for(;rn!==null;){var t=rn;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{C2(4,t)}catch(y){_a(t,r,y)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(y){_a(t,s,y)}}var l=t.return;try{eS(t)}catch(y){_a(t,l,y)}break;case 5:var f=t.return;try{eS(t)}catch(y){_a(t,f,y)}}}catch(y){_a(t,t.return,y)}if(t===e){rn=null;break}var a=t.sibling;if(a!==null){a.return=t.return,rn=a;break}rn=t.return}}var B9=Math.ceil,P_=vf.ReactCurrentDispatcher,XC=vf.ReactCurrentOwner,nc=vf.ReactCurrentBatchConfig,Mi=0,Es=null,Za=null,$s=0,Mu=0,Gm=vd(0),hs=0,Ay=null,sp=0,E2=0,YC=0,ny=null,tu=null,KC=0,gg=1/0,Qh=null,I_=!1,nS=null,rd=null,l1=!1,Zf=null,M_=0,iy=0,iS=null,q1=-1,G1=0;function Fl(){return Mi&6?Pa():q1!==-1?q1:q1=Pa()}function nd(e){return e.mode&1?Mi&2&&$s!==0?$s&-$s:x9.transition!==null?(G1===0&&(G1=b6()),G1):(e=Qi,e!==0||(e=window.event,e=e===void 0?16:A6(e.type)),e):1}function Uc(e,t,r,n){if(50<iy)throw iy=0,iS=null,Error(Sr(185));Jy(e,r,n),(!(Mi&2)||e!==Es)&&(e===Es&&(!(Mi&2)&&(E2|=r),hs===4&&Hf(e,$s)),au(e,n),r===1&&Mi===0&&!(t.mode&1)&&(gg=Pa()+500,x2&&_d()))}function au(e,t){var r=e.callbackNode;x7(e,t);var n=d_(e,e===Es?$s:0);if(n===0)r!==null&&aP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&aP(r),t===1)e.tag===0?b9(JP.bind(null,e)):H6(JP.bind(null,e)),g9(function(){!(Mi&6)&&_d()}),r=null;else{switch(x6(n)){case 1:r=SC;break;case 4:r=v6;break;case 16:r=f_;break;case 536870912:r=_6;break;default:r=f_}r=qD(r,FD.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function FD(e,t){if(q1=-1,G1=0,Mi&6)throw Error(Sr(327));var r=e.callbackNode;if(tg()&&e.callbackNode!==r)return null;var n=d_(e,e===Es?$s:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=k_(e,n);else{t=n;var s=Mi;Mi|=2;var l=zD();(Es!==e||$s!==t)&&(Qh=null,gg=Pa()+500,Jd(e,t));do try{j9();break}catch(a){BD(e,a)}while(!0);OC(),P_.current=l,Mi=s,Za!==null?t=0:(Es=null,$s=0,t=hs)}if(t!==0){if(t===2&&(s=k5(e),s!==0&&(n=s,t=oS(e,s))),t===1)throw r=Ay,Jd(e,0),Hf(e,n),au(e,Pa()),r;if(t===6)Hf(e,n);else{if(s=e.current.alternate,!(n&30)&&!z9(s)&&(t=k_(e,n),t===2&&(l=k5(e),l!==0&&(n=l,t=oS(e,l))),t===1))throw r=Ay,Jd(e,0),Hf(e,n),au(e,Pa()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Sr(345));case 2:jd(e,tu,Qh);break;case 3:if(Hf(e,n),(n&130023424)===n&&(t=KC+500-Pa(),10<t)){if(d_(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Fl(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=z5(jd.bind(null,e,tu,Qh),t);break}jd(e,tu,Qh);break;case 4:if(Hf(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var f=31-jc(n);l=1<<f,f=t[f],f>s&&(s=f),n&=~l}if(n=s,n=Pa()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*B9(n/1960))-n,10<n){e.timeoutHandle=z5(jd.bind(null,e,tu,Qh),n);break}jd(e,tu,Qh);break;case 5:jd(e,tu,Qh);break;default:throw Error(Sr(329))}}}return au(e,Pa()),e.callbackNode===r?FD.bind(null,e):null}function oS(e,t){var r=ny;return e.current.memoizedState.isDehydrated&&(Jd(e,t).flags|=256),e=k_(e,t),e!==2&&(t=tu,tu=r,t!==null&&aS(t)),e}function aS(e){tu===null?tu=e:tu.push.apply(tu,e)}function z9(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],l=s.getSnapshot;s=s.value;try{if(!Vc(l(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hf(e,t){for(t&=~YC,t&=~E2,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-jc(t),n=1<<r;e[r]=-1,t&=~n}}function JP(e){if(Mi&6)throw Error(Sr(327));tg();var t=d_(e,0);if(!(t&1))return au(e,Pa()),null;var r=k_(e,t);if(e.tag!==0&&r===2){var n=k5(e);n!==0&&(t=n,r=oS(e,n))}if(r===1)throw r=Ay,Jd(e,0),Hf(e,t),au(e,Pa()),r;if(r===6)throw Error(Sr(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jd(e,tu,Qh),au(e,Pa()),null}function JC(e,t){var r=Mi;Mi|=1;try{return e(t)}finally{Mi=r,Mi===0&&(gg=Pa()+500,x2&&_d())}}function lp(e){Zf!==null&&Zf.tag===0&&!(Mi&6)&&tg();var t=Mi;Mi|=1;var r=nc.transition,n=Qi;try{if(nc.transition=null,Qi=1,e)return e()}finally{Qi=n,nc.transition=r,Mi=t,!(Mi&6)&&_d()}}function QC(){Mu=Gm.current,Fo(Gm)}function Jd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,m9(r)),Za!==null)for(r=Za.return;r!==null;){var n=r;switch(DC(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&v_();break;case 3:pg(),Fo(iu),Fo(xl),UC();break;case 5:jC(n);break;case 4:pg();break;case 13:Fo(aa);break;case 19:Fo(aa);break;case 10:FC(n.type._context);break;case 22:case 23:QC()}r=r.return}if(Es=e,Za=e=id(e.current,null),$s=Mu=t,hs=0,Ay=null,YC=E2=sp=0,tu=ny=null,Wd!==null){for(t=0;t<Wd.length;t++)if(r=Wd[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,l=r.pending;if(l!==null){var f=l.next;l.next=s,n.next=f}r.pending=n}Wd=null}return e}function BD(e,t){do{var r=Za;try{if(OC(),j1.current=A_,T_){for(var n=la.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}T_=!1}if(ap=0,Ss=cs=la=null,ty=!1,Cy=0,XC.current=null,r===null||r.return===null){hs=1,Ay=t,Za=null;break}e:{var l=e,f=r.return,a=r,y=t;if(t=$s,a.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var v=y,S=a,P=S.tag;if(!(S.mode&1)&&(P===0||P===11||P===15)){var D=S.alternate;D?(S.updateQueue=D.updateQueue,S.memoizedState=D.memoizedState,S.lanes=D.lanes):(S.updateQueue=null,S.memoizedState=null)}var E=zP(f);if(E!==null){E.flags&=-257,$P(E,f,a,l,t),E.mode&1&&BP(l,v,t),t=E,y=v;var F=t.updateQueue;if(F===null){var z=new Set;z.add(y),t.updateQueue=z}else F.add(y);break e}else{if(!(t&1)){BP(l,v,t),eE();break e}y=Error(Sr(426))}}else if(Zo&&a.mode&1){var W=zP(f);if(W!==null){!(W.flags&65536)&&(W.flags|=256),$P(W,f,a,l,t),RC(mg(y,a));break e}}l=y=mg(y,a),hs!==4&&(hs=2),ny===null?ny=[l]:ny.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var $=xD(l,y,t);LP(l,$);break e;case 1:a=y;var Y=l.type,Q=l.stateNode;if(!(l.flags&128)&&(typeof Y.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(rd===null||!rd.has(Q)))){l.flags|=65536,t&=-t,l.lanes|=t;var K=wD(l,a,t);LP(l,K);break e}}l=l.return}while(l!==null)}jD(r)}catch(xe){t=xe,Za===r&&r!==null&&(Za=r=r.return);continue}break}while(!0)}function zD(){var e=P_.current;return P_.current=A_,e===null?A_:e}function eE(){(hs===0||hs===3||hs===2)&&(hs=4),Es===null||!(sp&268435455)&&!(E2&268435455)||Hf(Es,$s)}function k_(e,t){var r=Mi;Mi|=2;var n=zD();(Es!==e||$s!==t)&&(Qh=null,Jd(e,t));do try{$9();break}catch(s){BD(e,s)}while(!0);if(OC(),Mi=r,P_.current=n,Za!==null)throw Error(Sr(261));return Es=null,$s=0,hs}function $9(){for(;Za!==null;)$D(Za)}function j9(){for(;Za!==null&&!f7();)$D(Za)}function $D(e){var t=VD(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,t===null?jD(e):Za=t,XC.current=null}function jD(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=R9(r,t),r!==null){r.flags&=32767,Za=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hs=6,Za=null;return}}else if(r=D9(r,t,Mu),r!==null){Za=r;return}if(t=t.sibling,t!==null){Za=t;return}Za=t=e}while(t!==null);hs===0&&(hs=5)}function jd(e,t,r){var n=Qi,s=nc.transition;try{nc.transition=null,Qi=1,U9(e,t,r,n)}finally{nc.transition=s,Qi=n}return null}function U9(e,t,r,n){do tg();while(Zf!==null);if(Mi&6)throw Error(Sr(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Sr(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(w7(e,l),e===Es&&(Za=Es=null,$s=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||l1||(l1=!0,qD(f_,function(){return tg(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=nc.transition,nc.transition=null;var f=Qi;Qi=1;var a=Mi;Mi|=4,XC.current=null,O9(e,r),ND(r,e),l9(F5),p_=!!O5,F5=O5=null,e.current=r,F9(r),d7(),Mi=a,Qi=f,nc.transition=l}else e.current=r;if(l1&&(l1=!1,Zf=e,M_=s),l=e.pendingLanes,l===0&&(rd=null),g7(r.stateNode),au(e,Pa()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(I_)throw I_=!1,e=nS,nS=null,e;return M_&1&&e.tag!==0&&tg(),l=e.pendingLanes,l&1?e===iS?iy++:(iy=0,iS=e):iy=0,_d(),null}function tg(){if(Zf!==null){var e=x6(M_),t=nc.transition,r=Qi;try{if(nc.transition=null,Qi=16>e?16:e,Zf===null)var n=!1;else{if(e=Zf,Zf=null,M_=0,Mi&6)throw Error(Sr(331));var s=Mi;for(Mi|=4,rn=e.current;rn!==null;){var l=rn,f=l.child;if(rn.flags&16){var a=l.deletions;if(a!==null){for(var y=0;y<a.length;y++){var v=a[y];for(rn=v;rn!==null;){var S=rn;switch(S.tag){case 0:case 11:case 15:ry(8,S,l)}var P=S.child;if(P!==null)P.return=S,rn=P;else for(;rn!==null;){S=rn;var D=S.sibling,E=S.return;if(LD(S),S===v){rn=null;break}if(D!==null){D.return=E,rn=D;break}rn=E}}}var F=l.alternate;if(F!==null){var z=F.child;if(z!==null){F.child=null;do{var W=z.sibling;z.sibling=null,z=W}while(z!==null)}}rn=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,rn=f;else e:for(;rn!==null;){if(l=rn,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ry(9,l,l.return)}var $=l.sibling;if($!==null){$.return=l.return,rn=$;break e}rn=l.return}}var Y=e.current;for(rn=Y;rn!==null;){f=rn;var Q=f.child;if(f.subtreeFlags&2064&&Q!==null)Q.return=f,rn=Q;else e:for(f=Y;rn!==null;){if(a=rn,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:C2(9,a)}}catch(xe){_a(a,a.return,xe)}if(a===f){rn=null;break e}var K=a.sibling;if(K!==null){K.return=a.return,rn=K;break e}rn=a.return}}if(Mi=s,_d(),Sh&&typeof Sh.onPostCommitFiberRoot=="function")try{Sh.onPostCommitFiberRoot(g2,e)}catch{}n=!0}return n}finally{Qi=r,nc.transition=t}}return!1}function QP(e,t,r){t=mg(r,t),t=xD(e,t,1),e=td(e,t,1),t=Fl(),e!==null&&(Jy(e,1,t),au(e,t))}function _a(e,t,r){if(e.tag===3)QP(e,e,r);else for(;t!==null;){if(t.tag===3){QP(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(rd===null||!rd.has(n))){e=mg(r,e),e=wD(t,e,1),t=td(t,e,1),e=Fl(),t!==null&&(Jy(t,1,e),au(t,e));break}}t=t.return}}function V9(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Fl(),e.pingedLanes|=e.suspendedLanes&r,Es===e&&($s&r)===r&&(hs===4||hs===3&&($s&130023424)===$s&&500>Pa()-KC?Jd(e,0):YC|=r),au(e,t)}function UD(e,t){t===0&&(e.mode&1?(t=Jv,Jv<<=1,!(Jv&130023424)&&(Jv=4194304)):t=1);var r=Fl();e=ff(e,t),e!==null&&(Jy(e,t,r),au(e,r))}function q9(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),UD(e,r)}function G9(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Sr(314))}n!==null&&n.delete(t),UD(e,r)}var VD;VD=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||iu.current)ru=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ru=!1,L9(e,t,r);ru=!!(e.flags&131072)}else ru=!1,Zo&&t.flags&1048576&&W6(t,x_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;V1(e,t),e=t.pendingProps;var s=hg(t,xl.current);eg(t,r),s=qC(null,t,n,e,s,r);var l=GC();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ou(n)?(l=!0,__(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zC(t),s.updater=S2,t.stateNode=s,s._reactInternals=t,H5(t,n,e,r),t=X5(null,t,n,!0,l,r)):(t.tag=0,Zo&&l&&LC(t),Ol(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(V1(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=W9(n),e=Rc(n,e),s){case 0:t=Z5(null,t,n,e,r);break e;case 1:t=VP(null,t,n,e,r);break e;case 11:t=jP(null,t,n,e,r);break e;case 14:t=UP(null,t,n,Rc(n.type,e),r);break e}throw Error(Sr(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),Z5(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),VP(e,t,n,s,r);case 3:e:{if(TD(t),e===null)throw Error(Sr(387));n=t.pendingProps,l=t.memoizedState,s=l.element,Q6(e,t),C_(t,n,null,r);var f=t.memoizedState;if(n=f.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=mg(Error(Sr(423)),t),t=qP(e,t,n,r,s);break e}else if(n!==s){s=mg(Error(Sr(424)),t),t=qP(e,t,n,r,s);break e}else for(Lu=ed(t.stateNode.containerInfo.firstChild),Ru=t,Zo=!0,Oc=null,r=K6(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fg(),n===s){t=df(e,t,r);break e}Ol(e,t,n,r)}t=t.child}return t;case 5:return eD(t),e===null&&V5(t),n=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,f=s.children,B5(n,s)?f=null:l!==null&&B5(n,l)&&(t.flags|=32),ED(e,t),Ol(e,t,f,r),t.child;case 6:return e===null&&V5(t),null;case 13:return AD(e,t,r);case 4:return $C(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=dg(t,null,n,r):Ol(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),jP(e,t,n,s,r);case 7:return Ol(e,t,t.pendingProps,r),t.child;case 8:return Ol(e,t,t.pendingProps.children,r),t.child;case 12:return Ol(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,l=t.memoizedProps,f=s.value,Eo(w_,n._currentValue),n._currentValue=f,l!==null)if(Vc(l.value,f)){if(l.children===s.children&&!iu.current){t=df(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){f=l.child;for(var y=a.firstContext;y!==null;){if(y.context===n){if(l.tag===1){y=af(-1,r&-r),y.tag=2;var v=l.updateQueue;if(v!==null){v=v.shared;var S=v.pending;S===null?y.next=y:(y.next=S.next,S.next=y),v.pending=y}}l.lanes|=r,y=l.alternate,y!==null&&(y.lanes|=r),q5(l.return,r,t),a.lanes|=r;break}y=y.next}}else if(l.tag===10)f=l.type===t.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(Sr(341));f.lanes|=r,a=f.alternate,a!==null&&(a.lanes|=r),q5(f,r,t),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===t){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}Ol(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,eg(t,r),s=oc(s),n=n(s),t.flags|=1,Ol(e,t,n,r),t.child;case 14:return n=t.type,s=Rc(n,t.pendingProps),s=Rc(n.type,s),UP(e,t,n,s,r);case 15:return SD(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Rc(n,s),V1(e,t),t.tag=1,ou(n)?(e=!0,__(t)):e=!1,eg(t,r),bD(t,n,s),H5(t,n,s,r),X5(null,t,n,!0,e,r);case 19:return PD(e,t,r);case 22:return CD(e,t,r)}throw Error(Sr(156,t.tag))};function qD(e,t){return y6(e,t)}function H9(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rc(e,t,r,n){return new H9(e,t,r,n)}function tE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function W9(e){if(typeof e=="function")return tE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bC)return 11;if(e===xC)return 14}return 2}function id(e,t){var r=e.alternate;return r===null?(r=rc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function H1(e,t,r,n,s,l){var f=2;if(n=e,typeof e=="function")tE(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Nm:return Qd(r.children,s,l,t);case _C:f=8,s|=8;break;case g5:return e=rc(12,r,t,s|2),e.elementType=g5,e.lanes=l,e;case y5:return e=rc(13,r,t,s),e.elementType=y5,e.lanes=l,e;case v5:return e=rc(19,r,t,s),e.elementType=v5,e.lanes=l,e;case e6:return T2(r,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case JL:f=10;break e;case QL:f=9;break e;case bC:f=11;break e;case xC:f=14;break e;case jf:f=16,n=null;break e}throw Error(Sr(130,e==null?e:typeof e,""))}return t=rc(f,r,t,s),t.elementType=e,t.type=n,t.lanes=l,t}function Qd(e,t,r,n){return e=rc(7,e,n,t),e.lanes=r,e}function T2(e,t,r,n){return e=rc(22,e,n,t),e.elementType=e6,e.lanes=r,e.stateNode={isHidden:!1},e}function fw(e,t,r){return e=rc(6,e,null,t),e.lanes=r,e}function dw(e,t,r){return t=rc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Z9(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wx(0),this.expirationTimes=Wx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wx(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rE(e,t,r,n,s,l,f,a,y){return e=new Z9(e,t,r,a,y),t===1?(t=1,l===!0&&(t|=8)):t=0,l=rc(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zC(l),e}function X9(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rm,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function GD(e){if(!e)return sd;e=e._reactInternals;e:{if(xp(e)!==e||e.tag!==1)throw Error(Sr(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ou(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Sr(171))}if(e.tag===1){var r=e.type;if(ou(r))return G6(e,r,t)}return t}function HD(e,t,r,n,s,l,f,a,y){return e=rE(r,n,!0,e,s,l,f,a,y),e.context=GD(null),r=e.current,n=Fl(),s=nd(r),l=af(n,s),l.callback=t??null,td(r,l,s),e.current.lanes=s,Jy(e,s,n),au(e,n),e}function A2(e,t,r,n){var s=t.current,l=Fl(),f=nd(s);return r=GD(r),t.context===null?t.context=r:t.pendingContext=r,t=af(l,f),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=td(s,t,f),e!==null&&(Uc(e,s,f,l),$1(e,s,f)),f}function L_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function e4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nE(e,t){e4(e,t),(e=e.alternate)&&e4(e,t)}function Y9(){return null}var WD=typeof reportError=="function"?reportError:function(e){console.error(e)};function iE(e){this._internalRoot=e}P2.prototype.render=iE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Sr(409));A2(e,t,null,null)};P2.prototype.unmount=iE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lp(function(){A2(null,e,null,null)}),t[hf]=null}};function P2(e){this._internalRoot=e}P2.prototype.unstable_scheduleHydration=function(e){if(e){var t=C6();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Gf.length&&t!==0&&t<Gf[r].priority;r++);Gf.splice(r,0,e),r===0&&T6(e)}};function oE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function I2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function t4(){}function K9(e,t,r,n,s){if(s){if(typeof n=="function"){var l=n;n=function(){var v=L_(f);l.call(v)}}var f=HD(t,n,e,0,null,!1,!1,"",t4);return e._reactRootContainer=f,e[hf]=f.current,_y(e.nodeType===8?e.parentNode:e),lp(),f}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var v=L_(y);a.call(v)}}var y=rE(e,0,!1,null,null,!1,!1,"",t4);return e._reactRootContainer=y,e[hf]=y.current,_y(e.nodeType===8?e.parentNode:e),lp(function(){A2(t,y,r,n)}),y}function M2(e,t,r,n,s){var l=r._reactRootContainer;if(l){var f=l;if(typeof s=="function"){var a=s;s=function(){var y=L_(f);a.call(y)}}A2(t,f,e,s)}else f=K9(r,t,e,s,n);return L_(f)}w6=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=B0(t.pendingLanes);r!==0&&(CC(t,r|1),au(t,Pa()),!(Mi&6)&&(gg=Pa()+500,_d()))}break;case 13:lp(function(){var n=ff(e,1);if(n!==null){var s=Fl();Uc(n,e,1,s)}}),nE(e,1)}};EC=function(e){if(e.tag===13){var t=ff(e,134217728);if(t!==null){var r=Fl();Uc(t,e,134217728,r)}nE(e,134217728)}};S6=function(e){if(e.tag===13){var t=nd(e),r=ff(e,t);if(r!==null){var n=Fl();Uc(r,e,t,n)}nE(e,t)}};C6=function(){return Qi};E6=function(e,t){var r=Qi;try{return Qi=e,t()}finally{Qi=r}};P5=function(e,t,r){switch(t){case"input":if(x5(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=b2(n);if(!s)throw Error(Sr(90));r6(n),x5(n,s)}}}break;case"textarea":i6(e,r);break;case"select":t=r.value,t!=null&&Ym(e,!!r.multiple,t,!1)}};h6=JC;f6=lp;var J9={usingClientEntryPoint:!1,Events:[ev,zm,b2,u6,c6,JC]},S0={findFiberByHostInstance:Hd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Q9={bundleType:S0.bundleType,version:S0.version,rendererPackageName:S0.rendererPackageName,rendererConfig:S0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vf.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=m6(e),e===null?null:e.stateNode},findFiberByHostInstance:S0.findFiberByHostInstance||Y9,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var u1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!u1.isDisabled&&u1.supportsFiber)try{g2=u1.inject(Q9),Sh=u1}catch{}}$u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J9;$u.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oE(t))throw Error(Sr(200));return X9(e,t,null,r)};$u.createRoot=function(e,t){if(!oE(e))throw Error(Sr(299));var r=!1,n="",s=WD;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=rE(e,1,!1,null,null,r,!1,n,s),e[hf]=t.current,_y(e.nodeType===8?e.parentNode:e),new iE(t)};$u.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Sr(188)):(e=Object.keys(e).join(","),Error(Sr(268,e)));return e=m6(t),e=e===null?null:e.stateNode,e};$u.flushSync=function(e){return lp(e)};$u.hydrate=function(e,t,r){if(!I2(t))throw Error(Sr(200));return M2(null,e,t,!0,r)};$u.hydrateRoot=function(e,t,r){if(!oE(e))throw Error(Sr(405));var n=r!=null&&r.hydratedSources||null,s=!1,l="",f=WD;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(f=r.onRecoverableError)),t=HD(t,null,e,1,r??null,s,!1,l,f),e[hf]=t.current,_y(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new P2(t)};$u.render=function(e,t,r){if(!I2(t))throw Error(Sr(200));return M2(null,e,t,!1,r)};$u.unmountComponentAtNode=function(e){if(!I2(e))throw Error(Sr(40));return e._reactRootContainer?(lp(function(){M2(null,null,e,!1,function(){e._reactRootContainer=null,e[hf]=null})}),!0):!1};$u.unstable_batchedUpdates=JC;$u.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!I2(r))throw Error(Sr(200));if(e==null||e._reactInternals===void 0)throw Error(Sr(38));return M2(e,t,r,!1,n)};$u.version="18.3.1-next-f1338f8080-20240426";function ZD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZD)}catch(e){console.error(e)}}ZD(),ZL.exports=$u;var e$=ZL.exports,XD,r4=e$;XD=r4.createRoot,r4.hydrateRoot;var YD={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */(function(e,t){(function(r,n){e.exports=n()})(ec,function(){var r={},n={};function s(f,a,y){if(n[f]=y,f==="index"){var v="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",S={};return n.shared(S),n.index(r,S),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([v],{type:"text/javascript"}))),r}}s("shared",["exports"],function(f){function a(h,o,c,d){return new(c||(c=Promise))(function(g,x){function w(N){try{L(d.next(N))}catch(j){x(j)}}function A(N){try{L(d.throw(N))}catch(j){x(j)}}function L(N){var j;N.done?g(N.value):(j=N.value,j instanceof c?j:new c(function(H){H(j)})).then(w,A)}L((d=d.apply(h,o||[])).next())})}function y(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var v,S;function P(){if(S)return v;function h(o,c){this.x=o,this.y=c}return S=1,v=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,c){return this.clone()._rotateAround(o,c)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var c=o.x-this.x,d=o.y-this.y;return c*c+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,c){return Math.atan2(this.x*c-this.y*o,this.x*o+this.y*c)},_matMult:function(o){var c=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=c,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var c=Math.cos(o),d=Math.sin(o),g=d*this.x+c*this.y;return this.x=c*this.x-d*this.y,this.y=g,this},_rotateAround:function(o,c){var d=Math.cos(o),g=Math.sin(o),x=c.y+g*(this.x-c.x)+d*(this.y-c.y);return this.x=c.x+d*(this.x-c.x)-g*(this.y-c.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(o){return o instanceof h?o:Array.isArray(o)?new h(o[0],o[1]):o},v}typeof SuppressedError=="function"&&SuppressedError;var D,E,F=y(P()),z=function(){if(E)return D;function h(o,c,d,g){this.cx=3*o,this.bx=3*(d-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(g-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=c,this.p2x=d,this.p2y=g}return E=1,D=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,c){if(c===void 0&&(c=1e-6),o<0)return 0;if(o>1)return 1;for(var d=o,g=0;g<8;g++){var x=this.sampleCurveX(d)-o;if(Math.abs(x)<c)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=x/w}var A=0,L=1;for(d=o,g=0;g<20&&(x=this.sampleCurveX(d),!(Math.abs(x-o)<c));g++)o>x?A=d:L=d,d=.5*(L-A)+A;return d},solve:function(o,c){return this.sampleCurveY(this.solveCurveX(o,c))}},D}(),W=y(z);let $,Y;function Q(){return $==null&&($=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),$}function K(){if(Y==null&&(Y=!1,Q())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let d=0;d<5*5;d++){const g=4*d;o.fillStyle=`rgb(${g},${g+1},${g+2})`,o.fillRect(d%5,Math.floor(d/5),1,1)}const c=o.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&c[d]!==d){Y=!0;break}}}return Y||!1}var xe=1e-6,de=typeof Float32Array<"u"?Float32Array:Array;function be(){var h=new de(9);return de!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[5]=0,h[6]=0,h[7]=0),h[0]=1,h[4]=1,h[8]=1,h}function me(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ve(){var h=new de(3);return de!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h}function Re(h){return Math.hypot(h[0],h[1],h[2])}function le(h,o,c){var d=new de(3);return d[0]=h,d[1]=o,d[2]=c,d}function G(h,o,c){return h[0]=o[0]+c[0],h[1]=o[1]+c[1],h[2]=o[2]+c[2],h}function Ae(h,o,c){return h[0]=o[0]*c,h[1]=o[1]*c,h[2]=o[2]*c,h}function we(h,o,c){var d=o[0],g=o[1],x=o[2],w=c[0],A=c[1],L=c[2];return h[0]=g*L-x*A,h[1]=x*w-d*L,h[2]=d*A-g*w,h}Math.hypot||(Math.hypot=function(){for(var h=0,o=arguments.length;o--;)h+=arguments[o]*arguments[o];return Math.sqrt(h)});var lt,pt=Re;function At(h,o,c){var d=o[0],g=o[1],x=o[2],w=o[3];return h[0]=c[0]*d+c[4]*g+c[8]*x+c[12]*w,h[1]=c[1]*d+c[5]*g+c[9]*x+c[13]*w,h[2]=c[2]*d+c[6]*g+c[10]*x+c[14]*w,h[3]=c[3]*d+c[7]*g+c[11]*x+c[15]*w,h}function Ze(){var h=new de(4);return de!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function tt(h,o,c,d){var g=.5*Math.PI/180;o*=g,c*=g,d*=g;var x=Math.sin(o),w=Math.cos(o),A=Math.sin(c),L=Math.cos(c),N=Math.sin(d),j=Math.cos(d);return h[0]=x*L*j-w*A*N,h[1]=w*A*j+x*L*N,h[2]=w*L*N-x*A*j,h[3]=w*L*j+x*A*N,h}function Ot(){var h=new de(2);return de!=Float32Array&&(h[0]=0,h[1]=0),h}function St(h,o){var c=new de(2);return c[0]=h,c[1]=o,c}ve(),lt=new de(4),de!=Float32Array&&(lt[0]=0,lt[1]=0,lt[2]=0,lt[3]=0),ve(),le(1,0,0),le(0,1,0),Ze(),Ze(),be(),Ot();const ne=8192;function Ee(h,o,c){return o*(ne/(h.tileSize*Math.pow(2,c-h.tileID.overscaledZ)))}function Ne(h,o){return(h%o+o)%o}function qe(h,o,c){return h*(1-c)+o*c}function Je(h){if(h<=0)return 0;if(h>=1)return 1;const o=h*h,c=o*h;return 4*(h<.5?c:3*(h-o)+c-.75)}function gt(h,o,c,d){const g=new W(h,o,c,d);return x=>g.solve(x)}const bt=gt(.25,.1,.25,1);function ft(h,o,c){return Math.min(c,Math.max(o,h))}function Ct(h,o,c){const d=c-o,g=((h-o)%d+d)%d+o;return g===o?c:g}function Ut(h,...o){for(const c of o)for(const d in c)h[d]=c[d];return h}let gr=1;function rr(h,o,c){const d={};for(const g in h)d[g]=o.call(this,h[g],g,h);return d}function It(h,o,c){const d={};for(const g in h)o.call(this,h[g],g,h)&&(d[g]=h[g]);return d}function Ue(h){return Array.isArray(h)?h.map(Ue):typeof h=="object"&&h?rr(h,Ue):h}const Lr={};function Nr(h){Lr[h]||(typeof console<"u"&&console.warn(h),Lr[h]=!0)}function Pr(h,o,c){return(c.y-h.y)*(o.x-h.x)>(o.y-h.y)*(c.x-h.x)}function Ht(h){return typeof WorkerGlobalScope<"u"&&h!==void 0&&h instanceof WorkerGlobalScope}let Er=null;function vr(h){return typeof ImageBitmap<"u"&&h instanceof ImageBitmap}const dr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function qr(h,o,c,d,g){return a(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(h,{timestamp:0});try{const w=x==null?void 0:x.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const A=w.startsWith("BGR"),L=new Uint8ClampedArray(d*g*4);if(yield x.copyTo(L,function(N,j,H,te,ie){const se=4*Math.max(1,0),fe=(Math.max(0,H)-H)*te*4+se,Te=4*te,Fe=Math.max(0,j),dt=Math.max(0,H);return{rect:{x:Fe,y:dt,width:Math.min(N.width,j+te)-Fe,height:Math.min(N.height,H+ie)-dt},layout:[{offset:fe,stride:Te}]}}(h,o,c,d,g)),A)for(let N=0;N<L.length;N+=4){const j=L[N];L[N]=L[N+2],L[N+2]=j}return L}finally{x.close()}})}let En,cn;function Jr(h,o,c,d){return h.addEventListener(o,c,d),{unsubscribe:()=>{h.removeEventListener(o,c,d)}}}function An(h){return h*Math.PI/180}function en(h){return h/Math.PI*180}const Ur={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Br={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},_r="AbortError";function ot(){return new Error(_r)}const ae={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function oe(h){return ae.REGISTERED_PROTOCOLS[h.substring(0,h.indexOf("://"))]}const ye="global-dispatcher";class De extends Error{constructor(o,c,d,g){super(`AJAXError: ${c} (${o}): ${d}`),this.status=o,this.statusText=c,this.url=d,this.body=g}}const Ve=()=>Ht(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,rt=function(h,o){if(/:\/\//.test(h.url)&&!/^https?:|^file:/.test(h.url)){const d=oe(h.url);if(d)return d(h,o);if(Ht(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,targetMapId:ye},o)}if(!(/^file:/.test(c=h.url)||/^file:/.test(Ve())&&!/^\w+:/.test(c))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,g){return a(this,void 0,void 0,function*(){const x=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:Ve(),signal:g.signal});let w,A;d.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{w=yield fetch(x)}catch(N){throw new De(0,N.message,d.url,new Blob)}if(!w.ok){const N=yield w.blob();throw new De(w.status,w.statusText,d.url,N)}A=d.type==="arrayBuffer"||d.type==="image"?w.arrayBuffer():d.type==="json"?w.json():w.text();const L=yield A;if(g.signal.aborted)throw ot();return{data:L,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(h,o);if(Ht(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:h,mustQueue:!0,targetMapId:ye},o)}var c;return function(d,g){return new Promise((x,w)=>{var A;const L=new XMLHttpRequest;L.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(L.responseType="arraybuffer");for(const N in d.headers)L.setRequestHeader(N,d.headers[N]);d.type==="json"&&(L.responseType="text",!((A=d.headers)===null||A===void 0)&&A.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=d.credentials==="include",L.onerror=()=>{w(new Error(L.statusText))},L.onload=()=>{if(!g.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let N=L.response;if(d.type==="json")try{N=JSON.parse(L.response)}catch(j){return void w(j)}x({data:N,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const N=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});w(new De(L.status,L.statusText,d.url,N))}},g.signal.addEventListener("abort",()=>{L.abort(),w(ot())}),L.send(d.body)})}(h,o)};function ht(h){if(!h||h.indexOf("://")<=0||h.indexOf("data:image/")===0||h.indexOf("blob:")===0)return!0;const o=new URL(h),c=window.location;return o.protocol===c.protocol&&o.host===c.host}function ct(h,o,c){c[h]&&c[h].indexOf(o)!==-1||(c[h]=c[h]||[],c[h].push(o))}function Lt(h,o,c){if(c&&c[h]){const d=c[h].indexOf(o);d!==-1&&c[h].splice(d,1)}}class wt{constructor(o,c={}){Ut(this,c),this.type=o}}class st extends wt{constructor(o,c={}){super("error",Ut({error:o},c))}}class Ft{on(o,c){return this._listeners=this._listeners||{},ct(o,c,this._listeners),{unsubscribe:()=>{this.off(o,c)}}}off(o,c){return Lt(o,c,this._listeners),Lt(o,c,this._oneTimeListeners),this}once(o,c){return c?(this._oneTimeListeners=this._oneTimeListeners||{},ct(o,c,this._oneTimeListeners),this):new Promise(d=>this.once(o,d))}fire(o,c){typeof o=="string"&&(o=new wt(o,c||{}));const d=o.type;if(this.listens(d)){o.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const A of g)A.call(this,o);const x=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const A of x)Lt(d,A,this._oneTimeListeners),A.call(this,o);const w=this._eventedParent;w&&(Ut(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),w.fire(o))}else o instanceof st&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,c){return this._eventedParent=o,this._eventedParentData=c,this}}var it={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const hr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Xr(h,o){const c={};for(const d in h)d!=="ref"&&(c[d]=h[d]);return hr.forEach(d=>{d in o&&(c[d]=o[d])}),c}function wr(h,o){if(Array.isArray(h)){if(!Array.isArray(o)||h.length!==o.length)return!1;for(let c=0;c<h.length;c++)if(!wr(h[c],o[c]))return!1;return!0}if(typeof h=="object"&&h!==null&&o!==null){if(typeof o!="object"||Object.keys(h).length!==Object.keys(o).length)return!1;for(const c in h)if(!wr(h[c],o[c]))return!1;return!0}return h===o}function er(h,o){h.push(o)}function nn(h,o,c){er(c,{command:"addSource",args:[h,o[h]]})}function Hn(h,o,c){er(o,{command:"removeSource",args:[h]}),c[h]=!0}function Dn(h,o,c,d){Hn(h,c,d),nn(h,o,c)}function hn(h,o,c){let d;for(d in h[c])if(Object.prototype.hasOwnProperty.call(h[c],d)&&d!=="data"&&!wr(h[c][d],o[c][d]))return!1;for(d in o[c])if(Object.prototype.hasOwnProperty.call(o[c],d)&&d!=="data"&&!wr(h[c][d],o[c][d]))return!1;return!0}function Dr(h,o,c,d,g,x){h=h||{},o=o||{};for(const w in h)Object.prototype.hasOwnProperty.call(h,w)&&(wr(h[w],o[w])||c.push({command:x,args:[d,w,o[w],g]}));for(const w in o)Object.prototype.hasOwnProperty.call(o,w)&&!Object.prototype.hasOwnProperty.call(h,w)&&(wr(h[w],o[w])||c.push({command:x,args:[d,w,o[w],g]}))}function fn(h){return h.id}function qn(h,o){return h[o.id]=o,h}class nr{constructor(o,c,d,g){this.message=(o?`${o}: `:"")+d,g&&(this.identifier=g),c!=null&&c.__line__&&(this.line=c.__line__)}}function Bi(h,...o){for(const c of o)for(const d in c)h[d]=c[d];return h}class Gn extends Error{constructor(o,c){super(c),this.message=c,this.key=o}}class yo{constructor(o,c=[]){this.parent=o,this.bindings={};for(const[d,g]of c)this.bindings[d]=g}concat(o){return new yo(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Xo={kind:"null"},lr={kind:"number"},$r={kind:"string"},Sn={kind:"boolean"},ro={kind:"color"},Hs={kind:"projectionDefinition"},ca={kind:"object"},Tn={kind:"value"},ha={kind:"collator"},Sl={kind:"formatted"},Si={kind:"padding"},Ws={kind:"colorArray"},Zs={kind:"numberArray"},Un={kind:"resolvedImage"},Xs={kind:"variableAnchorOffsetCollection"};function Yo(h,o){return{kind:"array",itemType:h,N:o}}function Kn(h){if(h.kind==="array"){const o=Kn(h.itemType);return typeof h.N=="number"?`array<${o}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${o}>`}return h.kind}const Da=[Xo,lr,$r,Sn,ro,Hs,Sl,ca,Yo(Tn),Si,Zs,Ws,Un,Xs];function As(h,o){if(o.kind==="error")return null;if(h.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!As(h.itemType,o.itemType))&&(typeof h.N!="number"||h.N===o.N))return null}else{if(h.kind===o.kind)return null;if(h.kind==="value"){for(const c of Da)if(!As(c,o))return null}}return`Expected ${Kn(h)} but found ${Kn(o)} instead.`}function Xa(h,o){return o.some(c=>c.kind===h.kind)}function Bo(h,o){return o.some(c=>c==="null"?h===null:c==="array"?Array.isArray(h):c==="object"?h&&!Array.isArray(h)&&typeof h=="object":c===typeof h)}function Ps(h,o){return h.kind==="array"&&o.kind==="array"?h.itemType.kind===o.itemType.kind&&typeof h.N=="number":h.kind===o.kind}const lo=.96422,pc=.82521,mc=4/29,wa=6/29,Ys=3*wa*wa,Ya=wa*wa*wa,fs=Math.PI/180,uo=180/Math.PI;function qu(h){return(h%=360)<0&&(h+=360),h}function $l([h,o,c,d]){let g,x;const w=k((.2225045*(h=jl(h))+.7168786*(o=jl(o))+.0606169*(c=jl(c)))/1);h===o&&o===c?g=x=w:(g=k((.4360747*h+.3850649*o+.1430804*c)/lo),x=k((.0139322*h+.0971045*o+.7141733*c)/pc));const A=116*w-16;return[A<0?0:A,500*(g-w),200*(w-x),d]}function jl(h){return h<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function k(h){return h>Ya?Math.pow(h,1/3):h/Ys+mc}function V([h,o,c,d]){let g=(h+16)/116,x=isNaN(o)?g:g+o/500,w=isNaN(c)?g:g-c/200;return g=1*We(g),x=lo*We(x),w=pc*We(w),[pe(3.1338561*x-1.6168667*g-.4906146*w),pe(-.9787684*x+1.9161415*g+.033454*w),pe(.0719453*x-.2289914*g+1.4052427*w),d]}function pe(h){return(h=h<=.00304?12.92*h:1.055*Math.pow(h,1/2.4)-.055)<0?0:h>1?1:h}function We(h){return h>wa?h*h*h:Ys*(h-mc)}const nt=Object.hasOwn||function(h,o){return Object.prototype.hasOwnProperty.call(h,o)};function Ye(h,o){return nt(h,o)?h[o]:void 0}function yt(h){return parseInt(h.padEnd(2,h),16)/255}function Jt(h,o){return ur(o?h/100:h,0,1)}function ur(h,o,c){return Math.min(Math.max(o,h),c)}function Cr(h){return!h.some(Number.isNaN)}const xr={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ar(h,o,c){return h+c*(o-h)}function an(h,o,c){return h.map((d,g)=>ar(d,o[g],c))}class jr{constructor(o,c,d,g=1,x=!0){this.r=o,this.g=c,this.b=d,this.a=g,x||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[o,c,d,g]))}static parse(o){if(o instanceof jr)return o;if(typeof o!="string")return;const c=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Ye(xr,d);if(g){const[w,A,L]=g;return[w/255,A/255,L/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const w=d.length<6?1:2;let A=1;return[yt(d.slice(A,A+=w)),yt(d.slice(A,A+=w)),yt(d.slice(A,A+=w)),yt(d.slice(A,A+w)||"ff")]}if(d.startsWith("rgb")){const w=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[A,L,N,j,H,te,ie,se,fe,Te,Fe,dt]=w,Xe=[j||" ",ie||" ",Te].join("");if(Xe==="  "||Xe==="  /"||Xe===",,"||Xe===",,,"){const re=[N,te,fe].join(""),Se=re==="%%%"?100:re===""?255:0;if(Se){const Qe=[ur(+L/Se,0,1),ur(+H/Se,0,1),ur(+se/Se,0,1),Fe?Jt(+Fe,dt):1];if(Cr(Qe))return Qe}}return}}const x=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,A,L,N,j,H,te,ie,se]=x,fe=[L||" ",j||" ",te].join("");if(fe==="  "||fe==="  /"||fe===",,"||fe===",,,"){const Te=[+A,ur(+N,0,100),ur(+H,0,100),ie?Jt(+ie,se):1];if(Cr(Te))return function([Fe,dt,Xe,re]){function Se(Qe){const Rt=(Qe+Fe/30)%12,Qt=dt*Math.min(Xe,1-Xe);return Xe-Qt*Math.max(-1,Math.min(Rt-3,9-Rt,1))}return Fe=qu(Fe),dt/=100,Xe/=100,[Se(0),Se(8),Se(4),re]}(Te)}}}(o);return c?new jr(...c,!1):void 0}get rgb(){const{r:o,g:c,b:d,a:g}=this,x=g||1/0;return this.overwriteGetter("rgb",[o/x,c/x,d/x,g])}get hcl(){return this.overwriteGetter("hcl",function(o){const[c,d,g,x]=$l(o),w=Math.sqrt(d*d+g*g);return[Math.round(1e4*w)?qu(Math.atan2(g,d)*uo):NaN,w,c,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",$l(this.rgb))}overwriteGetter(o,c){return Object.defineProperty(this,o,{value:c}),c}toString(){const[o,c,d,g]=this.rgb;return`rgba(${[o,c,d].map(x=>Math.round(255*x)).join(",")},${g})`}static interpolate(o,c,d,g="rgb"){switch(g){case"rgb":{const[x,w,A,L]=an(o.rgb,c.rgb,d);return new jr(x,w,A,L,!1)}case"hcl":{const[x,w,A,L]=o.hcl,[N,j,H,te]=c.hcl;let ie,se;if(isNaN(x)||isNaN(N))isNaN(x)?isNaN(N)?ie=NaN:(ie=N,A!==1&&A!==0||(se=j)):(ie=x,H!==1&&H!==0||(se=w));else{let Xe=N-x;N>x&&Xe>180?Xe-=360:N<x&&x-N>180&&(Xe+=360),ie=x+d*Xe}const[fe,Te,Fe,dt]=function([Xe,re,Se,Qe]){return Xe=isNaN(Xe)?0:Xe*fs,V([Se,Math.cos(Xe)*re,Math.sin(Xe)*re,Qe])}([ie,se??ar(w,j,d),ar(A,H,d),ar(L,te,d)]);return new jr(fe,Te,Fe,dt,!1)}case"lab":{const[x,w,A,L]=V(an(o.lab,c.lab,d));return new jr(x,w,A,L,!1)}}}}jr.black=new jr(0,0,0,1),jr.white=new jr(1,1,1,1),jr.transparent=new jr(0,0,0,0),jr.red=new jr(1,0,0,1);class yn{constructor(o,c,d){this.sensitivity=o?c?"variant":"case":c?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,c){return this.collator.compare(o,c)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Vr=["bottom","center","top"];class Zt{constructor(o,c,d,g,x,w){this.text=o,this.image=c,this.scale=d,this.fontStack=g,this.textColor=x,this.verticalAlign=w}}class Ir{constructor(o){this.sections=o}static fromString(o){return new Ir([new Zt(o,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Ir?o:Ir.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class xn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof xn)return o;if(typeof o=="number")return new xn([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const c of o)if(typeof c!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new xn(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,c,d){return new xn(an(o.values,c.values,d))}}class Jn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Jn)return o;if(typeof o=="number")return new Jn([o]);if(Array.isArray(o)){for(const c of o)if(typeof c!="number")return;return new Jn(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,c,d){return new Jn(an(o.values,c.values,d))}}class Pn{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Pn)return o;if(typeof o=="string"){const d=jr.parse(o);return d?new Pn([d]):void 0}if(!Array.isArray(o))return;const c=[];for(const d of o){if(typeof d!="string")return;const g=jr.parse(d);if(!g)return;c.push(g)}return new Pn(c)}toString(){return JSON.stringify(this.values)}static interpolate(o,c,d,g="rgb"){const x=[];if(o.values.length!=c.values.length)throw new Error(`colorArray: Arrays have mismatched length (${o.values.length} vs. ${c.values.length}), cannot interpolate.`);for(let w=0;w<o.values.length;w++)x.push(jr.interpolate(o.values[w],c.values[w],d,g));return new Pn(x)}}class ii extends Error{constructor(o){super(o),this.name="RuntimeError"}toJSON(){return this.message}}const Gu=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wr{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Wr)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let c=0;c<o.length;c+=2){const d=o[c],g=o[c+1];if(typeof d!="string"||!Gu.has(d)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new Wr(o)}}toString(){return JSON.stringify(this.values)}static interpolate(o,c,d){const g=o.values,x=c.values;if(g.length!==x.length)throw new ii(`Cannot interpolate values of different length. from: ${o.toString()}, to: ${c.toString()}`);const w=[];for(let A=0;A<g.length;A+=2){if(g[A]!==x[A])throw new ii(`Cannot interpolate values containing mismatched anchors. from[${A}]: ${g[A]}, to[${A}]: ${x[A]}`);w.push(g[A]);const[L,N]=g[A+1],[j,H]=x[A+1];w.push([ar(L,j,d),ar(N,H,d)])}return new Wr(w)}}class vo{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new vo({name:o,available:!1}):null}}class vn{constructor(o,c,d){this.from=o,this.to=c,this.transition=d}static interpolate(o,c,d){return new vn(o,c,d)}static parse(o){return o instanceof vn?o:Array.isArray(o)&&o.length===3&&typeof o[0]=="string"&&typeof o[1]=="string"&&typeof o[2]=="number"?new vn(o[0],o[1],o[2]):typeof o=="object"&&typeof o.from=="string"&&typeof o.to=="string"&&typeof o.transition=="number"?new vn(o.from,o.to,o.transition):typeof o=="string"?new vn(o,o,1):void 0}}function sn(h,o,c,d){return typeof h=="number"&&h>=0&&h<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof c=="number"&&c>=0&&c<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[h,o,c,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[h,o,c,d]:[h,o,c]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ka(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof vn||h instanceof jr||h instanceof yn||h instanceof Ir||h instanceof xn||h instanceof Jn||h instanceof Pn||h instanceof Wr||h instanceof vo)return!0;if(Array.isArray(h)){for(const o of h)if(!Ka(o))return!1;return!0}if(typeof h=="object"){for(const o in h)if(!Ka(h[o]))return!1;return!0}return!1}function tn(h){if(h===null)return Xo;if(typeof h=="string")return $r;if(typeof h=="boolean")return Sn;if(typeof h=="number")return lr;if(h instanceof jr)return ro;if(h instanceof vn)return Hs;if(h instanceof yn)return ha;if(h instanceof Ir)return Sl;if(h instanceof xn)return Si;if(h instanceof Jn)return Zs;if(h instanceof Pn)return Ws;if(h instanceof Wr)return Xs;if(h instanceof vo)return Un;if(Array.isArray(h)){const o=h.length;let c;for(const d of h){const g=tn(d);if(c){if(c===g)continue;c=Tn;break}c=g}return Yo(c||Tn,o)}return ca}function Ks(h){const o=typeof h;return h===null?"":o==="string"||o==="number"||o==="boolean"?String(h):h instanceof jr||h instanceof vn||h instanceof Ir||h instanceof xn||h instanceof Jn||h instanceof Pn||h instanceof Wr||h instanceof vo?h.toString():JSON.stringify(h)}class co{constructor(o,c){this.type=o,this.value=c}static parse(o,c){if(o.length!==2)return c.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Ka(o[1]))return c.error("invalid value");const d=o[1];let g=tn(d);const x=c.expectedType;return g.kind!=="array"||g.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(g=x),new co(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Is={string:$r,number:lr,boolean:Sn,object:ca};class To{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d,g=1;const x=o[0];if(x==="array"){let A,L;if(o.length>2){const N=o[1];if(typeof N!="string"||!(N in Is)||N==="object")return c.error('The item type argument of "array" must be one of string, number, boolean',1);A=Is[N],g++}else A=Tn;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return c.error('The length argument to "array" must be a positive integer literal',2);L=o[2],g++}d=Yo(A,L)}else{if(!Is[x])throw new Error(`Types doesn't contain name = ${x}`);d=Is[x]}const w=[];for(;g<o.length;g++){const A=c.parse(o[g],g,Tn);if(!A)return null;w.push(A)}return new To(d,w)}evaluate(o){for(let c=0;c<this.args.length;c++){const d=this.args[c].evaluate(o);if(!As(this.type,tn(d)))return d;if(c===this.args.length-1)throw new ii(`Expected value to be of type ${Kn(this.type)}, but found ${Kn(tn(d))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const Cl={"to-boolean":Sn,"to-color":ro,"to-number":lr,"to-string":$r};class Ra{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const d=o[0];if(!Cl[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&o.length!==2)return c.error("Expected one argument.");const g=Cl[d],x=[];for(let w=1;w<o.length;w++){const A=c.parse(o[w],w,Tn);if(!A)return null;x.push(A)}return new Ra(g,x)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let c,d;for(const g of this.args){if(c=g.evaluate(o),d=null,c instanceof jr)return c;if(typeof c=="string"){const x=o.parseColor(c);if(x)return x}else if(Array.isArray(c)&&(d=c.length<3||c.length>4?`Invalid rgba value ${JSON.stringify(c)}: expected an array containing either three or four numeric values.`:sn(c[0],c[1],c[2],c[3]),!d))return new jr(c[0]/255,c[1]/255,c[2]/255,c[3])}throw new ii(d||`Could not parse color from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"padding":{let c;for(const d of this.args){c=d.evaluate(o);const g=xn.parse(c);if(g)return g}throw new ii(`Could not parse padding from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"numberArray":{let c;for(const d of this.args){c=d.evaluate(o);const g=Jn.parse(c);if(g)return g}throw new ii(`Could not parse numberArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"colorArray":{let c;for(const d of this.args){c=d.evaluate(o);const g=Pn.parse(c);if(g)return g}throw new ii(`Could not parse colorArray from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"variableAnchorOffsetCollection":{let c;for(const d of this.args){c=d.evaluate(o);const g=Wr.parse(c);if(g)return g}throw new ii(`Could not parse variableAnchorOffsetCollection from value '${typeof c=="string"?c:JSON.stringify(c)}'`)}case"number":{let c=null;for(const d of this.args){if(c=d.evaluate(o),c===null)return 0;const g=Number(c);if(!isNaN(g))return g}throw new ii(`Could not convert ${JSON.stringify(c)} to number.`)}case"formatted":return Ir.fromString(Ks(this.args[0].evaluate(o)));case"resolvedImage":return vo.fromString(Ks(this.args[0].evaluate(o)));case"projectionDefinition":return this.args[0].evaluate(o);default:return Ks(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const pu=["Unknown","Point","LineString","Polygon"];class mu{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?pu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let c=this._parseColorCache.get(o);return c||(c=jr.parse(o),this._parseColorCache.set(o,c)),c}}class ds{constructor(o,c,d=[],g,x=new yo,w=[]){this.registry=o,this.path=d,this.key=d.map(A=>`[${A}]`).join(""),this.scope=x,this.errors=w,this.expectedType=g,this._isConstant=c}parse(o,c,d,g,x={}){return c?this.concat(c,d,g)._parse(o,x):this._parse(o,x)}_parse(o,c){function d(g,x,w){return w==="assert"?new To(x,[g]):w==="coerce"?new Ra(x,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let w=x.parse(o,this);if(!w)return null;if(this.expectedType){const A=this.expectedType,L=w.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||L.kind!=="value"){if(A.kind==="projectionDefinition"&&["string","array"].includes(L.kind)||["color","formatted","resolvedImage"].includes(A.kind)&&["value","string"].includes(L.kind)||["padding","numberArray"].includes(A.kind)&&["value","number","array"].includes(L.kind)||A.kind==="colorArray"&&["value","string","array"].includes(L.kind)||A.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(L.kind))w=d(w,A,c.typeAnnotation||"coerce");else if(this.checkSubtype(A,L))return null}else w=d(w,A,c.typeAnnotation||"assert")}if(!(w instanceof co)&&w.type.kind!=="resolvedImage"&&this._isConstant(w)){const A=new mu;try{w=new co(w.type,w.evaluate(A))}catch(L){return this.error(L.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,c,d){const g=typeof o=="number"?this.path.concat(o):this.path,x=d?this.scope.concat(d):this.scope;return new ds(this.registry,this._isConstant,g,c||null,x,this.errors)}error(o,...c){const d=`${this.key}${c.map(g=>`[${g}]`).join("")}`;this.errors.push(new Gn(d,o))}checkSubtype(o,c){const d=As(o,c);return d&&this.error(d),d}}class Js{constructor(o,c){this.type=c.type,this.bindings=[].concat(o),this.result=c}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const c of this.bindings)o(c[1]);o(this.result)}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const d=[];for(let x=1;x<o.length-1;x+=2){const w=o[x];if(typeof w!="string")return c.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return c.error("Variable names must contain only alphanumeric characters or '_'.",x);const A=c.parse(o[x+1],x+1);if(!A)return null;d.push([w,A])}const g=c.parse(o[o.length-1],o.length-1,c.expectedType,d);return g?new Js(d,g):null}outputDefined(){return this.result.outputDefined()}}class Sa{constructor(o,c){this.type=c.type,this.name=o,this.boundExpression=c}static parse(o,c){if(o.length!==2||typeof o[1]!="string")return c.error("'var' expression requires exactly one string literal argument.");const d=o[1];return c.scope.has(d)?new Sa(d,c.scope.get(d)):c.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class gi{constructor(o,c,d){this.type=o,this.index=c,this.input=d}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,lr),g=c.parse(o[2],2,Yo(c.expectedType||Tn));return d&&g?new gi(g.type.itemType,d,g):null}evaluate(o){const c=this.index.evaluate(o),d=this.input.evaluate(o);if(c<0)throw new ii(`Array index out of bounds: ${c} < 0.`);if(c>=d.length)throw new ii(`Array index out of bounds: ${c} > ${d.length-1}.`);if(c!==Math.floor(c))throw new ii(`Array index must be an integer, but found ${c} instead.`);return d[c]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class zo{constructor(o,c){this.type=Sn,this.needle=o,this.haystack=c}static parse(o,c){if(o.length!==3)return c.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Tn),g=c.parse(o[2],2,Tn);return d&&g?Xa(d.type,[Sn,$r,lr,Xo,Tn])?new zo(d,g):c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(d.type)} instead`):null}evaluate(o){const c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!d)return!1;if(!Bo(c,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(tn(c))} instead.`);if(!Bo(d,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${Kn(tn(d))} instead.`);return d.indexOf(c)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class O{constructor(o,c,d){this.type=lr,this.needle=o,this.haystack=c,this.fromIndex=d}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Tn),g=c.parse(o[2],2,Tn);if(!d||!g)return null;if(!Xa(d.type,[Sn,$r,lr,Xo,Tn]))return c.error(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(d.type)} instead`);if(o.length===4){const x=c.parse(o[3],3,lr);return x?new O(d,g,x):null}return new O(d,g)}evaluate(o){const c=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!Bo(c,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${Kn(tn(c))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(o)),Bo(d,["string"])){const x=d.indexOf(c,g);return x===-1?-1:[...d.slice(0,x)].length}if(Bo(d,["array"]))return d.indexOf(c,g);throw new ii(`Expected second argument to be of type array or string, but found ${Kn(tn(d))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class ue{constructor(o,c,d,g,x,w){this.inputType=o,this.type=c,this.input=d,this.cases=g,this.outputs=x,this.otherwise=w}static parse(o,c){if(o.length<5)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return c.error("Expected an even number of arguments.");let d,g;c.expectedType&&c.expectedType.kind!=="value"&&(g=c.expectedType);const x={},w=[];for(let N=2;N<o.length-1;N+=2){let j=o[N];const H=o[N+1];Array.isArray(j)||(j=[j]);const te=c.concat(N);if(j.length===0)return te.error("Expected at least one branch label.");for(const se of j){if(typeof se!="number"&&typeof se!="string")return te.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return te.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return te.error("Numeric branch labels must be integer values.");if(d){if(te.checkSubtype(d,tn(se)))return null}else d=tn(se);if(x[String(se)]!==void 0)return te.error("Branch labels must be unique.");x[String(se)]=w.length}const ie=c.parse(H,N,g);if(!ie)return null;g=g||ie.type,w.push(ie)}const A=c.parse(o[1],1,Tn);if(!A)return null;const L=c.parse(o[o.length-1],o.length-1,g);return L?A.type.kind!=="value"&&c.concat(1).checkSubtype(d,A.type)?null:new ue(d,g,A,x,w,L):null}evaluate(o){const c=this.input.evaluate(o);return(tn(c)===this.inputType&&this.outputs[this.cases[c]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Le{constructor(o,c,d){this.type=o,this.branches=c,this.otherwise=d}static parse(o,c){if(o.length<4)return c.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return c.error("Expected an odd number of arguments.");let d;c.expectedType&&c.expectedType.kind!=="value"&&(d=c.expectedType);const g=[];for(let w=1;w<o.length-1;w+=2){const A=c.parse(o[w],w,Sn);if(!A)return null;const L=c.parse(o[w+1],w+1,d);if(!L)return null;g.push([A,L]),d=d||L.type}const x=c.parse(o[o.length-1],o.length-1,d);if(!x)return null;if(!d)throw new Error("Can't infer output type");return new Le(d,g,x)}evaluate(o){for(const[c,d]of this.branches)if(c.evaluate(o))return d.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[c,d]of this.branches)o(c),o(d);o(this.otherwise)}outputDefined(){return this.branches.every(([o,c])=>c.outputDefined())&&this.otherwise.outputDefined()}}class ut{constructor(o,c,d,g){this.type=o,this.input=c,this.beginIndex=d,this.endIndex=g}static parse(o,c){if(o.length<=2||o.length>=5)return c.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const d=c.parse(o[1],1,Tn),g=c.parse(o[2],2,lr);if(!d||!g)return null;if(!Xa(d.type,[Yo(Tn),$r,Tn]))return c.error(`Expected first argument to be of type array or string, but found ${Kn(d.type)} instead`);if(o.length===4){const x=c.parse(o[3],3,lr);return x?new ut(d.type,d,g,x):null}return new ut(d.type,d,g)}evaluate(o){const c=this.input.evaluate(o),d=this.beginIndex.evaluate(o);let g;if(this.endIndex&&(g=this.endIndex.evaluate(o)),Bo(c,["string"]))return[...c].slice(d,g).join("");if(Bo(c,["array"]))return c.slice(d,g);throw new ii(`Expected first argument to be of type array or string, but found ${Kn(tn(c))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Et(h,o){const c=h.length-1;let d,g,x=0,w=c,A=0;for(;x<=w;)if(A=Math.floor((x+w)/2),d=h[A],g=h[A+1],d<=o){if(A===c||o<g)return A;x=A+1}else{if(!(d>o))throw new ii("Input is not a number.");w=A-1}return 0}class Wt{constructor(o,c,d){this.type=o,this.input=c,this.labels=[],this.outputs=[];for(const[g,x]of d)this.labels.push(g),this.outputs.push(x)}static parse(o,c){if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");const d=c.parse(o[1],1,lr);if(!d)return null;const g=[];let x=null;c.expectedType&&c.expectedType.kind!=="value"&&(x=c.expectedType);for(let w=1;w<o.length;w+=2){const A=w===1?-1/0:o[w],L=o[w+1],N=w,j=w+1;if(typeof A!="number")return c.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(g.length&&g[g.length-1][0]>=A)return c.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const H=c.parse(L,j,x);if(!H)return null;x=x||H.type,g.push([A,H])}return new Wt(x,d,g)}evaluate(o){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);const g=this.input.evaluate(o);if(g<=c[0])return d[0].evaluate(o);const x=c.length;return g>=c[x-1]?d[x-1].evaluate(o):d[Et(c,g)].evaluate(o)}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function or(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Or,Zr,wn=function(){if(Zr)return Or;function h(o,c,d,g){this.cx=3*o,this.bx=3*(d-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*c,this.by=3*(g-c)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=c,this.p2x=d,this.p2y=g}return Zr=1,Or=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,c){if(c===void 0&&(c=1e-6),o<0)return 0;if(o>1)return 1;for(var d=o,g=0;g<8;g++){var x=this.sampleCurveX(d)-o;if(Math.abs(x)<c)return d;var w=this.sampleCurveDerivativeX(d);if(Math.abs(w)<1e-6)break;d-=x/w}var A=0,L=1;for(d=o,g=0;g<20&&(x=this.sampleCurveX(d),!(Math.abs(x-o)<c));g++)o>x?A=d:L=d,d=.5*(L-A)+A;return d},solve:function(o,c){return this.sampleCurveY(this.solveCurveX(o,c))}},Or}(),Rn=or(wn);class _n{constructor(o,c,d,g,x){this.type=o,this.operator=c,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[w,A]of x)this.labels.push(w),this.outputs.push(A)}static interpolationFactor(o,c,d,g){let x=0;if(o.name==="exponential")x=_i(c,o.base,d,g);else if(o.name==="linear")x=_i(c,1,d,g);else if(o.name==="cubic-bezier"){const w=o.controlPoints;x=new Rn(w[0],w[1],w[2],w[3]).solve(_i(c,1,d,g))}return x}static parse(o,c){let[d,g,x,...w]=o;if(!Array.isArray(g)||g.length===0)return c.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const N=g[1];if(typeof N!="number")return c.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:N}}else{if(g[0]!=="cubic-bezier")return c.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const N=g.slice(1);if(N.length!==4||N.some(j=>typeof j!="number"||j<0||j>1))return c.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:N}}}if(o.length-1<4)return c.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return c.error("Expected an even number of arguments.");if(x=c.parse(x,2,lr),!x)return null;const A=[];let L=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||c.expectedType==Ws?c.expectedType&&c.expectedType.kind!=="value"&&(L=c.expectedType):L=ro;for(let N=0;N<w.length;N+=2){const j=w[N],H=w[N+1],te=N+3,ie=N+4;if(typeof j!="number")return c.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',te);if(A.length&&A[A.length-1][0]>=j)return c.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',te);const se=c.parse(H,ie,L);if(!se)return null;L=L||se.type,A.push([j,se])}return Ps(L,lr)||Ps(L,Hs)||Ps(L,ro)||Ps(L,Si)||Ps(L,Zs)||Ps(L,Ws)||Ps(L,Xs)||Ps(L,Yo(lr))?new _n(L,d,g,x,A):c.error(`Type ${Kn(L)} is not interpolatable.`)}evaluate(o){const c=this.labels,d=this.outputs;if(c.length===1)return d[0].evaluate(o);const g=this.input.evaluate(o);if(g<=c[0])return d[0].evaluate(o);const x=c.length;if(g>=c[x-1])return d[x-1].evaluate(o);const w=Et(c,g),A=_n.interpolationFactor(this.interpolation,g,c[w],c[w+1]),L=d[w].evaluate(o),N=d[w+1].evaluate(o);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ar(L,N,A);case"color":return jr.interpolate(L,N,A);case"padding":return xn.interpolate(L,N,A);case"colorArray":return Pn.interpolate(L,N,A);case"numberArray":return Jn.interpolate(L,N,A);case"variableAnchorOffsetCollection":return Wr.interpolate(L,N,A);case"array":return an(L,N,A);case"projectionDefinition":return vn.interpolate(L,N,A)}case"interpolate-hcl":switch(this.type.kind){case"color":return jr.interpolate(L,N,A,"hcl");case"colorArray":return Pn.interpolate(L,N,A,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return jr.interpolate(L,N,A,"lab");case"colorArray":return Pn.interpolate(L,N,A,"lab")}}}eachChild(o){o(this.input);for(const c of this.outputs)o(c)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function _i(h,o,c,d){const g=d-c,x=h-c;return g===0?0:o===1?x/g:(Math.pow(o,x)-1)/(Math.pow(o,g)-1)}const fi={color:jr.interpolate,number:ar,padding:xn.interpolate,numberArray:Jn.interpolate,colorArray:Pn.interpolate,variableAnchorOffsetCollection:Wr.interpolate,array:an};class Fn{constructor(o,c){this.type=o,this.args=c}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");let d=null;const g=c.expectedType;g&&g.kind!=="value"&&(d=g);const x=[];for(const A of o.slice(1)){const L=c.parse(A,1+x.length,d,void 0,{typeAnnotation:"omit"});if(!L)return null;d=d||L.type,x.push(L)}if(!d)throw new Error("No output type");const w=g&&x.some(A=>As(g,A.type));return new Fn(w?Tn:d,x)}evaluate(o){let c,d=null,g=0;for(const x of this.args)if(g++,d=x.evaluate(o),d&&d instanceof vo&&!d.available&&(c||(c=d.name),d=null,g===this.args.length&&(d=c)),d!==null)break;return d}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function qi(h,o){return h==="=="||h==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Ci(h,o,c,d){return d.compare(o,c)===0}function Ui(h,o,c){const d=h!=="=="&&h!=="!=";return class KD{constructor(x,w,A){this.type=Sn,this.lhs=x,this.rhs=w,this.collator=A,this.hasUntypedArgument=x.type.kind==="value"||w.type.kind==="value"}static parse(x,w){if(x.length!==3&&x.length!==4)return w.error("Expected two or three arguments.");const A=x[0];let L=w.parse(x[1],1,Tn);if(!L)return null;if(!qi(A,L.type))return w.concat(1).error(`"${A}" comparisons are not supported for type '${Kn(L.type)}'.`);let N=w.parse(x[2],2,Tn);if(!N)return null;if(!qi(A,N.type))return w.concat(2).error(`"${A}" comparisons are not supported for type '${Kn(N.type)}'.`);if(L.type.kind!==N.type.kind&&L.type.kind!=="value"&&N.type.kind!=="value")return w.error(`Cannot compare types '${Kn(L.type)}' and '${Kn(N.type)}'.`);d&&(L.type.kind==="value"&&N.type.kind!=="value"?L=new To(N.type,[L]):L.type.kind!=="value"&&N.type.kind==="value"&&(N=new To(L.type,[N])));let j=null;if(x.length===4){if(L.type.kind!=="string"&&N.type.kind!=="string"&&L.type.kind!=="value"&&N.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(j=w.parse(x[3],3,ha),!j)return null}return new KD(L,N,j)}evaluate(x){const w=this.lhs.evaluate(x),A=this.rhs.evaluate(x);if(d&&this.hasUntypedArgument){const L=tn(w),N=tn(A);if(L.kind!==N.kind||L.kind!=="string"&&L.kind!=="number")throw new ii(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${L.kind}, ${N.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const L=tn(w),N=tn(A);if(L.kind!=="string"||N.kind!=="string")return o(x,w,A)}return this.collator?c(x,w,A,this.collator.evaluate(x)):o(x,w,A)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Ja=Ui("==",function(h,o,c){return o===c},Ci),Qs=Ui("!=",function(h,o,c){return o!==c},function(h,o,c,d){return!Ci(0,o,c,d)}),gu=Ui("<",function(h,o,c){return o<c},function(h,o,c,d){return d.compare(o,c)<0}),Kc=Ui(">",function(h,o,c){return o>c},function(h,o,c,d){return d.compare(o,c)>0}),yu=Ui("<=",function(h,o,c){return o<=c},function(h,o,c,d){return d.compare(o,c)<=0}),Na=Ui(">=",function(h,o,c){return o>=c},function(h,o,c,d){return d.compare(o,c)>=0});class Ul{constructor(o,c,d){this.type=ha,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=c}static parse(o,c){if(o.length!==2)return c.error("Expected one argument.");const d=o[1];if(typeof d!="object"||Array.isArray(d))return c.error("Collator options argument must be an object.");const g=c.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Sn);if(!g)return null;const x=c.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Sn);if(!x)return null;let w=null;return d.locale&&(w=c.parse(d.locale,1,$r),!w)?null:new Ul(g,x,w)}evaluate(o){return new yn(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class El{constructor(o,c,d,g,x){this.type=$r,this.number=o,this.locale=c,this.currency=d,this.minFractionDigits=g,this.maxFractionDigits=x}static parse(o,c){if(o.length!==3)return c.error("Expected two arguments.");const d=c.parse(o[1],1,lr);if(!d)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return c.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=c.parse(g.locale,1,$r),!x))return null;let w=null;if(g.currency&&(w=c.parse(g.currency,1,$r),!w))return null;let A=null;if(g["min-fraction-digits"]&&(A=c.parse(g["min-fraction-digits"],1,lr),!A))return null;let L=null;return g["max-fraction-digits"]&&(L=c.parse(g["max-fraction-digits"],1,lr),!L)?null:new El(d,x,w,A,L)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Qa{constructor(o){this.type=Sl,this.sections=o}static parse(o,c){if(o.length<2)return c.error("Expected at least one argument.");const d=o[1];if(!Array.isArray(d)&&typeof d=="object")return c.error("First argument must be an image or text section.");const g=[];let x=!1;for(let w=1;w<=o.length-1;++w){const A=o[w];if(x&&typeof A=="object"&&!Array.isArray(A)){x=!1;let L=null;if(A["font-scale"]&&(L=c.parse(A["font-scale"],1,lr),!L))return null;let N=null;if(A["text-font"]&&(N=c.parse(A["text-font"],1,Yo($r)),!N))return null;let j=null;if(A["text-color"]&&(j=c.parse(A["text-color"],1,ro),!j))return null;let H=null;if(A["vertical-align"]){if(typeof A["vertical-align"]=="string"&&!Vr.includes(A["vertical-align"]))return c.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${A["vertical-align"]}' instead.`);if(H=c.parse(A["vertical-align"],1,$r),!H)return null}const te=g[g.length-1];te.scale=L,te.font=N,te.textColor=j,te.verticalAlign=H}else{const L=c.parse(o[w],1,Tn);if(!L)return null;const N=L.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return c.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:L,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Qa(g)}evaluate(o){return new Ir(this.sections.map(c=>{const d=c.content.evaluate(o);return tn(d)===Un?new Zt("",d,null,null,null,c.verticalAlign?c.verticalAlign.evaluate(o):null):new Zt(Ks(d),null,c.scale?c.scale.evaluate(o):null,c.font?c.font.evaluate(o).join(","):null,c.textColor?c.textColor.evaluate(o):null,c.verticalAlign?c.verticalAlign.evaluate(o):null)}))}eachChild(o){for(const c of this.sections)o(c.content),c.scale&&o(c.scale),c.font&&o(c.font),c.textColor&&o(c.textColor),c.verticalAlign&&o(c.verticalAlign)}outputDefined(){return!1}}class no{constructor(o){this.type=Un,this.input=o}static parse(o,c){if(o.length!==2)return c.error("Expected two arguments.");const d=c.parse(o[1],1,$r);return d?new no(d):c.error("No image name provided.")}evaluate(o){const c=this.input.evaluate(o),d=vo.fromString(c);return d&&o.availableImages&&(d.available=o.availableImages.indexOf(c)>-1),d}eachChild(o){o(this.input)}outputDefined(){return!1}}class $o{constructor(o){this.type=lr,this.input=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const d=c.parse(o[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?c.error(`Expected argument of type string or array, but found ${Kn(d.type)} instead.`):new $o(d):null}evaluate(o){const c=this.input.evaluate(o);if(typeof c=="string")return[...c].length;if(Array.isArray(c))return c.length;throw new ii(`Expected value to be of type string or array, but found ${Kn(tn(c))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const ki=8192;function ps(h,o){const c=(180+h[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(c*g*ki),Math.round(d*g*ki)]}function el(h,o){const c=Math.pow(2,o.z);return[(g=(h[0]/ki+o.x)/c,360*g-180),(d=(h[1]/ki+o.y)/c,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,g}function Li(h,o){h[0]=Math.min(h[0],o[0]),h[1]=Math.min(h[1],o[1]),h[2]=Math.max(h[2],o[0]),h[3]=Math.max(h[3],o[1])}function Vl(h,o){return!(h[0]<=o[0]||h[2]>=o[2]||h[1]<=o[1]||h[3]>=o[3])}function tl(h,o,c){const d=h[0]-o[0],g=h[1]-o[1],x=h[0]-c[0],w=h[1]-c[1];return d*w-x*g==0&&d*x<=0&&g*w<=0}function ms(h,o,c,d){return(g=[d[0]-c[0],d[1]-c[1]])[0]*(x=[o[0]-h[0],o[1]-h[1]])[1]-g[1]*x[0]!=0&&!(!rl(h,o,c,d)||!rl(c,d,h,o));var g,x}function ho(h,o,c){for(const d of c)for(let g=0;g<d.length-1;++g)if(ms(h,o,d[g],d[g+1]))return!0;return!1}function jo(h,o,c=!1){let d=!1;for(const A of o)for(let L=0;L<A.length-1;L++){if(tl(h,A[L],A[L+1]))return c;(x=A[L])[1]>(g=h)[1]!=(w=A[L+1])[1]>g[1]&&g[0]<(w[0]-x[0])*(g[1]-x[1])/(w[1]-x[1])+x[0]&&(d=!d)}var g,x,w;return d}function gc(h,o){for(const c of o)if(jo(h,c))return!0;return!1}function Hu(h,o){for(const c of h)if(!jo(c,o))return!1;for(let c=0;c<h.length-1;++c)if(ho(h[c],h[c+1],o))return!1;return!0}function Tl(h,o){for(const c of o)if(Hu(h,c))return!0;return!1}function rl(h,o,c,d){const g=d[0]-c[0],x=d[1]-c[1],w=(h[0]-c[0])*x-g*(h[1]-c[1]),A=(o[0]-c[0])*x-g*(o[1]-c[1]);return w>0&&A<0||w<0&&A>0}function Ao(h,o,c){const d=[];for(let g=0;g<h.length;g++){const x=[];for(let w=0;w<h[g].length;w++){const A=ps(h[g][w],c);Li(o,A),x.push(A)}d.push(x)}return d}function _o(h,o,c){const d=[];for(let g=0;g<h.length;g++){const x=Ao(h[g],o,c);d.push(x)}return d}function ql(h,o,c,d){if(h[0]<c[0]||h[0]>c[2]){const g=.5*d;let x=h[0]-c[0]>g?-d:c[0]-h[0]>g?d:0;x===0&&(x=h[0]-c[2]>g?-d:c[2]-h[0]>g?d:0),h[0]+=x}Li(o,h)}function Po(h,o,c,d){const g=Math.pow(2,d.z)*ki,x=[d.x*ki,d.y*ki],w=[];for(const A of h)for(const L of A){const N=[L.x+x[0],L.y+x[1]];ql(N,o,c,g),w.push(N)}return w}function nl(h,o,c,d){const g=Math.pow(2,d.z)*ki,x=[d.x*ki,d.y*ki],w=[];for(const L of h){const N=[];for(const j of L){const H=[j.x+x[0],j.y+x[1]];Li(o,H),N.push(H)}w.push(N)}if(o[2]-o[0]<=g/2){(A=o)[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(const L of w)for(const N of L)ql(N,o,c,g)}var A;return w}class Ko{constructor(o,c){this.type=Sn,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ka(o[1])){const d=o[1];if(d.type==="FeatureCollection"){const g=[];for(const x of d.features){const{type:w,coordinates:A}=x.geometry;w==="Polygon"&&g.push(A),w==="MultiPolygon"&&g.push(...A)}if(g.length)return new Ko(d,{type:"MultiPolygon",coordinates:g})}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Ko(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Ko(d,d)}return c.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(d.type==="Polygon"){const A=Ao(d.coordinates,x,w),L=Po(c.geometry(),g,x,w);if(!Vl(g,x))return!1;for(const N of L)if(!jo(N,A))return!1}if(d.type==="MultiPolygon"){const A=_o(d.coordinates,x,w),L=Po(c.geometry(),g,x,w);if(!Vl(g,x))return!1;for(const N of L)if(!gc(N,A))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=c.canonicalID();if(d.type==="Polygon"){const A=Ao(d.coordinates,x,w),L=nl(c.geometry(),g,x,w);if(!Vl(g,x))return!1;for(const N of L)if(!Hu(N,A))return!1}if(d.type==="MultiPolygon"){const A=_o(d.coordinates,x,w),L=nl(c.geometry(),g,x,w);if(!Vl(g,x))return!1;for(const N of L)if(!Tl(N,A))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let il=class{constructor(h=[],o=(c,d)=>c<d?-1:c>d?1:0){if(this.data=h,this.length=this.data.length,this.compare=o,this.length>0)for(let c=(this.length>>1)-1;c>=0;c--)this._down(c)}push(h){this.data.push(h),this._up(this.length++)}pop(){if(this.length===0)return;const h=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),h}peek(){return this.data[0]}_up(h){const{data:o,compare:c}=this,d=o[h];for(;h>0;){const g=h-1>>1,x=o[g];if(c(d,x)>=0)break;o[h]=x,h=g}o[h]=d}_down(h){const{data:o,compare:c}=this,d=this.length>>1,g=o[h];for(;h<d;){let x=1+(h<<1);const w=x+1;if(w<this.length&&c(o[w],o[x])<0&&(x=w),c(o[x],g)>=0)break;o[h]=o[x],h=x}o[h]=g}};function Gi(h,o,c=0,d=h.length-1,g=gs){for(;d>c;){if(d-c>600){const L=d-c+1,N=o-c+1,j=Math.log(L),H=.5*Math.exp(2*j/3),te=.5*Math.sqrt(j*H*(L-H)/L)*(N-L/2<0?-1:1);Gi(h,o,Math.max(c,Math.floor(o-N*H/L+te)),Math.min(d,Math.floor(o+(L-N)*H/L+te)),g)}const x=h[o];let w=c,A=d;for(Ms(h,c,o),g(h[d],x)>0&&Ms(h,c,d);w<A;){for(Ms(h,w,A),w++,A--;g(h[w],x)<0;)w++;for(;g(h[A],x)>0;)A--}g(h[c],x)===0?Ms(h,c,A):(A++,Ms(h,A,d)),A<=o&&(c=A+1),o<=A&&(d=A-1)}}function Ms(h,o,c){const d=h[o];h[o]=h[c],h[c]=d}function gs(h,o){return h<o?-1:h>o?1:0}function Oa(h,o){if(h.length<=1)return[h];const c=[];let d,g;for(const x of h){const w=_u(x);w!==0&&(x.area=Math.abs(w),g===void 0&&(g=w<0),g===w<0?(d&&c.push(d),d=[x]):d.push(x))}if(d&&c.push(d),o>1)for(let x=0;x<c.length;x++)c[x].length<=o||(Gi(c[x],o,1,c[x].length-1,vu),c[x]=c[x].slice(0,o));return c}function vu(h,o){return o.area-h.area}function _u(h){let o=0;for(let c,d,g=0,x=h.length,w=x-1;g<x;w=g++)c=h[g],d=h[w],o+=(d.x-c.x)*(c.y+d.y);return o}const ks=1/298.257223563,Gl=ks*(2-ks),Hl=Math.PI/180;class _t{constructor(o){const c=6378.137*Hl*1e3,d=Math.cos(o*Hl),g=1/(1-Gl*(1-d*d)),x=Math.sqrt(g);this.kx=c*x*d,this.ky=c*x*g*(1-Gl)}distance(o,c){const d=this.wrap(o[0]-c[0])*this.kx,g=(o[1]-c[1])*this.ky;return Math.sqrt(d*d+g*g)}pointOnLine(o,c){let d,g,x,w,A=1/0;for(let L=0;L<o.length-1;L++){let N=o[L][0],j=o[L][1],H=this.wrap(o[L+1][0]-N)*this.kx,te=(o[L+1][1]-j)*this.ky,ie=0;H===0&&te===0||(ie=(this.wrap(c[0]-N)*this.kx*H+(c[1]-j)*this.ky*te)/(H*H+te*te),ie>1?(N=o[L+1][0],j=o[L+1][1]):ie>0&&(N+=H/this.kx*ie,j+=te/this.ky*ie)),H=this.wrap(c[0]-N)*this.kx,te=(c[1]-j)*this.ky;const se=H*H+te*te;se<A&&(A=se,d=N,g=j,x=L,w=ie)}return{point:[d,g],index:x,t:Math.max(0,Math.min(1,w))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function Tt(h,o){return o[0]-h[0]}function br(h){return h[1]-h[0]+1}function kr(h,o){return h[1]>=h[0]&&h[1]<o}function Wn(h,o){if(h[0]>h[1])return[null,null];const c=br(h);if(o){if(c===2)return[h,null];const g=Math.floor(c/2);return[[h[0],h[0]+g],[h[0]+g,h[1]]]}if(c===1)return[h,null];const d=Math.floor(c/2)-1;return[[h[0],h[0]+d],[h[0]+d+1,h[1]]]}function Yr(h,o){if(!kr(o,h.length))return[1/0,1/0,-1/0,-1/0];const c=[1/0,1/0,-1/0,-1/0];for(let d=o[0];d<=o[1];++d)Li(c,h[d]);return c}function Cn(h){const o=[1/0,1/0,-1/0,-1/0];for(const c of h)for(const d of c)Li(o,d);return o}function Bn(h){return h[0]!==-1/0&&h[1]!==-1/0&&h[2]!==1/0&&h[3]!==1/0}function ui(h,o,c){if(!Bn(h)||!Bn(o))return NaN;let d=0,g=0;return h[2]<o[0]&&(d=o[0]-h[2]),h[0]>o[2]&&(d=h[0]-o[2]),h[1]>o[3]&&(g=h[1]-o[3]),h[3]<o[1]&&(g=o[1]-h[3]),c.distance([0,0],[d,g])}function ci(h,o,c){const d=c.pointOnLine(o,h);return c.distance(h,d.point)}function Di(h,o,c,d,g){const x=Math.min(ci(h,[c,d],g),ci(o,[c,d],g)),w=Math.min(ci(c,[h,o],g),ci(d,[h,o],g));return Math.min(x,w)}function Io(h,o,c,d,g){if(!kr(o,h.length)||!kr(d,c.length))return 1/0;let x=1/0;for(let w=o[0];w<o[1];++w){const A=h[w],L=h[w+1];for(let N=d[0];N<d[1];++N){const j=c[N],H=c[N+1];if(ms(A,L,j,H))return 0;x=Math.min(x,Di(A,L,j,H,g))}}return x}function es(h,o,c,d,g){if(!kr(o,h.length)||!kr(d,c.length))return NaN;let x=1/0;for(let w=o[0];w<=o[1];++w)for(let A=d[0];A<=d[1];++A)if(x=Math.min(x,g.distance(h[w],c[A])),x===0)return x;return x}function fa(h,o,c){if(jo(h,o,!0))return 0;let d=1/0;for(const g of o){const x=g[0],w=g[g.length-1];if(x!==w&&(d=Math.min(d,ci(h,[w,x],c)),d===0))return d;const A=c.pointOnLine(g,h);if(d=Math.min(d,c.distance(h,A.point)),d===0)return d}return d}function ol(h,o,c,d){if(!kr(o,h.length))return NaN;for(let x=o[0];x<=o[1];++x)if(jo(h[x],c,!0))return 0;let g=1/0;for(let x=o[0];x<o[1];++x){const w=h[x],A=h[x+1];for(const L of c)for(let N=0,j=L.length,H=j-1;N<j;H=N++){const te=L[H],ie=L[N];if(ms(w,A,te,ie))return 0;g=Math.min(g,Di(w,A,te,ie,d))}}return g}function Wl(h,o){for(const c of h)for(const d of c)if(jo(d,o,!0))return!0;return!1}function yc(h,o,c,d=1/0){const g=Cn(h),x=Cn(o);if(d!==1/0&&ui(g,x,c)>=d)return d;if(Vl(g,x)){if(Wl(h,o))return 0}else if(Wl(o,h))return 0;let w=1/0;for(const A of h)for(let L=0,N=A.length,j=N-1;L<N;j=L++){const H=A[j],te=A[L];for(const ie of o)for(let se=0,fe=ie.length,Te=fe-1;se<fe;Te=se++){const Fe=ie[Te],dt=ie[se];if(ms(H,te,Fe,dt))return 0;w=Math.min(w,Di(H,te,Fe,dt,c))}}return w}function Zl(h,o,c,d,g,x){if(!x)return;const w=ui(Yr(d,x),g,c);w<o&&h.push([w,x,[0,0]])}function Al(h,o,c,d,g,x,w){if(!x||!w)return;const A=ui(Yr(d,x),Yr(g,w),c);A<o&&h.push([A,x,w])}function Wu(h,o,c,d,g=1/0){let x=Math.min(d.distance(h[0],c[0][0]),g);if(x===0)return x;const w=new il([[0,[0,h.length-1],[0,0]]],Tt),A=Cn(c);for(;w.length>0;){const L=w.pop();if(L[0]>=x)continue;const N=L[1],j=o?50:100;if(br(N)<=j){if(!kr(N,h.length))return NaN;if(o){const H=ol(h,N,c,d);if(isNaN(H)||H===0)return H;x=Math.min(x,H)}else for(let H=N[0];H<=N[1];++H){const te=fa(h[H],c,d);if(x=Math.min(x,te),x===0)return 0}}else{const H=Wn(N,o);Zl(w,x,d,h,A,H[0]),Zl(w,x,d,h,A,H[1])}}return x}function vc(h,o,c,d,g,x=1/0){let w=Math.min(x,g.distance(h[0],c[0]));if(w===0)return w;const A=new il([[0,[0,h.length-1],[0,c.length-1]]],Tt);for(;A.length>0;){const L=A.pop();if(L[0]>=w)continue;const N=L[1],j=L[2],H=o?50:100,te=d?50:100;if(br(N)<=H&&br(j)<=te){if(!kr(N,h.length)&&kr(j,c.length))return NaN;let ie;if(o&&d)ie=Io(h,N,c,j,g),w=Math.min(w,ie);else if(o&&!d){const se=h.slice(N[0],N[1]+1);for(let fe=j[0];fe<=j[1];++fe)if(ie=ci(c[fe],se,g),w=Math.min(w,ie),w===0)return w}else if(!o&&d){const se=c.slice(j[0],j[1]+1);for(let fe=N[0];fe<=N[1];++fe)if(ie=ci(h[fe],se,g),w=Math.min(w,ie),w===0)return w}else ie=es(h,N,c,j,g),w=Math.min(w,ie)}else{const ie=Wn(N,o),se=Wn(j,d);Al(A,w,g,h,c,ie[0],se[0]),Al(A,w,g,h,c,ie[0],se[1]),Al(A,w,g,h,c,ie[1],se[0]),Al(A,w,g,h,c,ie[1],se[1])}}return w}function Jc(h){return h.type==="MultiPolygon"?h.coordinates.map(o=>({type:"Polygon",coordinates:o})):h.type==="MultiLineString"?h.coordinates.map(o=>({type:"LineString",coordinates:o})):h.type==="MultiPoint"?h.coordinates.map(o=>({type:"Point",coordinates:o})):[h]}class oi{constructor(o,c){this.type=lr,this.geojson=o,this.geometries=c}static parse(o,c){if(o.length!==2)return c.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ka(o[1])){const d=o[1];if(d.type==="FeatureCollection")return new oi(d,d.features.map(g=>Jc(g.geometry)).flat());if(d.type==="Feature")return new oi(d,Jc(d.geometry));if("type"in d&&"coordinates"in d)return new oi(d,Jc(d))}return c.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(c,d){const g=c.geometry(),x=g.flat().map(L=>el([L.x,L.y],c.canonical));if(g.length===0)return NaN;const w=new _t(x[0][1]);let A=1/0;for(const L of d){switch(L.type){case"Point":A=Math.min(A,vc(x,!1,[L.coordinates],!1,w,A));break;case"LineString":A=Math.min(A,vc(x,!1,L.coordinates,!0,w,A));break;case"Polygon":A=Math.min(A,Wu(x,!1,L.coordinates,w,A))}if(A===0)return A}return A}(o,this.geometries);if(o.geometryType()==="LineString")return function(c,d){const g=c.geometry(),x=g.flat().map(L=>el([L.x,L.y],c.canonical));if(g.length===0)return NaN;const w=new _t(x[0][1]);let A=1/0;for(const L of d){switch(L.type){case"Point":A=Math.min(A,vc(x,!0,[L.coordinates],!1,w,A));break;case"LineString":A=Math.min(A,vc(x,!0,L.coordinates,!0,w,A));break;case"Polygon":A=Math.min(A,Wu(x,!0,L.coordinates,w,A))}if(A===0)return A}return A}(o,this.geometries);if(o.geometryType()==="Polygon")return function(c,d){const g=c.geometry();if(g.length===0||g[0].length===0)return NaN;const x=Oa(g,0).map(L=>L.map(N=>N.map(j=>el([j.x,j.y],c.canonical)))),w=new _t(x[0][0][0][1]);let A=1/0;for(const L of d)for(const N of x){switch(L.type){case"Point":A=Math.min(A,Wu([L.coordinates],!1,N,w,A));break;case"LineString":A=Math.min(A,Wu(L.coordinates,!0,N,w,A));break;case"Polygon":A=Math.min(A,yc(N,L.coordinates,w,A))}if(A===0)return A}return A}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ai{constructor(o){this.type=Tn,this.key=o}static parse(o,c){if(o.length!==2)return c.error(`Expected 1 argument, but found ${o.length-1} instead.`);const d=o[1];return d==null?c.error("Global state property must be defined."):typeof d!="string"?c.error(`Global state property must be string, but found ${typeof o[1]} instead.`):new ai(d)}evaluate(o){var c;const d=(c=o.globals)===null||c===void 0?void 0:c.globalState;return d&&Object.keys(d).length!==0?Ye(d,this.key):null}eachChild(){}outputDefined(){return!1}}const al={"==":Ja,"!=":Qs,">":Kc,"<":gu,">=":Na,"<=":yu,array:To,at:gi,boolean:To,case:Le,coalesce:Fn,collator:Ul,format:Qa,image:no,in:zo,"index-of":O,interpolate:_n,"interpolate-hcl":_n,"interpolate-lab":_n,length:$o,let:Js,literal:co,match:ue,number:To,"number-format":El,object:To,slice:ut,step:Wt,string:To,"to-boolean":Ra,"to-color":Ra,"to-number":Ra,"to-string":Ra,var:Sa,within:Ko,distance:oi,"global-state":ai};class Hi{constructor(o,c,d,g){this.name=o,this.type=c,this._evaluate=d,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,c){const d=o[0],g=Hi.definitions[d];if(!g)return c.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,A=w.filter(([N])=>!Array.isArray(N)||N.length===o.length-1);let L=null;for(const[N,j]of A){L=new ds(c.registry,Pl,c.path,null,c.scope);const H=[];let te=!1;for(let ie=1;ie<o.length;ie++){const se=o[ie],fe=Array.isArray(N)?N[ie-1]:N.type,Te=L.parse(se,1+H.length,fe);if(!Te){te=!0;break}H.push(Te)}if(!te)if(Array.isArray(N)&&N.length!==H.length)L.error(`Expected ${N.length} arguments, but found ${H.length} instead.`);else{for(let ie=0;ie<H.length;ie++){const se=Array.isArray(N)?N[ie]:N.type,fe=H[ie];L.concat(ie+1).checkSubtype(se,fe.type)}if(L.errors.length===0)return new Hi(d,x,j,H)}}if(A.length===1)c.errors.push(...L.errors);else{const N=(A.length?A:w).map(([H])=>{return te=H,Array.isArray(te)?`(${te.map(Kn).join(", ")})`:`(${Kn(te.type)}...)`;var te}).join(" | "),j=[];for(let H=1;H<o.length;H++){const te=c.parse(o[H],1+j.length);if(!te)return null;j.push(Kn(te.type))}c.error(`Expected arguments of type ${N}, but found (${j.join(", ")}) instead.`)}return null}static register(o,c){Hi.definitions=c;for(const d in c)o[d]=Hi}}function _c(h,[o,c,d,g]){o=o.evaluate(h),c=c.evaluate(h),d=d.evaluate(h);const x=g?g.evaluate(h):1,w=sn(o,c,d,x);if(w)throw new ii(w);return new jr(o/255,c/255,d/255,x,!1)}function Fa(h,o){return h in o}function ys(h,o){const c=o[h];return c===void 0?null:c}function Ca(h){return{type:h}}function Pl(h){if(h instanceof Sa)return Pl(h.boundExpression);if(h instanceof Hi&&h.name==="error"||h instanceof Ul||h instanceof Ko||h instanceof oi||h instanceof ai)return!1;const o=h instanceof Ra||h instanceof To;let c=!0;return h.eachChild(d=>{c=o?c&&Pl(d):c&&d instanceof co}),!!c&&Xl(h)&&ts(h,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Xl(h){if(h instanceof Hi&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Ko||h instanceof oi)return!1;let o=!0;return h.eachChild(c=>{o&&!Xl(c)&&(o=!1)}),o}function Ls(h){if(h instanceof Hi&&h.name==="feature-state")return!1;let o=!0;return h.eachChild(c=>{o&&!Ls(c)&&(o=!1)}),o}function ts(h,o){if(h instanceof Hi&&o.indexOf(h.name)>=0)return!1;let c=!0;return h.eachChild(d=>{c&&!ts(d,o)&&(c=!1)}),c}function bc(h){return{result:"success",value:h}}function vs(h){return{result:"error",value:h}}function bo(h){return h["property-type"]==="data-driven"||h["property-type"]==="cross-faded-data-driven"}function Jo(h){return!!h.expression&&h.expression.parameters.indexOf("zoom")>-1}function Il(h){return!!h.expression&&h.expression.interpolated}function Mn(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}function Ds(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)&&tn(h)===ca}function Yl(h){return h}function Nh(h,o){const c=h.stops&&typeof h.stops[0][0]=="object",d=c||!(c||h.property!==void 0),g=h.type||(Il(o)?"exponential":"interval"),x=function(j){switch(j.type){case"color":return jr.parse;case"padding":return xn.parse;case"numberArray":return Jn.parse;case"colorArray":return Pn.parse;default:return null}}(o);if(x&&((h=Bi({},h)).stops&&(h.stops=h.stops.map(j=>[j[0],x(j[1])])),h.default=x(h.default?h.default:o.default)),h.colorSpace&&(w=h.colorSpace)!=="rgb"&&w!=="hcl"&&w!=="lab")throw new Error(`Unknown color space: "${h.colorSpace}"`);var w;const A=function(j){switch(j){case"exponential":return wf;case"interval":return wd;case"categorical":return Np;case"identity":return Oh;default:throw new Error(`Unknown function type "${j}"`)}}(g);let L,N;if(g==="categorical"){L=Object.create(null);for(const j of h.stops)L[j[0]]=j[1];N=typeof h.stops[0][0]}if(c){const j={},H=[];for(let se=0;se<h.stops.length;se++){const fe=h.stops[se],Te=fe[0].zoom;j[Te]===void 0&&(j[Te]={zoom:Te,type:h.type,property:h.property,default:h.default,stops:[]},H.push(Te)),j[Te].stops.push([fe[0].value,fe[1]])}const te=[];for(const se of H)te.push([j[se].zoom,Nh(j[se],o)]);const ie={name:"linear"};return{kind:"composite",interpolationType:ie,interpolationFactor:_n.interpolationFactor.bind(void 0,ie),zoomStops:te.map(se=>se[0]),evaluate:({zoom:se},fe)=>wf({stops:te,base:h.base},o,se).evaluate(se,fe)}}if(d){const j=g==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:_n.interpolationFactor.bind(void 0,j),zoomStops:h.stops.map(H=>H[0]),evaluate:({zoom:H})=>A(h,o,H,L,N)}}return{kind:"source",evaluate(j,H){const te=H&&H.properties?H.properties[h.property]:void 0;return te===void 0?xc(h.default,o.default):A(h,o,te,L,N)}}}function xc(h,o,c){return h!==void 0?h:o!==void 0?o:c!==void 0?c:void 0}function Np(h,o,c,d,g){return xc(typeof c===g?d[c]:void 0,h.default,o.default)}function wd(h,o,c){if(Mn(c)!=="number")return xc(h.default,o.default);const d=h.stops.length;if(d===1||c<=h.stops[0][0])return h.stops[0][1];if(c>=h.stops[d-1][0])return h.stops[d-1][1];const g=Et(h.stops.map(x=>x[0]),c);return h.stops[g][1]}function wf(h,o,c){const d=h.base!==void 0?h.base:1;if(Mn(c)!=="number")return xc(h.default,o.default);const g=h.stops.length;if(g===1||c<=h.stops[0][0])return h.stops[0][1];if(c>=h.stops[g-1][0])return h.stops[g-1][1];const x=Et(h.stops.map(j=>j[0]),c),w=function(j,H,te,ie){const se=ie-te,fe=j-te;return se===0?0:H===1?fe/se:(Math.pow(H,fe)-1)/(Math.pow(H,se)-1)}(c,d,h.stops[x][0],h.stops[x+1][0]),A=h.stops[x][1],L=h.stops[x+1][1],N=fi[o.type]||Yl;return typeof A.evaluate=="function"?{evaluate(...j){const H=A.evaluate.apply(void 0,j),te=L.evaluate.apply(void 0,j);if(H!==void 0&&te!==void 0)return N(H,te,w,h.colorSpace)}}:N(A,L,w,h.colorSpace)}function Oh(h,o,c){switch(o.type){case"color":c=jr.parse(c);break;case"formatted":c=Ir.fromString(c.toString());break;case"resolvedImage":c=vo.fromString(c.toString());break;case"padding":c=xn.parse(c);break;case"colorArray":c=Pn.parse(c);break;case"numberArray":c=Jn.parse(c);break;default:Mn(c)===o.type||o.type==="enum"&&o.values[c]||(c=void 0)}return xc(c,h.default,o.default)}Hi.register(al,{error:[{kind:"error"},[$r],(h,[o])=>{throw new ii(o.evaluate(h))}],typeof:[$r,[Tn],(h,[o])=>Kn(tn(o.evaluate(h)))],"to-rgba":[Yo(lr,4),[ro],(h,[o])=>{const[c,d,g,x]=o.evaluate(h).rgb;return[255*c,255*d,255*g,x]}],rgb:[ro,[lr,lr,lr],_c],rgba:[ro,[lr,lr,lr,lr],_c],has:{type:Sn,overloads:[[[$r],(h,[o])=>Fa(o.evaluate(h),h.properties())],[[$r,ca],(h,[o,c])=>Fa(o.evaluate(h),c.evaluate(h))]]},get:{type:Tn,overloads:[[[$r],(h,[o])=>ys(o.evaluate(h),h.properties())],[[$r,ca],(h,[o,c])=>ys(o.evaluate(h),c.evaluate(h))]]},"feature-state":[Tn,[$r],(h,[o])=>ys(o.evaluate(h),h.featureState||{})],properties:[ca,[],h=>h.properties()],"geometry-type":[$r,[],h=>h.geometryType()],id:[Tn,[],h=>h.id()],zoom:[lr,[],h=>h.globals.zoom],"heatmap-density":[lr,[],h=>h.globals.heatmapDensity||0],elevation:[lr,[],h=>h.globals.elevation||0],"line-progress":[lr,[],h=>h.globals.lineProgress||0],accumulated:[Tn,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[lr,Ca(lr),(h,o)=>{let c=0;for(const d of o)c+=d.evaluate(h);return c}],"*":[lr,Ca(lr),(h,o)=>{let c=1;for(const d of o)c*=d.evaluate(h);return c}],"-":{type:lr,overloads:[[[lr,lr],(h,[o,c])=>o.evaluate(h)-c.evaluate(h)],[[lr],(h,[o])=>-o.evaluate(h)]]},"/":[lr,[lr,lr],(h,[o,c])=>o.evaluate(h)/c.evaluate(h)],"%":[lr,[lr,lr],(h,[o,c])=>o.evaluate(h)%c.evaluate(h)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],(h,[o,c])=>Math.pow(o.evaluate(h),c.evaluate(h))],sqrt:[lr,[lr],(h,[o])=>Math.sqrt(o.evaluate(h))],log10:[lr,[lr],(h,[o])=>Math.log(o.evaluate(h))/Math.LN10],ln:[lr,[lr],(h,[o])=>Math.log(o.evaluate(h))],log2:[lr,[lr],(h,[o])=>Math.log(o.evaluate(h))/Math.LN2],sin:[lr,[lr],(h,[o])=>Math.sin(o.evaluate(h))],cos:[lr,[lr],(h,[o])=>Math.cos(o.evaluate(h))],tan:[lr,[lr],(h,[o])=>Math.tan(o.evaluate(h))],asin:[lr,[lr],(h,[o])=>Math.asin(o.evaluate(h))],acos:[lr,[lr],(h,[o])=>Math.acos(o.evaluate(h))],atan:[lr,[lr],(h,[o])=>Math.atan(o.evaluate(h))],min:[lr,Ca(lr),(h,o)=>Math.min(...o.map(c=>c.evaluate(h)))],max:[lr,Ca(lr),(h,o)=>Math.max(...o.map(c=>c.evaluate(h)))],abs:[lr,[lr],(h,[o])=>Math.abs(o.evaluate(h))],round:[lr,[lr],(h,[o])=>{const c=o.evaluate(h);return c<0?-Math.round(-c):Math.round(c)}],floor:[lr,[lr],(h,[o])=>Math.floor(o.evaluate(h))],ceil:[lr,[lr],(h,[o])=>Math.ceil(o.evaluate(h))],"filter-==":[Sn,[$r,Tn],(h,[o,c])=>h.properties()[o.value]===c.value],"filter-id-==":[Sn,[Tn],(h,[o])=>h.id()===o.value],"filter-type-==":[Sn,[$r],(h,[o])=>h.geometryType()===o.value],"filter-<":[Sn,[$r,Tn],(h,[o,c])=>{const d=h.properties()[o.value],g=c.value;return typeof d==typeof g&&d<g}],"filter-id-<":[Sn,[Tn],(h,[o])=>{const c=h.id(),d=o.value;return typeof c==typeof d&&c<d}],"filter->":[Sn,[$r,Tn],(h,[o,c])=>{const d=h.properties()[o.value],g=c.value;return typeof d==typeof g&&d>g}],"filter-id->":[Sn,[Tn],(h,[o])=>{const c=h.id(),d=o.value;return typeof c==typeof d&&c>d}],"filter-<=":[Sn,[$r,Tn],(h,[o,c])=>{const d=h.properties()[o.value],g=c.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[Sn,[Tn],(h,[o])=>{const c=h.id(),d=o.value;return typeof c==typeof d&&c<=d}],"filter->=":[Sn,[$r,Tn],(h,[o,c])=>{const d=h.properties()[o.value],g=c.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[Sn,[Tn],(h,[o])=>{const c=h.id(),d=o.value;return typeof c==typeof d&&c>=d}],"filter-has":[Sn,[Tn],(h,[o])=>o.value in h.properties()],"filter-has-id":[Sn,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Sn,[Yo($r)],(h,[o])=>o.value.indexOf(h.geometryType())>=0],"filter-id-in":[Sn,[Yo(Tn)],(h,[o])=>o.value.indexOf(h.id())>=0],"filter-in-small":[Sn,[$r,Yo(Tn)],(h,[o,c])=>c.value.indexOf(h.properties()[o.value])>=0],"filter-in-large":[Sn,[$r,Yo(Tn)],(h,[o,c])=>function(d,g,x,w){for(;x<=w;){const A=x+w>>1;if(g[A]===d)return!0;g[A]>d?w=A-1:x=A+1}return!1}(h.properties()[o.value],c.value,0,c.value.length-1)],all:{type:Sn,overloads:[[[Sn,Sn],(h,[o,c])=>o.evaluate(h)&&c.evaluate(h)],[Ca(Sn),(h,o)=>{for(const c of o)if(!c.evaluate(h))return!1;return!0}]]},any:{type:Sn,overloads:[[[Sn,Sn],(h,[o,c])=>o.evaluate(h)||c.evaluate(h)],[Ca(Sn),(h,o)=>{for(const c of o)if(c.evaluate(h))return!0;return!1}]]},"!":[Sn,[Sn],(h,[o])=>!o.evaluate(h)],"is-supported-script":[Sn,[$r],(h,[o])=>{const c=h.globals&&h.globals.isSupportedScript;return!c||c(o.evaluate(h))}],upcase:[$r,[$r],(h,[o])=>o.evaluate(h).toUpperCase()],downcase:[$r,[$r],(h,[o])=>o.evaluate(h).toLowerCase()],concat:[$r,Ca(Tn),(h,o)=>o.map(c=>Ks(c.evaluate(h))).join("")],"resolved-locale":[$r,[ha],(h,[o])=>o.evaluate(h).resolvedLocale()]});class Qc{constructor(o,c){this.expression=o,this._warningHistory={},this._evaluator=new mu,this._defaultValue=c?function(d){if(d.type==="color"&&Ds(d.default))return new jr(0,0,0,0);switch(d.type){case"color":return jr.parse(d.default)||null;case"padding":return xn.parse(d.default)||null;case"numberArray":return Jn.parse(d.default)||null;case"colorArray":return Pn.parse(d.default)||null;case"variableAnchorOffsetCollection":return Wr.parse(d.default)||null;case"projectionDefinition":return vn.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(c):null,this._enumValues=c&&c.type==="enum"?c.values:null}evaluateWithoutErrorHandling(o,c,d,g,x,w){return this._evaluator.globals=o,this._evaluator.feature=c,this._evaluator.featureState=d,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(o,c,d,g,x,w){this._evaluator.globals=o,this._evaluator.feature=c||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new ii(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(A)} instead.`);return A}catch(A){return this._warningHistory[A.message]||(this._warningHistory[A.message]=!0,typeof console<"u"&&console.warn(A.message)),this._defaultValue}}}function Sf(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in al}function Cf(h,o){const c=new ds(al,Pl,[],o?function(g){const x={color:ro,string:$r,number:lr,enum:$r,boolean:Sn,formatted:Sl,padding:Si,numberArray:Zs,colorArray:Ws,projectionDefinition:Hs,resolvedImage:Un,variableAnchorOffsetCollection:Xs};return g.type==="array"?Yo(x[g.value]||Tn,g.length):x[g.type]}(o):void 0),d=c.parse(h,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?bc(new Qc(d,o)):vs(c.errors)}class eh{constructor(o,c){this.kind=o,this._styleExpression=c,this.isStateDependent=o!=="constant"&&!Ls(c.expression),this.globalStateRefs=rh(c.expression)}evaluateWithoutErrorHandling(o,c,d,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,g,x,w)}evaluate(o,c,d,g,x,w){return this._styleExpression.evaluate(o,c,d,g,x,w)}}class Ef{constructor(o,c,d,g){this.kind=o,this.zoomStops=d,this._styleExpression=c,this.isStateDependent=o!=="camera"&&!Ls(c.expression),this.globalStateRefs=rh(c.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,c,d,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,c,d,g,x,w)}evaluate(o,c,d,g,x,w){return this._styleExpression.evaluate(o,c,d,g,x,w)}interpolationFactor(o,c,d){return this.interpolationType?_n.interpolationFactor(this.interpolationType,o,c,d):0}}function Sd(h,o){const c=Cf(h,o);if(c.result==="error")return c;const d=c.value.expression,g=Xl(d);if(!g&&!bo(o))return vs([new Gn("","data expressions not supported")]);const x=ts(d,["zoom"]);if(!x&&!Jo(o))return vs([new Gn("","zoom expressions not supported")]);const w=th(d);return w||x?w instanceof Gn?vs([w]):w instanceof _n&&!Il(o)?vs([new Gn("",'"interpolate" expressions cannot be used with this property')]):bc(w?new Ef(g?"camera":"composite",c.value,w.labels,w instanceof _n?w.interpolation:void 0):new eh(g?"constant":"source",c.value)):vs([new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Fh{constructor(o,c){this._parameters=o,this._specification=c,Bi(this,Nh(this._parameters,this._specification))}static deserialize(o){return new Fh(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function th(h){let o=null;if(h instanceof Js)o=th(h.result);else if(h instanceof Fn){for(const c of h.args)if(o=th(c),o)break}else(h instanceof Wt||h instanceof _n)&&h.input instanceof Hi&&h.input.name==="zoom"&&(o=h);return o instanceof Gn||h.eachChild(c=>{const d=th(c);d instanceof Gn?o=d:!o&&d?o=new Gn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&d&&o!==d&&(o=new Gn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function rh(h,o=new Set){return h instanceof ai&&o.add(h.key),h.eachChild(c=>{rh(c,o)}),o}function wc(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const o of h.slice(1))if(!wc(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Bh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sl(h){if(h==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};wc(h)||(h=zh(h));const o=Cf(h,Bh);if(o.result==="error")throw new Error(o.value.map(c=>`${c.key}: ${c.message}`).join(", "));return{filter:(c,d,g)=>o.value.evaluate(c,d,{},g),needGeometry:Op(h),getGlobalStateRefs:()=>rh(o.value.expression)}}function Xg(h,o){return h<o?-1:h>o?1:0}function Op(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let o=1;o<h.length;o++)if(Op(h[o]))return!0;return!1}function zh(h){if(!h)return!0;const o=h[0];return h.length<=1?o!=="any":o==="=="?Cd(h[1],h[2],"=="):o==="!="?$h(Cd(h[1],h[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Cd(h[1],h[2],o):o==="any"?(c=h.slice(1),["any"].concat(c.map(zh))):o==="all"?["all"].concat(h.slice(1).map(zh)):o==="none"?["all"].concat(h.slice(1).map(zh).map($h)):o==="in"?Fp(h[1],h.slice(2)):o==="!in"?$h(Fp(h[1],h.slice(2))):o==="has"?Bp(h[1]):o!=="!has"||$h(Bp(h[1]));var c}function Cd(h,o,c){switch(h){case"$type":return[`filter-type-${c}`,o];case"$id":return[`filter-id-${c}`,o];default:return[`filter-${c}`,h,o]}}function Fp(h,o){if(o.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(c=>typeof c!=typeof o[0])?["filter-in-large",h,["literal",o.sort(Xg)]]:["filter-in-small",h,["literal",o]]}}function Bp(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function $h(h){return["!",h]}function Ml(h){const o=typeof h;if(o==="number"||o==="boolean"||o==="string"||h==null)return JSON.stringify(h);if(Array.isArray(h)){let g="[";for(const x of h)g+=`${Ml(x)},`;return`${g}]`}const c=Object.keys(h).sort();let d="{";for(let g=0;g<c.length;g++)d+=`${JSON.stringify(c[g])}:${Ml(h[c[g]])},`;return`${d}}`}function _s(h){let o="";for(const c of hr)o+=`/${Ml(h[c])}`;return o}function Kl(h){const o=h.value;return o?[new nr(h.key,o,"constants have been deprecated as of v8")]:[]}function fo(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function bu(h){if(Array.isArray(h))return h.map(bu);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const o={};for(const c in h)o[c]=bu(h[c]);return o}return fo(h)}function Qo(h){const o=h.key,c=h.value,d=h.valueSpec||{},g=h.objectElementValidators||{},x=h.style,w=h.styleSpec,A=h.validateSpec;let L=[];const N=Mn(c);if(N!=="object")return[new nr(o,c,`object expected, ${N} found`)];for(const j in c){const H=j.split(".")[0],te=Ye(d,H)||d["*"];let ie;if(Ye(g,H))ie=g[H];else if(Ye(d,H))ie=A;else if(g["*"])ie=g["*"];else{if(!d["*"]){L.push(new nr(o,c[j],`unknown property "${j}"`));continue}ie=A}L=L.concat(ie({key:(o&&`${o}.`)+j,value:c[j],valueSpec:te,style:x,styleSpec:w,object:c,objectKey:j,validateSpec:A},c))}for(const j in d)g[j]||d[j].required&&d[j].default===void 0&&c[j]===void 0&&L.push(new nr(o,c,`missing required property "${j}"`));return L}function rs(h){const o=h.value,c=h.valueSpec,d=h.style,g=h.styleSpec,x=h.key,w=h.arrayElementValidator||h.validateSpec;if(Mn(o)!=="array")return[new nr(x,o,`array expected, ${Mn(o)} found`)];if(c.length&&o.length!==c.length)return[new nr(x,o,`array length ${c.length} expected, length ${o.length} found`)];if(c["min-length"]&&o.length<c["min-length"])return[new nr(x,o,`array length at least ${c["min-length"]} expected, length ${o.length} found`)];let A={type:c.value,values:c.values};g.$version<7&&(A.function=c.function),Mn(c.value)==="object"&&(A=c.value);let L=[];for(let N=0;N<o.length;N++)L=L.concat(w({array:o,arrayIndex:N,value:o[N],valueSpec:A,validateSpec:h.validateSpec,style:d,styleSpec:g,key:`${x}[${N}]`}));return L}function jh(h){const o=h.key,c=h.value,d=h.valueSpec;let g=Mn(c);return g==="number"&&c!=c&&(g="NaN"),g!=="number"?[new nr(o,c,`number expected, ${g} found`)]:"minimum"in d&&c<d.minimum?[new nr(o,c,`${c} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&c>d.maximum?[new nr(o,c,`${c} is greater than the maximum value ${d.maximum}`)]:[]}function nh(h){const o=h.valueSpec,c=fo(h.value.type);let d,g,x,w={};const A=c!=="categorical"&&h.value.property===void 0,L=!A,N=Mn(h.value.stops)==="array"&&Mn(h.value.stops[0])==="array"&&Mn(h.value.stops[0][0])==="object",j=Qo({key:h.key,value:h.value,valueSpec:h.styleSpec.function,validateSpec:h.validateSpec,style:h.style,styleSpec:h.styleSpec,objectElementValidators:{stops:function(ie){if(c==="identity")return[new nr(ie.key,ie.value,'identity function may not have a "stops" property')];let se=[];const fe=ie.value;return se=se.concat(rs({key:ie.key,value:fe,valueSpec:ie.valueSpec,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,arrayElementValidator:H})),Mn(fe)==="array"&&fe.length===0&&se.push(new nr(ie.key,fe,"array must have at least one stop")),se},default:function(ie){return ie.validateSpec({key:ie.key,value:ie.value,valueSpec:o,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec})}}});return c==="identity"&&A&&j.push(new nr(h.key,h.value,'missing required property "property"')),c==="identity"||h.value.stops||j.push(new nr(h.key,h.value,'missing required property "stops"')),c==="exponential"&&h.valueSpec.expression&&!Il(h.valueSpec)&&j.push(new nr(h.key,h.value,"exponential functions not supported")),h.styleSpec.$version>=8&&(L&&!bo(h.valueSpec)?j.push(new nr(h.key,h.value,"property functions not supported")):A&&!Jo(h.valueSpec)&&j.push(new nr(h.key,h.value,"zoom functions not supported"))),c!=="categorical"&&!N||h.value.property!==void 0||j.push(new nr(h.key,h.value,'"property" property is required')),j;function H(ie){let se=[];const fe=ie.value,Te=ie.key;if(Mn(fe)!=="array")return[new nr(Te,fe,`array expected, ${Mn(fe)} found`)];if(fe.length!==2)return[new nr(Te,fe,`array length 2 expected, length ${fe.length} found`)];if(N){if(Mn(fe[0])!=="object")return[new nr(Te,fe,`object expected, ${Mn(fe[0])} found`)];if(fe[0].zoom===void 0)return[new nr(Te,fe,"object stop key must have zoom")];if(fe[0].value===void 0)return[new nr(Te,fe,"object stop key must have value")];if(x&&x>fo(fe[0].zoom))return[new nr(Te,fe[0].zoom,"stop zoom values must appear in ascending order")];fo(fe[0].zoom)!==x&&(x=fo(fe[0].zoom),g=void 0,w={}),se=se.concat(Qo({key:`${Te}[0]`,value:fe[0],valueSpec:{zoom:{}},validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec,objectElementValidators:{zoom:jh,value:te}}))}else se=se.concat(te({key:`${Te}[0]`,value:fe[0],validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec},fe));return Sf(bu(fe[1]))?se.concat([new nr(`${Te}[1]`,fe[1],"expressions are not allowed in function stops.")]):se.concat(ie.validateSpec({key:`${Te}[1]`,value:fe[1],valueSpec:o,validateSpec:ie.validateSpec,style:ie.style,styleSpec:ie.styleSpec}))}function te(ie,se){const fe=Mn(ie.value),Te=fo(ie.value),Fe=ie.value!==null?ie.value:se;if(d){if(fe!==d)return[new nr(ie.key,Fe,`${fe} stop domain type must match previous stop domain type ${d}`)]}else d=fe;if(fe!=="number"&&fe!=="string"&&fe!=="boolean")return[new nr(ie.key,Fe,"stop domain value must be a number, string, or boolean")];if(fe!=="number"&&c!=="categorical"){let dt=`number expected, ${fe} found`;return bo(o)&&c===void 0&&(dt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nr(ie.key,Fe,dt)]}return c!=="categorical"||fe!=="number"||isFinite(Te)&&Math.floor(Te)===Te?c!=="categorical"&&fe==="number"&&g!==void 0&&Te<g?[new nr(ie.key,Fe,"stop domain values must appear in ascending order")]:(g=Te,c==="categorical"&&Te in w?[new nr(ie.key,Fe,"stop domain values must be unique")]:(w[Te]=!0,[])):[new nr(ie.key,Fe,`integer expected, found ${Te}`)]}}function Sc(h){const o=(h.expressionContext==="property"?Sd:Cf)(bu(h.value),h.valueSpec);if(o.result==="error")return o.value.map(d=>new nr(`${h.key}${d.key}`,h.value,d.message));const c=o.value.expression||o.value._styleExpression.expression;if(h.expressionContext==="property"&&h.propertyKey==="text-font"&&!c.outputDefined())return[new nr(h.key,h.value,`Invalid data expression for "${h.propertyKey}". Output values must be contained as literals within the expression.`)];if(h.expressionContext==="property"&&h.propertyType==="layout"&&!Ls(c))return[new nr(h.key,h.value,'"feature-state" data expressions are not supported with layout properties.')];if(h.expressionContext==="filter"&&!Ls(c))return[new nr(h.key,h.value,'"feature-state" data expressions are not supported with filters.')];if(h.expressionContext&&h.expressionContext.indexOf("cluster")===0){if(!ts(c,["zoom","feature-state"]))return[new nr(h.key,h.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(h.expressionContext==="cluster-initial"&&!Xl(c))return[new nr(h.key,h.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Tf(h){const o=h.key,c=h.value,d=Mn(c);return d!=="string"?[new nr(o,c,`color expected, ${d} found`)]:jr.parse(String(c))?[]:[new nr(o,c,`color expected, "${c}" found`)]}function ih(h){const o=h.key,c=h.value,d=h.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(fo(c))===-1&&g.push(new nr(o,c,`expected one of [${d.values.join(", ")}], ${JSON.stringify(c)} found`)):Object.keys(d.values).indexOf(fo(c))===-1&&g.push(new nr(o,c,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(c)} found`)),g}function Af(h){return wc(bu(h.value))?Sc(Bi({},h,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zp(h)}function zp(h){const o=h.value,c=h.key;if(Mn(o)!=="array")return[new nr(c,o,`array expected, ${Mn(o)} found`)];const d=h.styleSpec;let g,x=[];if(o.length<1)return[new nr(c,o,"filter array must have at least 1 element")];switch(x=x.concat(ih({key:`${c}[0]`,value:o[0],valueSpec:d.filter_operator,style:h.style,styleSpec:h.styleSpec})),fo(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&fo(o[1])==="$type"&&x.push(new nr(c,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&x.push(new nr(c,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=Mn(o[1]),g!=="string"&&x.push(new nr(`${c}[1]`,o[1],`string expected, ${g} found`)));for(let w=2;w<o.length;w++)g=Mn(o[w]),fo(o[1])==="$type"?x=x.concat(ih({key:`${c}[${w}]`,value:o[w],valueSpec:d.geometry_type,style:h.style,styleSpec:h.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&x.push(new nr(`${c}[${w}]`,o[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<o.length;w++)x=x.concat(zp({key:`${c}[${w}]`,value:o[w],style:h.style,styleSpec:h.styleSpec}));break;case"has":case"!has":g=Mn(o[1]),o.length!==2?x.push(new nr(c,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&x.push(new nr(`${c}[1]`,o[1],`string expected, ${g} found`))}return x}function Uh(h,o){const c=h.key,d=h.validateSpec,g=h.style,x=h.styleSpec,w=h.value,A=h.objectKey,L=x[`${o}_${h.layerType}`];if(!L)return[];const N=A.match(/^(.*)-transition$/);if(o==="paint"&&N&&L[N[1]]&&L[N[1]].transition)return d({key:c,value:w,valueSpec:x.transition,style:g,styleSpec:x});const j=h.valueSpec||L[A];if(!j)return[new nr(c,w,`unknown property "${A}"`)];let H;if(Mn(w)==="string"&&bo(j)&&!j.tokens&&(H=/^{([^}]+)}$/.exec(w)))return[new nr(c,w,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const te=[];return h.layerType==="symbol"&&(A==="text-field"&&g&&!g.glyphs&&te.push(new nr(c,w,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Ds(bu(w))&&fo(w.type)==="identity"&&te.push(new nr(c,w,'"text-font" does not support identity functions'))),te.concat(d({key:h.key,value:w,valueSpec:j,style:g,styleSpec:x,expressionContext:"property",propertyType:o,propertyKey:A}))}function xu(h){return Uh(h,"paint")}function Jl(h){return Uh(h,"layout")}function Ba(h){let o=[];const c=h.value,d=h.key,g=h.style,x=h.styleSpec;if(Mn(c)!=="object")return[new nr(d,c,`object expected, ${Mn(c)} found`)];c.type||c.ref||o.push(new nr(d,c,'either "type" or "ref" is required'));let w=fo(c.type);const A=fo(c.ref);if(c.id){const L=fo(c.id);for(let N=0;N<h.arrayIndex;N++){const j=g.layers[N];fo(j.id)===L&&o.push(new nr(d,c.id,`duplicate layer id "${c.id}", previously used at line ${j.id.__line__}`))}}if("ref"in c){let L;["type","source","source-layer","filter","layout"].forEach(N=>{N in c&&o.push(new nr(d,c[N],`"${N}" is prohibited for ref layers`))}),g.layers.forEach(N=>{fo(N.id)===A&&(L=N)}),L?L.ref?o.push(new nr(d,c.ref,"ref cannot reference another ref layer")):w=fo(L.type):o.push(new nr(d,c.ref,`ref layer "${A}" not found`))}else if(w!=="background")if(c.source){const L=g.sources&&g.sources[c.source],N=L&&fo(L.type);L?N==="vector"&&w==="raster"?o.push(new nr(d,c.source,`layer "${c.id}" requires a raster source`)):N!=="raster-dem"&&w==="hillshade"||N!=="raster-dem"&&w==="color-relief"?o.push(new nr(d,c.source,`layer "${c.id}" requires a raster-dem source`)):N==="raster"&&w!=="raster"?o.push(new nr(d,c.source,`layer "${c.id}" requires a vector source`)):N!=="vector"||c["source-layer"]?N==="raster-dem"&&w!=="hillshade"&&w!=="color-relief"?o.push(new nr(d,c.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):w!=="line"||!c.paint||!c.paint["line-gradient"]||N==="geojson"&&L.lineMetrics||o.push(new nr(d,c,`layer "${c.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new nr(d,c,`layer "${c.id}" must specify a "source-layer"`)):o.push(new nr(d,c.source,`source "${c.source}" not found`))}else o.push(new nr(d,c,'missing required property "source"'));return o=o.concat(Qo({key:d,value:c,valueSpec:x.layer,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,objectElementValidators:{"*":()=>[],type:()=>h.validateSpec({key:`${d}.type`,value:c.type,valueSpec:x.layer.type,style:h.style,styleSpec:h.styleSpec,validateSpec:h.validateSpec,object:c,objectKey:"type"}),filter:Af,layout:L=>Qo({layer:c,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":N=>Jl(Bi({layerType:w},N))}}),paint:L=>Qo({layer:c,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":N=>xu(Bi({layerType:w},N))}})}})),o}function kl(h){const o=h.value,c=h.key,d=Mn(o);return d!=="string"?[new nr(c,o,`string expected, ${d} found`)]:[]}const Pf={promoteId:function({key:h,value:o}){if(Mn(o)==="string")return kl({key:h,value:o});{const c=[];for(const d in o)c.push(...kl({key:`${h}.${d}`,value:o[d]}));return c}}};function $p(h){const o=h.value,c=h.key,d=h.styleSpec,g=h.style,x=h.validateSpec;if(!o.type)return[new nr(c,o,'"type" is required')];const w=fo(o.type);let A;switch(w){case"vector":case"raster":return A=Qo({key:c,value:o,valueSpec:d[`source_${w.replace("-","_")}`],style:h.style,styleSpec:d,objectElementValidators:Pf,validateSpec:x}),A;case"raster-dem":return A=function(L){var N;const j=(N=L.sourceName)!==null&&N!==void 0?N:"",H=L.value,te=L.styleSpec,ie=te.source_raster_dem,se=L.style;let fe=[];const Te=Mn(H);if(H===void 0)return fe;if(Te!=="object")return fe.push(new nr("source_raster_dem",H,`object expected, ${Te} found`)),fe;const Fe=fo(H.encoding)==="custom",dt=["redFactor","greenFactor","blueFactor","baseShift"],Xe=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const re in H)!Fe&&dt.includes(re)?fe.push(new nr(re,H[re],`In "${j}": "${re}" is only valid when "encoding" is set to "custom". ${Xe} encoding found`)):ie[re]?fe=fe.concat(L.validateSpec({key:re,value:H[re],valueSpec:ie[re],validateSpec:L.validateSpec,style:se,styleSpec:te})):fe.push(new nr(re,H[re],`unknown property "${re}"`));return fe}({sourceName:c,value:o,style:h.style,styleSpec:d,validateSpec:x}),A;case"geojson":if(A=Qo({key:c,value:o,valueSpec:d.source_geojson,style:g,styleSpec:d,validateSpec:x,objectElementValidators:Pf}),o.cluster)for(const L in o.clusterProperties){const[N,j]=o.clusterProperties[L],H=typeof N=="string"?[N,["accumulated"],["get",L]]:N;A.push(...Sc({key:`${c}.${L}.map`,value:j,expressionContext:"cluster-map"})),A.push(...Sc({key:`${c}.${L}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return A;case"video":return Qo({key:c,value:o,valueSpec:d.source_video,style:g,validateSpec:x,styleSpec:d});case"image":return Qo({key:c,value:o,valueSpec:d.source_image,style:g,validateSpec:x,styleSpec:d});case"canvas":return[new nr(c,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ih({key:`${c}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function jp(h){const o=h.value,c=h.styleSpec,d=c.light,g=h.style;let x=[];const w=Mn(o);if(o===void 0)return x;if(w!=="object")return x=x.concat([new nr("light",o,`object expected, ${w} found`)]),x;for(const A in o){const L=A.match(/^(.*)-transition$/);x=x.concat(L&&d[L[1]]&&d[L[1]].transition?h.validateSpec({key:A,value:o[A],valueSpec:c.transition,validateSpec:h.validateSpec,style:g,styleSpec:c}):d[A]?h.validateSpec({key:A,value:o[A],valueSpec:d[A],validateSpec:h.validateSpec,style:g,styleSpec:c}):[new nr(A,o[A],`unknown property "${A}"`)])}return x}function oh(h){const o=h.value,c=h.styleSpec,d=c.sky,g=h.style,x=Mn(o);if(o===void 0)return[];if(x!=="object")return[new nr("sky",o,`object expected, ${x} found`)];let w=[];for(const A in o)w=w.concat(d[A]?h.validateSpec({key:A,value:o[A],valueSpec:d[A],style:g,styleSpec:c}):[new nr(A,o[A],`unknown property "${A}"`)]);return w}function Ed(h){const o=h.value,c=h.styleSpec,d=c.terrain,g=h.style;let x=[];const w=Mn(o);if(o===void 0)return x;if(w!=="object")return x=x.concat([new nr("terrain",o,`object expected, ${w} found`)]),x;for(const A in o)x=x.concat(d[A]?h.validateSpec({key:A,value:o[A],valueSpec:d[A],validateSpec:h.validateSpec,style:g,styleSpec:c}):[new nr(A,o[A],`unknown property "${A}"`)]);return x}function If(h){let o=[];const c=h.value,d=h.key;if(Array.isArray(c)){const g=[],x=[];for(const w in c)c[w].id&&g.includes(c[w].id)&&o.push(new nr(d,c,`all the sprites' ids must be unique, but ${c[w].id} is duplicated`)),g.push(c[w].id),c[w].url&&x.includes(c[w].url)&&o.push(new nr(d,c,`all the sprites' URLs must be unique, but ${c[w].url} is duplicated`)),x.push(c[w].url),o=o.concat(Qo({key:`${d}[${w}]`,value:c[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:h.validateSpec}));return o}return kl({key:d,value:c})}function Up(h){return o=h.value,o&&o.constructor===Object?[]:[new nr(h.key,h.value,`object expected, ${Mn(h.value)} found`)];var o}const Vh={"*":()=>[],array:rs,boolean:function(h){const o=h.value,c=h.key,d=Mn(o);return d!=="boolean"?[new nr(c,o,`boolean expected, ${d} found`)]:[]},number:jh,color:Tf,constants:Kl,enum:ih,filter:Af,function:nh,layer:Ba,object:Qo,source:$p,light:jp,sky:oh,terrain:Ed,projection:function(h){const o=h.value,c=h.styleSpec,d=c.projection,g=h.style,x=Mn(o);if(o===void 0)return[];if(x!=="object")return[new nr("projection",o,`object expected, ${x} found`)];let w=[];for(const A in o)w=w.concat(d[A]?h.validateSpec({key:A,value:o[A],valueSpec:d[A],style:g,styleSpec:c}):[new nr(A,o[A],`unknown property "${A}"`)]);return w},projectionDefinition:function(h){const o=h.key;let c=h.value;c=c instanceof String?c.valueOf():c;const d=Mn(c);return d!=="array"||function(g){return Array.isArray(g)&&g.length===3&&typeof g[0]=="string"&&typeof g[1]=="string"&&typeof g[2]=="number"}(c)||function(g){return!!["interpolate","step","literal"].includes(g[0])}(c)?["array","string"].includes(d)?[]:[new nr(o,c,`projection expected, invalid type "${d}" found`)]:[new nr(o,c,`projection expected, invalid array ${JSON.stringify(c)} found`)]},string:kl,formatted:function(h){return kl(h).length===0?[]:Sc(h)},resolvedImage:function(h){return kl(h).length===0?[]:Sc(h)},padding:function(h){const o=h.key,c=h.value;if(Mn(c)==="array"){if(c.length<1||c.length>4)return[new nr(o,c,`padding requires 1 to 4 values; ${c.length} values found`)];const d={type:"number"};let g=[];for(let x=0;x<c.length;x++)g=g.concat(h.validateSpec({key:`${o}[${x}]`,value:c[x],validateSpec:h.validateSpec,valueSpec:d}));return g}return jh({key:o,value:c,valueSpec:{}})},numberArray:function(h){const o=h.key,c=h.value;if(Mn(c)==="array"){const d={type:"number"};if(c.length<1)return[new nr(o,c,"array length at least 1 expected, length 0 found")];let g=[];for(let x=0;x<c.length;x++)g=g.concat(h.validateSpec({key:`${o}[${x}]`,value:c[x],validateSpec:h.validateSpec,valueSpec:d}));return g}return jh({key:o,value:c,valueSpec:{}})},colorArray:function(h){const o=h.key,c=h.value;if(Mn(c)==="array"){if(c.length<1)return[new nr(o,c,"array length at least 1 expected, length 0 found")];let d=[];for(let g=0;g<c.length;g++)d=d.concat(Tf({key:`${o}[${g}]`,value:c[g]}));return d}return Tf({key:o,value:c})},variableAnchorOffsetCollection:function(h){const o=h.key,c=h.value,d=Mn(c),g=h.styleSpec;if(d!=="array"||c.length<1||c.length%2!=0)return[new nr(o,c,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<c.length;w+=2)x=x.concat(ih({key:`${o}[${w}]`,value:c[w],valueSpec:g.layout_symbol["text-anchor"]})),x=x.concat(rs({key:`${o}[${w+1}]`,value:c[w+1],valueSpec:{length:2,value:"number"},validateSpec:h.validateSpec,style:h.style,styleSpec:g}));return x},sprite:If,state:Up};function Cc(h){const o=h.value,c=h.valueSpec,d=h.styleSpec;return h.validateSpec=Cc,c.expression&&Ds(fo(o))?nh(h):c.expression&&Sf(bu(o))?Sc(h):c.type&&Vh[c.type]?Vh[c.type](h):Qo(Bi({},h,{valueSpec:c.type?d[c.type]:c}))}function ah(h){const o=h.value,c=h.key,d=kl(h);return d.length||(o.indexOf("{fontstack}")===-1&&d.push(new nr(c,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&d.push(new nr(c,o,'"glyphs" url must include a "{range}" token'))),d}function ll(h,o=it){let c=[];return c=c.concat(Cc({key:"",value:h,valueSpec:o.$root,styleSpec:o,style:h,validateSpec:Cc,objectElementValidators:{glyphs:ah,"*":()=>[]}})),h.constants&&(c=c.concat(Kl({key:"constants",value:h.constants}))),T(c)}function ul(h){return function(o){return h({...o,validateSpec:Cc})}}function T(h){return[].concat(h).sort((o,c)=>o.line-c.line)}function M(h){return function(...o){return T(h.apply(this,o))}}ll.source=M(ul($p)),ll.sprite=M(ul(If)),ll.glyphs=M(ul(ah)),ll.light=M(ul(jp)),ll.sky=M(ul(oh)),ll.terrain=M(ul(Ed)),ll.state=M(ul(Up)),ll.layer=M(ul(Ba)),ll.filter=M(ul(Af)),ll.paintProperty=M(ul(xu)),ll.layoutProperty=M(ul(Jl));const U=ll,J=U.light,ce=U.sky,ge=U.paintProperty,_e=U.layoutProperty;function Ce(h,o){let c=!1;if(o&&o.length)for(const d of o)h.fire(new st(new Error(d.message))),c=!0;return c}class ke{constructor(o,c,d){const g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const w=new Int32Array(this.arrayBuffer);o=w[0],this.d=(c=w[1])+2*(d=w[2]);for(let L=0;L<this.d*this.d;L++){const N=w[3+L],j=w[3+L+1];g.push(N===j?null:w.subarray(N,j))}const A=w[3+g.length+1];this.keys=w.subarray(w[3+g.length],A),this.bboxes=w.subarray(A),this.insert=this._insertReadonly}else{this.d=c+2*d;for(let w=0;w<this.d*this.d;w++)g.push([]);this.keys=[],this.bboxes=[]}this.n=c,this.extent=o,this.padding=d,this.scale=c/o,this.uid=0;const x=d/c*o;this.min=-x,this.max=o+x}insert(o,c,d,g,x){this._forEachCell(c,d,g,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(c),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,c,d,g,x,w){this.cells[x].push(w)}query(o,c,d,g,x){const w=this.min,A=this.max;if(o<=w&&c<=w&&A<=d&&A<=g&&!x)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(o,c,d,g,this._queryCell,L,{},x),L}}_queryCell(o,c,d,g,x,w,A,L){const N=this.cells[x];if(N!==null){const j=this.keys,H=this.bboxes;for(let te=0;te<N.length;te++){const ie=N[te];if(A[ie]===void 0){const se=4*ie;(L?L(H[se+0],H[se+1],H[se+2],H[se+3]):o<=H[se+2]&&c<=H[se+3]&&d>=H[se+0]&&g>=H[se+1])?(A[ie]=!0,w.push(j[ie])):A[ie]=!1}}}}_forEachCell(o,c,d,g,x,w,A,L){const N=this._convertToCellCoord(o),j=this._convertToCellCoord(c),H=this._convertToCellCoord(d),te=this._convertToCellCoord(g);for(let ie=N;ie<=H;ie++)for(let se=j;se<=te;se++){const fe=this.d*se+ie;if((!L||L(this._convertFromCellCoord(ie),this._convertFromCellCoord(se),this._convertFromCellCoord(ie+1),this._convertFromCellCoord(se+1)))&&x.call(this,o,c,d,g,fe,w,A,L))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,c=3+this.cells.length+1+1;let d=0;for(let w=0;w<this.cells.length;w++)d+=this.cells[w].length;const g=new Int32Array(c+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let x=c;for(let w=0;w<o.length;w++){const A=o[w];g[3+w]=x,g.set(A,x),x+=A.length}return g[3+o.length]=x,g.set(this.keys,x),x+=this.keys.length,g[3+o.length+1]=x,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer}static serialize(o,c){const d=o.toArrayBuffer();return c&&c.push(d),{buffer:d}}static deserialize(o){return new ke(o.buffer)}}const ze={};function $e(h,o,c={}){if(ze[h])throw new Error(`${h} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:h,writeable:!1}),ze[h]={klass:o,omit:c.omit||[],shallow:c.shallow||[]}}$e("Object",Object),$e("Set",Set),$e("TransferableGridIndex",ke),$e("Color",jr),$e("Error",Error),$e("AJAXError",De),$e("ResolvedImage",vo),$e("StylePropertyFunction",Fh),$e("StyleExpression",Qc,{omit:["_evaluator"]}),$e("ZoomDependentExpression",Ef),$e("ZoomConstantExpression",eh),$e("CompoundExpression",Hi,{omit:["_evaluate"]});for(const h in al)al[h]._classRegistryKey||$e(`Expression_${h}`,al[h]);function $t(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function je(h){return h.$name||h.constructor._classRegistryKey}function xt(h){return!function(o){if(o===null||typeof o!="object")return!1;const c=je(o);return!(!c||c==="Object")}(h)&&(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||h instanceof Blob||h instanceof Error||$t(h)||vr(h)||ArrayBuffer.isView(h)||h instanceof ImageData)}function Pt(h,o){if(xt(h))return($t(h)||vr(h))&&o&&o.push(h),ArrayBuffer.isView(h)&&o&&o.push(h.buffer),h instanceof ImageData&&o&&o.push(h.data.buffer),h;if(Array.isArray(h)){const x=[];for(const w of h)x.push(Pt(w,o));return x}if(typeof h!="object")throw new Error("can't serialize object of type "+typeof h);const c=je(h);if(!c)throw new Error(`can't serialize object of unregistered class ${h.constructor.name}`);if(!ze[c])throw new Error(`${c} is not registered.`);const{klass:d}=ze[c],g=d.serialize?d.serialize(h,o):{};if(d.serialize){if(o&&g===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in h){if(!h.hasOwnProperty(x)||ze[c].omit.indexOf(x)>=0)continue;const w=h[x];g[x]=ze[c].shallow.indexOf(x)>=0?w:Pt(w,o)}h instanceof Error&&(g.message=h.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return c!=="Object"&&(g.$name=c),g}function Gt(h){if(xt(h))return h;if(Array.isArray(h))return h.map(Gt);if(typeof h!="object")throw new Error("can't deserialize object of type "+typeof h);const o=je(h)||"Object";if(!ze[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:c}=ze[o];if(!c)throw new Error(`can't deserialize unregistered class ${o}`);if(c.deserialize)return c.deserialize(h);const d=Object.create(c.prototype);for(const g of Object.keys(h)){if(g==="$name")continue;const x=h[g];d[g]=ze[o].shallow.indexOf(g)>=0?x:Gt(x)}return d}class Bt{constructor(){this.first=!0}update(o,c){const d=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=c):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=c),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=d,!0))}}const Dt={"Latin-1 Supplement":h=>h>=128&&h<=255,"Hangul Jamo":h=>h>=4352&&h<=4607,Khmer:h=>h>=6016&&h<=6143,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Kanbun:h=>h>=12688&&h<=12703,"CJK Strokes":h=>h>=12736&&h<=12783,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Hangul Syllables":h=>h>=44032&&h<=55215,"Private Use Area":h=>h>=57344&&h<=63743,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519};function Xt(h){for(const o of h)if(Qr(o.charCodeAt(0)))return!0;return!1}function pr(h){for(const o of h)if(!Kr(o.charCodeAt(0)))return!1;return!0}function ir(h){const o=h.map(c=>{try{return new RegExp(`\\p{sc=${c}}`,"u").source}catch{return null}}).filter(c=>c);return new RegExp(o.join("|"),"u")}const dn=ir(["Arab","Dupl","Mong","Ougr","Syrc"]);function Kr(h){return!dn.test(String.fromCodePoint(h))}const zn=ir(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Qr(h){return!(h!==746&&h!==747&&(h<4352||!(Dt["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||Dt["CJK Compatibility"](h)||Dt["CJK Strokes"](h)||!(!Dt["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||Dt["Enclosed CJK Letters and Months"](h)||Dt["Ideographic Description Characters"](h)||Dt.Kanbun(h)||Dt.Katakana(h)&&h!==12540||!(!Dt["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!Dt["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||Dt["Vertical Forms"](h)||Dt["Yijing Hexagram Symbols"](h)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(h))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(h))||zn.test(String.fromCodePoint(h)))))}function Qn(h){return!(Qr(h)||function(o){return!!(Dt["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||Dt["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||Dt["Letterlike Symbols"](o)||Dt["Number Forms"](o)||Dt["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||Dt["Control Pictures"](o)&&o!==9251||Dt["Optical Character Recognition"](o)||Dt["Enclosed Alphanumerics"](o)||Dt["Geometric Shapes"](o)||Dt["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Dt["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Dt["CJK Symbols and Punctuation"](o)||Dt.Katakana(o)||Dt["Private Use Area"](o)||Dt["CJK Compatibility Forms"](o)||Dt["Small Form Variants"](o)||Dt["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(h))}const Uo=ir(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function kn(h){return Uo.test(String.fromCodePoint(h))}function on(h,o){return!(!o&&kn(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||Dt.Khmer(h))}function Mr(h){for(const o of h)if(kn(o.charCodeAt(0)))return!0;return!1}const Ri=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(h){this.pluginStatus=h.pluginStatus,this.pluginURL=h.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(h){if(Ri.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=h.applyArabicShaping,this.processBidirectionalText=h.processBidirectionalText,this.processStyledBidirectionalText=h.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(h,o){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(h.pluginStatus!=="loading")return this.setState(h),h;const c=h.pluginURL,d=new Promise(x=>{this.loadScriptResolve=x});o(c);const g=new Promise(x=>setTimeout(()=>x(),this.TIMEOUT));if(yield Promise.race([d,g]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:c};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${c}`)})}};class Gr{constructor(o,c){this.zoom=o,c?(this.now=c.now||0,this.fadeDuration=c.fadeDuration||0,this.zoomHistory=c.zoomHistory||new Bt,this.transition=c.transition||{},this.globalState=c.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bt,this.transition={},this.globalState={})}isSupportedScript(o){return function(c,d){for(const g of c)if(!on(g.charCodeAt(0),d))return!1;return!0}(o,Ri.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,c=o-Math.floor(o),d=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:c+(1-c)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*c}}}class Zn{constructor(o,c){this.property=o,this.value=c,this.expression=function(d,g){if(Ds(d))return new Fh(d,g);if(Sf(d)){const x=Sd(d,g);if(x.result==="error")throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=d;return g.type==="color"&&typeof d=="string"?x=jr.parse(d):g.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?g.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?g.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?x=Wr.parse(d):g.type==="projectionDefinition"&&typeof d=="string"&&(x=vn.parse(d)):x=Pn.parse(d):x=Jn.parse(d):x=xn.parse(d),{globalStateRefs:new Set,kind:"constant",evaluate:()=>x}}}(c===void 0?o.specification.default:c,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(o,c,d){return this.property.possiblyEvaluate(this,o,c,d)}}class Ni{constructor(o){this.property=o,this.value=new Zn(o,void 0)}transitioned(o,c){return new za(this.property,this.value,c,Ut({},o.transition,this.transition),o.now)}untransitioned(){return new za(this.property,this.value,null,{},0)}}class ea{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Ue(this._values[o].value.value)}setValue(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ni(this._values[o].property)),this._values[o].value=new Zn(this._values[o].property,c===null?void 0:Ue(c))}getTransition(o){return Ue(this._values[o].transition)}setTransition(o,c){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new Ni(this._values[o].property)),this._values[o].transition=Ue(c)||void 0}serialize(){const o={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(o[c]=d);const g=this.getTransition(c);g!==void 0&&(o[`${c}-transition`]=g)}return o}transitioned(o,c){const d=new po(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(o,c._values[g]);return d}untransitioned(){const o=new po(this._properties);for(const c of Object.keys(this._values))o._values[c]=this._values[c].untransitioned();return o}}class za{constructor(o,c,d,g,x){this.property=o,this.value=c,this.begin=x+g.delay||0,this.end=this.begin+g.duration||0,o.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(o,c,d){const g=o.now||0,x=this.value.possiblyEvaluate(o,c,d),w=this.prior;if(w){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return w.possiblyEvaluate(o,c,d);{const A=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,c,d),x,Je(A))}}return x}}class po{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,c,d){const g=new xo(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,c,d);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class $a{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Ue(this._values[o].value)}setValue(o,c){this._values[o]=new Zn(this._values[o].property,c===null?void 0:Ue(c))}serialize(){const o={};for(const c of Object.keys(this._values)){const d=this.getValue(c);d!==void 0&&(o[c]=d)}return o}possiblyEvaluate(o,c,d){const g=new xo(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(o,c,d);return g}}class io{constructor(o,c,d){this.property=o,this.value=c,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,c,d,g){return this.property.evaluate(this.value,this.parameters,o,c,d,g)}}class xo{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class sr{constructor(o){this.specification=o}possiblyEvaluate(o,c){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(c)}interpolate(o,c,d){const g=fi[this.specification.type];return g?g(o,c,d):o}}class Tr{constructor(o,c){this.specification=o,this.overrides=c}possiblyEvaluate(o,c,d,g){return new io(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(c,null,{},d,g)}:o.expression,c)}interpolate(o,c,d){if(o.value.kind!=="constant"||c.value.kind!=="constant")return o;if(o.value.value===void 0||c.value.value===void 0)return new io(this,{kind:"constant",value:void 0},o.parameters);const g=fi[this.specification.type];if(g){const x=g(o.value.value,c.value.value,d);return new io(this,{kind:"constant",value:x},o.parameters)}return o}evaluate(o,c,d,g,x,w){return o.kind==="constant"?o.value:o.evaluate(c,d,g,x,w)}}class Wi extends Tr{possiblyEvaluate(o,c,d,g){if(o.value===void 0)return new io(this,{kind:"constant",value:void 0},c);if(o.expression.kind==="constant"){const x=o.expression.evaluate(c,null,{},d,g),w=o.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,A=this._calculate(w,w,w,c);return new io(this,{kind:"constant",value:A},c)}if(o.expression.kind==="camera"){const x=this._calculate(o.expression.evaluate({zoom:c.zoom-1}),o.expression.evaluate({zoom:c.zoom}),o.expression.evaluate({zoom:c.zoom+1}),c);return new io(this,{kind:"constant",value:x},c)}return new io(this,o.expression,c)}evaluate(o,c,d,g,x,w){if(o.kind==="source"){const A=o.evaluate(c,d,g,x,w);return this._calculate(A,A,A,c)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(c.zoom)-1},d,g),o.evaluate({zoom:Math.floor(c.zoom)},d,g),o.evaluate({zoom:Math.floor(c.zoom)+1},d,g),c):o.value}_calculate(o,c,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:d,to:c}}interpolate(o){return o}}class bi{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,g){if(o.value!==void 0){if(o.expression.kind==="constant"){const x=o.expression.evaluate(c,null,{},d,g);return this._calculate(x,x,x,c)}return this._calculate(o.expression.evaluate(new Gr(Math.floor(c.zoom-1),c)),o.expression.evaluate(new Gr(Math.floor(c.zoom),c)),o.expression.evaluate(new Gr(Math.floor(c.zoom+1),c)),c)}}_calculate(o,c,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:c}:{from:d,to:c}}interpolate(o){return o}}class Mo{constructor(o){this.specification=o}possiblyEvaluate(o,c,d,g){return!!o.expression.evaluate(c,null,{},d,g)}interpolate(){return!1}}class Zi{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const c in o){const d=o[c];d.specification.overridable&&this.overridableProperties.push(c);const g=this.defaultPropertyValues[c]=new Zn(d,void 0),x=this.defaultTransitionablePropertyValues[c]=new Ni(d);this.defaultTransitioningPropertyValues[c]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[c]=g.possiblyEvaluate({})}}}$e("DataDrivenProperty",Tr),$e("DataConstantProperty",sr),$e("CrossFadedDataDrivenProperty",Wi),$e("CrossFadedProperty",bi),$e("ColorRampProperty",Mo);const wo="-transition";class Ei extends Ft{constructor(o,c){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter,this._featureFilter=sl(o.filter)),c.layout&&(this._unevaluatedLayout=new $a(c.layout)),c.paint)){this._transitionablePaint=new ea(c.paint);for(const d in o.paint)this.setPaintProperty(d,o.paint[d],{validate:!1});for(const d in o.layout)this.setLayoutProperty(d,o.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new xo(c.paint)}}setFilter(o){this.filter=o,this._featureFilter=sl(o)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}getLayoutAffectingGlobalStateRefs(){const o=new Set;if(this._unevaluatedLayout)for(const c in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[c];for(const g of d.getGlobalStateRefs())o.add(g)}for(const c of this._featureFilter.getGlobalStateRefs())o.add(c);return o}setLayoutProperty(o,c,d={}){c!=null&&this._validate(_e,`layers.${this.id}.layout.${o}`,o,c,d)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,c):this.visibility=c)}getPaintProperty(o){return o.endsWith(wo)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,c,d={}){if(c!=null&&this._validate(ge,`layers.${this.id}.paint.${o}`,o,c,d))return!1;if(o.endsWith(wo))return this._transitionablePaint.setTransition(o.slice(0,-11),c||void 0),!1;{const g=this._transitionablePaint._values[o],x=g.property.specification["property-type"]==="cross-faded-data-driven",w=g.value.isDataDriven(),A=g.value;this._transitionablePaint.setValue(o,c),this._handleSpecialPaintPropertyUpdate(o);const L=this._transitionablePaint._values[o].value;return L.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(o,A,L)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,c,d){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,c){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,c)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,c)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),It(o,(c,d)=>!(c===void 0||d==="layout"&&!Object.keys(c).length||d==="paint"&&!Object.keys(c).length))}_validate(o,c,d,g,x={}){return(!x||x.validate!==!1)&&Ce(this,o.call(U,{key:c,layerType:this.type,objectKey:d,value:g,styleSpec:it,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const c=this.paint.get(o);if(c instanceof io&&bo(c.property.specification)&&(c.value.kind==="source"||c.value.kind==="composite")&&c.value.isStateDependent)return!0}return!1}}const Oi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Xi{constructor(o,c){this._structArray=o,this._pos1=c*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class si{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,c){return o._trim(),c&&(o.isTransferred=!0,c.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const c=Object.create(this.prototype);return c.arrayBuffer=o.arrayBuffer,c.length=o.length,c.capacity=o.arrayBuffer.byteLength/c.bytesPerElement,c._refreshViews(),c}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const c=this.uint8;this._refreshViews(),c&&this.uint8.set(c)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ei(h,o=1){let c=0,d=0;return{members:h.map(g=>{const x=Oi[g.type].BYTES_PER_ELEMENT,w=c=bs(c,Math.max(o,x)),A=g.components||1;return d=Math.max(d,x),c+=x*A,{name:g.name,type:g.type,components:A,offset:w}}),size:bs(c,Math.max(d,o)),alignment:o}}function bs(h,o){return Math.ceil(h/o)*o}class Vo extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const g=2*o;return this.int16[g+0]=c,this.int16[g+1]=d,o}}Vo.prototype.bytesPerElement=4,$e("StructArrayLayout2i4",Vo);class ko extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const x=3*o;return this.int16[x+0]=c,this.int16[x+1]=d,this.int16[x+2]=g,o}}ko.prototype.bytesPerElement=6,$e("StructArrayLayout3i6",ko);class ns extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,c,d,g)}emplace(o,c,d,g,x){const w=4*o;return this.int16[w+0]=c,this.int16[w+1]=d,this.int16[w+2]=g,this.int16[w+3]=x,o}}ns.prototype.bytesPerElement=8,$e("StructArrayLayout4i8",ns);class Ai extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,c,d,g,x,w)}emplace(o,c,d,g,x,w,A){const L=6*o;return this.int16[L+0]=c,this.int16[L+1]=d,this.int16[L+2]=g,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=A,o}}Ai.prototype.bytesPerElement=12,$e("StructArrayLayout2i4i12",Ai);class ta extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,c,d,g,x,w)}emplace(o,c,d,g,x,w,A){const L=4*o,N=8*o;return this.int16[L+0]=c,this.int16[L+1]=d,this.uint8[N+4]=g,this.uint8[N+5]=x,this.uint8[N+6]=w,this.uint8[N+7]=A,o}}ta.prototype.bytesPerElement=8,$e("StructArrayLayout2i4ub8",ta);class is extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const g=2*o;return this.float32[g+0]=c,this.float32[g+1]=d,o}}is.prototype.bytesPerElement=8,$e("StructArrayLayout2f8",is);class wu extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w,A,L,N,j){const H=this.length;return this.resize(H+1),this.emplace(H,o,c,d,g,x,w,A,L,N,j)}emplace(o,c,d,g,x,w,A,L,N,j,H){const te=10*o;return this.uint16[te+0]=c,this.uint16[te+1]=d,this.uint16[te+2]=g,this.uint16[te+3]=x,this.uint16[te+4]=w,this.uint16[te+5]=A,this.uint16[te+6]=L,this.uint16[te+7]=N,this.uint16[te+8]=j,this.uint16[te+9]=H,o}}wu.prototype.bytesPerElement=20,$e("StructArrayLayout10ui20",wu);class cl extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w,A,L,N,j,H,te){const ie=this.length;return this.resize(ie+1),this.emplace(ie,o,c,d,g,x,w,A,L,N,j,H,te)}emplace(o,c,d,g,x,w,A,L,N,j,H,te,ie){const se=12*o;return this.int16[se+0]=c,this.int16[se+1]=d,this.int16[se+2]=g,this.int16[se+3]=x,this.uint16[se+4]=w,this.uint16[se+5]=A,this.uint16[se+6]=L,this.uint16[se+7]=N,this.int16[se+8]=j,this.int16[se+9]=H,this.int16[se+10]=te,this.int16[se+11]=ie,o}}cl.prototype.bytesPerElement=24,$e("StructArrayLayout4i4ui4i24",cl);class ra extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const x=3*o;return this.float32[x+0]=c,this.float32[x+1]=d,this.float32[x+2]=g,o}}ra.prototype.bytesPerElement=12,$e("StructArrayLayout3f12",ra);class _ extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint32[1*o+0]=c,o}}_.prototype.bytesPerElement=4,$e("StructArrayLayout1ul4",_);class i extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w,A,L,N){const j=this.length;return this.resize(j+1),this.emplace(j,o,c,d,g,x,w,A,L,N)}emplace(o,c,d,g,x,w,A,L,N,j){const H=10*o,te=5*o;return this.int16[H+0]=c,this.int16[H+1]=d,this.int16[H+2]=g,this.int16[H+3]=x,this.int16[H+4]=w,this.int16[H+5]=A,this.uint32[te+3]=L,this.uint16[H+8]=N,this.uint16[H+9]=j,o}}i.prototype.bytesPerElement=20,$e("StructArrayLayout6i1ul2ui20",i);class u extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,c,d,g,x,w)}emplace(o,c,d,g,x,w,A){const L=6*o;return this.int16[L+0]=c,this.int16[L+1]=d,this.int16[L+2]=g,this.int16[L+3]=x,this.int16[L+4]=w,this.int16[L+5]=A,o}}u.prototype.bytesPerElement=12,$e("StructArrayLayout2i2i2i12",u);class p extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,o,c,d,g,x)}emplace(o,c,d,g,x,w){const A=4*o,L=8*o;return this.float32[A+0]=c,this.float32[A+1]=d,this.float32[A+2]=g,this.int16[L+6]=x,this.int16[L+7]=w,o}}p.prototype.bytesPerElement=16,$e("StructArrayLayout2f1f2i16",p);class m extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w){const A=this.length;return this.resize(A+1),this.emplace(A,o,c,d,g,x,w)}emplace(o,c,d,g,x,w,A){const L=16*o,N=4*o,j=8*o;return this.uint8[L+0]=c,this.uint8[L+1]=d,this.float32[N+1]=g,this.float32[N+2]=x,this.int16[j+6]=w,this.int16[j+7]=A,o}}m.prototype.bytesPerElement=16,$e("StructArrayLayout2ub2f2i16",m);class b extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const x=3*o;return this.uint16[x+0]=c,this.uint16[x+1]=d,this.uint16[x+2]=g,o}}b.prototype.bytesPerElement=6,$e("StructArrayLayout3ui6",b);class C extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe){const dt=this.length;return this.resize(dt+1),this.emplace(dt,o,c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe)}emplace(o,c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe,dt){const Xe=24*o,re=12*o,Se=48*o;return this.int16[Xe+0]=c,this.int16[Xe+1]=d,this.uint16[Xe+2]=g,this.uint16[Xe+3]=x,this.uint32[re+2]=w,this.uint32[re+3]=A,this.uint32[re+4]=L,this.uint16[Xe+10]=N,this.uint16[Xe+11]=j,this.uint16[Xe+12]=H,this.float32[re+7]=te,this.float32[re+8]=ie,this.uint8[Se+36]=se,this.uint8[Se+37]=fe,this.uint8[Se+38]=Te,this.uint32[re+10]=Fe,this.int16[Xe+22]=dt,o}}C.prototype.bytesPerElement=48,$e("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",C);class I extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe,dt,Xe,re,Se,Qe,Rt,Qt,jt,Vt,cr,tr){const fr=this.length;return this.resize(fr+1),this.emplace(fr,o,c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe,dt,Xe,re,Se,Qe,Rt,Qt,jt,Vt,cr,tr)}emplace(o,c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe,dt,Xe,re,Se,Qe,Rt,Qt,jt,Vt,cr,tr,fr){const qt=32*o,zr=16*o;return this.int16[qt+0]=c,this.int16[qt+1]=d,this.int16[qt+2]=g,this.int16[qt+3]=x,this.int16[qt+4]=w,this.int16[qt+5]=A,this.int16[qt+6]=L,this.int16[qt+7]=N,this.uint16[qt+8]=j,this.uint16[qt+9]=H,this.uint16[qt+10]=te,this.uint16[qt+11]=ie,this.uint16[qt+12]=se,this.uint16[qt+13]=fe,this.uint16[qt+14]=Te,this.uint16[qt+15]=Fe,this.uint16[qt+16]=dt,this.uint16[qt+17]=Xe,this.uint16[qt+18]=re,this.uint16[qt+19]=Se,this.uint16[qt+20]=Qe,this.uint16[qt+21]=Rt,this.uint16[qt+22]=Qt,this.uint32[zr+12]=jt,this.float32[zr+13]=Vt,this.float32[zr+14]=cr,this.uint16[qt+30]=tr,this.uint16[qt+31]=fr,o}}I.prototype.bytesPerElement=64,$e("StructArrayLayout8i15ui1ul2f2ui64",I);class R extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.float32[1*o+0]=c,o}}R.prototype.bytesPerElement=4,$e("StructArrayLayout1f4",R);class B extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const x=3*o;return this.uint16[6*o+0]=c,this.float32[x+1]=d,this.float32[x+2]=g,o}}B.prototype.bytesPerElement=12,$e("StructArrayLayout1ui2f12",B);class q extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c,d){const g=this.length;return this.resize(g+1),this.emplace(g,o,c,d)}emplace(o,c,d,g){const x=4*o;return this.uint32[2*o+0]=c,this.uint16[x+2]=d,this.uint16[x+3]=g,o}}q.prototype.bytesPerElement=8,$e("StructArrayLayout1ul2ui8",q);class X extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,c){const d=this.length;return this.resize(d+1),this.emplace(d,o,c)}emplace(o,c,d){const g=2*o;return this.uint16[g+0]=c,this.uint16[g+1]=d,o}}X.prototype.bytesPerElement=4,$e("StructArrayLayout2ui4",X);class Z extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const c=this.length;return this.resize(c+1),this.emplace(c,o)}emplace(o,c){return this.uint16[1*o+0]=c,o}}Z.prototype.bytesPerElement=2,$e("StructArrayLayout1ui2",Z);class ee extends si{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,c,d,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,c,d,g)}emplace(o,c,d,g,x){const w=4*o;return this.float32[w+0]=c,this.float32[w+1]=d,this.float32[w+2]=g,this.float32[w+3]=x,o}}ee.prototype.bytesPerElement=16,$e("StructArrayLayout4f16",ee);class he extends Xi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new F(this.anchorPointX,this.anchorPointY)}}he.prototype.size=20;class Ie extends i{get(o){return new he(this,o)}}$e("CollisionBoxArray",Ie);class Pe extends Xi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Pe.prototype.size=48;class Me extends C{get(o){return new Pe(this,o)}}$e("PlacedSymbolArray",Me);class Be extends Xi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Be.prototype.size=64;class Ke extends I{get(o){return new Be(this,o)}}$e("SymbolInstanceArray",Ke);class He extends R{getoffsetX(o){return this.float32[1*o+0]}}$e("GlyphOffsetArray",He);class et extends ko{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}$e("SymbolLineVertexArray",et);class at extends Xi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}at.prototype.size=12;class Ge extends B{get(o){return new at(this,o)}}$e("TextAnchorOffsetArray",Ge);class mt extends Xi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}mt.prototype.size=8;class Nt extends q{get(o){return new mt(this,o)}}$e("FeatureIndexArray",Nt);class Mt extends Vo{}class kt extends Vo{}class zt extends Vo{}class yr extends Ai{}class mr extends ta{}class Kt extends is{}class Fr extends wu{}class Nn extends cl{}class ti extends ra{}class Vi extends _{}class yi extends u{}class vi extends m{}class hi extends b{}class li extends X{}const xi=ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:na}=xi;class Xn{constructor(o=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=o}prepareSegment(o,c,d,g){const x=this.segments[this.segments.length-1];return o>Xn.MAX_VERTEX_ARRAY_LENGTH&&Nr(`Max vertices per segment is ${Xn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Xn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+o>Xn.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g?this.createNewSegment(c,d,g):x}createNewSegment(o,c,d){const g={vertexOffset:o.length,primitiveOffset:c.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(g.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(o,c,d){return this.prepareSegment(0,o,c,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const o of this.segments)for(const c in o.vaos)o.vaos[c].destroy()}static simpleSegment(o,c,d,g){return new Xn([{vertexOffset:o,primitiveOffset:c,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function da(h,o){return 256*(h=ft(Math.floor(h),0,255))+ft(Math.floor(o),0,255)}Xn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$e("SegmentVector",Xn);const ia=ei([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ql,sh,lh,Zu={exports:{}},Td={exports:{}},Ad={exports:{}},Mf=function(){if(lh)return Zu.exports;lh=1;var h=(Ql||(Ql=1,Td.exports=function(c,d){var g,x,w,A,L,N,j,H;for(x=c.length-(g=3&c.length),w=d,L=3432918353,N=461845907,H=0;H<x;)j=255&c.charCodeAt(H)|(255&c.charCodeAt(++H))<<8|(255&c.charCodeAt(++H))<<16|(255&c.charCodeAt(++H))<<24,++H,w=27492+(65535&(A=5*(65535&(w=(w^=j=(65535&(j=(j=(65535&j)*L+(((j>>>16)*L&65535)<<16)&4294967295)<<15|j>>>17))*N+(((j>>>16)*N&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(j=0,g){case 3:j^=(255&c.charCodeAt(H+2))<<16;case 2:j^=(255&c.charCodeAt(H+1))<<8;case 1:w^=j=(65535&(j=(j=(65535&(j^=255&c.charCodeAt(H)))*L+(((j>>>16)*L&65535)<<16)&4294967295)<<15|j>>>17))*N+(((j>>>16)*N&65535)<<16)&4294967295}return w^=c.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Td.exports),o=(sh||(sh=1,Ad.exports=function(c,d){for(var g,x=c.length,w=d^x,A=0;x>=4;)g=1540483477*(65535&(g=255&c.charCodeAt(A)|(255&c.charCodeAt(++A))<<8|(255&c.charCodeAt(++A))<<16|(255&c.charCodeAt(++A))<<24))+((1540483477*(g>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),x-=4,++A;switch(x){case 3:w^=(255&c.charCodeAt(A+2))<<16;case 2:w^=(255&c.charCodeAt(A+1))<<8;case 1:w=1540483477*(65535&(w^=255&c.charCodeAt(A)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Ad.exports);return Zu.exports=h,Zu.exports.murmur3=h,Zu.exports.murmur2=o,Zu.exports}(),hl=y(Mf);class Su{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,c,d,g){this.ids.push(uh(o)),this.positions.push(c,d,g)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const c=uh(o);let d=0,g=this.ids.length-1;for(;d<g;){const w=d+g>>1;this.ids[w]>=c?g=w:d=w+1}const x=[];for(;this.ids[d]===c;)x.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return x}static serialize(o,c){const d=new Float64Array(o.ids),g=new Uint32Array(o.positions);return qh(d,g,0,d.length-1),c&&c.push(d.buffer,g.buffer),{ids:d,positions:g}}static deserialize(o){const c=new Su;return c.ids=o.ids,c.positions=o.positions,c.indexed=!0,c}}function uh(h){const o=+h;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:hl(String(h))}function qh(h,o,c,d){for(;c<d;){const g=h[c+d>>1];let x=c-1,w=d+1;for(;;){do x++;while(h[x]<g);do w--;while(h[w]>g);if(x>=w)break;qo(h,x,w),qo(o,3*x,3*w),qo(o,3*x+1,3*w+1),qo(o,3*x+2,3*w+2)}w-c<d-w?(qh(h,o,c,w),c=w+1):(qh(h,o,w+1,d),d=w)}}function qo(h,o,c){const d=h[o];h[o]=h[c],h[c]=d}$e("FeaturePositionMap",Su);class oo{constructor(o,c){this.gl=o.gl,this.location=c}}class Rs extends oo{constructor(o,c){super(o,c),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class Ea extends oo{constructor(o,c){super(o,c),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class Iv extends oo{constructor(o,c){super(o,c),this.current=jr.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const Jb=new Float32Array(16);function Yg(h){return[da(255*h.r,255*h.g),da(255*h.b,255*h.a)]}class Pd{constructor(o,c,d){this.value=o,this.uniformNames=c.map(g=>`u_${g}`),this.type=d}setUniform(o,c,d){o.set(d.constantOr(this.value))}getBinding(o,c,d){return this.type==="color"?new Iv(o,c):new Rs(o,c)}}class kf{constructor(o,c){this.uniformNames=c.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,c){this.pixelRatioFrom=c.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=c.tlbr,this.patternTo=o.tlbr}setUniform(o,c,d,g){const x=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&o.set(x)}getBinding(o,c,d){return d.substr(0,9)==="u_pattern"?new Ea(o,c):new Rs(o,c)}}class Ec{constructor(o,c,d,g){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=c.map(x=>({name:`a_${x}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,c,d,g,x){const w=this.paintVertexArray.length,A=this.expression.evaluate(new Gr(0),c,{},g,[],x);this.paintVertexArray.resize(o),this._setPaintValue(w,o,A)}updatePaintArray(o,c,d,g){const x=this.expression.evaluate({zoom:0},d,g);this._setPaintValue(o,c,x)}_setPaintValue(o,c,d){if(this.type==="color"){const g=Yg(d);for(let x=o;x<c;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=o;g<c;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class os{constructor(o,c,d,g,x,w){this.expression=o,this.uniformNames=c.map(A=>`u_${A}_t`),this.type=d,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=c.map(A=>({name:`a_${A}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,c,d,g,x){const w=this.expression.evaluate(new Gr(this.zoom),c,{},g,[],x),A=this.expression.evaluate(new Gr(this.zoom+1),c,{},g,[],x),L=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(L,o,w,A)}updatePaintArray(o,c,d,g){const x=this.expression.evaluate({zoom:this.zoom},d,g),w=this.expression.evaluate({zoom:this.zoom+1},d,g);this._setPaintValue(o,c,x,w)}_setPaintValue(o,c,d,g){if(this.type==="color"){const x=Yg(d),w=Yg(g);for(let A=o;A<c;A++)this.paintVertexArray.emplace(A,x[0],x[1],w[0],w[1])}else{for(let x=o;x<c;x++)this.paintVertexArray.emplace(x,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,c){const d=this.useIntegerZoom?Math.floor(c.zoom):c.zoom,g=ft(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);o.set(g)}getBinding(o,c,d){return new Rs(o,c)}}class Tc{constructor(o,c,d,g,x,w){this.expression=o,this.type=c,this.useIntegerZoom=d,this.zoom=g,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(o,c,d){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(g,o,c.patterns&&c.patterns[this.layerId],d)}updatePaintArray(o,c,d,g,x){this._setPaintValues(o,c,d.patterns&&d.patterns[this.layerId],x)}_setPaintValues(o,c,d,g){if(!g||!d)return;const{min:x,mid:w,max:A}=d,L=g[x],N=g[w],j=g[A];if(L&&N&&j)for(let H=o;H<c;H++)this.zoomInPaintVertexArray.emplace(H,N.tl[0],N.tl[1],N.br[0],N.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],N.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,N.tl[0],N.tl[1],N.br[0],N.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],N.pixelRatio,j.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,ia.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,ia.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Kg{constructor(o,c,d){this.binders={},this._buffers=[];const g=[];for(const x in o.paint._values){if(!d(x))continue;const w=o.paint.get(x);if(!(w instanceof io&&bo(w.property.specification)))continue;const A=Jg(x,o.type),L=w.value,N=w.property.specification.type,j=w.property.useIntegerZoom,H=w.property.specification["property-type"],te=H==="cross-faded"||H==="cross-faded-data-driven";if(L.kind==="constant")this.binders[x]=te?new kf(L.value,A):new Pd(L.value,A,N),g.push(`/u_${x}`);else if(L.kind==="source"||te){const ie=Qg(x,N,"source");this.binders[x]=te?new Tc(L,N,j,c,ie,o.id):new Ec(L,A,N,ie),g.push(`/a_${x}`)}else{const ie=Qg(x,N,"composite");this.binders[x]=new os(L,A,N,j,c,ie),g.push(`/z_${x}`)}}this.cacheKey=g.sort().join("")}getMaxValue(o){const c=this.binders[o];return c instanceof Ec||c instanceof os?c.maxValue:0}populatePaintArrays(o,c,d,g,x){for(const w in this.binders){const A=this.binders[w];(A instanceof Ec||A instanceof os||A instanceof Tc)&&A.populatePaintArray(o,c,d,g,x)}}setConstantPatternPositions(o,c){for(const d in this.binders){const g=this.binders[d];g instanceof kf&&g.setConstantPatternPositions(o,c)}}updatePaintArrays(o,c,d,g,x){let w=!1;for(const A in o){const L=c.getPositions(A);for(const N of L){const j=d.feature(N.index);for(const H in this.binders){const te=this.binders[H];if((te instanceof Ec||te instanceof os||te instanceof Tc)&&te.expression.isStateDependent===!0){const ie=g.paint.get(H);te.expression=ie.value,te.updatePaintArray(N.start,N.end,j,o[A],x),w=!0}}}}return w}defines(){const o=[];for(const c in this.binders){const d=this.binders[c];(d instanceof Pd||d instanceof kf)&&o.push(...d.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Ec||d instanceof os)for(let g=0;g<d.paintVertexAttributes.length;g++)o.push(d.paintVertexAttributes[g].name);else if(d instanceof Tc)for(let g=0;g<ia.members.length;g++)o.push(ia.members[g].name)}return o}getBinderUniforms(){const o=[];for(const c in this.binders){const d=this.binders[c];if(d instanceof Pd||d instanceof kf||d instanceof os)for(const g of d.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,c){const d=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof Pd||x instanceof kf||x instanceof os){for(const w of x.uniformNames)if(c[w]){const A=x.getBinding(o,c[w],w);d.push({name:w,property:g,binding:A})}}}return d}setUniforms(o,c,d,g){for(const{name:x,property:w,binding:A}of c)this.binders[w].setUniform(A,g,d.get(w),x)}updatePaintBuffers(o){this._buffers=[];for(const c in this.binders){const d=this.binders[c];if(o&&d instanceof Tc){const g=o.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(d instanceof Ec||d instanceof os)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(o){for(const c in this.binders){const d=this.binders[c];(d instanceof Ec||d instanceof os||d instanceof Tc)&&d.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const c=this.binders[o];(c instanceof Ec||c instanceof os||c instanceof Tc)&&c.destroy()}}}class ch{constructor(o,c,d=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new Kg(g,c,d);this.needsUpload=!1,this._featureMap=new Su,this._bufferOffset=0}populatePaintArrays(o,c,d,g,x,w){for(const A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(o,c,g,x,w);c.id!==void 0&&this._featureMap.add(c.id,d,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,c,d,g){for(const x of d)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(o,this._featureMap,c,x,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const c in this.programConfigurations)this.programConfigurations[c].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function Jg(h,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[h]||[h.replace(`${o}-`,"").replace(/-/g,"_")]}function Qg(h,o,c){const d={color:{source:is,composite:ee},number:{source:R,composite:is}},g=function(x){return{"line-pattern":{source:Fr,composite:Fr},"fill-pattern":{source:Fr,composite:Fr},"fill-extrusion-pattern":{source:Fr,composite:Fr}}[x]}(h);return g&&g[c]||d[o][c]}$e("ConstantBinder",Pd),$e("CrossFadedConstantBinder",kf),$e("SourceExpressionBinder",Ec),$e("CrossFadedCompositeBinder",Tc),$e("CompositeExpressionBinder",os),$e("ProgramConfiguration",Kg,{omit:["_buffers"]}),$e("ProgramConfigurationSet",ch);const Id=Math.pow(2,14)-1,lT=-Id-1;function Md(h){const o=ne/h.extent,c=h.loadGeometry();for(let d=0;d<c.length;d++){const g=c[d];for(let x=0;x<g.length;x++){const w=g[x],A=Math.round(w.x*o),L=Math.round(w.y*o);w.x=ft(A,lT,Id),w.y=ft(L,lT,Id),(A<w.x||A>w.x+1||L<w.y||L>w.y+1)&&Nr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return c}function kd(h,o){return{type:h.type,id:h.id,properties:h.properties,geometry:o?Md(h):[]}}const uT=-32768;function $F(h,o,c,d,g){h.emplaceBack(uT+8*o+d,uT+8*c+g)}class Qb{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new kt,this.indexArray=new hi,this.segments=new Xn,this.programConfigurations=new ch(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){const g=this.layers[0],x=[];let w=null,A=!1,L=g.type==="heatmap";if(g.type==="circle"){const j=g;w=j.layout.get("circle-sort-key"),A=!w.isConstant(),L=L||j.paint.get("circle-pitch-alignment")==="map"}const N=L?c.subdivisionGranularity.circle:1;for(const{feature:j,id:H,index:te,sourceLayerIndex:ie}of o){const se=this.layers[0]._featureFilter.needGeometry,fe=kd(j,se);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom,{globalState:this.globalState}),fe,d))continue;const Te=A?w.evaluate(fe,{},d):void 0,Fe={id:H,properties:j.properties,type:j.type,sourceLayerIndex:ie,index:te,geometry:se?fe.geometry:Md(j),patterns:{},sortKey:Te};x.push(Fe)}A&&x.sort((j,H)=>j.sortKey-H.sortKey);for(const j of x){const{geometry:H,index:te,sourceLayerIndex:ie}=j,se=o[te].feature;this.addFeature(j,H,te,d,N),c.featureIndex.insert(se,H,te,ie,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,na),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,c,d,g,x=1){let w;switch(x){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const A=w.length;for(const L of c)for(const N of L){const j=N.x,H=N.y;if(j<0||j>=ne||H<0||H>=ne)continue;const te=this.segments.prepareSegment(A*A,this.layoutVertexArray,this.indexArray,o.sortKey),ie=te.vertexLength;for(let se=0;se<A;se++)for(let fe=0;fe<A;fe++)$F(this.layoutVertexArray,j,H,w[fe],w[se]);for(let se=0;se<A-1;se++)for(let fe=0;fe<A-1;fe++){const Te=ie+se*A+fe,Fe=ie+(se+1)*A+fe;this.indexArray.emplaceBack(Te,Fe+1,Te+1),this.indexArray.emplaceBack(Te,Fe,Fe+1)}te.vertexLength+=A*A,te.primitiveLength+=(A-1)*(A-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},g)}}function cT(h,o){for(let c=0;c<h.length;c++)if(Vp(o,h[c]))return!0;for(let c=0;c<o.length;c++)if(Vp(h,o[c]))return!0;return!!ex(h,o)}function jF(h,o,c){return!!Vp(h,o)||!!tx(o,h,c)}function hT(h,o){if(h.length===1)return dT(o,h[0]);for(let c=0;c<o.length;c++){const d=o[c];for(let g=0;g<d.length;g++)if(Vp(h,d[g]))return!0}for(let c=0;c<h.length;c++)if(dT(o,h[c]))return!0;for(let c=0;c<o.length;c++)if(ex(h,o[c]))return!0;return!1}function UF(h,o,c){if(h.length>1){if(ex(h,o))return!0;for(let d=0;d<o.length;d++)if(tx(o[d],h,c))return!0}for(let d=0;d<h.length;d++)if(tx(h[d],o,c))return!0;return!1}function ex(h,o){if(h.length===0||o.length===0)return!1;for(let c=0;c<h.length-1;c++){const d=h[c],g=h[c+1];for(let x=0;x<o.length-1;x++)if(VF(d,g,o[x],o[x+1]))return!0}return!1}function VF(h,o,c,d){return Pr(h,c,d)!==Pr(o,c,d)&&Pr(h,o,c)!==Pr(h,o,d)}function tx(h,o,c){const d=c*c;if(o.length===1)return h.distSqr(o[0])<d;for(let g=1;g<o.length;g++)if(fT(h,o[g-1],o[g])<d)return!0;return!1}function fT(h,o,c){const d=o.distSqr(c);if(d===0)return h.distSqr(o);const g=((h.x-o.x)*(c.x-o.x)+(h.y-o.y)*(c.y-o.y))/d;return h.distSqr(g<0?o:g>1?c:c.sub(o)._mult(g)._add(o))}function dT(h,o){let c,d,g,x=!1;for(let w=0;w<h.length;w++){c=h[w];for(let A=0,L=c.length-1;A<c.length;L=A++)d=c[A],g=c[L],d.y>o.y!=g.y>o.y&&o.x<(g.x-d.x)*(o.y-d.y)/(g.y-d.y)+d.x&&(x=!x)}return x}function Vp(h,o){let c=!1;for(let d=0,g=h.length-1;d<h.length;g=d++){const x=h[d],w=h[g];x.y>o.y!=w.y>o.y&&o.x<(w.x-x.x)*(o.y-x.y)/(w.y-x.y)+x.x&&(c=!c)}return c}function qF(h,o,c){const d=c[0],g=c[2];if(h.x<d.x&&o.x<d.x||h.x>g.x&&o.x>g.x||h.y<d.y&&o.y<d.y||h.y>g.y&&o.y>g.y)return!1;const x=Pr(h,o,c[0]);return x!==Pr(h,o,c[1])||x!==Pr(h,o,c[2])||x!==Pr(h,o,c[3])}function e0(h,o,c){const d=o.paint.get(h).value;return d.kind==="constant"?d.value:c.programConfigurations.get(o.id).getMaxValue(h)}function Mv(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function kv(h,o,c,d,g){if(!o[0]&&!o[1])return h;const x=F.convert(o)._mult(g);c==="viewport"&&x._rotate(-d);const w=[];for(let A=0;A<h.length;A++)w.push(h[A].sub(x));return w}let pT,mT;$e("CircleBucket",Qb,{omit:["layers"]});var GF={get paint(){return mT=mT||new Zi({"circle-radius":new Tr(it.paint_circle["circle-radius"]),"circle-color":new Tr(it.paint_circle["circle-color"]),"circle-blur":new Tr(it.paint_circle["circle-blur"]),"circle-opacity":new Tr(it.paint_circle["circle-opacity"]),"circle-translate":new sr(it.paint_circle["circle-translate"]),"circle-translate-anchor":new sr(it.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sr(it.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sr(it.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Tr(it.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Tr(it.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Tr(it.paint_circle["circle-stroke-opacity"])})},get layout(){return pT=pT||new Zi({"circle-sort-key":new Tr(it.layout_circle["circle-sort-key"])})}};class HF extends Ei{constructor(o){super(o,GF)}createBucket(o){return new Qb(o)}queryRadius(o){const c=o;return e0("circle-radius",this,c)+e0("circle-stroke-width",this,c)+Mv(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:d,geometry:g,transform:x,pixelsToTileUnits:w,unwrappedTileID:A,getElevation:L}){const N=kv(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,w),j=this.paint.get("circle-radius").evaluate(c,d)+this.paint.get("circle-stroke-width").evaluate(c,d),H=this.paint.get("circle-pitch-alignment")==="map",te=H?N:function(se,fe,Te,Fe){return se.map(dt=>gT(dt,fe,Te,Fe))}(N,x,A,L),ie=H?j*w:j;for(const se of g)for(const fe of se){const Te=H?fe:gT(fe,x,A,L);let Fe=ie;const dt=x.projectTileCoordinates(fe.x,fe.y,A,L).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Fe*=dt/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Fe*=x.cameraToCenterDistance/dt),jF(te,Te,Fe))return!0}return!1}}function gT(h,o,c,d){const g=o.projectTileCoordinates(h.x,h.y,c,d).point;return new F((.5*g.x+.5)*o.width,(.5*-g.y+.5)*o.height)}class yT extends Qb{}let vT;$e("HeatmapBucket",yT,{omit:["layers"]});var WF={get paint(){return vT=vT||new Zi({"heatmap-radius":new Tr(it.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Tr(it.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sr(it.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Mo(it.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sr(it.paint_heatmap["heatmap-opacity"])})}};function rx(h,{width:o,height:c},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*c*d)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${o*c*d}`)}else g=new Uint8Array(o*c*d);return h.width=o,h.height=c,h.data=g,h}function _T(h,{width:o,height:c},d){if(o===h.width&&c===h.height)return;const g=rx({},{width:o,height:c},d);nx(h,g,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,o),height:Math.min(h.height,c)},d),h.width=o,h.height=c,h.data=g.data}function nx(h,o,c,d,g,x){if(g.width===0||g.height===0)return o;if(g.width>h.width||g.height>h.height||c.x>h.width-g.width||c.y>h.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||d.x>o.width-g.width||d.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=h.data,A=o.data;if(w===A)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<g.height;L++){const N=((c.y+L)*h.width+c.x)*x,j=((d.y+L)*o.width+d.x)*x;for(let H=0;H<g.width*x;H++)A[j+H]=w[N+H]}return o}class t0{constructor(o,c){rx(this,o,1,c)}resize(o){_T(this,o,1)}clone(){return new t0({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,g,x){nx(o,c,d,g,x,1)}}class Ll{constructor(o,c){rx(this,o,4,c)}resize(o){_T(this,o,4)}replace(o,c){c?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Ll({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,c,d,g,x){nx(o,c,d,g,x,4)}setPixel(o,c,d){const g=4*(o*this.width+c);this.data[g+0]=Math.round(255*d.r/d.a),this.data[g+1]=Math.round(255*d.g/d.a),this.data[g+2]=Math.round(255*d.b/d.a),this.data[g+3]=Math.round(255*d.a)}}function bT(h){const o={},c=h.resolution||256,d=h.clips?h.clips.length:1,g=h.image||new Ll({width:c,height:d});if(Math.log(c)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${c}`);const x=(w,A,L)=>{o[h.evaluationKey]=L;const N=h.expression.evaluate(o);g.setPixel(w/4/c,A/4,N)};if(h.clips)for(let w=0,A=0;w<d;++w,A+=4*c)for(let L=0,N=0;L<c;L++,N+=4){const j=L/(c-1),{start:H,end:te}=h.clips[w];x(A,N,H*(1-j)+te*j)}else for(let w=0,A=0;w<c;w++,A+=4)x(0,A,w/(c-1));return g}$e("AlphaImage",t0),$e("RGBAImage",Ll);const ix="big-fb";class ZF extends Ei{createBucket(o){return new yT(o)}constructor(o){super(o,WF),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=bT({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(ix)&&this.heatmapFbos.delete(ix)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let xT;var XF={get paint(){return xT=xT||new Zi({"hillshade-illumination-direction":new sr(it.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new sr(it.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new sr(it.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sr(it.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sr(it.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sr(it.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sr(it.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new sr(it.paint_hillshade["hillshade-method"])})}};class YF extends Ei{constructor(o){super(o,XF),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let o=this.paint.get("hillshade-illumination-direction").values,c=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const x=Math.max(o.length,c.length,d.length,g.length);o=o.concat(Array(x-o.length).fill(o.at(-1))),c=c.concat(Array(x-c.length).fill(c.at(-1))),d=d.concat(Array(x-d.length).fill(d.at(-1))),g=g.concat(Array(x-g.length).fill(g.at(-1)));const w=c.map(An);return{directionRadians:o.map(An),altitudeRadians:w,shadowColor:g,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let wT;var KF={get paint(){return wT=wT||new Zi({"color-relief-opacity":new sr(it["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Mo(it["paint_color-relief"]["color-relief-color"])})}};class ox{constructor(o,c,d,g){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(c,g)}update(o,c,d){const{width:g,height:x}=o,w=!(this.size&&this.size[0]===g&&this.size[1]===x||d),{context:A}=this,{gl:L}=A;if(this.useMipmap=!!(c&&c.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!c||c.premultiply!==!1)),w)this.size=[g,x],o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||vr(o)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,o):L.texImage2D(L.TEXTURE_2D,0,this.format,g,x,0,this.format,L.UNSIGNED_BYTE,o.data);else{const{x:N,y:j}=d||{x:0,y:0};o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||vr(o)?L.texSubImage2D(L.TEXTURE_2D,0,N,j,L.RGBA,L.UNSIGNED_BYTE,o):L.texSubImage2D(L.TEXTURE_2D,0,N,j,g,x,L.RGBA,L.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),A.pixelStoreUnpackFlipY.setDefault(),A.pixelStoreUnpack.setDefault(),A.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(o,c,d){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),d!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=x.LINEAR),o!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,o),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,d||o),this.filter=o),c!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,c),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class ST{constructor(o,c,d,g=1,x=1,w=1,A=0){if(this.uid=o,c.height!==c.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Nr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=c.height;const L=this.dim=c.height-2;switch(this.data=new Uint32Array(c.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=x,this.blueFactor=w,this.baseShift=A;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<L;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(L,N)]=this.data[this._idx(L-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,L)]=this.data[this._idx(N,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<L;N++)for(let j=0;j<L;j++){const H=this.get(N,j);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(o,c){const d=new Uint8Array(this.data.buffer),g=4*this._idx(o,c);return this.unpack(d[g],d[g+1],d[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,c){if(o<-1||o>=this.dim+1||c<-1||c>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(c+1)*this.stride+(o+1)}unpack(o,c,d){return o*this.redFactor+c*this.greenFactor+d*this.blueFactor-this.baseShift}pack(o){return CT(o,this.getUnpackVector())}getPixels(){return new Ll({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,c,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=c*this.dim,x=c*this.dim+this.dim,w=d*this.dim,A=d*this.dim+this.dim;switch(c){case-1:g=x-1;break;case 1:x=g+1}switch(d){case-1:w=A-1;break;case 1:A=w+1}const L=-c*this.dim,N=-d*this.dim;for(let j=w;j<A;j++)for(let H=g;H<x;H++)this.data[this._idx(H,j)]=o.data[this._idx(H+L,j+N)]}}function CT(h,o){const c=o[0],d=o[1],g=o[2],x=o[3],w=Math.min(c,d,g),A=Math.round((h+x)/w);return{r:Math.floor(A*w/c)%256,g:Math.floor(A*w/d)%256,b:Math.floor(A*w/g)%256}}$e("DEMData",ST);class JF extends Ei{constructor(o){super(o,KF)}_createColorRamp(o){const c={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof eh&&d._styleExpression.expression instanceof _n){this.colorRampExpression=d;const w=d._styleExpression.expression;c.elevationStops=w.labels,c.colorStops=[];for(const A of c.elevationStops)c.colorStops.push(w.evaluate({globals:{elevation:A}}))}if(c.elevationStops.length<1&&(c.elevationStops=[0],c.colorStops=[jr.transparent]),c.elevationStops.length<2&&(c.elevationStops.push(c.elevationStops[0]+1),c.colorStops.push(c.colorStops[0])),c.elevationStops.length<=o)return c;const g={elevationStops:[],colorStops:[]},x=(c.elevationStops.length-1)/(o-1);for(let w=0;w<c.elevationStops.length-.5;w+=x)g.elevationStops.push(c.elevationStops[Math.round(w)]),g.colorStops.push(c.colorStops[Math.round(w)]);return Nr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(o,c,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(c),x=new Ll({width:g.colorStops.length,height:1}),w=new Ll({width:g.colorStops.length,height:1});for(let A=0;A<g.elevationStops.length;A++){const L=CT(g.elevationStops[A],d);w.setPixel(0,A,new jr(L.r/255,L.g/255,L.b/255,1)),x.setPixel(0,A,g.colorStops[A])}return this.colorRampTextures={elevationTexture:new ox(o,w,o.gl.RGBA),colorTexture:new ox(o,x,o.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const QF=ei([{name:"a_pos",components:2,type:"Int16"}],4),{members:eB}=QF;function ax(h,o,c){const d=c.patternDependencies;let g=!1;for(const x of o){const w=x.paint.get(`${h}-pattern`);w.isConstant()||(g=!0);const A=w.constantOr(null);A&&(g=!0,d[A.to]=!0,d[A.from]=!0)}return g}function sx(h,o,c,d,g){const x=g.patternDependencies;for(const w of o){const A=w.paint.get(`${h}-pattern`).value;if(A.kind!=="constant"){let L=A.evaluate({zoom:d-1},c,{},g.availableImages),N=A.evaluate({zoom:d},c,{},g.availableImages),j=A.evaluate({zoom:d+1},c,{},g.availableImages);L=L&&L.name?L.name:L,N=N&&N.name?N.name:N,j=j&&j.name?j.name:j,x[L]=!0,x[N]=!0,x[j]=!0,c.patterns[w.id]={min:L,mid:N,max:j}}}return c}function ET(h,o,c,d,g){let x;if(g===function(w,A,L,N){let j=0;for(let H=A,te=L-N;H<L;H+=N)j+=(w[te]-w[H])*(w[H+1]+w[te+1]),te=H;return j}(h,o,c,d)>0)for(let w=o;w<c;w+=d)x=IT(w/d|0,h[w],h[w+1],x);else for(let w=c-d;w>=o;w-=d)x=IT(w/d|0,h[w],h[w+1],x);return x&&qp(x,x.next)&&(o0(x),x=x.next),x}function Ld(h,o){if(!h)return h;o||(o=h);let c,d=h;do if(c=!1,d.steiner||!qp(d,d.next)&&oa(d.prev,d,d.next)!==0)d=d.next;else{if(o0(d),d=o=d.prev,d===d.next)break;c=!0}while(c||d!==o);return o}function r0(h,o,c,d,g,x,w){if(!h)return;!w&&x&&function(L,N,j,H){let te=L;do te.z===0&&(te.z=lx(te.x,te.y,N,j,H)),te.prevZ=te.prev,te.nextZ=te.next,te=te.next;while(te!==L);te.prevZ.nextZ=null,te.prevZ=null,function(ie){let se,fe=1;do{let Te,Fe=ie;ie=null;let dt=null;for(se=0;Fe;){se++;let Xe=Fe,re=0;for(let Qe=0;Qe<fe&&(re++,Xe=Xe.nextZ,Xe);Qe++);let Se=fe;for(;re>0||Se>0&&Xe;)re!==0&&(Se===0||!Xe||Fe.z<=Xe.z)?(Te=Fe,Fe=Fe.nextZ,re--):(Te=Xe,Xe=Xe.nextZ,Se--),dt?dt.nextZ=Te:ie=Te,Te.prevZ=dt,dt=Te;Fe=Xe}dt.nextZ=null,fe*=2}while(se>1)}(te)}(h,d,g,x);let A=h;for(;h.prev!==h.next;){const L=h.prev,N=h.next;if(x?rB(h,d,g,x):tB(h))o.push(L.i,h.i,N.i),o0(h),h=N.next,A=N.next;else if((h=N)===A){w?w===1?r0(h=nB(Ld(h),o),o,c,d,g,x,2):w===2&&iB(h,o,c,d,g,x):r0(Ld(h),o,c,d,g,x,1);break}}}function tB(h){const o=h.prev,c=h,d=h.next;if(oa(o,c,d)>=0)return!1;const g=o.x,x=c.x,w=d.x,A=o.y,L=c.y,N=d.y,j=Math.min(g,x,w),H=Math.min(A,L,N),te=Math.max(g,x,w),ie=Math.max(A,L,N);let se=d.next;for(;se!==o;){if(se.x>=j&&se.x<=te&&se.y>=H&&se.y<=ie&&n0(g,A,x,L,w,N,se.x,se.y)&&oa(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function rB(h,o,c,d){const g=h.prev,x=h,w=h.next;if(oa(g,x,w)>=0)return!1;const A=g.x,L=x.x,N=w.x,j=g.y,H=x.y,te=w.y,ie=Math.min(A,L,N),se=Math.min(j,H,te),fe=Math.max(A,L,N),Te=Math.max(j,H,te),Fe=lx(ie,se,o,c,d),dt=lx(fe,Te,o,c,d);let Xe=h.prevZ,re=h.nextZ;for(;Xe&&Xe.z>=Fe&&re&&re.z<=dt;){if(Xe.x>=ie&&Xe.x<=fe&&Xe.y>=se&&Xe.y<=Te&&Xe!==g&&Xe!==w&&n0(A,j,L,H,N,te,Xe.x,Xe.y)&&oa(Xe.prev,Xe,Xe.next)>=0||(Xe=Xe.prevZ,re.x>=ie&&re.x<=fe&&re.y>=se&&re.y<=Te&&re!==g&&re!==w&&n0(A,j,L,H,N,te,re.x,re.y)&&oa(re.prev,re,re.next)>=0))return!1;re=re.nextZ}for(;Xe&&Xe.z>=Fe;){if(Xe.x>=ie&&Xe.x<=fe&&Xe.y>=se&&Xe.y<=Te&&Xe!==g&&Xe!==w&&n0(A,j,L,H,N,te,Xe.x,Xe.y)&&oa(Xe.prev,Xe,Xe.next)>=0)return!1;Xe=Xe.prevZ}for(;re&&re.z<=dt;){if(re.x>=ie&&re.x<=fe&&re.y>=se&&re.y<=Te&&re!==g&&re!==w&&n0(A,j,L,H,N,te,re.x,re.y)&&oa(re.prev,re,re.next)>=0)return!1;re=re.nextZ}return!0}function nB(h,o){let c=h;do{const d=c.prev,g=c.next.next;!qp(d,g)&&AT(d,c,c.next,g)&&i0(d,g)&&i0(g,d)&&(o.push(d.i,c.i,g.i),o0(c),o0(c.next),c=h=g),c=c.next}while(c!==h);return Ld(c)}function iB(h,o,c,d,g,x){let w=h;do{let A=w.next.next;for(;A!==w.prev;){if(w.i!==A.i&&uB(w,A)){let L=PT(w,A);return w=Ld(w,w.next),L=Ld(L,L.next),r0(w,o,c,d,g,x,0),void r0(L,o,c,d,g,x,0)}A=A.next}w=w.next}while(w!==h)}function oB(h,o){let c=h.x-o.x;return c===0&&(c=h.y-o.y,c===0)&&(c=(h.next.y-h.y)/(h.next.x-h.x)-(o.next.y-o.y)/(o.next.x-o.x)),c}function aB(h,o){const c=function(g,x){let w=x;const A=g.x,L=g.y;let N,j=-1/0;if(qp(g,w))return w;do{if(qp(g,w.next))return w.next;if(L<=w.y&&L>=w.next.y&&w.next.y!==w.y){const fe=w.x+(L-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(fe<=A&&fe>j&&(j=fe,N=w.x<w.next.x?w:w.next,fe===A))return N}w=w.next}while(w!==x);if(!N)return null;const H=N,te=N.x,ie=N.y;let se=1/0;w=N;do{if(A>=w.x&&w.x>=te&&A!==w.x&&TT(L<ie?A:j,L,te,ie,L<ie?j:A,L,w.x,w.y)){const fe=Math.abs(L-w.y)/(A-w.x);i0(w,g)&&(fe<se||fe===se&&(w.x>N.x||w.x===N.x&&sB(N,w)))&&(N=w,se=fe)}w=w.next}while(w!==H);return N}(h,o);if(!c)return o;const d=PT(c,h);return Ld(d,d.next),Ld(c,c.next)}function sB(h,o){return oa(h.prev,h,o.prev)<0&&oa(o.next,h,h.next)<0}function lx(h,o,c,d,g){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-c)*g|0)|h<<8))|h<<4))|h<<2))|h<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-d)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function lB(h){let o=h,c=h;do(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next;while(o!==h);return c}function TT(h,o,c,d,g,x,w,A){return(g-w)*(o-A)>=(h-w)*(x-A)&&(h-w)*(d-A)>=(c-w)*(o-A)&&(c-w)*(x-A)>=(g-w)*(d-A)}function n0(h,o,c,d,g,x,w,A){return!(h===w&&o===A)&&TT(h,o,c,d,g,x,w,A)}function uB(h,o){return h.next.i!==o.i&&h.prev.i!==o.i&&!function(c,d){let g=c;do{if(g.i!==c.i&&g.next.i!==c.i&&g.i!==d.i&&g.next.i!==d.i&&AT(g,g.next,c,d))return!0;g=g.next}while(g!==c);return!1}(h,o)&&(i0(h,o)&&i0(o,h)&&function(c,d){let g=c,x=!1;const w=(c.x+d.x)/2,A=(c.y+d.y)/2;do g.y>A!=g.next.y>A&&g.next.y!==g.y&&w<(g.next.x-g.x)*(A-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next;while(g!==c);return x}(h,o)&&(oa(h.prev,h,o.prev)||oa(h,o.prev,o))||qp(h,o)&&oa(h.prev,h,h.next)>0&&oa(o.prev,o,o.next)>0)}function oa(h,o,c){return(o.y-h.y)*(c.x-o.x)-(o.x-h.x)*(c.y-o.y)}function qp(h,o){return h.x===o.x&&h.y===o.y}function AT(h,o,c,d){const g=Dv(oa(h,o,c)),x=Dv(oa(h,o,d)),w=Dv(oa(c,d,h)),A=Dv(oa(c,d,o));return g!==x&&w!==A||!(g!==0||!Lv(h,c,o))||!(x!==0||!Lv(h,d,o))||!(w!==0||!Lv(c,h,d))||!(A!==0||!Lv(c,o,d))}function Lv(h,o,c){return o.x<=Math.max(h.x,c.x)&&o.x>=Math.min(h.x,c.x)&&o.y<=Math.max(h.y,c.y)&&o.y>=Math.min(h.y,c.y)}function Dv(h){return h>0?1:h<0?-1:0}function i0(h,o){return oa(h.prev,h,h.next)<0?oa(h,o,h.next)>=0&&oa(h,h.prev,o)>=0:oa(h,o,h.prev)<0||oa(h,h.next,o)<0}function PT(h,o){const c=ux(h.i,h.x,h.y),d=ux(o.i,o.x,o.y),g=h.next,x=o.prev;return h.next=o,o.prev=h,c.next=g,g.prev=c,d.next=c,c.prev=d,x.next=d,d.prev=x,d}function IT(h,o,c,d){const g=ux(h,o,c);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function o0(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function ux(h,o,c){return{i:h,x:o,y:c,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Gp{constructor(o,c){if(c>o)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=o,this._minGranularity=c}getGranularityForZoomLevel(o){return Math.max(Math.floor(this._baseZoomGranularity/(1<<o)),this._minGranularity,1)}}class Rv{constructor(o){this.fill=o.fill,this.line=o.line,this.tile=o.tile,this.stencil=o.stencil,this.circle=o.circle}}Rv.noSubdivision=new Rv({fill:new Gp(0,0),line:new Gp(0,0),tile:new Gp(0,0),stencil:new Gp(0,0),circle:1}),$e("SubdivisionGranularityExpression",Gp),$e("SubdivisionGranularitySetting",Rv);const Hp=-32768,a0=32767;class cB{constructor(o,c){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=o,this._granularityCellSize=ne/o,this._canonical=c}_getKey(o,c){return(o+=32768)<<16|c+32768}_vertexToIndex(o,c){if(o<-32768||c<-32768||o>32767||c>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(o),g=0|Math.round(c),x=this._getKey(d,g);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,w),this._vertexBuffer.push(d,g),w}_subdivideTrianglesScanline(o){if(this._granularity<2)return function(g,x){const w=[];for(let A=0;A<x.length;A+=3){const L=x[A],N=x[A+1],j=x[A+2],H=g[2*L],te=g[2*L+1];(g[2*N]-H)*(g[2*j+1]-te)-(g[2*N+1]-te)*(g[2*j]-H)>0?(w.push(L),w.push(j),w.push(N)):(w.push(L),w.push(N),w.push(j))}return w}(this._vertexBuffer,o);const c=[],d=o.length;for(let g=0;g<d;g+=3){const x=[o[g+0],o[g+1],o[g+2]],w=[this._vertexBuffer[2*o[g+0]+0],this._vertexBuffer[2*o[g+0]+1],this._vertexBuffer[2*o[g+1]+0],this._vertexBuffer[2*o[g+1]+1],this._vertexBuffer[2*o[g+2]+0],this._vertexBuffer[2*o[g+2]+1]];let A=1/0,L=1/0,N=-1/0,j=-1/0;for(let fe=0;fe<3;fe++){const Te=w[2*fe],Fe=w[2*fe+1];A=Math.min(A,Te),N=Math.max(N,Te),L=Math.min(L,Fe),j=Math.max(j,Fe)}if(A===N||L===j)continue;const H=Math.floor(A/this._granularityCellSize),te=Math.ceil(N/this._granularityCellSize),ie=Math.floor(L/this._granularityCellSize),se=Math.ceil(j/this._granularityCellSize);if(H!==te||ie!==se)for(let fe=ie;fe<se;fe++){const Te=this._scanlineGenerateVertexRingForCellRow(fe,w,x);hB(this._vertexBuffer,Te,c)}else c.push(...x)}return c}_scanlineGenerateVertexRingForCellRow(o,c,d){const g=o*this._granularityCellSize,x=g+this._granularityCellSize,w=[];for(let A=0;A<3;A++){const L=c[2*A],N=c[2*A+1],j=c[2*(A+1)%6],H=c[(2*(A+1)+1)%6],te=c[2*(A+2)%6],ie=c[(2*(A+2)+1)%6],se=j-L,fe=H-N,Te=se===0,Fe=fe===0,dt=(g-N)/fe,Xe=(x-N)/fe,re=Math.min(dt,Xe),Se=Math.max(dt,Xe);if(!Fe&&(re>=1||Se<=0)||Fe&&(N<g||N>x)){H>=g&&H<=x&&w.push(d[(A+1)%3]);continue}!Fe&&re>0&&w.push(this._vertexToIndex(L+se*re,N+fe*re));const Qe=L+se*Math.max(re,0),Rt=L+se*Math.min(Se,1);Te||this._generateIntraEdgeVertices(w,L,N,j,H,Qe,Rt),!Fe&&Se<1&&w.push(this._vertexToIndex(L+se*Se,N+fe*Se)),(Fe||H>=g&&H<=x)&&w.push(d[(A+1)%3]),!Fe&&(H<=g||H>=x)&&this._generateInterEdgeVertices(w,L,N,j,H,te,ie,Rt,g,x)}return w}_generateIntraEdgeVertices(o,c,d,g,x,w,A){const L=g-c,N=x-d,j=N===0,H=j?Math.min(c,g):Math.min(w,A),te=j?Math.max(c,g):Math.max(w,A),ie=Math.floor(H/this._granularityCellSize)+1,se=Math.ceil(te/this._granularityCellSize)-1;if(j?c<g:w<A)for(let fe=ie;fe<=se;fe++){const Te=fe*this._granularityCellSize;o.push(this._vertexToIndex(Te,d+N*(Te-c)/L))}else for(let fe=se;fe>=ie;fe--){const Te=fe*this._granularityCellSize;o.push(this._vertexToIndex(Te,d+N*(Te-c)/L))}}_generateInterEdgeVertices(o,c,d,g,x,w,A,L,N,j){const H=x-d,te=w-g,ie=A-x,se=(N-x)/ie,fe=(j-x)/ie,Te=Math.min(se,fe),Fe=Math.max(se,fe),dt=g+te*Te;let Xe=Math.floor(Math.min(dt,L)/this._granularityCellSize)+1,re=Math.ceil(Math.max(dt,L)/this._granularityCellSize)-1,Se=L<dt;const Qe=ie===0;if(Qe&&(A===N||A===j))return;if(Qe||Te>=1||Fe<=0){const Qt=d-A,jt=w+(c-w)*Math.min((N-A)/Qt,(j-A)/Qt);Xe=Math.floor(Math.min(jt,L)/this._granularityCellSize)+1,re=Math.ceil(Math.max(jt,L)/this._granularityCellSize)-1,Se=L<jt}const Rt=H>0?j:N;if(Se)for(let Qt=Xe;Qt<=re;Qt++)o.push(this._vertexToIndex(Qt*this._granularityCellSize,Rt));else for(let Qt=re;Qt>=Xe;Qt--)o.push(this._vertexToIndex(Qt*this._granularityCellSize,Rt))}_generateOutline(o){const c=[];for(const d of o){const g=Dd(d,this._granularity,!0),x=this._pointArrayToIndices(g),w=[];for(let A=1;A<x.length;A++)w.push(x[A-1]),w.push(x[A]);c.push(w)}return c}_handlePoles(o){let c=!1,d=!1;this._canonical&&(this._canonical.y===0&&(c=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(c||d)&&this._fillPoles(o,c,d)}_ensureNoPoleVertices(){const o=this._vertexBuffer;for(let c=0;c<o.length;c+=2){const d=o[c+1];d===Hp&&(o[c+1]=-32767),d===a0&&(o[c+1]=32766)}}_generatePoleQuad(o,c,d,g,x,w){g>x!=(w===Hp)?(o.push(c),o.push(d),o.push(this._vertexToIndex(g,w)),o.push(d),o.push(this._vertexToIndex(x,w)),o.push(this._vertexToIndex(g,w))):(o.push(d),o.push(c),o.push(this._vertexToIndex(g,w)),o.push(this._vertexToIndex(x,w)),o.push(d),o.push(this._vertexToIndex(g,w)))}_fillPoles(o,c,d){const g=this._vertexBuffer,x=ne,w=o.length;for(let A=2;A<w;A+=3){const L=o[A-2],N=o[A-1],j=o[A],H=g[2*L],te=g[2*L+1],ie=g[2*N],se=g[2*N+1],fe=g[2*j],Te=g[2*j+1];c&&(te===0&&se===0&&this._generatePoleQuad(o,L,N,H,ie,Hp),se===0&&Te===0&&this._generatePoleQuad(o,N,j,ie,fe,Hp),Te===0&&te===0&&this._generatePoleQuad(o,j,L,fe,H,Hp)),d&&(te===x&&se===x&&this._generatePoleQuad(o,L,N,H,ie,a0),se===x&&Te===x&&this._generatePoleQuad(o,N,j,ie,fe,a0),Te===x&&te===x&&this._generatePoleQuad(o,j,L,fe,H,a0))}}_initializeVertices(o){for(let c=0;c<o.length;c+=2)this._vertexToIndex(o[c],o[c+1])}subdividePolygonInternal(o,c){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:g}=function(A){const L=[],N=[];for(const j of A)if(j.length!==0){j!==A[0]&&L.push(N.length/2);for(let H=0;H<j.length;H++)N.push(j[H].x),N.push(j[H].y)}return{flattened:N,holeIndices:L}}(o);let x;this._initializeVertices(d);try{const A=function(N,j,H=2){const te=j&&j.length,ie=te?j[0]*H:N.length;let se=ET(N,0,ie,H,!0);const fe=[];if(!se||se.next===se.prev)return fe;let Te,Fe,dt;if(te&&(se=function(Xe,re,Se,Qe){const Rt=[];for(let Qt=0,jt=re.length;Qt<jt;Qt++){const Vt=ET(Xe,re[Qt]*Qe,Qt<jt-1?re[Qt+1]*Qe:Xe.length,Qe,!1);Vt===Vt.next&&(Vt.steiner=!0),Rt.push(lB(Vt))}Rt.sort(oB);for(let Qt=0;Qt<Rt.length;Qt++)Se=aB(Rt[Qt],Se);return Se}(N,j,se,H)),N.length>80*H){Te=1/0,Fe=1/0;let Xe=-1/0,re=-1/0;for(let Se=H;Se<ie;Se+=H){const Qe=N[Se],Rt=N[Se+1];Qe<Te&&(Te=Qe),Rt<Fe&&(Fe=Rt),Qe>Xe&&(Xe=Qe),Rt>re&&(re=Rt)}dt=Math.max(Xe-Te,re-Fe),dt=dt!==0?32767/dt:0}return r0(se,fe,H,Te,Fe,dt,0),fe}(d,g),L=this._convertIndices(d,A);x=this._subdivideTrianglesScanline(L)}catch(A){console.error(A)}let w=[];return c&&(w=this._generateOutline(o)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:w}}_convertIndices(o,c){const d=[];for(let g=0;g<c.length;g++)d.push(this._vertexToIndex(o[2*c[g]],o[2*c[g]+1]));return d}_pointArrayToIndices(o){const c=[];for(let d=0;d<o.length;d++){const g=o[d];c.push(this._vertexToIndex(g.x,g.y))}return c}}function MT(h,o,c,d=!0){return new cB(c,o).subdividePolygonInternal(h,d)}function Dd(h,o,c=!1){if(!h||h.length<1)return[];if(h.length<2)return[];const d=h[0],g=h[h.length-1],x=c&&(d.x!==g.x||d.y!==g.y);if(o<2)return x?[...h,h[0]]:[...h];const w=Math.floor(ne/o),A=[];A.push(new F(h[0].x,h[0].y));const L=h.length,N=x?L:L-1;for(let j=0;j<N;j++){const H=h[j],te=j<L-1?h[j+1]:h[0],ie=H.x,se=H.y,fe=te.x,Te=te.y,Fe=ie!==fe,dt=se!==Te;if(!Fe&&!dt)continue;const Xe=fe-ie,re=Te-se,Se=Math.abs(Xe),Qe=Math.abs(re);let Rt=ie,Qt=se;for(;;){const Vt=Xe>0?(Math.floor(Rt/w)+1)*w:(Math.ceil(Rt/w)-1)*w,cr=re>0?(Math.floor(Qt/w)+1)*w:(Math.ceil(Qt/w)-1)*w,tr=Math.abs(Rt-Vt),fr=Math.abs(Qt-cr),qt=Math.abs(Rt-fe),zr=Math.abs(Qt-Te),pn=Fe?tr/Se:Number.POSITIVE_INFINITY,un=dt?fr/Qe:Number.POSITIVE_INFINITY;if((qt<=tr||!Fe)&&(zr<=fr||!dt))break;if(pn<un&&Fe||!dt){Rt=Vt,Qt+=re*pn;const Hr=new F(Rt,Math.round(Qt));A[A.length-1].x===Hr.x&&A[A.length-1].y===Hr.y||A.push(Hr)}else{Rt+=Xe*un,Qt=cr;const Hr=new F(Math.round(Rt),Qt);A[A.length-1].x===Hr.x&&A[A.length-1].y===Hr.y||A.push(Hr)}}const jt=new F(fe,Te);A[A.length-1].x===jt.x&&A[A.length-1].y===jt.y||A.push(jt)}return A}function hB(h,o,c){if(o.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,g=h[2*o[0]];for(let L=1;L<o.length;L++){const N=h[2*o[L]];N<g&&(g=N,d=L)}const x=o.length;let w=d,A=(w+1)%x;for(;;){const L=w-1>=0?w-1:x-1,N=(A+1)%x,j=h[2*o[L]],H=h[2*o[N]],te=h[2*o[w]],ie=h[2*o[w]+1],se=h[2*o[A]+1];let fe=!1;if(j<H)fe=!0;else if(j>H)fe=!1;else{const Te=se-ie,Fe=-(h[2*o[A]]-te),dt=ie<se?1:-1;((j-te)*Te+(h[2*o[L]+1]-ie)*Fe)*dt>((H-te)*Te+(h[2*o[N]+1]-ie)*Fe)*dt&&(fe=!0)}if(fe){const Te=o[L],Fe=o[w],dt=o[A];Te!==Fe&&Te!==dt&&Fe!==dt&&c.push(dt,Fe,Te),w--,w<0&&(w=x-1)}else{const Te=o[N],Fe=o[w],dt=o[A];Te!==Fe&&Te!==dt&&Fe!==dt&&c.push(dt,Fe,Te),A++,A>=x&&(A=0)}if(L===N)break}}function kT(h,o,c,d,g,x,w,A,L){const N=g.length/2,j=w&&A&&L;if(N<Xn.MAX_VERTEX_ARRAY_LENGTH){const H=o.prepareSegment(N,c,d),te=H.vertexLength;for(let fe=0;fe<x.length;fe+=3)d.emplaceBack(te+x[fe],te+x[fe+1],te+x[fe+2]);let ie,se;H.vertexLength+=N,H.primitiveLength+=x.length/3,j&&(se=w.prepareSegment(N,c,A),ie=se.vertexLength,se.vertexLength+=N);for(let fe=0;fe<g.length;fe+=2)h(g[fe],g[fe+1]);if(j)for(let fe=0;fe<L.length;fe++){const Te=L[fe];for(let Fe=1;Fe<Te.length;Fe+=2)A.emplaceBack(ie+Te[Fe-1],ie+Te[Fe]);se.primitiveLength+=Te.length/2}}else(function(H,te,ie,se,fe,Te){const Fe=[];for(let Qe=0;Qe<se.length/2;Qe++)Fe.push(-1);const dt={count:0};let Xe=0,re=H.getOrCreateLatestSegment(te,ie),Se=re.vertexLength;for(let Qe=2;Qe<fe.length;Qe+=3){const Rt=fe[Qe-2],Qt=fe[Qe-1],jt=fe[Qe];let Vt=Fe[Rt]<Xe,cr=Fe[Qt]<Xe,tr=Fe[jt]<Xe;re.vertexLength+((Vt?1:0)+(cr?1:0)+(tr?1:0))>Xn.MAX_VERTEX_ARRAY_LENGTH&&(re=H.createNewSegment(te,ie),Xe=dt.count,Vt=!0,cr=!0,tr=!0,Se=0);const fr=s0(Fe,se,Te,dt,Rt,Vt,re),qt=s0(Fe,se,Te,dt,Qt,cr,re),zr=s0(Fe,se,Te,dt,jt,tr,re);ie.emplaceBack(Se+fr-Xe,Se+qt-Xe,Se+zr-Xe),re.primitiveLength++}})(o,c,d,g,x,h),j&&function(H,te,ie,se,fe,Te){const Fe=[];for(let Qe=0;Qe<se.length/2;Qe++)Fe.push(-1);const dt={count:0};let Xe=0,re=H.getOrCreateLatestSegment(te,ie),Se=re.vertexLength;for(let Qe=0;Qe<fe.length;Qe++){const Rt=fe[Qe];for(let Qt=1;Qt<fe[Qe].length;Qt+=2){const jt=Rt[Qt-1],Vt=Rt[Qt];let cr=Fe[jt]<Xe,tr=Fe[Vt]<Xe;re.vertexLength+((cr?1:0)+(tr?1:0))>Xn.MAX_VERTEX_ARRAY_LENGTH&&(re=H.createNewSegment(te,ie),Xe=dt.count,cr=!0,tr=!0,Se=0);const fr=s0(Fe,se,Te,dt,jt,cr,re),qt=s0(Fe,se,Te,dt,Vt,tr,re);ie.emplaceBack(Se+fr-Xe,Se+qt-Xe),re.primitiveLength++}}}(w,c,A,g,L,h),o.forceNewSegmentOnNextPrepare(),w==null||w.forceNewSegmentOnNextPrepare()}function s0(h,o,c,d,g,x,w){if(x){const A=d.count;return c(o[2*g],o[2*g+1]),h[g]=d.count,d.count++,w.vertexLength++,A}return h[g]}class cx{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new zt,this.indexArray=new hi,this.indexArray2=new li,this.programConfigurations=new ch(o.layers,o.zoom),this.segments=new Xn,this.segments2=new Xn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.hasPattern=ax("fill",this.layers,c);const g=this.layers[0].layout.get("fill-sort-key"),x=!g.isConstant(),w=[];for(const{feature:A,id:L,index:N,sourceLayerIndex:j}of o){const H=this.layers[0]._featureFilter.needGeometry,te=kd(A,H);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom,{globalState:this.globalState}),te,d))continue;const ie=x?g.evaluate(te,{},d,c.availableImages):void 0,se={id:L,properties:A.properties,type:A.type,sourceLayerIndex:j,index:N,geometry:H?te.geometry:Md(A),patterns:{},sortKey:ie};w.push(se)}x&&w.sort((A,L)=>A.sortKey-L.sortKey);for(const A of w){const{geometry:L,index:N,sourceLayerIndex:j}=A;if(this.hasPattern){const H=sx("fill",this.layers,A,this.zoom,c);this.patternFeatures.push(H)}else this.addFeature(A,L,N,d,{},c.subdivisionGranularity);c.featureIndex.insert(o[N].feature,L,N,j,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}addFeatures(o,c,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,c,d,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,eB),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,c,d,g,x,w){for(const A of Oa(c,500)){const L=MT(A,g,w.fill.getGranularityForZoomLevel(g.z)),N=this.layoutVertexArray;kT((j,H)=>{N.emplaceBack(j,H)},this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles,this.segments2,this.indexArray2,L.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,x,g)}}let LT,DT;$e("FillBucket",cx,{omit:["layers","patternFeatures"]});var fB={get paint(){return DT=DT||new Zi({"fill-antialias":new sr(it.paint_fill["fill-antialias"]),"fill-opacity":new Tr(it.paint_fill["fill-opacity"]),"fill-color":new Tr(it.paint_fill["fill-color"]),"fill-outline-color":new Tr(it.paint_fill["fill-outline-color"]),"fill-translate":new sr(it.paint_fill["fill-translate"]),"fill-translate-anchor":new sr(it.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wi(it.paint_fill["fill-pattern"])})},get layout(){return LT=LT||new Zi({"fill-sort-key":new Tr(it.layout_fill["fill-sort-key"])})}};class dB extends Ei{constructor(o){super(o,fB)}recalculate(o,c){super.recalculate(o,c);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new cx(o)}queryRadius(){return Mv(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:o,geometry:c,transform:d,pixelsToTileUnits:g}){return hT(kv(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,g),c)}isTileClipped(){return!0}}const pB=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),mB=ei([{name:"a_centroid",components:2,type:"Int16"}],4),{members:gB}=pB;var hx,RT,fx,NT,dx,OT,FT,Nv={};function BT(){if(RT)return hx;RT=1;var h=P();function o(g,x,w,A,L){this.properties={},this.extent=w,this.type=0,this._pbf=g,this._geometry=-1,this._keys=A,this._values=L,g.readFields(c,this,x)}function c(g,x,w){g==1?x.id=w.readVarint():g==2?function(A,L){for(var N=A.readVarint()+A.pos;A.pos<N;){var j=L._keys[A.readVarint()],H=L._values[A.readVarint()];L.properties[j]=H}}(w,x):g==3?x.type=w.readVarint():g==4&&(x._geometry=w.pos)}function d(g){for(var x,w,A=0,L=0,N=g.length,j=N-1;L<N;j=L++)A+=((w=g[j]).x-(x=g[L]).x)*(x.y+w.y);return A}return hx=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var g=this._pbf;g.pos=this._geometry;for(var x,w=g.readVarint()+g.pos,A=1,L=0,N=0,j=0,H=[];g.pos<w;){if(L<=0){var te=g.readVarint();A=7&te,L=te>>3}if(L--,A===1||A===2)N+=g.readSVarint(),j+=g.readSVarint(),A===1&&(x&&H.push(x),x=[]),x.push(new h(N,j));else{if(A!==7)throw new Error("unknown command "+A);x&&x.push(x[0].clone())}}return x&&H.push(x),H},o.prototype.bbox=function(){var g=this._pbf;g.pos=this._geometry;for(var x=g.readVarint()+g.pos,w=1,A=0,L=0,N=0,j=1/0,H=-1/0,te=1/0,ie=-1/0;g.pos<x;){if(A<=0){var se=g.readVarint();w=7&se,A=se>>3}if(A--,w===1||w===2)(L+=g.readSVarint())<j&&(j=L),L>H&&(H=L),(N+=g.readSVarint())<te&&(te=N),N>ie&&(ie=N);else if(w!==7)throw new Error("unknown command "+w)}return[j,te,H,ie]},o.prototype.toGeoJSON=function(g,x,w){var A,L,N=this.extent*Math.pow(2,w),j=this.extent*g,H=this.extent*x,te=this.loadGeometry(),ie=o.types[this.type];function se(Fe){for(var dt=0;dt<Fe.length;dt++){var Xe=Fe[dt];Fe[dt]=[360*(Xe.x+j)/N-180,360/Math.PI*Math.atan(Math.exp((180-360*(Xe.y+H)/N)*Math.PI/180))-90]}}switch(this.type){case 1:var fe=[];for(A=0;A<te.length;A++)fe[A]=te[A][0];se(te=fe);break;case 2:for(A=0;A<te.length;A++)se(te[A]);break;case 3:for(te=function(Fe){var dt=Fe.length;if(dt<=1)return[Fe];for(var Xe,re,Se=[],Qe=0;Qe<dt;Qe++){var Rt=d(Fe[Qe]);Rt!==0&&(re===void 0&&(re=Rt<0),re===Rt<0?(Xe&&Se.push(Xe),Xe=[Fe[Qe]]):Xe.push(Fe[Qe]))}return Xe&&Se.push(Xe),Se}(te),A=0;A<te.length;A++)for(L=0;L<te[A].length;L++)se(te[A][L])}te.length===1?te=te[0]:ie="Multi"+ie;var Te={type:"Feature",geometry:{type:ie,coordinates:te},properties:this.properties};return"id"in this&&(Te.id=this.id),Te},hx}function zT(){if(NT)return fx;NT=1;var h=BT();function o(d,g){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(c,this,g),this.length=this._features.length}function c(d,g,x){d===15?g.version=x.readVarint():d===1?g.name=x.readString():d===5?g.extent=x.readVarint():d===2?g._features.push(x.pos):d===3?g._keys.push(x.readString()):d===4&&g._values.push(function(w){for(var A=null,L=w.readVarint()+w.pos;w.pos<L;){var N=w.readVarint()>>3;A=N===1?w.readString():N===2?w.readFloat():N===3?w.readDouble():N===4?w.readVarint64():N===5?w.readVarint():N===6?w.readSVarint():N===7?w.readBoolean():null}return A}(x))}return fx=o,o.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var g=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,g,this.extent,this._keys,this._values)},fx}function $T(){return FT||(FT=1,Nv.VectorTile=function(){if(OT)return dx;OT=1;var h=zT();function o(c,d,g){if(c===3){var x=new h(g,g.readVarint()+g.pos);x.length&&(d[x.name]=x)}}return dx=function(c,d){this.layers=c.readFields(o,{},d)},dx}(),Nv.VectorTileFeature=BT(),Nv.VectorTileLayer=zT()),Nv}var l0=y($T());const yB=l0.VectorTileFeature.types,px=Math.pow(2,13);function u0(h,o,c,d,g,x,w,A){h.emplaceBack(o,c,2*Math.floor(d*px)+w,g*px*2,x*px*2,Math.round(A))}class mx{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new yr,this.centroidVertexArray=new Mt,this.indexArray=new hi,this.programConfigurations=new ch(o.layers,o.zoom),this.segments=new Xn,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.features=[],this.hasPattern=ax("fill-extrusion",this.layers,c);for(const{feature:g,id:x,index:w,sourceLayerIndex:A}of o){const L=this.layers[0]._featureFilter.needGeometry,N=kd(g,L);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom,{globalState:this.globalState}),N,d))continue;const j={id:x,sourceLayerIndex:A,index:w,geometry:L?N.geometry:Md(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(sx("fill-extrusion",this.layers,j,this.zoom,c)):this.addFeature(j,j.geometry,w,d,{},c.subdivisionGranularity),c.featureIndex.insert(g,j.geometry,w,A,this.index,!0)}}addFeatures(o,c,d){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,c,d,o.subdivisionGranularity)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,gB),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,mB.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,c,d,g,x,w){for(const A of Oa(c,500)){const L={x:0,y:0,sampleCount:0},N=this.layoutVertexArray.length;this.processPolygon(L,g,o,A,w);const j=this.layoutVertexArray.length-N,H=Math.floor(L.x/L.sampleCount),te=Math.floor(L.y/L.sampleCount);for(let ie=0;ie<j;ie++)this.centroidVertexArray.emplaceBack(H,te)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,x,g)}processPolygon(o,c,d,g,x){if(g.length<1||jT(g[0]))return;for(const H of g)H.length!==0&&vB(o,H);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},A=x.fill.getGranularityForZoomLevel(c.z),L=yB[d.type]==="Polygon";for(const H of g){if(H.length===0||jT(H))continue;const te=Dd(H,A,L);this._generateSideFaces(te,w)}if(!L)return;const N=MT(g,c,A,!1),j=this.layoutVertexArray;kT((H,te)=>{u0(j,H,te,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles)}_generateSideFaces(o,c){let d=0;for(let g=1;g<o.length;g++){const x=o[g],w=o[g-1];if(_B(x,w))continue;c.segment.vertexLength+4>Xn.MAX_VERTEX_ARRAY_LENGTH&&(c.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const A=x.sub(w)._perp()._unit(),L=w.dist(x);d+L>32768&&(d=0),u0(this.layoutVertexArray,x.x,x.y,A.x,A.y,0,0,d),u0(this.layoutVertexArray,x.x,x.y,A.x,A.y,0,1,d),d+=L,u0(this.layoutVertexArray,w.x,w.y,A.x,A.y,0,0,d),u0(this.layoutVertexArray,w.x,w.y,A.x,A.y,0,1,d);const N=c.segment.vertexLength;this.indexArray.emplaceBack(N,N+2,N+1),this.indexArray.emplaceBack(N+1,N+2,N+3),c.segment.vertexLength+=4,c.segment.primitiveLength+=2}}}function vB(h,o){for(let c=0;c<o.length;c++){const d=o[c];c===o.length-1&&o[0].x===d.x&&o[0].y===d.y||(h.x+=d.x,h.y+=d.y,h.sampleCount++)}}function _B(h,o){return h.x===o.x&&(h.x<0||h.x>ne)||h.y===o.y&&(h.y<0||h.y>ne)}function jT(h){return h.every(o=>o.x<0)||h.every(o=>o.x>ne)||h.every(o=>o.y<0)||h.every(o=>o.y>ne)}let UT;$e("FillExtrusionBucket",mx,{omit:["layers","features"]});var bB={get paint(){return UT=UT||new Zi({"fill-extrusion-opacity":new sr(it["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Tr(it["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sr(it["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sr(it["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wi(it["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Tr(it["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Tr(it["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sr(it["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class xB extends Ei{constructor(o){super(o,bB)}createBucket(o){return new mx(o)}queryRadius(){return Mv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:d,geometry:g,transform:x,pixelsToTileUnits:w,pixelPosMatrix:A}){const L=kv(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,w),N=this.paint.get("fill-extrusion-height").evaluate(c,d),j=this.paint.get("fill-extrusion-base").evaluate(c,d),H=function(ie,se){const fe=[];for(const Te of ie){const Fe=[Te.x,Te.y,0,1];At(Fe,Fe,se),fe.push(new F(Fe[0]/Fe[3],Fe[1]/Fe[3]))}return fe}(L,A),te=function(ie,se,fe,Te){const Fe=[],dt=[],Xe=Te[8]*se,re=Te[9]*se,Se=Te[10]*se,Qe=Te[11]*se,Rt=Te[8]*fe,Qt=Te[9]*fe,jt=Te[10]*fe,Vt=Te[11]*fe;for(const cr of ie){const tr=[],fr=[];for(const qt of cr){const zr=qt.x,pn=qt.y,un=Te[0]*zr+Te[4]*pn+Te[12],Hr=Te[1]*zr+Te[5]*pn+Te[13],ri=Te[2]*zr+Te[6]*pn+Te[14],Lo=Te[3]*zr+Te[7]*pn+Te[15],Ta=ri+Se,ws=Lo+Qe,Eu=un+Rt,Dl=Hr+Qt,as=ri+jt,So=Lo+Vt,Ua=new F((un+Xe)/ws,(Hr+re)/ws);Ua.z=Ta/ws,tr.push(Ua);const ss=new F(Eu/So,Dl/So);ss.z=as/So,fr.push(ss)}Fe.push(tr),dt.push(fr)}return[Fe,dt]}(g,j,N,A);return function(ie,se,fe){let Te=1/0;hT(fe,se)&&(Te=VT(fe,se[0]));for(let Fe=0;Fe<se.length;Fe++){const dt=se[Fe],Xe=ie[Fe];for(let re=0;re<dt.length-1;re++){const Se=dt[re],Qe=[Se,dt[re+1],Xe[re+1],Xe[re],Se];cT(fe,Qe)&&(Te=Math.min(Te,VT(fe,Qe)))}}return Te!==1/0&&Te}(te[0],te[1],H)}}function c0(h,o){return h.x*o.x+h.y*o.y}function VT(h,o){if(h.length===1){let c=0;const d=o[c++];let g;for(;!g||d.equals(g);)if(g=o[c++],!g)return 1/0;for(;c<o.length;c++){const x=o[c],w=h[0],A=g.sub(d),L=x.sub(d),N=w.sub(d),j=c0(A,A),H=c0(A,L),te=c0(L,L),ie=c0(N,A),se=c0(N,L),fe=j*te-H*H,Te=(te*ie-H*se)/fe,Fe=(j*se-H*ie)/fe,dt=d.z*(1-Te-Fe)+g.z*Te+x.z*Fe;if(isFinite(dt))return dt}return 1/0}{let c=1/0;for(const d of o)c=Math.min(c,d.z);return c}}const wB=ei([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:SB}=wB,CB=ei([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:EB}=CB,TB=l0.VectorTileFeature.types,AB=Math.cos(Math.PI/180*37.5),qT=Math.pow(2,14)/.5;class gx{constructor(o){this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(c=>c.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(c=>{this.gradients[c.id]={}}),this.layoutVertexArray=new mr,this.layoutVertexArray2=new Kt,this.indexArray=new hi,this.programConfigurations=new ch(o.layers,o.zoom),this.segments=new Xn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(c=>c.isStateDependent()).map(c=>c.id)}populate(o,c,d){this.hasPattern=ax("line",this.layers,c);const g=this.layers[0].layout.get("line-sort-key"),x=!g.isConstant(),w=[];for(const{feature:A,id:L,index:N,sourceLayerIndex:j}of o){const H=this.layers[0]._featureFilter.needGeometry,te=kd(A,H);if(!this.layers[0]._featureFilter.filter(new Gr(this.zoom,{globalState:this.globalState}),te,d))continue;const ie=x?g.evaluate(te,{},d):void 0,se={id:L,properties:A.properties,type:A.type,sourceLayerIndex:j,index:N,geometry:H?te.geometry:Md(A),patterns:{},sortKey:ie};w.push(se)}x&&w.sort((A,L)=>A.sortKey-L.sortKey);for(const A of w){const{geometry:L,index:N,sourceLayerIndex:j}=A;if(this.hasPattern){const H=sx("line",this.layers,A,this.zoom,c);this.patternFeatures.push(H)}else this.addFeature(A,L,N,d,{},c.subdivisionGranularity);c.featureIndex.insert(o[N].feature,L,N,j,this.index)}}update(o,c,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,c,this.stateDependentLayers,d)}addFeatures(o,c,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,c,d,o.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,EB)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,SB),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,c,d,g,x,w){const A=this.layers[0].layout,L=A.get("line-join").evaluate(o,{}),N=A.get("line-cap"),j=A.get("line-miter-limit"),H=A.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const te of c)this.addLine(te,o,L,N,j,H,g,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,x,g)}addLine(o,c,d,g,x,w,A,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,o=Dd(o,A?L.line.getGranularityForZoomLevel(A.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Xe=0;Xe<o.length-1;Xe++)this.totalDistance+=o[Xe].dist(o[Xe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const N=TB[c.type]==="Polygon";let j=o.length;for(;j>=2&&o[j-1].equals(o[j-2]);)j--;let H=0;for(;H<j-1&&o[H].equals(o[H+1]);)H++;if(j<(N?3:2))return;d==="bevel"&&(x=1.05);const te=this.overscaling<=16?122880/(512*this.overscaling):0,ie=this.segments.prepareSegment(10*j,this.layoutVertexArray,this.indexArray);let se,fe,Te,Fe,dt;this.e1=this.e2=-1,N&&(se=o[j-2],dt=o[H].sub(se)._unit()._perp());for(let Xe=H;Xe<j;Xe++){if(Te=Xe===j-1?N?o[H+1]:void 0:o[Xe+1],Te&&o[Xe].equals(Te))continue;dt&&(Fe=dt),se&&(fe=se),se=o[Xe],dt=Te?Te.sub(se)._unit()._perp():Fe,Fe=Fe||dt;let re=Fe.add(dt);re.x===0&&re.y===0||re._unit();const Se=Fe.x*dt.x+Fe.y*dt.y,Qe=re.x*dt.x+re.y*dt.y,Rt=Qe!==0?1/Qe:1/0,Qt=2*Math.sqrt(2-2*Qe),jt=Qe<AB&&fe&&Te,Vt=Fe.x*dt.y-Fe.y*dt.x>0;if(jt&&Xe>H){const fr=se.dist(fe);if(fr>2*te){const qt=se.sub(se.sub(fe)._mult(te/fr)._round());this.updateDistance(fe,qt),this.addCurrentVertex(qt,Fe,0,0,ie),fe=qt}}const cr=fe&&Te;let tr=cr?d:N?"butt":g;if(cr&&tr==="round"&&(Rt<w?tr="miter":Rt<=2&&(tr="fakeround")),tr==="miter"&&Rt>x&&(tr="bevel"),tr==="bevel"&&(Rt>2&&(tr="flipbevel"),Rt<x&&(tr="miter")),fe&&this.updateDistance(fe,se),tr==="miter")re._mult(Rt),this.addCurrentVertex(se,re,0,0,ie);else if(tr==="flipbevel"){if(Rt>100)re=dt.mult(-1);else{const fr=Rt*Fe.add(dt).mag()/Fe.sub(dt).mag();re._perp()._mult(fr*(Vt?-1:1))}this.addCurrentVertex(se,re,0,0,ie),this.addCurrentVertex(se,re.mult(-1),0,0,ie)}else if(tr==="bevel"||tr==="fakeround"){const fr=-Math.sqrt(Rt*Rt-1),qt=Vt?fr:0,zr=Vt?0:fr;if(fe&&this.addCurrentVertex(se,Fe,qt,zr,ie),tr==="fakeround"){const pn=Math.round(180*Qt/Math.PI/20);for(let un=1;un<pn;un++){let Hr=un/pn;if(Hr!==.5){const Lo=Hr-.5;Hr+=Hr*Lo*(Hr-1)*((1.0904+Se*(Se*(3.55645-1.43519*Se)-3.2452))*Lo*Lo+(.848013+Se*(.215638*Se-1.06021)))}const ri=dt.sub(Fe)._mult(Hr)._add(Fe)._unit()._mult(Vt?-1:1);this.addHalfVertex(se,ri.x,ri.y,!1,Vt,0,ie)}}Te&&this.addCurrentVertex(se,dt,-qt,-zr,ie)}else if(tr==="butt")this.addCurrentVertex(se,re,0,0,ie);else if(tr==="square"){const fr=fe?1:-1;this.addCurrentVertex(se,re,fr,fr,ie)}else tr==="round"&&(fe&&(this.addCurrentVertex(se,Fe,0,0,ie),this.addCurrentVertex(se,Fe,1,1,ie,!0)),Te&&(this.addCurrentVertex(se,dt,-1,-1,ie,!0),this.addCurrentVertex(se,dt,0,0,ie)));if(jt&&Xe<j-1){const fr=se.dist(Te);if(fr>2*te){const qt=se.add(Te.sub(se)._mult(te/fr)._round());this.updateDistance(se,qt),this.addCurrentVertex(qt,dt,0,0,ie),se=qt}}}}addCurrentVertex(o,c,d,g,x,w=!1){const A=c.y*g-c.x,L=-c.y-c.x*g;this.addHalfVertex(o,c.x+c.y*d,c.y-c.x*d,w,!1,d,x),this.addHalfVertex(o,A,L,w,!0,-g,x),this.distance>qT/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,c,d,g,x,w))}addHalfVertex({x:o,y:c},d,g,x,w,A,L){const N=.5*(this.lineClips?this.scaledDistance*(qT-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(x?1:0),(c<<1)+(w?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(A===0?0:A<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,j,this.e2),L.primitiveLength++),w?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,c){this.distance+=o.dist(c),this.updateScaledDistance()}}let GT,HT;$e("LineBucket",gx,{omit:["layers","patternFeatures"]});var WT={get paint(){return HT=HT||new Zi({"line-opacity":new Tr(it.paint_line["line-opacity"]),"line-color":new Tr(it.paint_line["line-color"]),"line-translate":new sr(it.paint_line["line-translate"]),"line-translate-anchor":new sr(it.paint_line["line-translate-anchor"]),"line-width":new Tr(it.paint_line["line-width"]),"line-gap-width":new Tr(it.paint_line["line-gap-width"]),"line-offset":new Tr(it.paint_line["line-offset"]),"line-blur":new Tr(it.paint_line["line-blur"]),"line-dasharray":new bi(it.paint_line["line-dasharray"]),"line-pattern":new Wi(it.paint_line["line-pattern"]),"line-gradient":new Mo(it.paint_line["line-gradient"])})},get layout(){return GT=GT||new Zi({"line-cap":new sr(it.layout_line["line-cap"]),"line-join":new Tr(it.layout_line["line-join"]),"line-miter-limit":new sr(it.layout_line["line-miter-limit"]),"line-round-limit":new sr(it.layout_line["line-round-limit"]),"line-sort-key":new Tr(it.layout_line["line-sort-key"])})}};class PB extends Tr{possiblyEvaluate(o,c){return c=new Gr(Math.floor(c.zoom),{now:c.now,fadeDuration:c.fadeDuration,zoomHistory:c.zoomHistory,transition:c.transition}),super.possiblyEvaluate(o,c)}evaluate(o,c,d,g){return c=Ut({},c,{zoom:Math.floor(c.zoom)}),super.evaluate(o,c,d,g)}}let Ov;class IB extends Ei{constructor(o){super(o,WT),this.gradientVersion=0,Ov||(Ov=new PB(WT.paint.properties["line-width"].specification),Ov.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const c=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(c)&&c._styleExpression.expression instanceof Wt,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,c){super.recalculate(o,c),this.paint._values["line-floorwidth"]=Ov.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new gx(o)}queryRadius(o){const c=o,d=ZT(e0("line-width",this,c),e0("line-gap-width",this,c)),g=e0("line-offset",this,c);return d/2+Math.abs(g)+Mv(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:o,feature:c,featureState:d,geometry:g,transform:x,pixelsToTileUnits:w}){const A=kv(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,w),L=w/2*ZT(this.paint.get("line-width").evaluate(c,d),this.paint.get("line-gap-width").evaluate(c,d)),N=this.paint.get("line-offset").evaluate(c,d);return N&&(g=function(j,H){const te=[];for(let ie=0;ie<j.length;ie++){const se=j[ie],fe=[];for(let Te=0;Te<se.length;Te++){const Fe=se[Te-1],dt=se[Te],Xe=se[Te+1],re=Te===0?new F(0,0):dt.sub(Fe)._unit()._perp(),Se=Te===se.length-1?new F(0,0):Xe.sub(dt)._unit()._perp(),Qe=re._add(Se)._unit(),Rt=Qe.x*Se.x+Qe.y*Se.y;Rt!==0&&Qe._mult(1/Rt),fe.push(Qe._mult(H)._add(dt))}te.push(fe)}return te}(g,N*w)),function(j,H,te){for(let ie=0;ie<H.length;ie++){const se=H[ie];if(j.length>=3){for(let fe=0;fe<se.length;fe++)if(Vp(j,se[fe]))return!0}if(UF(j,se,te))return!0}return!1}(A,g,L)}isTileClipped(){return!0}}function ZT(h,o){return o>0?o+2*h:h}const MB=ei([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kB=ei([{name:"a_projected_pos",components:3,type:"Float32"}],4);ei([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const LB=ei([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ei([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const XT=ei([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),DB=ei([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function RB(h,o,c){return h.sections.forEach(d=>{d.text=function(g,x,w){const A=x.layout.get("text-transform").evaluate(w,{});return A==="uppercase"?g=g.toLocaleUpperCase():A==="lowercase"&&(g=g.toLocaleLowerCase()),Ri.applyArabicShaping&&(g=Ri.applyArabicShaping(g)),g}(d.text,o,c)}),h}ei([{name:"triangle",components:3,type:"Uint16"}]),ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ei([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ei([{type:"Float32",name:"offsetX"}]),ei([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ei([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const h0={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var YT,yx,KT,ja=24,vx={};function NB(){return YT||(YT=1,vx.read=function(h,o,c,d,g){var x,w,A=8*g-d-1,L=(1<<A)-1,N=L>>1,j=-7,H=c?g-1:0,te=c?-1:1,ie=h[o+H];for(H+=te,x=ie&(1<<-j)-1,ie>>=-j,j+=A;j>0;x=256*x+h[o+H],H+=te,j-=8);for(w=x&(1<<-j)-1,x>>=-j,j+=d;j>0;w=256*w+h[o+H],H+=te,j-=8);if(x===0)x=1-N;else{if(x===L)return w?NaN:1/0*(ie?-1:1);w+=Math.pow(2,d),x-=N}return(ie?-1:1)*w*Math.pow(2,x-d)},vx.write=function(h,o,c,d,g,x){var w,A,L,N=8*x-g-1,j=(1<<N)-1,H=j>>1,te=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=d?0:x-1,se=d?1:-1,fe=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(A=isNaN(o)?1:0,w=j):(w=Math.floor(Math.log(o)/Math.LN2),o*(L=Math.pow(2,-w))<1&&(w--,L*=2),(o+=w+H>=1?te/L:te*Math.pow(2,1-H))*L>=2&&(w++,L/=2),w+H>=j?(A=0,w=j):w+H>=1?(A=(o*L-1)*Math.pow(2,g),w+=H):(A=o*Math.pow(2,H-1)*Math.pow(2,g),w=0));g>=8;h[c+ie]=255&A,ie+=se,A/=256,g-=8);for(w=w<<g|A,N+=g;N>0;h[c+ie]=255&w,ie+=se,w/=256,N-=8);h[c+ie-se]|=128*fe}),vx}function JT(){if(KT)return yx;KT=1,yx=o;var h=NB();function o(re){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(re)?re:new Uint8Array(re||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var c=4294967296,d=1/c,g=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function x(re){return re.type===o.Bytes?re.readVarint()+re.pos:re.pos+1}function w(re,Se,Qe){return Qe?4294967296*Se+(re>>>0):4294967296*(Se>>>0)+(re>>>0)}function A(re,Se,Qe){var Rt=Se<=16383?1:Se<=2097151?2:Se<=268435455?3:Math.floor(Math.log(Se)/(7*Math.LN2));Qe.realloc(Rt);for(var Qt=Qe.pos-1;Qt>=re;Qt--)Qe.buf[Qt+Rt]=Qe.buf[Qt]}function L(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeVarint(re[Qe])}function N(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeSVarint(re[Qe])}function j(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeFloat(re[Qe])}function H(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeDouble(re[Qe])}function te(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeBoolean(re[Qe])}function ie(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeFixed32(re[Qe])}function se(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeSFixed32(re[Qe])}function fe(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeFixed64(re[Qe])}function Te(re,Se){for(var Qe=0;Qe<re.length;Qe++)Se.writeSFixed64(re[Qe])}function Fe(re,Se){return(re[Se]|re[Se+1]<<8|re[Se+2]<<16)+16777216*re[Se+3]}function dt(re,Se,Qe){re[Qe]=Se,re[Qe+1]=Se>>>8,re[Qe+2]=Se>>>16,re[Qe+3]=Se>>>24}function Xe(re,Se){return(re[Se]|re[Se+1]<<8|re[Se+2]<<16)+(re[Se+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(re,Se,Qe){for(Qe=Qe||this.length;this.pos<Qe;){var Rt=this.readVarint(),Qt=Rt>>3,jt=this.pos;this.type=7&Rt,re(Qt,Se,this),this.pos===jt&&this.skip(Rt)}return Se},readMessage:function(re,Se){return this.readFields(re,Se,this.readVarint()+this.pos)},readFixed32:function(){var re=Fe(this.buf,this.pos);return this.pos+=4,re},readSFixed32:function(){var re=Xe(this.buf,this.pos);return this.pos+=4,re},readFixed64:function(){var re=Fe(this.buf,this.pos)+Fe(this.buf,this.pos+4)*c;return this.pos+=8,re},readSFixed64:function(){var re=Fe(this.buf,this.pos)+Xe(this.buf,this.pos+4)*c;return this.pos+=8,re},readFloat:function(){var re=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,re},readDouble:function(){var re=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,re},readVarint:function(re){var Se,Qe,Rt=this.buf;return Se=127&(Qe=Rt[this.pos++]),Qe<128?Se:(Se|=(127&(Qe=Rt[this.pos++]))<<7,Qe<128?Se:(Se|=(127&(Qe=Rt[this.pos++]))<<14,Qe<128?Se:(Se|=(127&(Qe=Rt[this.pos++]))<<21,Qe<128?Se:function(Qt,jt,Vt){var cr,tr,fr=Vt.buf;if(cr=(112&(tr=fr[Vt.pos++]))>>4,tr<128||(cr|=(127&(tr=fr[Vt.pos++]))<<3,tr<128)||(cr|=(127&(tr=fr[Vt.pos++]))<<10,tr<128)||(cr|=(127&(tr=fr[Vt.pos++]))<<17,tr<128)||(cr|=(127&(tr=fr[Vt.pos++]))<<24,tr<128)||(cr|=(1&(tr=fr[Vt.pos++]))<<31,tr<128))return w(Qt,cr,jt);throw new Error("Expected varint not more than 10 bytes")}(Se|=(15&(Qe=Rt[this.pos]))<<28,re,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var re=this.readVarint();return re%2==1?(re+1)/-2:re/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var re=this.readVarint()+this.pos,Se=this.pos;return this.pos=re,re-Se>=12&&g?function(Qe,Rt,Qt){return g.decode(Qe.subarray(Rt,Qt))}(this.buf,Se,re):function(Qe,Rt,Qt){for(var jt="",Vt=Rt;Vt<Qt;){var cr,tr,fr,qt=Qe[Vt],zr=null,pn=qt>239?4:qt>223?3:qt>191?2:1;if(Vt+pn>Qt)break;pn===1?qt<128&&(zr=qt):pn===2?(192&(cr=Qe[Vt+1]))==128&&(zr=(31&qt)<<6|63&cr)<=127&&(zr=null):pn===3?(tr=Qe[Vt+2],(192&(cr=Qe[Vt+1]))==128&&(192&tr)==128&&((zr=(15&qt)<<12|(63&cr)<<6|63&tr)<=2047||zr>=55296&&zr<=57343)&&(zr=null)):pn===4&&(tr=Qe[Vt+2],fr=Qe[Vt+3],(192&(cr=Qe[Vt+1]))==128&&(192&tr)==128&&(192&fr)==128&&((zr=(15&qt)<<18|(63&cr)<<12|(63&tr)<<6|63&fr)<=65535||zr>=1114112)&&(zr=null)),zr===null?(zr=65533,pn=1):zr>65535&&(zr-=65536,jt+=String.fromCharCode(zr>>>10&1023|55296),zr=56320|1023&zr),jt+=String.fromCharCode(zr),Vt+=pn}return jt}(this.buf,Se,re)},readBytes:function(){var re=this.readVarint()+this.pos,Se=this.buf.subarray(this.pos,re);return this.pos=re,Se},readPackedVarint:function(re,Se){if(this.type!==o.Bytes)return re.push(this.readVarint(Se));var Qe=x(this);for(re=re||[];this.pos<Qe;)re.push(this.readVarint(Se));return re},readPackedSVarint:function(re){if(this.type!==o.Bytes)return re.push(this.readSVarint());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readSVarint());return re},readPackedBoolean:function(re){if(this.type!==o.Bytes)return re.push(this.readBoolean());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readBoolean());return re},readPackedFloat:function(re){if(this.type!==o.Bytes)return re.push(this.readFloat());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readFloat());return re},readPackedDouble:function(re){if(this.type!==o.Bytes)return re.push(this.readDouble());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readDouble());return re},readPackedFixed32:function(re){if(this.type!==o.Bytes)return re.push(this.readFixed32());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readFixed32());return re},readPackedSFixed32:function(re){if(this.type!==o.Bytes)return re.push(this.readSFixed32());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readSFixed32());return re},readPackedFixed64:function(re){if(this.type!==o.Bytes)return re.push(this.readFixed64());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readFixed64());return re},readPackedSFixed64:function(re){if(this.type!==o.Bytes)return re.push(this.readSFixed64());var Se=x(this);for(re=re||[];this.pos<Se;)re.push(this.readSFixed64());return re},skip:function(re){var Se=7&re;if(Se===o.Varint)for(;this.buf[this.pos++]>127;);else if(Se===o.Bytes)this.pos=this.readVarint()+this.pos;else if(Se===o.Fixed32)this.pos+=4;else{if(Se!==o.Fixed64)throw new Error("Unimplemented type: "+Se);this.pos+=8}},writeTag:function(re,Se){this.writeVarint(re<<3|Se)},realloc:function(re){for(var Se=this.length||16;Se<this.pos+re;)Se*=2;if(Se!==this.length){var Qe=new Uint8Array(Se);Qe.set(this.buf),this.buf=Qe,this.length=Se}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(re){this.realloc(4),dt(this.buf,re,this.pos),this.pos+=4},writeSFixed32:function(re){this.realloc(4),dt(this.buf,re,this.pos),this.pos+=4},writeFixed64:function(re){this.realloc(8),dt(this.buf,-1&re,this.pos),dt(this.buf,Math.floor(re*d),this.pos+4),this.pos+=8},writeSFixed64:function(re){this.realloc(8),dt(this.buf,-1&re,this.pos),dt(this.buf,Math.floor(re*d),this.pos+4),this.pos+=8},writeVarint:function(re){(re=+re||0)>268435455||re<0?function(Se,Qe){var Rt,Qt;if(Se>=0?(Rt=Se%4294967296|0,Qt=Se/4294967296|0):(Qt=~(-Se/4294967296),4294967295^(Rt=~(-Se%4294967296))?Rt=Rt+1|0:(Rt=0,Qt=Qt+1|0)),Se>=18446744073709552e3||Se<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Qe.realloc(10),function(jt,Vt,cr){cr.buf[cr.pos++]=127&jt|128,jt>>>=7,cr.buf[cr.pos++]=127&jt|128,jt>>>=7,cr.buf[cr.pos++]=127&jt|128,jt>>>=7,cr.buf[cr.pos++]=127&jt|128,cr.buf[cr.pos]=127&(jt>>>=7)}(Rt,0,Qe),function(jt,Vt){var cr=(7&jt)<<4;Vt.buf[Vt.pos++]|=cr|((jt>>>=3)?128:0),jt&&(Vt.buf[Vt.pos++]=127&jt|((jt>>>=7)?128:0),jt&&(Vt.buf[Vt.pos++]=127&jt|((jt>>>=7)?128:0),jt&&(Vt.buf[Vt.pos++]=127&jt|((jt>>>=7)?128:0),jt&&(Vt.buf[Vt.pos++]=127&jt|((jt>>>=7)?128:0),jt&&(Vt.buf[Vt.pos++]=127&jt)))))}(Qt,Qe)}(re,this):(this.realloc(4),this.buf[this.pos++]=127&re|(re>127?128:0),re<=127||(this.buf[this.pos++]=127&(re>>>=7)|(re>127?128:0),re<=127||(this.buf[this.pos++]=127&(re>>>=7)|(re>127?128:0),re<=127||(this.buf[this.pos++]=re>>>7&127))))},writeSVarint:function(re){this.writeVarint(re<0?2*-re-1:2*re)},writeBoolean:function(re){this.writeVarint(!!re)},writeString:function(re){re=String(re),this.realloc(4*re.length),this.pos++;var Se=this.pos;this.pos=function(Rt,Qt,jt){for(var Vt,cr,tr=0;tr<Qt.length;tr++){if((Vt=Qt.charCodeAt(tr))>55295&&Vt<57344){if(!cr){Vt>56319||tr+1===Qt.length?(Rt[jt++]=239,Rt[jt++]=191,Rt[jt++]=189):cr=Vt;continue}if(Vt<56320){Rt[jt++]=239,Rt[jt++]=191,Rt[jt++]=189,cr=Vt;continue}Vt=cr-55296<<10|Vt-56320|65536,cr=null}else cr&&(Rt[jt++]=239,Rt[jt++]=191,Rt[jt++]=189,cr=null);Vt<128?Rt[jt++]=Vt:(Vt<2048?Rt[jt++]=Vt>>6|192:(Vt<65536?Rt[jt++]=Vt>>12|224:(Rt[jt++]=Vt>>18|240,Rt[jt++]=Vt>>12&63|128),Rt[jt++]=Vt>>6&63|128),Rt[jt++]=63&Vt|128)}return jt}(this.buf,re,this.pos);var Qe=this.pos-Se;Qe>=128&&A(Se,Qe,this),this.pos=Se-1,this.writeVarint(Qe),this.pos+=Qe},writeFloat:function(re){this.realloc(4),h.write(this.buf,re,this.pos,!0,23,4),this.pos+=4},writeDouble:function(re){this.realloc(8),h.write(this.buf,re,this.pos,!0,52,8),this.pos+=8},writeBytes:function(re){var Se=re.length;this.writeVarint(Se),this.realloc(Se);for(var Qe=0;Qe<Se;Qe++)this.buf[this.pos++]=re[Qe]},writeRawMessage:function(re,Se){this.pos++;var Qe=this.pos;re(Se,this);var Rt=this.pos-Qe;Rt>=128&&A(Qe,Rt,this),this.pos=Qe-1,this.writeVarint(Rt),this.pos+=Rt},writeMessage:function(re,Se,Qe){this.writeTag(re,o.Bytes),this.writeRawMessage(Se,Qe)},writePackedVarint:function(re,Se){Se.length&&this.writeMessage(re,L,Se)},writePackedSVarint:function(re,Se){Se.length&&this.writeMessage(re,N,Se)},writePackedBoolean:function(re,Se){Se.length&&this.writeMessage(re,te,Se)},writePackedFloat:function(re,Se){Se.length&&this.writeMessage(re,j,Se)},writePackedDouble:function(re,Se){Se.length&&this.writeMessage(re,H,Se)},writePackedFixed32:function(re,Se){Se.length&&this.writeMessage(re,ie,Se)},writePackedSFixed32:function(re,Se){Se.length&&this.writeMessage(re,se,Se)},writePackedFixed64:function(re,Se){Se.length&&this.writeMessage(re,fe,Se)},writePackedSFixed64:function(re,Se){Se.length&&this.writeMessage(re,Te,Se)},writeBytesField:function(re,Se){this.writeTag(re,o.Bytes),this.writeBytes(Se)},writeFixed32Field:function(re,Se){this.writeTag(re,o.Fixed32),this.writeFixed32(Se)},writeSFixed32Field:function(re,Se){this.writeTag(re,o.Fixed32),this.writeSFixed32(Se)},writeFixed64Field:function(re,Se){this.writeTag(re,o.Fixed64),this.writeFixed64(Se)},writeSFixed64Field:function(re,Se){this.writeTag(re,o.Fixed64),this.writeSFixed64(Se)},writeVarintField:function(re,Se){this.writeTag(re,o.Varint),this.writeVarint(Se)},writeSVarintField:function(re,Se){this.writeTag(re,o.Varint),this.writeSVarint(Se)},writeStringField:function(re,Se){this.writeTag(re,o.Bytes),this.writeString(Se)},writeFloatField:function(re,Se){this.writeTag(re,o.Fixed32),this.writeFloat(Se)},writeDoubleField:function(re,Se){this.writeTag(re,o.Fixed64),this.writeDouble(Se)},writeBooleanField:function(re,Se){this.writeVarintField(re,!!Se)}},yx}var Lf,_x=y(JT());function OB(h,o,c){h===1&&c.readMessage(FB,o)}function FB(h,o,c){if(h===3){const{id:d,bitmap:g,width:x,height:w,left:A,top:L,advance:N}=c.readMessage(BB,{});o.push({id:d,bitmap:new t0({width:x+6,height:w+6},g),metrics:{width:x,height:w,left:A,top:L,advance:N}})}}function BB(h,o,c){h===1?o.id=c.readVarint():h===2?o.bitmap=c.readBytes():h===3?o.width=c.readVarint():h===4?o.height=c.readVarint():h===5?o.left=c.readSVarint():h===6?o.top=c.readSVarint():h===7&&(o.advance=c.readVarint())}function QT(h){let o=0,c=0;for(const w of h)o+=w.w*w.h,c=Math.max(c,w.w);h.sort((w,A)=>A.h-w.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),c),h:1/0}];let g=0,x=0;for(const w of h)for(let A=d.length-1;A>=0;A--){const L=d[A];if(!(w.w>L.w||w.h>L.h)){if(w.x=L.x,w.y=L.y,x=Math.max(x,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===L.w&&w.h===L.h){const N=d.pop();A<d.length&&(d[A]=N)}else w.h===L.h?(L.x+=w.w,L.w-=w.w):w.w===L.w?(L.y+=w.h,L.h-=w.h):(d.push({x:L.x+w.w,y:L.y,w:L.w-w.w,h:w.h}),L.y+=w.h,L.h-=w.h);break}}return{w:g,h:x,fill:o/(g*x)||0}}class bx{constructor(o,{pixelRatio:c,version:d,stretchX:g,stretchY:x,content:w,textFitWidth:A,textFitHeight:L}){this.paddedRect=o,this.pixelRatio=c,this.stretchX=g,this.stretchY=x,this.content=w,this.version=d,this.textFitWidth=A,this.textFitHeight=L}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class eA{constructor(o,c){const d={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(o,d,x),this.addImages(c,g,x);const{w,h:A}=QT(x),L=new Ll({width:w||1,height:A||1});for(const N in o){const j=o[N],H=d[N].paddedRect;Ll.copy(j.data,L,{x:0,y:0},{x:H.x+1,y:H.y+1},j.data)}for(const N in c){const j=c[N],H=g[N].paddedRect,te=H.x+1,ie=H.y+1,se=j.data.width,fe=j.data.height;Ll.copy(j.data,L,{x:0,y:0},{x:te,y:ie},j.data),Ll.copy(j.data,L,{x:0,y:fe-1},{x:te,y:ie-1},{width:se,height:1}),Ll.copy(j.data,L,{x:0,y:0},{x:te,y:ie+fe},{width:se,height:1}),Ll.copy(j.data,L,{x:se-1,y:0},{x:te-1,y:ie},{width:1,height:fe}),Ll.copy(j.data,L,{x:0,y:0},{x:te+se,y:ie},{width:1,height:fe})}this.image=L,this.iconPositions=d,this.patternPositions=g}addImages(o,c,d){for(const g in o){const x=o[g],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};d.push(w),c[g]=new bx(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,c){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in o.updatedImages)this.patchUpdatedImage(this.iconPositions[d],o.getImage(d),c),this.patchUpdatedImage(this.patternPositions[d],o.getImage(d),c)}patchUpdatedImage(o,c,d){if(!o||!c||o.version===c.version)return;o.version=c.version;const[g,x]=o.tl;d.update(c.data,void 0,{x:g,y:x})}}$e("ImagePosition",bx),$e("ImageAtlas",eA),f.an=void 0,(Lf=f.an||(f.an={}))[Lf.none=0]="none",Lf[Lf.horizontal=1]="horizontal",Lf[Lf.vertical=2]="vertical",Lf[Lf.horizontalOnly=3]="horizontalOnly";class f0{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(o,c,d){const g=new f0;return g.scale=o||1,g.fontStack=c,g.verticalAlign=d||"bottom",g}static forImage(o,c){const d=new f0;return d.imageName=o,d.verticalAlign=c||"bottom",d}}class Wp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,c){const d=new Wp;for(let g=0;g<o.sections.length;g++){const x=o.sections[g];x.image?d.addImageSection(x):d.addTextSection(x,c)}return d}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let c="";for(let d=0;d<o.length;d++){const g=o.charCodeAt(d+1)||null,x=o.charCodeAt(d-1)||null;c+=g&&Qn(g)&&!h0[o[d+1]]||x&&Qn(x)&&!h0[o[d-1]]||!h0[o[d]]?o[d]:h0[o[d]]}return c}(this.text)}trim(){let o=0;for(let d=0;d<this.text.length&&Bv[this.text.charCodeAt(d)];d++)o++;let c=this.text.length;for(let d=this.text.length-1;d>=0&&d>=o&&Bv[this.text.charCodeAt(d)];d--)c--;this.text=this.text.substring(o,c),this.sectionIndex=this.sectionIndex.slice(o,c)}substring(o,c){const d=new Wp;return d.text=this.text.substring(o,c),d.sectionIndex=this.sectionIndex.slice(o,c),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,c)=>Math.max(o,this.sections[c].scale),0)}getMaxImageSize(o){let c=0,d=0;for(let g=0;g<this.length();g++){const x=this.getSection(g);if(x.imageName){const w=o[x.imageName];if(!w)continue;const A=w.displaySize;c=Math.max(c,A[0]),d=Math.max(d,A[1])}}return{maxImageWidth:c,maxImageHeight:d}}addTextSection(o,c){this.text+=o.text,this.sections.push(f0.forText(o.scale,o.fontStack||c,o.verticalAlign));const d=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(d)}addImageSection(o){const c=o.image?o.image.name:"";if(c.length===0)return void Nr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(f0.forImage(c,o.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Nr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fv(h,o,c,d,g,x,w,A,L,N,j,H,te,ie,se){const fe=Wp.fromFeature(h,g);let Te;H===f.an.vertical&&fe.verticalizePunctuation();const{processBidirectionalText:Fe,processStyledBidirectionalText:dt}=Ri;if(Fe&&fe.sections.length===1){Te=[];const Se=Fe(fe.toString(),xx(fe,N,x,o,d,ie));for(const Qe of Se){const Rt=new Wp;Rt.text=Qe,Rt.sections=fe.sections;for(let Qt=0;Qt<Qe.length;Qt++)Rt.sectionIndex.push(0);Te.push(Rt)}}else if(dt){Te=[];const Se=dt(fe.text,fe.sectionIndex,xx(fe,N,x,o,d,ie));for(const Qe of Se){const Rt=new Wp;Rt.text=Qe[0],Rt.sectionIndex=Qe[1],Rt.sections=fe.sections,Te.push(Rt)}}else Te=function(Se,Qe){const Rt=[],Qt=Se.text;let jt=0;for(const Vt of Qe)Rt.push(Se.substring(jt,Vt)),jt=Vt;return jt<Qt.length&&Rt.push(Se.substring(jt,Qt.length)),Rt}(fe,xx(fe,N,x,o,d,ie));const Xe=[],re={positionedLines:Xe,text:fe.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(Se,Qe,Rt,Qt,jt,Vt,cr,tr,fr,qt,zr,pn){let un=0,Hr=0,ri=0,Lo=0;const Ta=tr==="right"?1:tr==="left"?0:.5,ws=ja/pn;let Eu=0;for(const So of jt){So.trim();const Ua=So.getMaxScale(),ss={positionedGlyphs:[],lineOffset:0};Se.positionedLines[Eu]=ss;const ls=ss.positionedGlyphs;let fl=0;if(!So.length()){Hr+=Vt,++Eu;continue}const Tu=UB(Qt,So,ws);for(let Rl=0;Rl<So.length();Rl++){const Aa=So.getSection(Rl),qa=So.getSectionIndex(Rl),Ga=So.getCharCode(Rl),pa=VB(fr,zr,Ga);let ao;if(Aa.imageName){if(Se.iconsInText=!0,Aa.scale=Aa.scale*ws,ao=GB(Aa,pa,Ua,Tu,Qt),!ao)continue;fl=Math.max(fl,ao.imageOffset)}else if(ao=qB(Aa,Ga,pa,Tu,Qe,Rt),!ao)continue;const{rect:Ac,metrics:Kp,baselineOffset:Pc}=ao;ls.push({glyph:Ga,imageName:Aa.imageName,x:un,y:Hr+Pc+-17,vertical:pa,scale:Aa.scale,fontStack:Aa.fontStack,sectionIndex:qa,metrics:Kp,rect:Ac}),pa?(Se.verticalizable=!0,un+=(Aa.imageName?Kp.advance:ja)*Aa.scale+qt):un+=Kp.advance*Aa.scale+qt}ls.length!==0&&(ri=Math.max(un-qt,ri),HB(ls,0,ls.length-1,Ta)),un=0,ss.lineOffset=Math.max(fl,(Ua-1)*ja);const Va=Vt*Ua+fl;Hr+=Va,Lo=Math.max(Va,Lo),++Eu}const{horizontalAlign:Dl,verticalAlign:as}=wx(cr);(function(So,Ua,ss,ls,fl,Tu,Va,Rl,Aa){const qa=(Ua-ss)*fl;let Ga=0;Ga=Tu!==Va?-Rl*ls- -17:-ls*Aa*Va+.5*Va;for(const pa of So)for(const ao of pa.positionedGlyphs)ao.x+=qa,ao.y+=Ga})(Se.positionedLines,Ta,Dl,as,ri,Lo,Vt,Hr,jt.length),Se.top+=-as*Hr,Se.bottom=Se.top+Hr,Se.left+=-Dl*ri,Se.right=Se.left+ri}(re,o,c,d,Te,w,A,L,H,N,te,se),!function(Se){for(const Qe of Se)if(Qe.positionedGlyphs.length!==0)return!1;return!0}(Xe)&&re}const Bv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},zB={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},$B={40:!0};function tA(h,o,c,d,g,x){if(o.imageName){const w=d[o.imageName];return w?w.displaySize[0]*o.scale*ja/x+g:0}{const w=c[o.fontStack],A=w&&w[h];return A?A.metrics.advance*o.scale+g:0}}function rA(h,o,c,d){const g=Math.pow(h-o,2);return d?h<o?g/2:2*g:g+Math.abs(c)*c}function jB(h,o,c){let d=0;return h===10&&(d-=1e4),c&&(d+=150),h!==40&&h!==65288||(d+=50),o!==41&&o!==65289||(d+=50),d}function nA(h,o,c,d,g,x){let w=null,A=rA(o,c,g,x);for(const L of d){const N=rA(o-L.x,c,g,x)+L.badness;N<=A&&(w=L,A=N)}return{index:h,x:o,priorBreak:w,badness:A}}function iA(h){return h?iA(h.priorBreak).concat(h.index):[]}function xx(h,o,c,d,g,x){if(!h)return[];const w=[],A=function(H,te,ie,se,fe,Te){let Fe=0;for(let dt=0;dt<H.length();dt++){const Xe=H.getSection(dt);Fe+=tA(H.getCharCode(dt),Xe,se,fe,te,Te)}return Fe/Math.max(1,Math.ceil(Fe/ie))}(h,o,c,d,g,x),L=h.text.indexOf("​")>=0;let N=0;for(let H=0;H<h.length();H++){const te=h.getSection(H),ie=h.getCharCode(H);if(Bv[ie]||(N+=tA(ie,te,d,g,o,x)),H<h.length()-1){const se=!((j=ie)<11904)&&(!!Dt["CJK Compatibility Forms"](j)||!!Dt["CJK Compatibility"](j)||!!Dt["CJK Strokes"](j)||!!Dt["CJK Symbols and Punctuation"](j)||!!Dt["Enclosed CJK Letters and Months"](j)||!!Dt["Halfwidth and Fullwidth Forms"](j)||!!Dt["Ideographic Description Characters"](j)||!!Dt["Vertical Forms"](j)||zn.test(String.fromCodePoint(j)));(zB[ie]||se||te.imageName||H!==h.length()-2&&$B[h.getCharCode(H+1)])&&w.push(nA(H+1,N,A,w,jB(ie,h.getCharCode(H+1),se&&L),!1))}}var j;return iA(nA(h.length(),N,A,w,0,!0))}function wx(h){let o=.5,c=.5;switch(h){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":c=1;break;case"top":case"top-right":case"top-left":c=0}return{horizontalAlign:o,verticalAlign:c}}function UB(h,o,c){const d=o.getMaxScale()*ja,{maxImageWidth:g,maxImageHeight:x}=o.getMaxImageSize(h),w=Math.max(d,x*c);return{verticalLineContentWidth:Math.max(d,g*c),horizontalLineContentHeight:w}}function oA(h){switch(h){case"top":return 0;case"center":return .5;default:return 1}}function VB(h,o,c){return!(h===f.an.horizontal||!o&&!Qr(c)||o&&(Bv[c]||(d=c,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function qB(h,o,c,d,g,x){const w=x[h.fontStack],A=function(N,j,H,te){if(N&&N.rect)return N;const ie=j[H.fontStack],se=ie&&ie[te];return se?{rect:null,metrics:se.metrics}:null}(w&&w[o],g,h,o);if(A===null)return null;let L;if(c)L=d.verticalLineContentWidth-h.scale*ja;else{const N=oA(h.verticalAlign);L=(d.horizontalLineContentHeight-h.scale*ja)*N}return{rect:A.rect,metrics:A.metrics,baselineOffset:L}}function GB(h,o,c,d,g){const x=g[h.imageName];if(!x)return null;const w=x.paddedRect,A=x.displaySize,L={width:A[0],height:A[1],left:1,top:-3,advance:o?A[1]:A[0]};let N;if(o)N=d.verticalLineContentWidth-A[1]*h.scale;else{const j=oA(h.verticalAlign);N=(d.horizontalLineContentHeight-A[1]*h.scale)*j}return{rect:w,metrics:L,baselineOffset:N,imageOffset:(o?A[0]:A[1])*h.scale-ja*c}}function HB(h,o,c,d){if(d===0)return;const g=h[c],x=(h[c].x+g.metrics.advance*g.scale)*d;for(let w=o;w<=c;w++)h[w].x-=x}function WB(h,o,c){const{horizontalAlign:d,verticalAlign:g}=wx(c),x=o[0]-h.displaySize[0]*d,w=o[1]-h.displaySize[1]*g;return{image:h,top:w,bottom:w+h.displaySize[1],left:x,right:x+h.displaySize[0]}}function aA(h){var o,c;let d=h.left,g=h.top,x=h.right-d,w=h.bottom-g;const A=(o=h.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",L=(c=h.image.textFitHeight)!==null&&c!==void 0?c:"stretchOrShrink",N=(h.image.content[2]-h.image.content[0])/(h.image.content[3]-h.image.content[1]);if(L==="proportional"){if(A==="stretchOnly"&&x/w<N||A==="proportional"){const j=Math.ceil(w*N);d*=j/x,x=j}}else if(A==="proportional"&&L==="stretchOnly"&&N!==0&&x/w>N){const j=Math.ceil(x/N);g*=j/w,w=j}return{x1:d,y1:g,x2:d+x,y2:g+w}}function sA(h,o,c,d,g,x){const w=h.image;let A;if(w.content){const Te=w.content,Fe=w.pixelRatio||1;A=[Te[0]/Fe,Te[1]/Fe,w.displaySize[0]-Te[2]/Fe,w.displaySize[1]-Te[3]/Fe]}const L=o.left*x,N=o.right*x;let j,H,te,ie;c==="width"||c==="both"?(ie=g[0]+L-d[3],H=g[0]+N+d[1]):(ie=g[0]+(L+N-w.displaySize[0])/2,H=ie+w.displaySize[0]);const se=o.top*x,fe=o.bottom*x;return c==="height"||c==="both"?(j=g[1]+se-d[0],te=g[1]+fe+d[2]):(j=g[1]+(se+fe-w.displaySize[1])/2,te=j+w.displaySize[1]),{image:w,top:j,right:H,bottom:te,left:ie,collisionPadding:A}}const Gh=128,Df=32640;function lA(h,o){const{expression:c}=o;if(c.kind==="constant")return{kind:"constant",layoutSize:c.evaluate(new Gr(h+1))};if(c.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=c;let x=0;for(;x<d.length&&d[x]<=h;)x++;x=Math.max(0,x-1);let w=x;for(;w<d.length&&d[w]<h+1;)w++;w=Math.min(d.length-1,w);const A=d[x],L=d[w];return c.kind==="composite"?{kind:"composite",minZoom:A,maxZoom:L,interpolationType:g}:{kind:"camera",minZoom:A,maxZoom:L,minSize:c.evaluate(new Gr(A)),maxSize:c.evaluate(new Gr(L)),interpolationType:g}}}function Sx(h,o,c){let d="never";const g=h.get(o);return g?d=g:h.get(c)&&(d="always"),d}const ZB=l0.VectorTileFeature.types,XB=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function zv(h,o,c,d,g,x,w,A,L,N,j,H,te){const ie=A?Math.min(Df,Math.round(A[0])):0,se=A?Math.min(Df,Math.round(A[1])):0;h.emplaceBack(o,c,Math.round(32*d),Math.round(32*g),x,w,(ie<<1)+(L?1:0),se,16*N,16*j,256*H,256*te)}function Cx(h,o,c){h.emplaceBack(o.x,o.y,c),h.emplaceBack(o.x,o.y,c),h.emplaceBack(o.x,o.y,c),h.emplaceBack(o.x,o.y,c)}function YB(h){for(const o of h.sections)if(Mr(o.text))return!0;return!1}class Ex{constructor(o){this.layoutVertexArray=new Nn,this.indexArray=new hi,this.programConfigurations=o,this.segments=new Xn,this.dynamicLayoutVertexArray=new ti,this.opacityVertexArray=new Vi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Me}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,c,d,g){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,MB.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,c),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,kB.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,XB,!0),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$e("SymbolBuffers",Ex);class Tx{constructor(o,c,d){this.layoutVertexArray=new o,this.layoutAttributes=c,this.indexArray=new d,this.segments=new Xn,this.collisionVertexArray=new vi}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,LB.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$e("CollisionBuffers",Tx);class Zp{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.globalState=o.globalState,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const c=this.layers[0]._unevaluatedLayout._values;this.textSizeData=lA(this.zoom,c["text-size"]),this.iconSizeData=lA(this.zoom,c["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),x=d.get("symbol-z-order");this.canOverlap=Sx(d,"text-overlap","text-allow-overlap")!=="never"||Sx(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(w=>f.an[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID}createArrays(){this.text=new Ex(new ch(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new Ex(new ch(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new He,this.lineVertexArray=new et,this.symbolInstances=new Ke,this.textAnchorOffsets=new Ge}calculateGlyphDependencies(o,c,d,g,x){for(let w=0;w<o.length;w++)if(c[o.charCodeAt(w)]=!0,(d||g)&&x){const A=h0[o.charAt(w)];A&&(c[A.charCodeAt(0)]=!0)}}populate(o,c,d){const g=this.layers[0],x=g.layout,w=x.get("text-font"),A=x.get("text-field"),L=x.get("icon-image"),N=(A.value.kind!=="constant"||A.value.value instanceof Ir&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),j=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,H=x.get("symbol-sort-key");if(this.features=[],!N&&!j)return;const te=c.iconDependencies,ie=c.glyphDependencies,se=c.availableImages,fe=new Gr(this.zoom,{globalState:this.globalState});for(const{feature:Te,id:Fe,index:dt,sourceLayerIndex:Xe}of o){const re=g._featureFilter.needGeometry,Se=kd(Te,re);if(!g._featureFilter.filter(fe,Se,d))continue;let Qe,Rt;if(re||(Se.geometry=Md(Te)),N){const jt=g.getValueAndResolveTokens("text-field",Se,d,se),Vt=Ir.factory(jt),cr=this.hasRTLText=this.hasRTLText||YB(Vt);(!cr||Ri.getRTLTextPluginStatus()==="unavailable"||cr&&Ri.isParsed())&&(Qe=RB(Vt,g,Se))}if(j){const jt=g.getValueAndResolveTokens("icon-image",Se,d,se);Rt=jt instanceof vo?jt:vo.fromString(jt)}if(!Qe&&!Rt)continue;const Qt=this.sortFeaturesByKey?H.evaluate(Se,{},d):void 0;if(this.features.push({id:Fe,text:Qe,icon:Rt,index:dt,sourceLayerIndex:Xe,geometry:Se.geometry,properties:Te.properties,type:ZB[Te.type],sortKey:Qt}),Rt&&(te[Rt.name]=!0),Qe){const jt=w.evaluate(Se,{},d).join(","),Vt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(f.an.vertical)>=0;for(const cr of Qe.sections)if(cr.image)te[cr.image.name]=!0;else{const tr=Xt(Qe.toString()),fr=cr.fontStack||jt,qt=ie[fr]=ie[fr]||{};this.calculateGlyphDependencies(cr.text,qt,Vt,this.allowVerticalPlacement,tr)}}}x.get("symbol-placement")==="line"&&(this.features=function(Te){const Fe={},dt={},Xe=[];let re=0;function Se(jt){Xe.push(Te[jt]),re++}function Qe(jt,Vt,cr){const tr=dt[jt];return delete dt[jt],dt[Vt]=tr,Xe[tr].geometry[0].pop(),Xe[tr].geometry[0]=Xe[tr].geometry[0].concat(cr[0]),tr}function Rt(jt,Vt,cr){const tr=Fe[Vt];return delete Fe[Vt],Fe[jt]=tr,Xe[tr].geometry[0].shift(),Xe[tr].geometry[0]=cr[0].concat(Xe[tr].geometry[0]),tr}function Qt(jt,Vt,cr){const tr=cr?Vt[0][Vt[0].length-1]:Vt[0][0];return`${jt}:${tr.x}:${tr.y}`}for(let jt=0;jt<Te.length;jt++){const Vt=Te[jt],cr=Vt.geometry,tr=Vt.text?Vt.text.toString():null;if(!tr){Se(jt);continue}const fr=Qt(tr,cr),qt=Qt(tr,cr,!0);if(fr in dt&&qt in Fe&&dt[fr]!==Fe[qt]){const zr=Rt(fr,qt,cr),pn=Qe(fr,qt,Xe[zr].geometry);delete Fe[fr],delete dt[qt],dt[Qt(tr,Xe[pn].geometry,!0)]=pn,Xe[zr].geometry=null}else fr in dt?Qe(fr,qt,cr):qt in Fe?Rt(fr,qt,cr):(Se(jt),Fe[fr]=re-1,dt[qt]=re-1)}return Xe.filter(jt=>jt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Te,Fe)=>Te.sortKey-Fe.sortKey)}update(o,c,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,c,this.layers,d),this.icon.programConfigurations.updatePaintArrays(o,c,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,c){const d=this.lineVertexArray.length;if(o.segment!==void 0){let g=o.dist(c[o.segment+1]),x=o.dist(c[o.segment]);const w={};for(let A=o.segment+1;A<c.length;A++)w[A]={x:c[A].x,y:c[A].y,tileUnitDistanceFromAnchor:g},A<c.length-1&&(g+=c[A+1].dist(c[A]));for(let A=o.segment||0;A>=0;A--)w[A]={x:c[A].x,y:c[A].y,tileUnitDistanceFromAnchor:x},A>0&&(x+=c[A-1].dist(c[A]));for(let A=0;A<c.length;A++){const L=w[A];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(o,c,d,g,x,w,A,L,N,j,H,te){const ie=o.indexArray,se=o.layoutVertexArray,fe=o.segments.prepareSegment(4*c.length,se,ie,this.canOverlap?w.sortKey:void 0),Te=this.glyphOffsetArray.length,Fe=fe.vertexLength,dt=this.allowVerticalPlacement&&A===f.an.vertical?Math.PI/2:0,Xe=w.text&&w.text.sections;for(let re=0;re<c.length;re++){const{tl:Se,tr:Qe,bl:Rt,br:Qt,tex:jt,pixelOffsetTL:Vt,pixelOffsetBR:cr,minFontScaleX:tr,minFontScaleY:fr,glyphOffset:qt,isSDF:zr,sectionIndex:pn}=c[re],un=fe.vertexLength,Hr=qt[1];zv(se,L.x,L.y,Se.x,Hr+Se.y,jt.x,jt.y,d,zr,Vt.x,Vt.y,tr,fr),zv(se,L.x,L.y,Qe.x,Hr+Qe.y,jt.x+jt.w,jt.y,d,zr,cr.x,Vt.y,tr,fr),zv(se,L.x,L.y,Rt.x,Hr+Rt.y,jt.x,jt.y+jt.h,d,zr,Vt.x,cr.y,tr,fr),zv(se,L.x,L.y,Qt.x,Hr+Qt.y,jt.x+jt.w,jt.y+jt.h,d,zr,cr.x,cr.y,tr,fr),Cx(o.dynamicLayoutVertexArray,L,dt),ie.emplaceBack(un,un+2,un+1),ie.emplaceBack(un+1,un+2,un+3),fe.vertexLength+=4,fe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qt[0]),re!==c.length-1&&pn===c[re+1].sectionIndex||o.programConfigurations.populatePaintArrays(se.length,w,w.index,{},te,Xe&&Xe[pn])}o.placedSymbolArray.emplaceBack(L.x,L.y,Te,this.glyphOffsetArray.length-Te,Fe,N,j,L.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],A,0,!1,0,H)}_addCollisionDebugVertex(o,c,d,g,x,w){return c.emplaceBack(0,0),o.emplaceBack(d.x,d.y,g,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(o,c,d,g,x,w,A){const L=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),N=L.vertexLength,j=x.layoutVertexArray,H=x.collisionVertexArray,te=A.anchorX,ie=A.anchorY;this._addCollisionDebugVertex(j,H,w,te,ie,new F(o,c)),this._addCollisionDebugVertex(j,H,w,te,ie,new F(d,c)),this._addCollisionDebugVertex(j,H,w,te,ie,new F(d,g)),this._addCollisionDebugVertex(j,H,w,te,ie,new F(o,g)),L.vertexLength+=4;const se=x.indexArray;se.emplaceBack(N,N+1),se.emplaceBack(N+1,N+2),se.emplaceBack(N+2,N+3),se.emplaceBack(N+3,N),L.primitiveLength+=4}addDebugCollisionBoxes(o,c,d,g){for(let x=o;x<c;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,g?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Tx(yi,XT.members,li),this.iconCollisionBox=new Tx(yi,XT.members,li);for(let o=0;o<this.symbolInstances.length;o++){const c=this.symbolInstances.get(o);this.addDebugCollisionBoxes(c.textBoxStartIndex,c.textBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.verticalTextBoxStartIndex,c.verticalTextBoxEndIndex,c,!0),this.addDebugCollisionBoxes(c.iconBoxStartIndex,c.iconBoxEndIndex,c,!1),this.addDebugCollisionBoxes(c.verticalIconBoxStartIndex,c.verticalIconBoxEndIndex,c,!1)}}_deserializeCollisionBoxesForSymbol(o,c,d,g,x,w,A,L,N){const j={};for(let H=c;H<d;H++){const te=o.get(H);j.textBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},j.textFeatureIndex=te.featureIndex;break}for(let H=g;H<x;H++){const te=o.get(H);j.verticalTextBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},j.verticalTextFeatureIndex=te.featureIndex;break}for(let H=w;H<A;H++){const te=o.get(H);j.iconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},j.iconFeatureIndex=te.featureIndex;break}for(let H=L;H<N;H++){const te=o.get(H);j.verticalIconBox={x1:te.x1,y1:te.y1,x2:te.x2,y2:te.y2,anchorPointX:te.anchorPointX,anchorPointY:te.anchorPointY},j.verticalIconFeatureIndex=te.featureIndex;break}return j}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let c=0;c<this.symbolInstances.length;c++){const d=this.symbolInstances.get(c);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,c){const d=o.placedSymbolArray.get(c),g=d.vertexStartIndex+4*d.numGlyphs;for(let x=d.vertexStartIndex;x<g;x+=4)o.indexArray.emplaceBack(x,x+2,x+1),o.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const c=Math.sin(o),d=Math.cos(o),g=[],x=[],w=[];for(let A=0;A<this.symbolInstances.length;++A){w.push(A);const L=this.symbolInstances.get(A);g.push(0|Math.round(c*L.anchorX+d*L.anchorY)),x.push(L.featureIndex)}return w.sort((A,L)=>g[A]-g[L]||x[L]-x[A]),w}addToSortKeyRanges(o,c){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===c?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:c,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const c of this.symbolInstanceIndexes){const d=this.symbolInstances.get(c);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((g,x,w)=>{g>=0&&w.indexOf(g)===x&&this.addIndicesForPlacedSymbol(this.text,g)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let uA,cA;$e("SymbolBucket",Zp,{omit:["layers","collisionBoxArray","features","compareText"]}),Zp.MAX_GLYPHS=65535,Zp.addDynamicAttributes=Cx;var Ax={get paint(){return cA=cA||new Zi({"icon-opacity":new Tr(it.paint_symbol["icon-opacity"]),"icon-color":new Tr(it.paint_symbol["icon-color"]),"icon-halo-color":new Tr(it.paint_symbol["icon-halo-color"]),"icon-halo-width":new Tr(it.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Tr(it.paint_symbol["icon-halo-blur"]),"icon-translate":new sr(it.paint_symbol["icon-translate"]),"icon-translate-anchor":new sr(it.paint_symbol["icon-translate-anchor"]),"text-opacity":new Tr(it.paint_symbol["text-opacity"]),"text-color":new Tr(it.paint_symbol["text-color"],{runtimeType:ro,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Tr(it.paint_symbol["text-halo-color"]),"text-halo-width":new Tr(it.paint_symbol["text-halo-width"]),"text-halo-blur":new Tr(it.paint_symbol["text-halo-blur"]),"text-translate":new sr(it.paint_symbol["text-translate"]),"text-translate-anchor":new sr(it.paint_symbol["text-translate-anchor"])})},get layout(){return uA=uA||new Zi({"symbol-placement":new sr(it.layout_symbol["symbol-placement"]),"symbol-spacing":new sr(it.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sr(it.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Tr(it.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sr(it.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sr(it.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sr(it.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sr(it.layout_symbol["icon-ignore-placement"]),"icon-optional":new sr(it.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sr(it.layout_symbol["icon-rotation-alignment"]),"icon-size":new Tr(it.layout_symbol["icon-size"]),"icon-text-fit":new sr(it.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sr(it.layout_symbol["icon-text-fit-padding"]),"icon-image":new Tr(it.layout_symbol["icon-image"]),"icon-rotate":new Tr(it.layout_symbol["icon-rotate"]),"icon-padding":new Tr(it.layout_symbol["icon-padding"]),"icon-keep-upright":new sr(it.layout_symbol["icon-keep-upright"]),"icon-offset":new Tr(it.layout_symbol["icon-offset"]),"icon-anchor":new Tr(it.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sr(it.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sr(it.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sr(it.layout_symbol["text-rotation-alignment"]),"text-field":new Tr(it.layout_symbol["text-field"]),"text-font":new Tr(it.layout_symbol["text-font"]),"text-size":new Tr(it.layout_symbol["text-size"]),"text-max-width":new Tr(it.layout_symbol["text-max-width"]),"text-line-height":new sr(it.layout_symbol["text-line-height"]),"text-letter-spacing":new Tr(it.layout_symbol["text-letter-spacing"]),"text-justify":new Tr(it.layout_symbol["text-justify"]),"text-radial-offset":new Tr(it.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sr(it.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Tr(it.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Tr(it.layout_symbol["text-anchor"]),"text-max-angle":new sr(it.layout_symbol["text-max-angle"]),"text-writing-mode":new sr(it.layout_symbol["text-writing-mode"]),"text-rotate":new Tr(it.layout_symbol["text-rotate"]),"text-padding":new sr(it.layout_symbol["text-padding"]),"text-keep-upright":new sr(it.layout_symbol["text-keep-upright"]),"text-transform":new Tr(it.layout_symbol["text-transform"]),"text-offset":new Tr(it.layout_symbol["text-offset"]),"text-allow-overlap":new sr(it.layout_symbol["text-allow-overlap"]),"text-overlap":new sr(it.layout_symbol["text-overlap"]),"text-ignore-placement":new sr(it.layout_symbol["text-ignore-placement"]),"text-optional":new sr(it.layout_symbol["text-optional"])})}};class hA{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Xo,this.defaultValue=o}evaluate(o){if(o.formattedSection){const c=this.defaultValue.property.overrides;if(c&&c.hasOverride(o.formattedSection))return c.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$e("FormatSectionOverride",hA,{omit:["defaultValue"]});class $v extends Ei{constructor(o){super(o,Ax)}recalculate(o,c){if(super.recalculate(o,c),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const x of d)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,c,d,g){const x=this.layout.get(o).evaluate(c,{},d,g),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||Sf(w.value)||!x?x:function(A,L){return L.replace(/{([^{}]+)}/g,(N,j)=>A&&j in A?String(A[j]):"")}(c.properties,x)}createBucket(o){return new Zp(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of Ax.paint.overridableProperties){if(!$v.hasPaintOverride(this.layout,o))continue;const c=this.paint.get(o),d=new hA(c),g=new Qc(d,c.property.specification);let x=null;x=c.value.kind==="constant"||c.value.kind==="source"?new eh("source",g):new Ef("composite",g,c.value.zoomStops),this.paint._values[o]=new io(c.property,x,c.parameters)}}_handleOverridablePaintPropertyUpdate(o,c,d){return!(!this.layout||c.isDataDriven()||d.isDataDriven())&&$v.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,c){const d=o.get("text-field"),g=Ax.paint.properties[c];let x=!1;const w=A=>{for(const L of A)if(g.overrides&&g.overrides.hasOverride(L))return void(x=!0)};if(d.value.kind==="constant"&&d.value.value instanceof Ir)w(d.value.value.sections);else if(d.value.kind==="source"){const A=N=>{x||(N instanceof co&&tn(N.value)===Sl?w(N.value.sections):N instanceof Qa?w(N.sections):N.eachChild(A))},L=d.value;L._styleExpression&&A(L._styleExpression.expression)}return x}}let fA;var KB={get paint(){return fA=fA||new Zi({"background-color":new sr(it.paint_background["background-color"]),"background-pattern":new bi(it.paint_background["background-pattern"]),"background-opacity":new sr(it.paint_background["background-opacity"])})}};class JB extends Ei{constructor(o){super(o,KB)}}let dA;var QB={get paint(){return dA=dA||new Zi({"raster-opacity":new sr(it.paint_raster["raster-opacity"]),"raster-hue-rotate":new sr(it.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sr(it.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sr(it.paint_raster["raster-brightness-max"]),"raster-saturation":new sr(it.paint_raster["raster-saturation"]),"raster-contrast":new sr(it.paint_raster["raster-contrast"]),"raster-resampling":new sr(it.paint_raster["raster-resampling"]),"raster-fade-duration":new sr(it.paint_raster["raster-fade-duration"])})}};class ez extends Ei{constructor(o){super(o,QB)}}class tz extends Ei{constructor(o){super(o,{}),this.onAdd=c=>{this.implementation.onAdd&&this.implementation.onAdd(c,c.painter.context.gl)},this.onRemove=c=>{this.implementation.onRemove&&this.implementation.onRemove(c,c.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class rz{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const nz={once:!0},Px=63710088e-1;class Rf{constructor(o,c){if(isNaN(o)||isNaN(c))throw new Error(`Invalid LngLat object: (${o}, ${c})`);if(this.lng=+o,this.lat=+c,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Rf(Ct(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const c=Math.PI/180,d=this.lat*c,g=o.lat*c,x=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((o.lng-this.lng)*c);return Px*Math.acos(Math.min(x,1))}static convert(o){if(o instanceof Rf)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Rf(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Rf(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const pA=2*Math.PI*Px;function mA(h){return pA*Math.cos(h*Math.PI/180)}function gA(h){return(180+h)/360}function yA(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function vA(h,o){return h/mA(o)}function Ix(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function _A(h,o){return h*mA(Ix(o))}class d0{constructor(o,c,d=0){this.x=+o,this.y=+c,this.z=+d}static fromLngLat(o,c=0){const d=Rf.convert(o);return new d0(gA(d.lng),yA(d.lat),vA(c,d.lat))}toLngLat(){return new Rf(360*this.x-180,Ix(this.y))}toAltitude(){return _A(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/pA*(o=Ix(this.y),1/Math.cos(o*Math.PI/180));var o}}function bA(h,o,c){var d=2*Math.PI*6378137/256/Math.pow(2,c);return[h*d-2*Math.PI*6378137/2,o*d-2*Math.PI*6378137/2]}class Mx{constructor(o,c,d){if(!function(g,x,w){return!(g<0||g>25||w<0||w>=Math.pow(2,g)||x<0||x>=Math.pow(2,g))}(o,c,d))throw new Error(`x=${c}, y=${d}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=c,this.y=d,this.key=Xp(0,o,o,c,d)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,c,d){const g=(w=this.y,A=this.z,L=bA(256*(x=this.x),256*(w=Math.pow(2,A)-w-1),A),N=bA(256*(x+1),256*(w+1),A),L[0]+","+L[1]+","+N[0]+","+N[1]);var x,w,A,L,N;const j=function(H,te,ie){let se,fe="";for(let Te=H;Te>0;Te--)se=1<<Te-1,fe+=(te&se?1:0)+(ie&se?2:0);return fe}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,c>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,g)}isChildOf(o){const c=this.z-o.z;return c>0&&o.x===this.x>>c&&o.y===this.y>>c}getTilePoint(o){const c=Math.pow(2,this.z);return new F((o.x*c-this.x)*ne,(o.y*c-this.y)*ne)}toString(){return`${this.z}/${this.x}/${this.y}`}}class xA{constructor(o,c){this.wrap=o,this.canonical=c,this.key=Xp(o,c.z,c.z,c.x,c.y)}}class Cu{constructor(o,c,d,g,x){if(this.terrainRttPosMatrix32f=null,o<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${d}`);this.overscaledZ=o,this.wrap=c,this.canonical=new Mx(d,+g,+x),this.key=Xp(c,o,d,g,x)}clone(){return new Cu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const c=this.canonical.z-o;return o>this.canonical.z?new Cu(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Cu(o,this.wrap,o,this.canonical.x>>c,this.canonical.y>>c)}calculateScaledKey(o,c){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-o;return o>this.canonical.z?Xp(this.wrap*+c,o,this.canonical.z,this.canonical.x,this.canonical.y):Xp(this.wrap*+c,o,o,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const c=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>c&&o.canonical.y===this.canonical.y>>c}children(o){if(this.overscaledZ>=o)return[new Cu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const c=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new Cu(c,this.wrap,c,d,g),new Cu(c,this.wrap,c,d+1,g),new Cu(c,this.wrap,c,d,g+1),new Cu(c,this.wrap,c,d+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Cu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Cu(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new xA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new d0(o.x-this.wrap,o.y))}}function Xp(h,o,c,d,g){(h*=2)<0&&(h=-1*h-1);const x=1<<c;return(x*x*h+x*g+d).toString(36)+c.toString(36)+o.toString(36)}$e("CanonicalTileID",Mx),$e("OverscaledTileID",Cu,{omit:["terrainRttPosMatrix32f"]});class Rd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(o){return this.minX=Math.min(this.minX,o.x),this.minY=Math.min(this.minY,o.y),this.maxX=Math.max(this.maxX,o.x),this.maxY=Math.max(this.maxY,o.y),this}expandBy(o){return this.minX-=o,this.minY-=o,this.maxX+=o,this.maxY+=o,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(o){return this.expandBy(-o)}map(o){const c=new Rd;return c.extend(o(new F(this.minX,this.minY))),c.extend(o(new F(this.maxX,this.minY))),c.extend(o(new F(this.minX,this.maxY))),c.extend(o(new F(this.maxX,this.maxY))),c}static fromPoints(o){const c=new Rd;for(const d of o)c.extend(d);return c}contains(o){return o.x>=this.minX&&o.x<=this.maxX&&o.y>=this.minY&&o.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(o){return!this.empty()&&!o.empty()&&o.minX>=this.minX&&o.maxX<=this.maxX&&o.minY>=this.minY&&o.maxY<=this.maxY}intersects(o){return!this.empty()&&!o.empty()&&o.minX<=this.maxX&&o.maxX>=this.minX&&o.minY<=this.maxY&&o.maxY>=this.minY}}class wA{constructor(o){this._stringToNumber={},this._numberToString=[];for(let c=0;c<o.length;c++){const d=o[c];this._stringToNumber[d]=c,this._numberToString[c]=d}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class SA{constructor(o,c,d,g,x){this.type="Feature",this._vectorTileFeature=o,o._z=c,o._x=d,o._y=g,this.properties=o.properties,this.id=x}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const c in this)c!=="_geometry"&&c!=="_vectorTileFeature"&&(o[c]=this[c]);return o}}class CA{constructor(o,c){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new ke(ne,16,0),this.grid3D=new ke(ne,16,0),this.featureIndexArray=new Nt,this.promoteId=c}insert(o,c,d,g,x,w){const A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,x);const L=w?this.grid3D:this.grid;for(let N=0;N<c.length;N++){const j=c[N],H=[1/0,1/0,-1/0,-1/0];for(let te=0;te<j.length;te++){const ie=j[te];H[0]=Math.min(H[0],ie.x),H[1]=Math.min(H[1],ie.y),H[2]=Math.max(H[2],ie.x),H[3]=Math.max(H[3],ie.y)}H[0]<ne&&H[1]<ne&&H[2]>=0&&H[3]>=0&&L.insert(A,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new l0.VectorTile(new _x(this.rawTileData)).layers,this.sourceLayerCoder=new wA(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,c,d,g){this.loadVTLayers();const x=o.params,w=ne/o.tileSize/o.scale,A=sl(x.filter),L=o.queryGeometry,N=o.queryPadding*w,j=Rd.fromPoints(L),H=this.grid.query(j.minX-N,j.minY-N,j.maxX+N,j.maxY+N),te=Rd.fromPoints(o.cameraQueryGeometry).expandBy(N),ie=this.grid3D.query(te.minX,te.minY,te.maxX,te.maxY,(Te,Fe,dt,Xe)=>function(re,Se,Qe,Rt,Qt){for(const Vt of re)if(Se<=Vt.x&&Qe<=Vt.y&&Rt>=Vt.x&&Qt>=Vt.y)return!0;const jt=[new F(Se,Qe),new F(Se,Qt),new F(Rt,Qt),new F(Rt,Qe)];if(re.length>2){for(const Vt of jt)if(Vp(re,Vt))return!0}for(let Vt=0;Vt<re.length-1;Vt++)if(qF(re[Vt],re[Vt+1],jt))return!0;return!1}(o.cameraQueryGeometry,Te-N,Fe-N,dt+N,Xe+N));for(const Te of ie)H.push(Te);H.sort(iz);const se={};let fe;for(let Te=0;Te<H.length;Te++){const Fe=H[Te];if(Fe===fe)continue;fe=Fe;const dt=this.featureIndexArray.get(Fe);let Xe=null;this.loadMatchingFeature(se,dt.bucketIndex,dt.sourceLayerIndex,dt.featureIndex,A,x.layers,x.availableImages,c,d,g,(re,Se,Qe)=>(Xe||(Xe=Md(re)),Se.queryIntersectsFeature({queryGeometry:L,feature:re,featureState:Qe,geometry:Xe,zoom:this.z,transform:o.transform,pixelsToTileUnits:w,pixelPosMatrix:o.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:o.getElevation})))}return se}loadMatchingFeature(o,c,d,g,x,w,A,L,N,j,H){const te=this.bucketLayerIDs[c];if(w&&!te.some(Te=>w.has(Te)))return;const ie=this.sourceLayerCoder.decode(d),se=this.vtLayers[ie].feature(g);if(x.needGeometry){const Te=kd(se,!0);if(!x.filter(new Gr(this.tileID.overscaledZ),Te,this.tileID.canonical))return}else if(!x.filter(new Gr(this.tileID.overscaledZ),se))return;const fe=this.getId(se,ie);for(let Te=0;Te<te.length;Te++){const Fe=te[Te];if(w&&!w.has(Fe))continue;const dt=L[Fe];if(!dt)continue;let Xe={};fe&&j&&(Xe=j.getState(dt.sourceLayer||"_geojsonTileLayer",fe));const re=Ut({},N[Fe]);re.paint=EA(re.paint,dt.paint,se,Xe,A),re.layout=EA(re.layout,dt.layout,se,Xe,A);const Se=!H||H(se,dt,Xe);if(!Se)continue;const Qe=new SA(se,this.z,this.x,this.y,fe);Qe.layer=re;let Rt=o[Fe];Rt===void 0&&(Rt=o[Fe]=[]),Rt.push({featureIndex:g,feature:Qe,intersectionZ:Se})}}lookupSymbolFeatures(o,c,d,g,x,w,A,L){const N={};this.loadVTLayers();const j=sl(x);for(const H of o)this.loadMatchingFeature(N,d,g,H,j,w,A,L,c);return N}hasLayer(o){for(const c of this.bucketLayerIDs)for(const d of c)if(o===d)return!0;return!1}getId(o,c){var d;let g=o.id;return this.promoteId&&(g=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[c]],typeof g=="boolean"&&(g=Number(g)),g===void 0&&(!((d=o.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(g=Number(o.properties.cluster_id))),g}}function EA(h,o,c,d,g){return rr(h,(x,w)=>{const A=o instanceof xo?o.get(w):null;return A&&A.evaluate?A.evaluate(c,d,g):A})}function iz(h,o){return o-h}function TA(h,o,c,d,g){const x=[];for(let w=0;w<h.length;w++){const A=h[w];let L;for(let N=0;N<A.length-1;N++){let j=A[N],H=A[N+1];j.x<o&&H.x<o||(j.x<o?j=new F(o,j.y+(o-j.x)/(H.x-j.x)*(H.y-j.y))._round():H.x<o&&(H=new F(o,j.y+(o-j.x)/(H.x-j.x)*(H.y-j.y))._round()),j.y<c&&H.y<c||(j.y<c?j=new F(j.x+(c-j.y)/(H.y-j.y)*(H.x-j.x),c)._round():H.y<c&&(H=new F(j.x+(c-j.y)/(H.y-j.y)*(H.x-j.x),c)._round()),j.x>=d&&H.x>=d||(j.x>=d?j=new F(d,j.y+(d-j.x)/(H.x-j.x)*(H.y-j.y))._round():H.x>=d&&(H=new F(d,j.y+(d-j.x)/(H.x-j.x)*(H.y-j.y))._round()),j.y>=g&&H.y>=g||(j.y>=g?j=new F(j.x+(g-j.y)/(H.y-j.y)*(H.x-j.x),g)._round():H.y>=g&&(H=new F(j.x+(g-j.y)/(H.y-j.y)*(H.x-j.x),g)._round()),L&&j.equals(L[L.length-1])||(L=[j],x.push(L)),L.push(H)))))}}return x}$e("FeatureIndex",CA,{omit:["rawTileData","sourceLayerCoder"]});class Nf extends F{constructor(o,c,d,g){super(o,c),this.angle=d,g!==void 0&&(this.segment=g)}clone(){return new Nf(this.x,this.y,this.angle,this.segment)}}function AA(h,o,c,d,g){if(o.segment===void 0||c===0)return!0;let x=o,w=o.segment+1,A=0;for(;A>-c/2;){if(w--,w<0)return!1;A-=h[w].dist(x),x=h[w]}A+=h[w].dist(h[w+1]),w++;const L=[];let N=0;for(;A<c/2;){const j=h[w],H=h[w+1];if(!H)return!1;let te=h[w-1].angleTo(j)-j.angleTo(H);for(te=Math.abs((te+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:A,angleDelta:te}),N+=te;A-L[0].distance>d;)N-=L.shift().angleDelta;if(N>g)return!1;w++,A+=j.dist(H)}return!0}function PA(h){let o=0;for(let c=0;c<h.length-1;c++)o+=h[c].dist(h[c+1]);return o}function IA(h,o,c){return h?.6*o*c:0}function MA(h,o){return Math.max(h?h.right-h.left:0,o?o.right-o.left:0)}function oz(h,o,c,d,g,x){const w=IA(c,g,x),A=MA(c,d)*x;let L=0;const N=PA(h)/2;for(let j=0;j<h.length-1;j++){const H=h[j],te=h[j+1],ie=H.dist(te);if(L+ie>N){const se=(N-L)/ie,fe=fi.number(H.x,te.x,se),Te=fi.number(H.y,te.y,se),Fe=new Nf(fe,Te,te.angleTo(H),j);return Fe._round(),!w||AA(h,Fe,A,w,o)?Fe:void 0}L+=ie}}function az(h,o,c,d,g,x,w,A,L){const N=IA(d,x,w),j=MA(d,g),H=j*w,te=h[0].x===0||h[0].x===L||h[0].y===0||h[0].y===L;return o-H<o/4&&(o=H+o/4),kA(h,te?o/2*A%o:(j/2+2*x)*w*A%o,o,N,c,H,te,!1,L)}function kA(h,o,c,d,g,x,w,A,L){const N=x/2,j=PA(h);let H=0,te=o-c,ie=[];for(let se=0;se<h.length-1;se++){const fe=h[se],Te=h[se+1],Fe=fe.dist(Te),dt=Te.angleTo(fe);for(;te+c<H+Fe;){te+=c;const Xe=(te-H)/Fe,re=fi.number(fe.x,Te.x,Xe),Se=fi.number(fe.y,Te.y,Xe);if(re>=0&&re<L&&Se>=0&&Se<L&&te-N>=0&&te+N<=j){const Qe=new Nf(re,Se,dt,se);Qe._round(),d&&!AA(h,Qe,x,d,g)||ie.push(Qe)}}H+=Fe}return A||ie.length||w||(ie=kA(h,H/2,c,d,g,x,w,!0,L)),ie}function LA(h,o,c,d){const g=[],x=h.image,w=x.pixelRatio,A=x.paddedRect.w-2,L=x.paddedRect.h-2;let N={x1:h.left,y1:h.top,x2:h.right,y2:h.bottom};const j=x.stretchX||[[0,A]],H=x.stretchY||[[0,L]],te=(qt,zr)=>qt+zr[1]-zr[0],ie=j.reduce(te,0),se=H.reduce(te,0),fe=A-ie,Te=L-se;let Fe=0,dt=ie,Xe=0,re=se,Se=0,Qe=fe,Rt=0,Qt=Te;if(x.content&&d){const qt=x.content,zr=qt[2]-qt[0],pn=qt[3]-qt[1];(x.textFitWidth||x.textFitHeight)&&(N=aA(h)),Fe=jv(j,0,qt[0]),Xe=jv(H,0,qt[1]),dt=jv(j,qt[0],qt[2]),re=jv(H,qt[1],qt[3]),Se=qt[0]-Fe,Rt=qt[1]-Xe,Qe=zr-dt,Qt=pn-re}const jt=N.x1,Vt=N.y1,cr=N.x2-jt,tr=N.y2-Vt,fr=(qt,zr,pn,un)=>{const Hr=Uv(qt.stretch-Fe,dt,cr,jt),ri=Vv(qt.fixed-Se,Qe,qt.stretch,ie),Lo=Uv(zr.stretch-Xe,re,tr,Vt),Ta=Vv(zr.fixed-Rt,Qt,zr.stretch,se),ws=Uv(pn.stretch-Fe,dt,cr,jt),Eu=Vv(pn.fixed-Se,Qe,pn.stretch,ie),Dl=Uv(un.stretch-Xe,re,tr,Vt),as=Vv(un.fixed-Rt,Qt,un.stretch,se),So=new F(Hr,Lo),Ua=new F(ws,Lo),ss=new F(ws,Dl),ls=new F(Hr,Dl),fl=new F(ri/w,Ta/w),Tu=new F(Eu/w,as/w),Va=o*Math.PI/180;if(Va){const qa=Math.sin(Va),Ga=Math.cos(Va),pa=[Ga,-qa,qa,Ga];So._matMult(pa),Ua._matMult(pa),ls._matMult(pa),ss._matMult(pa)}const Rl=qt.stretch+qt.fixed,Aa=zr.stretch+zr.fixed;return{tl:So,tr:Ua,bl:ls,br:ss,tex:{x:x.paddedRect.x+1+Rl,y:x.paddedRect.y+1+Aa,w:pn.stretch+pn.fixed-Rl,h:un.stretch+un.fixed-Aa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:fl,pixelOffsetBR:Tu,minFontScaleX:Qe/w/cr,minFontScaleY:Qt/w/tr,isSDF:c}};if(d&&(x.stretchX||x.stretchY)){const qt=DA(j,fe,ie),zr=DA(H,Te,se);for(let pn=0;pn<qt.length-1;pn++){const un=qt[pn],Hr=qt[pn+1];for(let ri=0;ri<zr.length-1;ri++)g.push(fr(un,zr[ri],Hr,zr[ri+1]))}}else g.push(fr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:A+1},{fixed:0,stretch:L+1}));return g}function jv(h,o,c){let d=0;for(const g of h)d+=Math.max(o,Math.min(c,g[1]))-Math.max(o,Math.min(c,g[0]));return d}function DA(h,o,c){const d=[{fixed:-1,stretch:0}];for(const[g,x]of h){const w=d[d.length-1];d.push({fixed:g-w.stretch,stretch:w.stretch}),d.push({fixed:g-w.stretch,stretch:w.stretch+(x-g)})}return d.push({fixed:o+1,stretch:c}),d}function Uv(h,o,c,d){return h/o*c+d}function Vv(h,o,c,d){return h-o*c/d}$e("Anchor",Nf);class qv{constructor(o,c,d,g,x,w,A,L,N,j){var H;if(this.boxStartIndex=o.length,N){let te=w.top,ie=w.bottom;const se=w.collisionPadding;se&&(te-=se[1],ie+=se[3]);let fe=ie-te;fe>0&&(fe=Math.max(10,fe),this.circleDiameter=fe)}else{const te=!((H=w.image)===null||H===void 0)&&H.content&&(w.image.textFitWidth||w.image.textFitHeight)?aA(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};te.y1=te.y1*A-L[0],te.y2=te.y2*A+L[2],te.x1=te.x1*A-L[3],te.x2=te.x2*A+L[1];const ie=w.collisionPadding;if(ie&&(te.x1-=ie[0]*A,te.y1-=ie[1]*A,te.x2+=ie[2]*A,te.y2+=ie[3]*A),j){const se=new F(te.x1,te.y1),fe=new F(te.x2,te.y1),Te=new F(te.x1,te.y2),Fe=new F(te.x2,te.y2),dt=j*Math.PI/180;se._rotate(dt),fe._rotate(dt),Te._rotate(dt),Fe._rotate(dt),te.x1=Math.min(se.x,fe.x,Te.x,Fe.x),te.x2=Math.max(se.x,fe.x,Te.x,Fe.x),te.y1=Math.min(se.y,fe.y,Te.y,Fe.y),te.y2=Math.max(se.y,fe.y,Te.y,Fe.y)}o.emplaceBack(c.x,c.y,te.x1,te.y1,te.x2,te.y2,d,g,x)}this.boxEndIndex=o.length}}class sz{constructor(o=[],c=(d,g)=>d<g?-1:d>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=c,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],c=this.data.pop();return--this.length>0&&(this.data[0]=c,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:c,compare:d}=this,g=c[o];for(;o>0;){const x=o-1>>1,w=c[x];if(d(g,w)>=0)break;c[o]=w,o=x}c[o]=g}_down(o){const{data:c,compare:d}=this,g=this.length>>1,x=c[o];for(;o<g;){let w=1+(o<<1);const A=w+1;if(A<this.length&&d(c[A],c[w])<0&&(w=A),d(c[w],x)>=0)break;c[o]=c[w],o=w}c[o]=x}}function lz(h,o=1,c=!1){const d=Rd.fromPoints(h[0]),g=Math.min(d.width(),d.height());let x=g/2;const w=new sz([],uz),{minX:A,minY:L,maxX:N,maxY:j}=d;if(g===0)return new F(A,L);for(let ie=A;ie<N;ie+=g)for(let se=L;se<j;se+=g)w.push(new Yp(ie+x,se+x,x,h));let H=function(ie){let se=0,fe=0,Te=0;const Fe=ie[0];for(let dt=0,Xe=Fe.length,re=Xe-1;dt<Xe;re=dt++){const Se=Fe[dt],Qe=Fe[re],Rt=Se.x*Qe.y-Qe.x*Se.y;fe+=(Se.x+Qe.x)*Rt,Te+=(Se.y+Qe.y)*Rt,se+=3*Rt}return new Yp(fe/se,Te/se,0,ie)}(h),te=w.length;for(;w.length;){const ie=w.pop();(ie.d>H.d||!H.d)&&(H=ie,c&&console.log("found best %d after %d probes",Math.round(1e4*ie.d)/1e4,te)),ie.max-H.d<=o||(x=ie.h/2,w.push(new Yp(ie.p.x-x,ie.p.y-x,x,h)),w.push(new Yp(ie.p.x+x,ie.p.y-x,x,h)),w.push(new Yp(ie.p.x-x,ie.p.y+x,x,h)),w.push(new Yp(ie.p.x+x,ie.p.y+x,x,h)),te+=4)}return c&&(console.log(`num probes: ${te}`),console.log(`best distance: ${H.d}`)),H.p}function uz(h,o){return o.max-h.max}function Yp(h,o,c,d){this.p=new F(h,o),this.h=c,this.d=function(g,x){let w=!1,A=1/0;for(let L=0;L<x.length;L++){const N=x[L];for(let j=0,H=N.length,te=H-1;j<H;te=j++){const ie=N[j],se=N[te];ie.y>g.y!=se.y>g.y&&g.x<(se.x-ie.x)*(g.y-ie.y)/(se.y-ie.y)+ie.x&&(w=!w),A=Math.min(A,fT(g,ie,se))}}return(w?1:-1)*Math.sqrt(A)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var xs;f.aD=void 0,(xs=f.aD||(f.aD={}))[xs.center=1]="center",xs[xs.left=2]="left",xs[xs.right=3]="right",xs[xs.top=4]="top",xs[xs.bottom=5]="bottom",xs[xs["top-left"]=6]="top-left",xs[xs["top-right"]=7]="top-right",xs[xs["bottom-left"]=8]="bottom-left",xs[xs["bottom-right"]=9]="bottom-right";const kx=Number.POSITIVE_INFINITY;function RA(h,o){return o[1]!==kx?function(c,d,g){let x=0,w=0;switch(d=Math.abs(d),g=Math.abs(g),c){case"top-right":case"top-left":case"top":w=g-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-g}switch(c){case"top-right":case"bottom-right":case"right":x=-d;break;case"top-left":case"bottom-left":case"left":x=d}return[x,w]}(h,o[0],o[1]):function(c,d){let g=0,x=0;d<0&&(d=0);const w=d/Math.SQRT2;switch(c){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-d;break;case"top":x=d-7}switch(c){case"top-right":case"bottom-right":g=-w;break;case"top-left":case"bottom-left":g=w;break;case"left":g=d;break;case"right":g=-d}return[g,x]}(h,o[0])}function NA(h,o,c){var d;const g=h.layout,x=(d=g.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(o,{},c);if(x){const A=x.values,L=[];for(let N=0;N<A.length;N+=2){const j=L[N]=A[N],H=A[N+1].map(te=>te*ja);j.startsWith("top")?H[1]-=7:j.startsWith("bottom")&&(H[1]+=7),L[N+1]=H}return new Wr(L)}const w=g.get("text-variable-anchor");if(w){let A;A=h._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(o,{},c)*ja,kx]:g.get("text-offset").evaluate(o,{},c).map(N=>N*ja);const L=[];for(const N of w)L.push(N,RA(N,A));return new Wr(L)}return null}function Lx(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cz(h,o,c,d,g,x,w,A,L,N,j,H){let te=x.textMaxSize.evaluate(o,{});te===void 0&&(te=w);const ie=h.layers[0].layout,se=ie.get("icon-offset").evaluate(o,{},j),fe=FA(c.horizontal),Te=w/24,Fe=h.tilePixelRatio*Te,dt=h.tilePixelRatio*te/24,Xe=h.tilePixelRatio*A,re=h.tilePixelRatio*ie.get("symbol-spacing"),Se=ie.get("text-padding")*h.tilePixelRatio,Qe=function(pn,un,Hr,ri=1){const Lo=pn.get("icon-padding").evaluate(un,{},Hr),Ta=Lo&&Lo.values;return[Ta[0]*ri,Ta[1]*ri,Ta[2]*ri,Ta[3]*ri]}(ie,o,j,h.tilePixelRatio),Rt=ie.get("text-max-angle")/180*Math.PI,Qt=ie.get("text-rotation-alignment")!=="viewport"&&ie.get("symbol-placement")!=="point",jt=ie.get("icon-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",Vt=ie.get("symbol-placement"),cr=re/2,tr=ie.get("icon-text-fit");let fr;d&&tr!=="none"&&(h.allowVerticalPlacement&&c.vertical&&(fr=sA(d,c.vertical,tr,ie.get("icon-text-fit-padding"),se,Te)),fe&&(d=sA(d,fe,tr,ie.get("icon-text-fit-padding"),se,Te)));const qt=j?H.line.getGranularityForZoomLevel(j.z):1,zr=(pn,un)=>{un.x<0||un.x>=ne||un.y<0||un.y>=ne||function(Hr,ri,Lo,Ta,ws,Eu,Dl,as,So,Ua,ss,ls,fl,Tu,Va,Rl,Aa,qa,Ga,pa,ao,Ac,Kp,Pc,dz){const Jp=Hr.addToLineVertexArray(ri,Lo);let Nd,Qp,em,tm,jA=0,UA=0,VA=0,qA=0,$x=-1,jx=-1;const Hh={};let GA=hl("");if(Hr.allowVerticalPlacement&&Ta.vertical){const Ns=as.layout.get("text-rotate").evaluate(ao,{},Pc)+90;em=new qv(So,ri,Ua,ss,ls,Ta.vertical,fl,Tu,Va,Ns),Dl&&(tm=new qv(So,ri,Ua,ss,ls,Dl,Aa,qa,Va,Ns))}if(ws){const Ns=as.layout.get("icon-rotate").evaluate(ao,{}),Au=as.layout.get("icon-text-fit")!=="none",Od=LA(ws,Ns,Kp,Au),Mc=Dl?LA(Dl,Ns,Kp,Au):void 0;Qp=new qv(So,ri,Ua,ss,ls,ws,Aa,qa,!1,Ns),jA=4*Od.length;const Fd=Hr.iconSizeData;let hh=null;Fd.kind==="source"?(hh=[Gh*as.layout.get("icon-size").evaluate(ao,{})],hh[0]>Df&&Nr(`${Hr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Fd.kind==="composite"&&(hh=[Gh*Ac.compositeIconSizes[0].evaluate(ao,{},Pc),Gh*Ac.compositeIconSizes[1].evaluate(ao,{},Pc)],(hh[0]>Df||hh[1]>Df)&&Nr(`${Hr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Hr.addSymbols(Hr.icon,Od,hh,pa,Ga,ao,f.an.none,ri,Jp.lineStartIndex,Jp.lineLength,-1,Pc),$x=Hr.icon.placedSymbolArray.length-1,Mc&&(UA=4*Mc.length,Hr.addSymbols(Hr.icon,Mc,hh,pa,Ga,ao,f.an.vertical,ri,Jp.lineStartIndex,Jp.lineLength,-1,Pc),jx=Hr.icon.placedSymbolArray.length-1)}const HA=Object.keys(Ta.horizontal);for(const Ns of HA){const Au=Ta.horizontal[Ns];if(!Nd){GA=hl(Au.text);const Mc=as.layout.get("text-rotate").evaluate(ao,{},Pc);Nd=new qv(So,ri,Ua,ss,ls,Au,fl,Tu,Va,Mc)}const Od=Au.positionedLines.length===1;if(VA+=OA(Hr,ri,Au,Eu,as,Va,ao,Rl,Jp,Ta.vertical?f.an.horizontal:f.an.horizontalOnly,Od?HA:[Ns],Hh,$x,Ac,Pc),Od)break}Ta.vertical&&(qA+=OA(Hr,ri,Ta.vertical,Eu,as,Va,ao,Rl,Jp,f.an.vertical,["vertical"],Hh,jx,Ac,Pc));const pz=Nd?Nd.boxStartIndex:Hr.collisionBoxArray.length,mz=Nd?Nd.boxEndIndex:Hr.collisionBoxArray.length,gz=em?em.boxStartIndex:Hr.collisionBoxArray.length,yz=em?em.boxEndIndex:Hr.collisionBoxArray.length,vz=Qp?Qp.boxStartIndex:Hr.collisionBoxArray.length,_z=Qp?Qp.boxEndIndex:Hr.collisionBoxArray.length,bz=tm?tm.boxStartIndex:Hr.collisionBoxArray.length,xz=tm?tm.boxEndIndex:Hr.collisionBoxArray.length;let Ic=-1;const Hv=(Ns,Au)=>Ns&&Ns.circleDiameter?Math.max(Ns.circleDiameter,Au):Au;Ic=Hv(Nd,Ic),Ic=Hv(em,Ic),Ic=Hv(Qp,Ic),Ic=Hv(tm,Ic);const WA=Ic>-1?1:0;WA&&(Ic*=dz/ja),Hr.glyphOffsetArray.length>=Zp.MAX_GLYPHS&&Nr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ao.sortKey!==void 0&&Hr.addToSortKeyRanges(Hr.symbolInstances.length,ao.sortKey);const wz=NA(as,ao,Pc),[Sz,Cz]=function(Ns,Au){const Od=Ns.length,Mc=Au==null?void 0:Au.values;if((Mc==null?void 0:Mc.length)>0)for(let Fd=0;Fd<Mc.length;Fd+=2){const hh=Mc[Fd+1];Ns.emplaceBack(f.aD[Mc[Fd]],hh[0],hh[1])}return[Od,Ns.length]}(Hr.textAnchorOffsets,wz);Hr.symbolInstances.emplaceBack(ri.x,ri.y,Hh.right>=0?Hh.right:-1,Hh.center>=0?Hh.center:-1,Hh.left>=0?Hh.left:-1,Hh.vertical||-1,$x,jx,GA,pz,mz,gz,yz,vz,_z,bz,xz,Ua,VA,qA,jA,UA,WA,0,fl,Ic,Sz,Cz)}(h,un,pn,c,d,g,fr,h.layers[0],h.collisionBoxArray,o.index,o.sourceLayerIndex,h.index,Fe,[Se,Se,Se,Se],Qt,L,Xe,Qe,jt,se,o,x,N,j,w)};if(Vt==="line")for(const pn of TA(o.geometry,0,0,ne,ne)){const un=Dd(pn,qt),Hr=az(un,re,Rt,c.vertical||fe,d,24,dt,h.overscaling,ne);for(const ri of Hr)fe&&hz(h,fe.text,cr,ri)||zr(un,ri)}else if(Vt==="line-center"){for(const pn of o.geometry)if(pn.length>1){const un=Dd(pn,qt),Hr=oz(un,Rt,c.vertical||fe,d,24,dt);Hr&&zr(un,Hr)}}else if(o.type==="Polygon")for(const pn of Oa(o.geometry,0)){const un=lz(pn,16);zr(Dd(pn[0],qt,!0),new Nf(un.x,un.y,0))}else if(o.type==="LineString")for(const pn of o.geometry){const un=Dd(pn,qt);zr(un,new Nf(un[0].x,un[0].y,0))}else if(o.type==="Point")for(const pn of o.geometry)for(const un of pn)zr([un],new Nf(un.x,un.y,0))}function OA(h,o,c,d,g,x,w,A,L,N,j,H,te,ie,se){const fe=function(dt,Xe,re,Se,Qe,Rt,Qt,jt){const Vt=Se.layout.get("text-rotate").evaluate(Rt,{})*Math.PI/180,cr=[];for(const tr of Xe.positionedLines)for(const fr of tr.positionedGlyphs){if(!fr.rect)continue;const qt=fr.rect||{};let zr=4,pn=!0,un=1,Hr=0;const ri=(Qe||jt)&&fr.vertical,Lo=fr.metrics.advance*fr.scale/2;if(jt&&Xe.verticalizable&&(Hr=tr.lineOffset/2-(fr.imageName?-(ja-fr.metrics.width*fr.scale)/2:(fr.scale-1)*ja)),fr.imageName){const qa=Qt[fr.imageName];pn=qa.sdf,un=qa.pixelRatio,zr=1/un}const Ta=Qe?[fr.x+Lo,fr.y]:[0,0];let ws=Qe?[0,0]:[fr.x+Lo+re[0],fr.y+re[1]-Hr],Eu=[0,0];ri&&(Eu=ws,ws=[0,0]);const Dl=fr.metrics.isDoubleResolution?2:1,as=(fr.metrics.left-zr)*fr.scale-Lo+ws[0],So=(-fr.metrics.top-zr)*fr.scale+ws[1],Ua=as+qt.w/Dl*fr.scale/un,ss=So+qt.h/Dl*fr.scale/un,ls=new F(as,So),fl=new F(Ua,So),Tu=new F(as,ss),Va=new F(Ua,ss);if(ri){const qa=new F(-Lo,Lo- -17),Ga=-Math.PI/2,pa=12-Lo,ao=new F(22-pa,-(fr.imageName?pa:0)),Ac=new F(...Eu);ls._rotateAround(Ga,qa)._add(ao)._add(Ac),fl._rotateAround(Ga,qa)._add(ao)._add(Ac),Tu._rotateAround(Ga,qa)._add(ao)._add(Ac),Va._rotateAround(Ga,qa)._add(ao)._add(Ac)}if(Vt){const qa=Math.sin(Vt),Ga=Math.cos(Vt),pa=[Ga,-qa,qa,Ga];ls._matMult(pa),fl._matMult(pa),Tu._matMult(pa),Va._matMult(pa)}const Rl=new F(0,0),Aa=new F(0,0);cr.push({tl:ls,tr:fl,bl:Tu,br:Va,tex:qt,writingMode:Xe.writingMode,glyphOffset:Ta,sectionIndex:fr.sectionIndex,isSDF:pn,pixelOffsetTL:Rl,pixelOffsetBR:Aa,minFontScaleX:0,minFontScaleY:0})}return cr}(0,c,A,g,x,w,d,h.allowVerticalPlacement),Te=h.textSizeData;let Fe=null;Te.kind==="source"?(Fe=[Gh*g.layout.get("text-size").evaluate(w,{})],Fe[0]>Df&&Nr(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Te.kind==="composite"&&(Fe=[Gh*ie.compositeTextSizes[0].evaluate(w,{},se),Gh*ie.compositeTextSizes[1].evaluate(w,{},se)],(Fe[0]>Df||Fe[1]>Df)&&Nr(`${h.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),h.addSymbols(h.text,fe,Fe,A,x,w,N,o,L.lineStartIndex,L.lineLength,te,se);for(const dt of j)H[dt]=h.text.placedSymbolArray.length-1;return 4*fe.length}function FA(h){for(const o in h)return h[o];return null}function hz(h,o,c,d){const g=h.compareText;if(o in g){const x=g[o];for(let w=x.length-1;w>=0;w--)if(d.dist(x[w])<c)return!0}else g[o]=[];return g[o].push(d),!1}const BA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Dx{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[c,d]=new Uint8Array(o,0,2);if(c!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=d>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const x=BA[15&d];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[A]=new Uint32Array(o,4,1);return new Dx(A,w,x,o)}constructor(o,c=64,d=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+c,2),65535),this.ArrayType=d,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const x=BA.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,A=o*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-A%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${d}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+A+L,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+A+L),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+A+L,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=c,new Uint32Array(this.data,4,1)[0]=o)}add(o,c){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=o,this.coords[this._pos++]=c,d}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return Rx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,c,d,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:A}=this,L=[0,x.length-1,0],N=[];for(;L.length;){const j=L.pop()||0,H=L.pop()||0,te=L.pop()||0;if(H-te<=A){for(let Te=te;Te<=H;Te++){const Fe=w[2*Te],dt=w[2*Te+1];Fe>=o&&Fe<=d&&dt>=c&&dt<=g&&N.push(x[Te])}continue}const ie=te+H>>1,se=w[2*ie],fe=w[2*ie+1];se>=o&&se<=d&&fe>=c&&fe<=g&&N.push(x[ie]),(j===0?o<=se:c<=fe)&&(L.push(te),L.push(ie-1),L.push(1-j)),(j===0?d>=se:g>=fe)&&(L.push(ie+1),L.push(H),L.push(1-j))}return N}within(o,c,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:x,nodeSize:w}=this,A=[0,g.length-1,0],L=[],N=d*d;for(;A.length;){const j=A.pop()||0,H=A.pop()||0,te=A.pop()||0;if(H-te<=w){for(let Te=te;Te<=H;Te++)$A(x[2*Te],x[2*Te+1],o,c)<=N&&L.push(g[Te]);continue}const ie=te+H>>1,se=x[2*ie],fe=x[2*ie+1];$A(se,fe,o,c)<=N&&L.push(g[ie]),(j===0?o-d<=se:c-d<=fe)&&(A.push(te),A.push(ie-1),A.push(1-j)),(j===0?o+d>=se:c+d>=fe)&&(A.push(ie+1),A.push(H),A.push(1-j))}return L}}function Rx(h,o,c,d,g,x){if(g-d<=c)return;const w=d+g>>1;zA(h,o,w,d,g,x),Rx(h,o,c,d,w-1,1-x),Rx(h,o,c,w+1,g,1-x)}function zA(h,o,c,d,g,x){for(;g>d;){if(g-d>600){const N=g-d+1,j=c-d+1,H=Math.log(N),te=.5*Math.exp(2*H/3),ie=.5*Math.sqrt(H*te*(N-te)/N)*(j-N/2<0?-1:1);zA(h,o,c,Math.max(d,Math.floor(c-j*te/N+ie)),Math.min(g,Math.floor(c+(N-j)*te/N+ie)),x)}const w=o[2*c+x];let A=d,L=g;for(p0(h,o,d,c),o[2*g+x]>w&&p0(h,o,d,g);A<L;){for(p0(h,o,A,L),A++,L--;o[2*A+x]<w;)A++;for(;o[2*L+x]>w;)L--}o[2*d+x]===w?p0(h,o,d,L):(L++,p0(h,o,L,g)),L<=c&&(d=L+1),c<=L&&(g=L-1)}}function p0(h,o,c,d){Nx(h,c,d),Nx(o,2*c,2*d),Nx(o,2*c+1,2*d+1)}function Nx(h,o,c){const d=h[o];h[o]=h[c],h[c]=d}function $A(h,o,c,d){const g=h-c,x=o-d;return g*g+x*x}var Ox;f.cw=void 0,(Ox=f.cw||(f.cw={})).create="create",Ox.load="load",Ox.fullLoad="fullLoad";let Gv=null,m0=[];const Fx=1e3/60,Bx="loadTime",zx="fullLoadTime",fz={mark(h){performance.mark(h)},frame(h){const o=h;Gv!=null&&m0.push(o-Gv),Gv=o},clearMetrics(){Gv=null,m0=[],performance.clearMeasures(Bx),performance.clearMeasures(zx);for(const h in f.cw)performance.clearMarks(f.cw[h])},getPerformanceMetrics(){performance.measure(Bx,f.cw.create,f.cw.load),performance.measure(zx,f.cw.create,f.cw.fullLoad);const h=performance.getEntriesByName(Bx)[0].duration,o=performance.getEntriesByName(zx)[0].duration,c=m0.length,d=1/(m0.reduce((x,w)=>x+w,0)/c/1e3),g=m0.filter(x=>x>Fx).reduce((x,w)=>x+(w-Fx)/Fx,0);return{loadTime:h,fullLoadTime:o,fps:d,percentDroppedFrames:g/(c+g)*100,totalFrames:c}}};f.$=ne,f.A=de,f.B=function([h,o,c]){return o+=90,o*=Math.PI/180,c*=Math.PI/180,{x:h*Math.cos(o)*Math.sin(c),y:h*Math.sin(o)*Math.sin(c),z:h*Math.cos(c)}},f.C=fi,f.D=sr,f.E=Ft,f.F=Gr,f.G=ce,f.H=function(h){if(Er==null){const o=h.navigator?h.navigator.userAgent:null;Er=!!h.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Er},f.I=bx,f.J=class{constructor(h,o){this.target=h,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new rz(()=>this.process()),this.subscription=Jr(this.target,"message",c=>this.receive(c),!1),this.globalScope=Ht(self)?h:window}registerMessageHandler(h,o){this.messageHandlers[h]=o}sendAsync(h,o){return new Promise((c,d)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=o?Jr(o.signal,"abort",()=>{x==null||x.unsubscribe(),delete this.resolveRejects[g];const L={id:g,type:"<cancel>",origin:location.origin,targetMapId:h.targetMapId,sourceMapId:this.mapId};this.target.postMessage(L)},nz):null;this.resolveRejects[g]={resolve:L=>{x==null||x.unsubscribe(),c(L)},reject:L=>{x==null||x.unsubscribe(),d(L)}};const w=[],A=Object.assign(Object.assign({},h),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Pt(h.data,w)});this.target.postMessage(A,{transfer:w})})}receive(h){const o=h.data,c=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[c];const d=this.abortControllers[c];return delete this.abortControllers[c],void(d&&d.abort())}if(Ht(self)||o.mustQueue)return this.tasks[c]=o,this.taskQueue.push(c),void this.invoker.trigger();this.processTask(c,o)}}process(){if(this.taskQueue.length===0)return;const h=this.taskQueue.shift(),o=this.tasks[h];delete this.tasks[h],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(h,o)}processTask(h,o){return a(this,void 0,void 0,function*(){if(o.type==="<response>"){const g=this.resolveRejects[h];return delete this.resolveRejects[h],g?void(o.error?g.reject(Gt(o.error)):g.resolve(Gt(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(h,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const c=Gt(o.data),d=new AbortController;this.abortControllers[h]=d;try{const g=yield this.messageHandlers[o.type](o.sourceMapId,c,d);this.completeTask(h,null,g)}catch(g){this.completeTask(h,g)}})}completeTask(h,o,c){const d=[];delete this.abortControllers[h];const g={id:h,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Pt(o):null,data:Pt(c,d)};this.target.postMessage(g,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},f.K=ye,f.L=function(){var h=new de(16);return de!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h},f.M=function(h,o,c){var d,g,x,w,A,L,N,j,H,te,ie,se,fe=c[0],Te=c[1],Fe=c[2];return o===h?(h[12]=o[0]*fe+o[4]*Te+o[8]*Fe+o[12],h[13]=o[1]*fe+o[5]*Te+o[9]*Fe+o[13],h[14]=o[2]*fe+o[6]*Te+o[10]*Fe+o[14],h[15]=o[3]*fe+o[7]*Te+o[11]*Fe+o[15]):(g=o[1],x=o[2],w=o[3],A=o[4],L=o[5],N=o[6],j=o[7],H=o[8],te=o[9],ie=o[10],se=o[11],h[0]=d=o[0],h[1]=g,h[2]=x,h[3]=w,h[4]=A,h[5]=L,h[6]=N,h[7]=j,h[8]=H,h[9]=te,h[10]=ie,h[11]=se,h[12]=d*fe+A*Te+H*Fe+o[12],h[13]=g*fe+L*Te+te*Fe+o[13],h[14]=x*fe+N*Te+ie*Fe+o[14],h[15]=w*fe+j*Te+se*Fe+o[15]),h},f.N=function(h,o,c){var d=c[0],g=c[1],x=c[2];return h[0]=o[0]*d,h[1]=o[1]*d,h[2]=o[2]*d,h[3]=o[3]*d,h[4]=o[4]*g,h[5]=o[5]*g,h[6]=o[6]*g,h[7]=o[7]*g,h[8]=o[8]*x,h[9]=o[9]*x,h[10]=o[10]*x,h[11]=o[11]*x,h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},f.O=function(h,o,c){var d=o[0],g=o[1],x=o[2],w=o[3],A=o[4],L=o[5],N=o[6],j=o[7],H=o[8],te=o[9],ie=o[10],se=o[11],fe=o[12],Te=o[13],Fe=o[14],dt=o[15],Xe=c[0],re=c[1],Se=c[2],Qe=c[3];return h[0]=Xe*d+re*A+Se*H+Qe*fe,h[1]=Xe*g+re*L+Se*te+Qe*Te,h[2]=Xe*x+re*N+Se*ie+Qe*Fe,h[3]=Xe*w+re*j+Se*se+Qe*dt,h[4]=(Xe=c[4])*d+(re=c[5])*A+(Se=c[6])*H+(Qe=c[7])*fe,h[5]=Xe*g+re*L+Se*te+Qe*Te,h[6]=Xe*x+re*N+Se*ie+Qe*Fe,h[7]=Xe*w+re*j+Se*se+Qe*dt,h[8]=(Xe=c[8])*d+(re=c[9])*A+(Se=c[10])*H+(Qe=c[11])*fe,h[9]=Xe*g+re*L+Se*te+Qe*Te,h[10]=Xe*x+re*N+Se*ie+Qe*Fe,h[11]=Xe*w+re*j+Se*se+Qe*dt,h[12]=(Xe=c[12])*d+(re=c[13])*A+(Se=c[14])*H+(Qe=c[15])*fe,h[13]=Xe*g+re*L+Se*te+Qe*Te,h[14]=Xe*x+re*N+Se*ie+Qe*Fe,h[15]=Xe*w+re*j+Se*se+Qe*dt,h},f.P=F,f.Q=function(h,o){const c={};for(let d=0;d<o.length;d++){const g=o[d];g in h&&(c[g]=h[g])}return c},f.R=Ll,f.S=Rf,f.T=ox,f.U=yA,f.V=gA,f.W=Q,f.X=K,f.Y=qr,f.Z=Cu,f._=a,f.a=ae,f.a$=function(h,o,c){return h[0]=o[0]*c,h[1]=o[1]*c,h[2]=o[2]*c,h[3]=o[3]*c,h},f.a0=d0,f.a1=Rd,f.a2=25,f.a3=Mx,f.a4=h=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(c=>{o.onloadstart=()=>{c(o)};for(const d of h){const g=window.document.createElement("source");ht(d)||(o.crossOrigin="Anonymous"),g.src=d,o.appendChild(g)}})},f.a5=nr,f.a6=function(){return gr++},f.a7=Ie,f.a8=Zp,f.a9=sl,f.aA=ja,f.aB=Ee,f.aC=function(h,o,c,d,g=!1){if(!c[0]&&!c[1])return[0,0];const x=g?d==="map"?-h.bearingInRadians:0:d==="viewport"?h.bearingInRadians:0;if(x){const w=Math.sin(x),A=Math.cos(x);c=[c[0]*A-c[1]*w,c[0]*w+c[1]*A]}return[g?c[0]:Ee(o,c[0],h.zoom),g?c[1]:Ee(o,c[1],h.zoom)]},f.aE=Sx,f.aF=Lx,f.aG=wx,f.aH=Dx,f.aI=ei,f.aJ=Rv,f.aK=Mt,f.aL=Xn,f.aM=hi,f.aN=Ct,f.aO=en,f.aP=_A,f.aQ=Ae,f.aR=G,f.aS=function(h){var o=new de(3);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o},f.aT=function(h,o,c){return h[0]=o[0]-c[0],h[1]=o[1]-c[1],h[2]=o[2]-c[2],h},f.aU=function(h,o){var c=o[0],d=o[1],g=o[2],x=c*c+d*d+g*g;return x>0&&(x=1/Math.sqrt(x)),h[0]=o[0]*x,h[1]=o[1]*x,h[2]=o[2]*x,h},f.aV=we,f.aW=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]},f.aX=function(h,o,c){return h[0]=o[0]*c[0],h[1]=o[1]*c[1],h[2]=o[2]*c[2],h[3]=o[3]*c[3],h},f.aY=Re,f.aZ=function(h,o,c){const d=o[0]*c[0]+o[1]*c[1]+o[2]*c[2];return d===0?null:(-(h[0]*c[0]+h[1]*c[1]+h[2]*c[2])-c[3])/d},f.a_=pt,f.aa=kd,f.ab=SA,f.ac=function(h){const o={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(c,d,g,x)=>{const w=g||x;return o[d]=!w||w.toLowerCase(),""}),o["max-age"]){const c=parseInt(o["max-age"],10);isNaN(c)?delete o["max-age"]:o["max-age"]=c}return o},f.ad=An,f.ae=function(h){return Math.pow(2,h)},f.af=me,f.ag=ft,f.ah=85.051129,f.ai=vA,f.aj=function(h){return Math.log(h)/Math.LN2},f.ak=function(h){var o=h[0],c=h[1];return o*o+c*c},f.al=function(h,o){const c=[];for(const d in h)d in o||c.push(d);return c},f.am=function(h,o){let c=0,d=0;if(h.kind==="constant")d=h.layoutSize;else if(h.kind!=="source"){const{interpolationType:g,minZoom:x,maxZoom:w}=h,A=g?ft(_n.interpolationFactor(g,o,x,w),0,1):0;h.kind==="camera"?d=fi.number(h.minSize,h.maxSize,A):c=A}return{uSizeT:c,uSize:d}},f.ao=function(h,{uSize:o,uSizeT:c},{lowerSize:d,upperSize:g}){return h.kind==="source"?d/Gh:h.kind==="composite"?fi.number(d/Gh,g/Gh,c):o},f.ap=function(h,o){var c=o[0],d=o[1],g=o[2],x=o[3],w=o[4],A=o[5],L=o[6],N=o[7],j=o[8],H=o[9],te=o[10],ie=o[11],se=o[12],fe=o[13],Te=o[14],Fe=o[15],dt=c*A-d*w,Xe=c*L-g*w,re=c*N-x*w,Se=d*L-g*A,Qe=d*N-x*A,Rt=g*N-x*L,Qt=j*fe-H*se,jt=j*Te-te*se,Vt=j*Fe-ie*se,cr=H*Te-te*fe,tr=H*Fe-ie*fe,fr=te*Fe-ie*Te,qt=dt*fr-Xe*tr+re*cr+Se*Vt-Qe*jt+Rt*Qt;return qt?(h[0]=(A*fr-L*tr+N*cr)*(qt=1/qt),h[1]=(g*tr-d*fr-x*cr)*qt,h[2]=(fe*Rt-Te*Qe+Fe*Se)*qt,h[3]=(te*Qe-H*Rt-ie*Se)*qt,h[4]=(L*Vt-w*fr-N*jt)*qt,h[5]=(c*fr-g*Vt+x*jt)*qt,h[6]=(Te*re-se*Rt-Fe*Xe)*qt,h[7]=(j*Rt-te*re+ie*Xe)*qt,h[8]=(w*tr-A*Vt+N*Qt)*qt,h[9]=(d*Vt-c*tr-x*Qt)*qt,h[10]=(se*Qe-fe*re+Fe*dt)*qt,h[11]=(H*re-j*Qe-ie*dt)*qt,h[12]=(A*jt-w*cr-L*Qt)*qt,h[13]=(c*cr-d*jt+g*Qt)*qt,h[14]=(fe*Xe-se*Se-Te*dt)*qt,h[15]=(j*Se-H*Xe+te*dt)*qt,h):null},f.aq=Ot,f.ar=function(h){return Math.hypot(h[0],h[1])},f.as=function(h){return h[0]=0,h[1]=0,h},f.at=function(h,o,c){return h[0]=o[0]*c,h[1]=o[1]*c,h},f.au=Cx,f.av=At,f.aw=function(h,o,c,d){const g=o.y-h.y,x=o.x-h.x,w=d.y-c.y,A=d.x-c.x,L=w*x-A*g;if(L===0)return null;const N=(A*(h.y-c.y)-w*(h.x-c.x))/L;return new F(h.x+N*x,h.y+N*g)},f.ax=TA,f.ay=cT,f.az=function(h){let o=1/0,c=1/0,d=-1/0,g=-1/0;for(const x of h)o=Math.min(o,x.x),c=Math.min(c,x.y),d=Math.max(d,x.x),g=Math.max(g,x.y);return[o,c,d,g]},f.b=vr,f.b$=DB,f.b0=function(h,o){return h[0]*o[0]+h[1]*o[1]+h[2]*o[2]+h[3]},f.b1=xA,f.b2=Xp,f.b3=function(h,o,c,d,g){var x,w=1/Math.tan(o/2);return h[0]=w/c,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=w,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,g!=null&&g!==1/0?(h[10]=(g+d)*(x=1/(d-g)),h[14]=2*g*d*x):(h[10]=-1,h[14]=-2*d),h},f.b4=function(h){var o=new de(16);return o[0]=h[0],o[1]=h[1],o[2]=h[2],o[3]=h[3],o[4]=h[4],o[5]=h[5],o[6]=h[6],o[7]=h[7],o[8]=h[8],o[9]=h[9],o[10]=h[10],o[11]=h[11],o[12]=h[12],o[13]=h[13],o[14]=h[14],o[15]=h[15],o},f.b5=function(h,o,c){var d=Math.sin(c),g=Math.cos(c),x=o[0],w=o[1],A=o[2],L=o[3],N=o[4],j=o[5],H=o[6],te=o[7];return o!==h&&(h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=x*g+N*d,h[1]=w*g+j*d,h[2]=A*g+H*d,h[3]=L*g+te*d,h[4]=N*g-x*d,h[5]=j*g-w*d,h[6]=H*g-A*d,h[7]=te*g-L*d,h},f.b6=function(h,o,c){var d=Math.sin(c),g=Math.cos(c),x=o[4],w=o[5],A=o[6],L=o[7],N=o[8],j=o[9],H=o[10],te=o[11];return o!==h&&(h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[4]=x*g+N*d,h[5]=w*g+j*d,h[6]=A*g+H*d,h[7]=L*g+te*d,h[8]=N*g-x*d,h[9]=j*g-w*d,h[10]=H*g-A*d,h[11]=te*g-L*d,h},f.b7=function(){const h=new Float32Array(16);return me(h),h},f.b8=function(){const h=new Float64Array(16);return me(h),h},f.b9=function(){return new Float64Array(16)},f.bA=function(h){return h[0]=0,h[1]=0,h[2]=0,h},f.bB=function(h,o,c,d){const g=Math.sqrt(h*h+o*o),x=Math.sqrt(c*c+d*d);h/=g,o/=g,c/=x,d/=x;const w=Math.acos(h*c+o*d);return-o*c+h*d>0?w:-w},f.bC=function(h,o){const c=Ne(h,2*Math.PI),d=Ne(o,2*Math.PI);return Math.min(Math.abs(c-d),Math.abs(c-d+2*Math.PI),Math.abs(c-d-2*Math.PI))},f.bD=function(){const h={},o=it.$version;for(const c in it.$root){const d=it.$root[c];if(d.required){let g=null;g=c==="version"?o:d.type==="array"?[]:{},g!=null&&(h[c]=g)}}return h},f.bE=Bt,f.bF=Ve,f.bG=function h(o,c){if(Array.isArray(o)){if(!Array.isArray(c)||o.length!==c.length)return!1;for(let d=0;d<o.length;d++)if(!h(o[d],c[d]))return!1;return!0}if(typeof o=="object"&&o!==null&&c!==null){if(typeof c!="object"||Object.keys(o).length!==Object.keys(c).length)return!1;for(const d in o)if(!h(o[d],c[d]))return!1;return!0}return o===c},f.bH=function(h){h=h.slice();const o=Object.create(null);for(let c=0;c<h.length;c++)o[h[c].id]=h[c];for(let c=0;c<h.length;c++)"ref"in h[c]&&(h[c]=Xr(h[c],o[h[c].ref]));return h},f.bI=function(h){if(h.type==="custom")return new tz(h);switch(h.type){case"background":return new JB(h);case"circle":return new HF(h);case"color-relief":return new JF(h);case"fill":return new dB(h);case"fill-extrusion":return new xB(h);case"heatmap":return new ZF(h);case"hillshade":return new YF(h);case"line":return new IB(h);case"raster":return new ez(h);case"symbol":return new $v(h)}},f.bJ=Ue,f.bK=function(h,o){if(!h)return[{command:"setStyle",args:[o]}];let c=[];try{if(!wr(h.version,o.version))return[{command:"setStyle",args:[o]}];wr(h.center,o.center)||c.push({command:"setCenter",args:[o.center]}),wr(h.state,o.state)||c.push({command:"setGlobalState",args:[o.state]}),wr(h.centerAltitude,o.centerAltitude)||c.push({command:"setCenterAltitude",args:[o.centerAltitude]}),wr(h.zoom,o.zoom)||c.push({command:"setZoom",args:[o.zoom]}),wr(h.bearing,o.bearing)||c.push({command:"setBearing",args:[o.bearing]}),wr(h.pitch,o.pitch)||c.push({command:"setPitch",args:[o.pitch]}),wr(h.roll,o.roll)||c.push({command:"setRoll",args:[o.roll]}),wr(h.sprite,o.sprite)||c.push({command:"setSprite",args:[o.sprite]}),wr(h.glyphs,o.glyphs)||c.push({command:"setGlyphs",args:[o.glyphs]}),wr(h.transition,o.transition)||c.push({command:"setTransition",args:[o.transition]}),wr(h.light,o.light)||c.push({command:"setLight",args:[o.light]}),wr(h.terrain,o.terrain)||c.push({command:"setTerrain",args:[o.terrain]}),wr(h.sky,o.sky)||c.push({command:"setSky",args:[o.sky]}),wr(h.projection,o.projection)||c.push({command:"setProjection",args:[o.projection]});const d={},g=[];(function(w,A,L,N){let j;for(j in A=A||{},w=w||{})Object.prototype.hasOwnProperty.call(w,j)&&(Object.prototype.hasOwnProperty.call(A,j)||Hn(j,L,N));for(j in A)Object.prototype.hasOwnProperty.call(A,j)&&(Object.prototype.hasOwnProperty.call(w,j)?wr(w[j],A[j])||(w[j].type==="geojson"&&A[j].type==="geojson"&&hn(w,A,j)?er(L,{command:"setGeoJSONSourceData",args:[j,A[j].data]}):Dn(j,A,L,N)):nn(j,A,L))})(h.sources,o.sources,g,d);const x=[];h.layers&&h.layers.forEach(w=>{"source"in w&&d[w.source]?c.push({command:"removeLayer",args:[w.id]}):x.push(w)}),c=c.concat(g),function(w,A,L){A=A||[];const N=(w=w||[]).map(fn),j=A.map(fn),H=w.reduce(qn,{}),te=A.reduce(qn,{}),ie=N.slice(),se=Object.create(null);let fe,Te,Fe,dt,Xe;for(let re=0,Se=0;re<N.length;re++)fe=N[re],Object.prototype.hasOwnProperty.call(te,fe)?Se++:(er(L,{command:"removeLayer",args:[fe]}),ie.splice(ie.indexOf(fe,Se),1));for(let re=0,Se=0;re<j.length;re++)fe=j[j.length-1-re],ie[ie.length-1-re]!==fe&&(Object.prototype.hasOwnProperty.call(H,fe)?(er(L,{command:"removeLayer",args:[fe]}),ie.splice(ie.lastIndexOf(fe,ie.length-Se),1)):Se++,dt=ie[ie.length-re],er(L,{command:"addLayer",args:[te[fe],dt]}),ie.splice(ie.length-re,0,fe),se[fe]=!0);for(let re=0;re<j.length;re++)if(fe=j[re],Te=H[fe],Fe=te[fe],!se[fe]&&!wr(Te,Fe))if(wr(Te.source,Fe.source)&&wr(Te["source-layer"],Fe["source-layer"])&&wr(Te.type,Fe.type)){for(Xe in Dr(Te.layout,Fe.layout,L,fe,null,"setLayoutProperty"),Dr(Te.paint,Fe.paint,L,fe,null,"setPaintProperty"),wr(Te.filter,Fe.filter)||er(L,{command:"setFilter",args:[fe,Fe.filter]}),wr(Te.minzoom,Fe.minzoom)&&wr(Te.maxzoom,Fe.maxzoom)||er(L,{command:"setLayerZoomRange",args:[fe,Fe.minzoom,Fe.maxzoom]}),Te)Object.prototype.hasOwnProperty.call(Te,Xe)&&Xe!=="layout"&&Xe!=="paint"&&Xe!=="filter"&&Xe!=="metadata"&&Xe!=="minzoom"&&Xe!=="maxzoom"&&(Xe.indexOf("paint.")===0?Dr(Te[Xe],Fe[Xe],L,fe,Xe.slice(6),"setPaintProperty"):wr(Te[Xe],Fe[Xe])||er(L,{command:"setLayerProperty",args:[fe,Xe,Fe[Xe]]}));for(Xe in Fe)Object.prototype.hasOwnProperty.call(Fe,Xe)&&!Object.prototype.hasOwnProperty.call(Te,Xe)&&Xe!=="layout"&&Xe!=="paint"&&Xe!=="filter"&&Xe!=="metadata"&&Xe!=="minzoom"&&Xe!=="maxzoom"&&(Xe.indexOf("paint.")===0?Dr(Te[Xe],Fe[Xe],L,fe,Xe.slice(6),"setPaintProperty"):wr(Te[Xe],Fe[Xe])||er(L,{command:"setLayerProperty",args:[fe,Xe,Fe[Xe]]}))}else er(L,{command:"removeLayer",args:[fe]}),dt=ie[ie.lastIndexOf(fe)+1],er(L,{command:"addLayer",args:[Fe,dt]})}(x,o.layers,c)}catch(d){console.warn("Unable to compute style diff:",d),c=[{command:"setStyle",args:[o]}]}return c},f.bL=function(h){const o=[],c=h.id;return c===void 0&&o.push({message:`layers.${c}: missing required property "id"`}),h.render===void 0&&o.push({message:`layers.${c}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&o.push({message:`layers.${c}: property "renderingMode" must be either "2d" or "3d"`}),o},f.bM=rr,f.bN=It,f.bO=class extends oo{constructor(h,o){super(h,o),this.current=0}set(h){this.current!==h&&(this.current=h,this.gl.uniform1i(this.location,h))}},f.bP=Iv,f.bQ=class extends oo{constructor(h,o){super(h,o),this.current=Jb}set(h){if(h[12]!==this.current[12]||h[0]!==this.current[0])return this.current=h,void this.gl.uniformMatrix4fv(this.location,!1,h);for(let o=1;o<16;o++)if(h[o]!==this.current[o]){this.current=h,this.gl.uniformMatrix4fv(this.location,!1,h);break}}},f.bR=Ea,f.bS=class extends oo{constructor(h,o){super(h,o),this.current=[0,0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]||(this.current=h,this.gl.uniform3f(this.location,h[0],h[1],h[2]))}},f.bT=class extends oo{constructor(h,o){super(h,o),this.current=[0,0]}set(h){h[0]===this.current[0]&&h[1]===this.current[1]||(this.current=h,this.gl.uniform2f(this.location,h[0],h[1]))}},f.bU=be,f.bV=function(h,o){var c=Math.sin(o),d=Math.cos(o);return h[0]=d,h[1]=c,h[2]=0,h[3]=-c,h[4]=d,h[5]=0,h[6]=0,h[7]=0,h[8]=1,h},f.bW=function(h,o,c){var d=o[0],g=o[1],x=o[2];return h[0]=d*c[0]+g*c[3]+x*c[6],h[1]=d*c[1]+g*c[4]+x*c[7],h[2]=d*c[2]+g*c[5]+x*c[8],h},f.bX=function(h,o,c,d,g,x,w){var A=1/(o-c),L=1/(d-g),N=1/(x-w);return h[0]=-2*A,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*L,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*N,h[11]=0,h[12]=(o+c)*A,h[13]=(g+d)*L,h[14]=(w+x)*N,h[15]=1,h},f.bY=class extends oo{constructor(h,o){super(h,o),this.current=new Array}set(h){if(h!=this.current){this.current=h;const o=new Float32Array(4*h.length);for(let c=0;c<h.length;c++)o[4*c]=h[c].r,o[4*c+1]=h[c].g,o[4*c+2]=h[c].b,o[4*c+3]=h[c].a;this.gl.uniform4fv(this.location,o)}}},f.bZ=class extends oo{constructor(h,o){super(h,o),this.current=new Array}set(h){if(h!=this.current){this.current=h;const o=new Float32Array(h);this.gl.uniform1fv(this.location,o)}}},f.b_=class extends p{},f.ba=function(h,o,c){const d=new Float64Array(4);return tt(d,h,o-90,c),d},f.bb=function(h,o,c,d){var g,x,w,A,L,N=o[0],j=o[1],H=o[2],te=o[3],ie=c[0],se=c[1],fe=c[2],Te=c[3];return(x=N*ie+j*se+H*fe+te*Te)<0&&(x=-x,ie=-ie,se=-se,fe=-fe,Te=-Te),1-x>xe?(g=Math.acos(x),w=Math.sin(g),A=Math.sin((1-d)*g)/w,L=Math.sin(d*g)/w):(A=1-d,L=d),h[0]=A*N+L*ie,h[1]=A*j+L*se,h[2]=A*H+L*fe,h[3]=A*te+L*Te,h},f.bc=function(h){const o=new Float64Array(9);var c,d,g,x,w,A,L,N,j,H,te,ie,se,fe,Te,Fe,dt,Xe;H=(g=(d=h)[0])*(L=g+g),te=(x=d[1])*L,se=(w=d[2])*L,fe=w*(N=x+x),Fe=(A=d[3])*L,dt=A*N,Xe=A*(j=w+w),(c=o)[0]=1-(ie=x*N)-(Te=w*j),c[3]=te-Xe,c[6]=se+dt,c[1]=te+Xe,c[4]=1-H-Te,c[7]=fe-Fe,c[2]=se-dt,c[5]=fe+Fe,c[8]=1-H-ie;const re=en(-Math.asin(ft(o[2],-1,1)));let Se,Qe;return Math.hypot(o[5],o[8])<.001?(Se=0,Qe=-en(Math.atan2(o[3],o[4]))):(Se=en(o[5]===0&&o[8]===0?0:Math.atan2(o[5],o[8])),Qe=en(o[1]===0&&o[0]===0?0:Math.atan2(o[1],o[0]))),{roll:Se,pitch:re+90,bearing:Qe}},f.bd=function(h,o){return h.roll==o.roll&&h.pitch==o.pitch&&h.bearing==o.bearing},f.be=jr,f.bf=Rs,f.bg=Hp,f.bh=a0,f.bi=Gp,f.bj=qe,f.bk=Je,f.bl=vn,f.bm=function(h,o,c,d,g){return qe(d,g,ft((h-o)/(c-o),0,1))},f.bn=Ne,f.bo=function(){return new Float64Array(3)},f.bp=function(h,o,c,d){return h[0]=o[0]+c[0]*d,h[1]=o[1]+c[1]*d,h[2]=o[2]+c[2]*d,h},f.bq=tt,f.br=function(h,o,c){var d=c[0],g=c[1],x=c[2],w=o[0],A=o[1],L=o[2],N=g*L-x*A,j=x*w-d*L,H=d*A-g*w,te=g*H-x*j,ie=x*N-d*H,se=d*j-g*N,fe=2*c[3];return j*=fe,H*=fe,ie*=2,se*=2,h[0]=w+(N*=fe)+(te*=2),h[1]=A+j+ie,h[2]=L+H+se,h},f.bs=function(h,o,c){const d=(g=[h[0],h[1],h[2],o[0],o[1],o[2],c[0],c[1],c[2]])[0]*((j=g[8])*(w=g[4])-(A=g[5])*(N=g[7]))+g[1]*(-j*(x=g[3])+A*(L=g[6]))+g[2]*(N*x-w*L);var g,x,w,A,L,N,j;if(d===0)return null;const H=we([],[o[0],o[1],o[2]],[c[0],c[1],c[2]]),te=we([],[c[0],c[1],c[2]],[h[0],h[1],h[2]]),ie=we([],[h[0],h[1],h[2]],[o[0],o[1],o[2]]),se=Ae([],H,-h[3]);return G(se,se,Ae([],te,-o[3])),G(se,se,Ae([],ie,-c[3])),Ae(se,se,1/d),se},f.bt=Px,f.bu=function(){return new Float64Array(4)},f.bv=function(h,o,c,d){var g=[],x=[];return g[0]=o[0]-c[0],g[1]=o[1]-c[1],g[2]=o[2]-c[2],x[0]=g[0]*Math.cos(d)-g[1]*Math.sin(d),x[1]=g[0]*Math.sin(d)+g[1]*Math.cos(d),x[2]=g[2],h[0]=x[0]+c[0],h[1]=x[1]+c[1],h[2]=x[2]+c[2],h},f.bw=function(h,o,c,d){var g=[],x=[];return g[0]=o[0]-c[0],g[1]=o[1]-c[1],g[2]=o[2]-c[2],x[0]=g[0],x[1]=g[1]*Math.cos(d)-g[2]*Math.sin(d),x[2]=g[1]*Math.sin(d)+g[2]*Math.cos(d),h[0]=x[0]+c[0],h[1]=x[1]+c[1],h[2]=x[2]+c[2],h},f.bx=function(h,o,c,d){var g=[],x=[];return g[0]=o[0]-c[0],g[1]=o[1]-c[1],g[2]=o[2]-c[2],x[0]=g[2]*Math.sin(d)+g[0]*Math.cos(d),x[1]=g[1],x[2]=g[2]*Math.cos(d)-g[0]*Math.sin(d),h[0]=x[0]+c[0],h[1]=x[1]+c[1],h[2]=x[2]+c[2],h},f.by=function(h,o,c){var d=Math.sin(c),g=Math.cos(c),x=o[0],w=o[1],A=o[2],L=o[3],N=o[8],j=o[9],H=o[10],te=o[11];return o!==h&&(h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15]),h[0]=x*g-N*d,h[1]=w*g-j*d,h[2]=A*g-H*d,h[3]=L*g-te*d,h[8]=x*d+N*g,h[9]=w*d+j*g,h[10]=A*d+H*g,h[11]=L*d+te*g,h},f.bz=function(h,o){const c=Ne(h,360),d=Ne(o,360),g=d-c,x=d>c?g-360:g+360;return Math.abs(g)<Math.abs(x)?g:x},f.c=ot,f.c0=class extends b{},f.c1=ix,f.c2=function(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))},f.c3=bT,f.c4=function(h,o,c){var d=o[0],g=o[1],x=o[2],w=c[3]*d+c[7]*g+c[11]*x+c[15];return h[0]=(c[0]*d+c[4]*g+c[8]*x+c[12])/(w=w||1),h[1]=(c[1]*d+c[5]*g+c[9]*x+c[13])/w,h[2]=(c[2]*d+c[6]*g+c[10]*x+c[14])/w,h},f.c5=class extends ns{},f.c6=class extends Z{},f.c7=function(h,o){return h[0]===o[0]&&h[1]===o[1]&&h[2]===o[2]&&h[3]===o[3]&&h[4]===o[4]&&h[5]===o[5]&&h[6]===o[6]&&h[7]===o[7]&&h[8]===o[8]&&h[9]===o[9]&&h[10]===o[10]&&h[11]===o[11]&&h[12]===o[12]&&h[13]===o[13]&&h[14]===o[14]&&h[15]===o[15]},f.c8=function(h,o){var c=h[0],d=h[1],g=h[2],x=h[3],w=h[4],A=h[5],L=h[6],N=h[7],j=h[8],H=h[9],te=h[10],ie=h[11],se=h[12],fe=h[13],Te=h[14],Fe=h[15],dt=o[0],Xe=o[1],re=o[2],Se=o[3],Qe=o[4],Rt=o[5],Qt=o[6],jt=o[7],Vt=o[8],cr=o[9],tr=o[10],fr=o[11],qt=o[12],zr=o[13],pn=o[14],un=o[15];return Math.abs(c-dt)<=xe*Math.max(1,Math.abs(c),Math.abs(dt))&&Math.abs(d-Xe)<=xe*Math.max(1,Math.abs(d),Math.abs(Xe))&&Math.abs(g-re)<=xe*Math.max(1,Math.abs(g),Math.abs(re))&&Math.abs(x-Se)<=xe*Math.max(1,Math.abs(x),Math.abs(Se))&&Math.abs(w-Qe)<=xe*Math.max(1,Math.abs(w),Math.abs(Qe))&&Math.abs(A-Rt)<=xe*Math.max(1,Math.abs(A),Math.abs(Rt))&&Math.abs(L-Qt)<=xe*Math.max(1,Math.abs(L),Math.abs(Qt))&&Math.abs(N-jt)<=xe*Math.max(1,Math.abs(N),Math.abs(jt))&&Math.abs(j-Vt)<=xe*Math.max(1,Math.abs(j),Math.abs(Vt))&&Math.abs(H-cr)<=xe*Math.max(1,Math.abs(H),Math.abs(cr))&&Math.abs(te-tr)<=xe*Math.max(1,Math.abs(te),Math.abs(tr))&&Math.abs(ie-fr)<=xe*Math.max(1,Math.abs(ie),Math.abs(fr))&&Math.abs(se-qt)<=xe*Math.max(1,Math.abs(se),Math.abs(qt))&&Math.abs(fe-zr)<=xe*Math.max(1,Math.abs(fe),Math.abs(zr))&&Math.abs(Te-pn)<=xe*Math.max(1,Math.abs(Te),Math.abs(pn))&&Math.abs(Fe-un)<=xe*Math.max(1,Math.abs(Fe),Math.abs(un))},f.c9=function(h,o){return h[0]=o[0],h[1]=o[1],h[2]=o[2],h[3]=o[3],h[4]=o[4],h[5]=o[5],h[6]=o[6],h[7]=o[7],h[8]=o[8],h[9]=o[9],h[10]=o[10],h[11]=o[11],h[12]=o[12],h[13]=o[13],h[14]=o[14],h[15]=o[15],h},f.cA=function(h){delete ae.REGISTERED_PROTOCOLS[h]},f.cB=function(h,o){const c={};for(let g=0;g<h.length;g++){const x=o&&o[h[g].id]||_s(h[g]);o&&(o[h[g].id]=x);let w=c[x];w||(w=c[x]=[]),w.push(h[g])}const d=[];for(const g in c)d.push(c[g]);return d},f.cC=$e,f.cD=wA,f.cE=CA,f.cF=eA,f.cG=function(h){h.bucket.createArrays(),h.bucket.tilePixelRatio=ne/(512*h.bucket.overscaling),h.bucket.compareText={},h.bucket.iconsNeedLinear=!1;const o=h.bucket.layers[0],c=o.layout,d=o._unevaluatedLayout._values,g={layoutIconSize:d["icon-size"].possiblyEvaluate(new Gr(h.bucket.zoom+1),h.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Gr(h.bucket.zoom+1),h.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Gr(18))};if(h.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:j}=h.bucket.textSizeData;g.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Gr(N),h.canonical),d["text-size"].possiblyEvaluate(new Gr(j),h.canonical)]}if(h.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:j}=h.bucket.iconSizeData;g.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Gr(N),h.canonical),d["icon-size"].possiblyEvaluate(new Gr(j),h.canonical)]}const x=c.get("text-line-height")*ja,w=c.get("text-rotation-alignment")!=="viewport"&&c.get("symbol-placement")!=="point",A=c.get("text-keep-upright"),L=c.get("text-size");for(const N of h.bucket.features){const j=c.get("text-font").evaluate(N,{},h.canonical).join(","),H=L.evaluate(N,{},h.canonical),te=g.layoutTextSize.evaluate(N,{},h.canonical),ie=g.layoutIconSize.evaluate(N,{},h.canonical),se={horizontal:{},vertical:void 0},fe=N.text;let Te,Fe=[0,0];if(fe){const re=fe.toString(),Se=c.get("text-letter-spacing").evaluate(N,{},h.canonical)*ja,Qe=pr(re)?Se:0,Rt=c.get("text-anchor").evaluate(N,{},h.canonical),Qt=NA(o,N,h.canonical);if(!Qt){const tr=c.get("text-radial-offset").evaluate(N,{},h.canonical);Fe=tr?RA(Rt,[tr*ja,kx]):c.get("text-offset").evaluate(N,{},h.canonical).map(fr=>fr*ja)}let jt=w?"center":c.get("text-justify").evaluate(N,{},h.canonical);const Vt=c.get("symbol-placement")==="point"?c.get("text-max-width").evaluate(N,{},h.canonical)*ja:1/0,cr=()=>{h.bucket.allowVerticalPlacement&&Xt(re)&&(se.vertical=Fv(fe,h.glyphMap,h.glyphPositions,h.imagePositions,j,Vt,x,Rt,"left",Qe,Fe,f.an.vertical,!0,te,H))};if(!w&&Qt){const tr=new Set;if(jt==="auto")for(let qt=0;qt<Qt.values.length;qt+=2)tr.add(Lx(Qt.values[qt]));else tr.add(jt);let fr=!1;for(const qt of tr)if(!se.horizontal[qt])if(fr)se.horizontal[qt]=se.horizontal[0];else{const zr=Fv(fe,h.glyphMap,h.glyphPositions,h.imagePositions,j,Vt,x,"center",qt,Qe,Fe,f.an.horizontal,!1,te,H);zr&&(se.horizontal[qt]=zr,fr=zr.positionedLines.length===1)}cr()}else{jt==="auto"&&(jt=Lx(Rt));const tr=Fv(fe,h.glyphMap,h.glyphPositions,h.imagePositions,j,Vt,x,Rt,jt,Qe,Fe,f.an.horizontal,!1,te,H);tr&&(se.horizontal[jt]=tr),cr(),Xt(re)&&w&&A&&(se.vertical=Fv(fe,h.glyphMap,h.glyphPositions,h.imagePositions,j,Vt,x,Rt,jt,Qe,Fe,f.an.vertical,!1,te,H))}}let dt=!1;if(N.icon&&N.icon.name){const re=h.imageMap[N.icon.name];re&&(Te=WB(h.imagePositions[N.icon.name],c.get("icon-offset").evaluate(N,{},h.canonical),c.get("icon-anchor").evaluate(N,{},h.canonical)),dt=!!re.sdf,h.bucket.sdfIcons===void 0?h.bucket.sdfIcons=dt:h.bucket.sdfIcons!==dt&&Nr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(re.pixelRatio!==h.bucket.pixelRatio||c.get("icon-rotate").constantOr(1)!==0)&&(h.bucket.iconsNeedLinear=!0))}const Xe=FA(se.horizontal)||se.vertical;h.bucket.iconsInText=!!Xe&&Xe.iconsInText,(Xe||Te)&&cz(h.bucket,N,se,Te,h.imageMap,g,te,ie,Fe,dt,h.canonical,h.subdivisionGranularity)}h.showCollisionBoxes&&h.bucket.generateCollisionDebugBuffers()},f.cH=gx,f.cI=cx,f.cJ=mx,f.cK=l0,f.cL=_x,f.cM=class{constructor(h){this._marks={start:[h.url,"start"].join("#"),end:[h.url,"end"].join("#"),measure:h.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let h=performance.getEntriesByName(this._marks.measure);return h.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),h=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),h}},f.cN=function(h,o,c,d,g){return a(this,void 0,void 0,function*(){if(K())try{return yield qr(h,o,c,d,g)}catch{}return function(x,w,A,L,N){const j=x.width,H=x.height;En&&cn||(En=new OffscreenCanvas(j,H),cn=En.getContext("2d",{willReadFrequently:!0})),En.width=j,En.height=H,cn.drawImage(x,0,0,j,H);const te=cn.getImageData(w,A,L,N);return cn.clearRect(0,0,j,H),te.data}(h,o,c,d,g)})},f.cO=ST,f.cP=y,f.cQ=P,f.cR=$T,f.cS=JT,f.cT=Cf,f.cU=Ri,f.ca=h=>h.type==="symbol",f.cb=h=>h.type==="circle",f.cc=h=>h.type==="heatmap",f.cd=h=>h.type==="line",f.ce=h=>h.type==="fill",f.cf=h=>h.type==="fill-extrusion",f.cg=h=>h.type==="hillshade",f.ch=h=>h.type==="color-relief",f.ci=h=>h.type==="raster",f.cj=h=>h.type==="background",f.ck=h=>h.type==="custom",f.cl=gt,f.cm=function(h,o,c){const d=St(o.x-c.x,o.y-c.y),g=St(h.x-c.x,h.y-c.y);var x,w;return en(Math.atan2(d[0]*g[1]-d[1]*g[0],(x=d)[0]*(w=g)[0]+x[1]*w[1]))},f.cn=bt,f.co=function(h,o){return Br[o]&&(h instanceof MouseEvent||h instanceof WheelEvent)},f.cp=function(h,o){return Ur[o]&&"touches"in h},f.cq=function(h){return Ur[h]||Br[h]},f.cr=function(h,o,c){var d=o[0],g=o[1];return h[0]=c[0]*d+c[4]*g+c[12],h[1]=c[1]*d+c[5]*g+c[13],h},f.cs=function(h,o){const{x:c,y:d}=d0.fromLngLat(o);return!(h<0||h>25||d<0||d>=1||c<0||c>=1)},f.ct=function(h,o){return h[0]=o[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=o[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=o[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},f.cu=class extends ko{},f.cv=fz,f.cx=function(h){return h.message===_r},f.cy=De,f.cz=function(h,o){ae.REGISTERED_PROTOCOLS[h]=o},f.d=ht,f.e=Ut,f.f=h=>a(void 0,void 0,void 0,function*(){if(h.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(h)],{type:"image/png"});try{return createImageBitmap(o)}catch(c){throw new Error(`Could not load image because of ${c.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),f.g=oe,f.h=h=>new Promise((o,c)=>{const d=new Image;d.onload=()=>{o(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=dr})},d.onerror=()=>c(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(h)],{type:"image/png"});d.src=h.byteLength?URL.createObjectURL(g):dr}),f.i=Ht,f.j=(h,o)=>rt(Ut(h,{type:"json"}),o),f.k=st,f.l=wt,f.m=rt,f.n=(h,o)=>rt(Ut(h,{type:"arrayBuffer"}),o),f.o=function(h){return new _x(h).readFields(OB,[])},f.p=QT,f.q=t0,f.r=Zi,f.s=Jr,f.t=ea,f.u=Dt,f.v=it,f.w=Nr,f.x=J,f.y=Ce,f.z=U}),s("worker",["./shared"],function(f){class a{constructor(ae){this.keyCache={},ae&&this.replace(ae)}replace(ae){this._layerConfigs={},this._layers={},this.update(ae,[])}update(ae,oe){for(const De of ae){this._layerConfigs[De.id]=De;const Ve=this._layers[De.id]=f.bI(De);Ve._featureFilter=f.a9(Ve.filter),this.keyCache[De.id]&&delete this.keyCache[De.id]}for(const De of oe)delete this.keyCache[De],delete this._layerConfigs[De],delete this._layers[De];this.familiesBySource={};const ye=f.cB(Object.values(this._layerConfigs),this.keyCache);for(const De of ye){const Ve=De.map(st=>this._layers[st.id]),rt=Ve[0];if(rt.visibility==="none")continue;const ht=rt.source||"";let ct=this.familiesBySource[ht];ct||(ct=this.familiesBySource[ht]={});const Lt=rt.sourceLayer||"_geojsonTileLayer";let wt=ct[Lt];wt||(wt=ct[Lt]=[]),wt.push(Ve)}}}class y{constructor(ae){const oe={},ye=[];for(const ht in ae){const ct=ae[ht],Lt=oe[ht]={};for(const wt in ct){const st=ct[+wt];if(!st||st.bitmap.width===0||st.bitmap.height===0)continue;const Ft={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};ye.push(Ft),Lt[wt]={rect:Ft,metrics:st.metrics}}}const{w:De,h:Ve}=f.p(ye),rt=new f.q({width:De||1,height:Ve||1});for(const ht in ae){const ct=ae[ht];for(const Lt in ct){const wt=ct[+Lt];if(!wt||wt.bitmap.width===0||wt.bitmap.height===0)continue;const st=oe[ht][Lt].rect;f.q.copy(wt.bitmap,rt,{x:0,y:0},{x:st.x+1,y:st.y+1},wt.bitmap)}}this.image=rt,this.positions=oe}}f.cC("GlyphAtlas",y);class v{constructor(ae){this.tileID=new f.Z(ae.tileID.overscaledZ,ae.tileID.wrap,ae.tileID.canonical.z,ae.tileID.canonical.x,ae.tileID.canonical.y),this.uid=ae.uid,this.zoom=ae.zoom,this.pixelRatio=ae.pixelRatio,this.tileSize=ae.tileSize,this.source=ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ae.showCollisionBoxes,this.collectResourceTiming=!!ae.collectResourceTiming,this.returnDependencies=!!ae.returnDependencies,this.promoteId=ae.promoteId,this.inFlightDependencies=[],this.globalState=ae.globalState}parse(ae,oe,ye,De,Ve){return f._(this,void 0,void 0,function*(){this.status="parsing",this.data=ae,this.collisionBoxArray=new f.a7;const rt=new f.cD(Object.keys(ae.layers).sort()),ht=new f.cE(this.tileID,this.promoteId);ht.bucketLayerIDs=[];const ct={},Lt={featureIndex:ht,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ye,subdivisionGranularity:Ve},wt=oe.familiesBySource[this.source];for(const Dr in wt){const fn=ae.layers[Dr];if(!fn)continue;fn.version===1&&f.w(`Vector tile source "${this.source}" layer "${Dr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const qn=rt.encode(Dr),nr=[];for(let Bi=0;Bi<fn.length;Bi++){const Gn=fn.feature(Bi),yo=ht.getId(Gn,Dr);nr.push({feature:Gn,id:yo,index:Bi,sourceLayerIndex:qn})}for(const Bi of wt[Dr]){const Gn=Bi[0];Gn.source!==this.source&&f.w(`layer.source = ${Gn.source} does not equal this.source = ${this.source}`),Gn.minzoom&&this.zoom<Math.floor(Gn.minzoom)||Gn.maxzoom&&this.zoom>=Gn.maxzoom||Gn.visibility!=="none"&&(S(Bi,this.zoom,ye),(ct[Gn.id]=Gn.createBucket({index:ht.bucketLayerIDs.length,layers:Bi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:qn,sourceID:this.source,globalState:this.globalState})).populate(nr,Lt,this.tileID.canonical),ht.bucketLayerIDs.push(Bi.map(yo=>yo.id)))}}const st=f.bM(Lt.glyphDependencies,Dr=>Object.keys(Dr).map(Number));this.inFlightDependencies.forEach(Dr=>Dr==null?void 0:Dr.abort()),this.inFlightDependencies=[];let Ft=Promise.resolve({});if(Object.keys(st).length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),Ft=De.sendAsync({type:"GG",data:{stacks:st,source:this.source,tileID:this.tileID,type:"glyphs"}},Dr)}const it=Object.keys(Lt.iconDependencies);let hr=Promise.resolve({});if(it.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),hr=De.sendAsync({type:"GI",data:{icons:it,source:this.source,tileID:this.tileID,type:"icons"}},Dr)}const Xr=Object.keys(Lt.patternDependencies);let wr=Promise.resolve({});if(Xr.length){const Dr=new AbortController;this.inFlightDependencies.push(Dr),wr=De.sendAsync({type:"GI",data:{icons:Xr,source:this.source,tileID:this.tileID,type:"patterns"}},Dr)}const[er,nn,Hn]=yield Promise.all([Ft,hr,wr]),Dn=new y(er),hn=new f.cF(nn,Hn);for(const Dr in ct){const fn=ct[Dr];fn instanceof f.a8?(S(fn.layers,this.zoom,ye),f.cG({bucket:fn,glyphMap:er,glyphPositions:Dn.positions,imageMap:nn,imagePositions:hn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Lt.subdivisionGranularity})):fn.hasPattern&&(fn instanceof f.cH||fn instanceof f.cI||fn instanceof f.cJ)&&(S(fn.layers,this.zoom,ye),fn.addFeatures(Lt,this.tileID.canonical,hn.patternPositions))}return this.status="done",{buckets:Object.values(ct).filter(Dr=>!Dr.isEmpty()),featureIndex:ht,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Dn.image,imageAtlas:hn,glyphMap:this.returnDependencies?er:null,iconMap:this.returnDependencies?nn:null,glyphPositions:this.returnDependencies?Dn.positions:null}})}}function S(ot,ae,oe){const ye=new f.F(ae);for(const De of ot)De.recalculate(ye,oe)}class P{constructor(ae,oe,ye){this.actor=ae,this.layerIndex=oe,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ae,oe){return f._(this,void 0,void 0,function*(){const ye=yield f.n(ae.request,oe);try{return{vectorTile:new f.cK.VectorTile(new f.cL(ye.data)),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(De){const Ve=new Uint8Array(ye.data);let rt=`Unable to parse the tile at ${ae.request.url}, `;throw rt+=Ve[0]===31&&Ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${De.message}`,new Error(rt)}})}loadTile(ae){return f._(this,void 0,void 0,function*(){const oe=ae.uid,ye=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new f.cM(ae.request),De=new v(ae);this.loading[oe]=De;const Ve=new AbortController;De.abort=Ve;try{const rt=yield this.loadVectorTile(ae,Ve);if(delete this.loading[oe],!rt)return null;const ht=rt.rawData,ct={};rt.expires&&(ct.expires=rt.expires),rt.cacheControl&&(ct.cacheControl=rt.cacheControl);const Lt={};if(ye){const st=ye.finish();st&&(Lt.resourceTiming=JSON.parse(JSON.stringify(st)))}De.vectorTile=rt.vectorTile;const wt=De.parse(rt.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);this.loaded[oe]=De,this.fetching[oe]={rawTileData:ht,cacheControl:ct,resourceTiming:Lt};try{const st=yield wt;return f.e({rawTileData:ht.slice(0)},st,ct,Lt)}finally{delete this.fetching[oe]}}catch(rt){throw delete this.loading[oe],De.status="done",this.loaded[oe]=De,rt}})}reloadTile(ae){return f._(this,void 0,void 0,function*(){const oe=ae.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[oe];if(ye.showCollisionBoxes=ae.showCollisionBoxes,ye.globalState=ae.globalState,ye.status==="parsing"){const De=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity);let Ve;if(this.fetching[oe]){const{rawTileData:rt,cacheControl:ht,resourceTiming:ct}=this.fetching[oe];delete this.fetching[oe],Ve=f.e({rawTileData:rt.slice(0)},De,ht,ct)}else Ve=De;return Ve}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,ae.subdivisionGranularity)})}abortTile(ae){return f._(this,void 0,void 0,function*(){const oe=this.loading,ye=ae.uid;oe&&oe[ye]&&oe[ye].abort&&(oe[ye].abort.abort(),delete oe[ye])})}removeTile(ae){return f._(this,void 0,void 0,function*(){this.loaded&&this.loaded[ae.uid]&&delete this.loaded[ae.uid]})}}class D{constructor(){this.loaded={}}loadTile(ae){return f._(this,void 0,void 0,function*(){const{uid:oe,encoding:ye,rawImageData:De,redFactor:Ve,greenFactor:rt,blueFactor:ht,baseShift:ct}=ae,Lt=De.width+2,wt=De.height+2,st=f.b(De)?new f.R({width:Lt,height:wt},yield f.cN(De,-1,-1,Lt,wt)):De,Ft=new f.cO(oe,st,ye,Ve,rt,ht,ct);return this.loaded=this.loaded||{},this.loaded[oe]=Ft,Ft})}removeTile(ae){const oe=this.loaded,ye=ae.uid;oe&&oe[ye]&&delete oe[ye]}}var E,F,z=function(){if(F)return E;function ot(oe,ye){if(oe.length!==0){ae(oe[0],ye);for(var De=1;De<oe.length;De++)ae(oe[De],!ye)}}function ae(oe,ye){for(var De=0,Ve=0,rt=0,ht=oe.length,ct=ht-1;rt<ht;ct=rt++){var Lt=(oe[rt][0]-oe[ct][0])*(oe[ct][1]+oe[rt][1]),wt=De+Lt;Ve+=Math.abs(De)>=Math.abs(Lt)?De-wt+Lt:Lt-wt+De,De=wt}De+Ve>=0!=!!ye&&oe.reverse()}return F=1,E=function oe(ye,De){var Ve,rt=ye&&ye.type;if(rt==="FeatureCollection")for(Ve=0;Ve<ye.features.length;Ve++)oe(ye.features[Ve],De);else if(rt==="GeometryCollection")for(Ve=0;Ve<ye.geometries.length;Ve++)oe(ye.geometries[Ve],De);else if(rt==="Feature")oe(ye.geometry,De);else if(rt==="Polygon")ot(ye.coordinates,De);else if(rt==="MultiPolygon")for(Ve=0;Ve<ye.coordinates.length;Ve++)ot(ye.coordinates[Ve],De);return ye}}(),W=f.cP(z);const $=f.cK.VectorTileFeature.prototype.toGeoJSON;class Y{constructor(ae){this._feature=ae,this.extent=f.$,this.type=ae.type,this.properties=ae.tags,"id"in ae&&!isNaN(ae.id)&&(this.id=parseInt(ae.id,10))}loadGeometry(){if(this._feature.type===1){const ae=[];for(const oe of this._feature.geometry)ae.push([new f.P(oe[0],oe[1])]);return ae}{const ae=[];for(const oe of this._feature.geometry){const ye=[];for(const De of oe)ye.push(new f.P(De[0],De[1]));ae.push(ye)}return ae}}toGeoJSON(ae,oe,ye){return $.call(this,ae,oe,ye)}}class Q{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=f.$,this.length=ae.length,this._features=ae}feature(ae){return new Y(this._features[ae])}}var K,xe,de,be={exports:{}},me=function(){if(de)return be.exports;de=1;var ot=f.cS(),ae=function(){if(xe)return K;xe=1;var wt=f.cQ(),st=f.cR().VectorTileFeature;function Ft(hr,Xr){this.options=Xr||{},this.features=hr,this.length=hr.length}function it(hr,Xr){this.id=typeof hr.id=="number"?hr.id:void 0,this.type=hr.type,this.rawGeometry=hr.type===1?[hr.geometry]:hr.geometry,this.properties=hr.tags,this.extent=Xr||4096}return K=Ft,Ft.prototype.feature=function(hr){return new it(this.features[hr],this.options.extent)},it.prototype.loadGeometry=function(){var hr=this.rawGeometry;this.geometry=[];for(var Xr=0;Xr<hr.length;Xr++){for(var wr=hr[Xr],er=[],nn=0;nn<wr.length;nn++)er.push(new wt(wr[nn][0],wr[nn][1]));this.geometry.push(er)}return this.geometry},it.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var hr=this.geometry,Xr=1/0,wr=-1/0,er=1/0,nn=-1/0,Hn=0;Hn<hr.length;Hn++)for(var Dn=hr[Hn],hn=0;hn<Dn.length;hn++){var Dr=Dn[hn];Xr=Math.min(Xr,Dr.x),wr=Math.max(wr,Dr.x),er=Math.min(er,Dr.y),nn=Math.max(nn,Dr.y)}return[Xr,er,wr,nn]},it.prototype.toGeoJSON=st.prototype.toGeoJSON,K}();function oe(wt){var st=new ot;return function(Ft,it){for(var hr in Ft.layers)it.writeMessage(3,ye,Ft.layers[hr])}(wt,st),st.finish()}function ye(wt,st){var Ft;st.writeVarintField(15,wt.version||1),st.writeStringField(1,wt.name||""),st.writeVarintField(5,wt.extent||4096);var it={keys:[],values:[],keycache:{},valuecache:{}};for(Ft=0;Ft<wt.length;Ft++)it.feature=wt.feature(Ft),st.writeMessage(2,De,it);var hr=it.keys;for(Ft=0;Ft<hr.length;Ft++)st.writeStringField(3,hr[Ft]);var Xr=it.values;for(Ft=0;Ft<Xr.length;Ft++)st.writeMessage(4,Lt,Xr[Ft])}function De(wt,st){var Ft=wt.feature;Ft.id!==void 0&&st.writeVarintField(1,Ft.id),st.writeMessage(2,Ve,wt),st.writeVarintField(3,Ft.type),st.writeMessage(4,ct,Ft)}function Ve(wt,st){var Ft=wt.feature,it=wt.keys,hr=wt.values,Xr=wt.keycache,wr=wt.valuecache;for(var er in Ft.properties){var nn=Ft.properties[er],Hn=Xr[er];if(nn!==null){Hn===void 0&&(it.push(er),Xr[er]=Hn=it.length-1),st.writeVarint(Hn);var Dn=typeof nn;Dn!=="string"&&Dn!=="boolean"&&Dn!=="number"&&(nn=JSON.stringify(nn));var hn=Dn+":"+nn,Dr=wr[hn];Dr===void 0&&(hr.push(nn),wr[hn]=Dr=hr.length-1),st.writeVarint(Dr)}}}function rt(wt,st){return(st<<3)+(7&wt)}function ht(wt){return wt<<1^wt>>31}function ct(wt,st){for(var Ft=wt.loadGeometry(),it=wt.type,hr=0,Xr=0,wr=Ft.length,er=0;er<wr;er++){var nn=Ft[er],Hn=1;it===1&&(Hn=nn.length),st.writeVarint(rt(1,Hn));for(var Dn=it===3?nn.length-1:nn.length,hn=0;hn<Dn;hn++){hn===1&&it!==1&&st.writeVarint(rt(2,Dn-1));var Dr=nn[hn].x-hr,fn=nn[hn].y-Xr;st.writeVarint(ht(Dr)),st.writeVarint(ht(fn)),hr+=Dr,Xr+=fn}it===3&&st.writeVarint(rt(7,1))}}function Lt(wt,st){var Ft=typeof wt;Ft==="string"?st.writeStringField(1,wt):Ft==="boolean"?st.writeBooleanField(7,wt):Ft==="number"&&(wt%1!=0?st.writeDoubleField(3,wt):wt<0?st.writeSVarintField(6,wt):st.writeVarintField(5,wt))}return be.exports=oe,be.exports.fromVectorTileJs=oe,be.exports.fromGeojsonVt=function(wt,st){st=st||{};var Ft={};for(var it in wt)Ft[it]=new ae(wt[it].features,st),Ft[it].name=it,Ft[it].version=st.version,Ft[it].extent=st.extent;return oe({layers:Ft})},be.exports.GeoJSONWrapper=ae,be.exports}(),ve=f.cP(me);const Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ot=>ot},le=Math.fround||(G=new Float32Array(1),ot=>(G[0]=+ot,G[0]));var G;class Ae{constructor(ae){this.options=Object.assign(Object.create(Re),ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ae){const{log:oe,minZoom:ye,maxZoom:De}=this.options;oe&&console.time("total time");const Ve=`prepare ${ae.length} points`;oe&&console.time(Ve),this.points=ae;const rt=[];for(let ct=0;ct<ae.length;ct++){const Lt=ae[ct];if(!Lt.geometry)continue;const[wt,st]=Lt.geometry.coordinates,Ft=le(pt(wt)),it=le(At(st));rt.push(Ft,it,1/0,ct,-1,1),this.options.reduce&&rt.push(0)}let ht=this.trees[De+1]=this._createTree(rt);oe&&console.timeEnd(Ve);for(let ct=De;ct>=ye;ct--){const Lt=+Date.now();ht=this.trees[ct]=this._createTree(this._cluster(ht,ct)),oe&&console.log("z%d: %d clusters in %dms",ct,ht.numItems,+Date.now()-Lt)}return oe&&console.timeEnd("total time"),this}getClusters(ae,oe){let ye=((ae[0]+180)%360+360)%360-180;const De=Math.max(-90,Math.min(90,ae[1]));let Ve=ae[2]===180?180:((ae[2]+180)%360+360)%360-180;const rt=Math.max(-90,Math.min(90,ae[3]));if(ae[2]-ae[0]>=360)ye=-180,Ve=180;else if(ye>Ve){const st=this.getClusters([ye,De,180,rt],oe),Ft=this.getClusters([-180,De,Ve,rt],oe);return st.concat(Ft)}const ht=this.trees[this._limitZoom(oe)],ct=ht.range(pt(ye),At(rt),pt(Ve),At(De)),Lt=ht.data,wt=[];for(const st of ct){const Ft=this.stride*st;wt.push(Lt[Ft+5]>1?we(Lt,Ft,this.clusterProps):this.points[Lt[Ft+3]])}return wt}getChildren(ae){const oe=this._getOriginId(ae),ye=this._getOriginZoom(ae),De="No cluster with the specified id.",Ve=this.trees[ye];if(!Ve)throw new Error(De);const rt=Ve.data;if(oe*this.stride>=rt.length)throw new Error(De);const ht=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),ct=Ve.within(rt[oe*this.stride],rt[oe*this.stride+1],ht),Lt=[];for(const wt of ct){const st=wt*this.stride;rt[st+4]===ae&&Lt.push(rt[st+5]>1?we(rt,st,this.clusterProps):this.points[rt[st+3]])}if(Lt.length===0)throw new Error(De);return Lt}getLeaves(ae,oe,ye){const De=[];return this._appendLeaves(De,ae,oe=oe||10,ye=ye||0,0),De}getTile(ae,oe,ye){const De=this.trees[this._limitZoom(ae)],Ve=Math.pow(2,ae),{extent:rt,radius:ht}=this.options,ct=ht/rt,Lt=(ye-ct)/Ve,wt=(ye+1+ct)/Ve,st={features:[]};return this._addTileFeatures(De.range((oe-ct)/Ve,Lt,(oe+1+ct)/Ve,wt),De.data,oe,ye,Ve,st),oe===0&&this._addTileFeatures(De.range(1-ct/Ve,Lt,1,wt),De.data,Ve,ye,Ve,st),oe===Ve-1&&this._addTileFeatures(De.range(0,Lt,ct/Ve,wt),De.data,-1,ye,Ve,st),st.features.length?st:null}getClusterExpansionZoom(ae){let oe=this._getOriginZoom(ae)-1;for(;oe<=this.options.maxZoom;){const ye=this.getChildren(ae);if(oe++,ye.length!==1)break;ae=ye[0].properties.cluster_id}return oe}_appendLeaves(ae,oe,ye,De,Ve){const rt=this.getChildren(oe);for(const ht of rt){const ct=ht.properties;if(ct&&ct.cluster?Ve+ct.point_count<=De?Ve+=ct.point_count:Ve=this._appendLeaves(ae,ct.cluster_id,ye,De,Ve):Ve<De?Ve++:ae.push(ht),ae.length===ye)break}return Ve}_createTree(ae){const oe=new f.aH(ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<ae.length;ye+=this.stride)oe.add(ae[ye],ae[ye+1]);return oe.finish(),oe.data=ae,oe}_addTileFeatures(ae,oe,ye,De,Ve,rt){for(const ht of ae){const ct=ht*this.stride,Lt=oe[ct+5]>1;let wt,st,Ft;if(Lt)wt=lt(oe,ct,this.clusterProps),st=oe[ct],Ft=oe[ct+1];else{const Xr=this.points[oe[ct+3]];wt=Xr.properties;const[wr,er]=Xr.geometry.coordinates;st=pt(wr),Ft=At(er)}const it={type:1,geometry:[[Math.round(this.options.extent*(st*Ve-ye)),Math.round(this.options.extent*(Ft*Ve-De))]],tags:wt};let hr;hr=Lt||this.options.generateId?oe[ct+3]:this.points[oe[ct+3]].id,hr!==void 0&&(it.id=hr),rt.features.push(it)}}_limitZoom(ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+ae),this.options.maxZoom+1))}_cluster(ae,oe){const{radius:ye,extent:De,reduce:Ve,minPoints:rt}=this.options,ht=ye/(De*Math.pow(2,oe)),ct=ae.data,Lt=[],wt=this.stride;for(let st=0;st<ct.length;st+=wt){if(ct[st+2]<=oe)continue;ct[st+2]=oe;const Ft=ct[st],it=ct[st+1],hr=ae.within(ct[st],ct[st+1],ht),Xr=ct[st+5];let wr=Xr;for(const er of hr){const nn=er*wt;ct[nn+2]>oe&&(wr+=ct[nn+5])}if(wr>Xr&&wr>=rt){let er,nn=Ft*Xr,Hn=it*Xr,Dn=-1;const hn=(st/wt<<5)+(oe+1)+this.points.length;for(const Dr of hr){const fn=Dr*wt;if(ct[fn+2]<=oe)continue;ct[fn+2]=oe;const qn=ct[fn+5];nn+=ct[fn]*qn,Hn+=ct[fn+1]*qn,ct[fn+4]=hn,Ve&&(er||(er=this._map(ct,st,!0),Dn=this.clusterProps.length,this.clusterProps.push(er)),Ve(er,this._map(ct,fn)))}ct[st+4]=hn,Lt.push(nn/wr,Hn/wr,1/0,hn,-1,wr),Ve&&Lt.push(Dn)}else{for(let er=0;er<wt;er++)Lt.push(ct[st+er]);if(wr>1)for(const er of hr){const nn=er*wt;if(!(ct[nn+2]<=oe)){ct[nn+2]=oe;for(let Hn=0;Hn<wt;Hn++)Lt.push(ct[nn+Hn])}}}}return Lt}_getOriginId(ae){return ae-this.points.length>>5}_getOriginZoom(ae){return(ae-this.points.length)%32}_map(ae,oe,ye){if(ae[oe+5]>1){const rt=this.clusterProps[ae[oe+6]];return ye?Object.assign({},rt):rt}const De=this.points[ae[oe+3]].properties,Ve=this.options.map(De);return ye&&Ve===De?Object.assign({},Ve):Ve}}function we(ot,ae,oe){return{type:"Feature",id:ot[ae+3],properties:lt(ot,ae,oe),geometry:{type:"Point",coordinates:[(ye=ot[ae],360*(ye-.5)),Ze(ot[ae+1])]}};var ye}function lt(ot,ae,oe){const ye=ot[ae+5],De=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,Ve=ot[ae+6],rt=Ve===-1?{}:Object.assign({},oe[Ve]);return Object.assign(rt,{cluster:!0,cluster_id:ot[ae+3],point_count:ye,point_count_abbreviated:De})}function pt(ot){return ot/360+.5}function At(ot){const ae=Math.sin(ot*Math.PI/180),oe=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return oe<0?0:oe>1?1:oe}function Ze(ot){const ae=(180-360*ot)*Math.PI/180;return 360*Math.atan(Math.exp(ae))/Math.PI-90}function tt(ot,ae,oe,ye){let De=ye;const Ve=ae+(oe-ae>>1);let rt,ht=oe-ae;const ct=ot[ae],Lt=ot[ae+1],wt=ot[oe],st=ot[oe+1];for(let Ft=ae+3;Ft<oe;Ft+=3){const it=Ot(ot[Ft],ot[Ft+1],ct,Lt,wt,st);if(it>De)rt=Ft,De=it;else if(it===De){const hr=Math.abs(Ft-Ve);hr<ht&&(rt=Ft,ht=hr)}}De>ye&&(rt-ae>3&&tt(ot,ae,rt,ye),ot[rt+2]=De,oe-rt>3&&tt(ot,rt,oe,ye))}function Ot(ot,ae,oe,ye,De,Ve){let rt=De-oe,ht=Ve-ye;if(rt!==0||ht!==0){const ct=((ot-oe)*rt+(ae-ye)*ht)/(rt*rt+ht*ht);ct>1?(oe=De,ye=Ve):ct>0&&(oe+=rt*ct,ye+=ht*ct)}return rt=ot-oe,ht=ae-ye,rt*rt+ht*ht}function St(ot,ae,oe,ye){const De={id:ot??null,type:ae,geometry:oe,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")ne(De,oe);else if(ae==="Polygon")ne(De,oe[0]);else if(ae==="MultiLineString")for(const Ve of oe)ne(De,Ve);else if(ae==="MultiPolygon")for(const Ve of oe)ne(De,Ve[0]);return De}function ne(ot,ae){for(let oe=0;oe<ae.length;oe+=3)ot.minX=Math.min(ot.minX,ae[oe]),ot.minY=Math.min(ot.minY,ae[oe+1]),ot.maxX=Math.max(ot.maxX,ae[oe]),ot.maxY=Math.max(ot.maxY,ae[oe+1])}function Ee(ot,ae,oe,ye){if(!ae.geometry)return;const De=ae.geometry.coordinates;if(De&&De.length===0)return;const Ve=ae.geometry.type,rt=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2);let ht=[],ct=ae.id;if(oe.promoteId?ct=ae.properties[oe.promoteId]:oe.generateId&&(ct=ye||0),Ve==="Point")Ne(De,ht);else if(Ve==="MultiPoint")for(const Lt of De)Ne(Lt,ht);else if(Ve==="LineString")qe(De,ht,rt,!1);else if(Ve==="MultiLineString"){if(oe.lineMetrics){for(const Lt of De)ht=[],qe(Lt,ht,rt,!1),ot.push(St(ct,"LineString",ht,ae.properties));return}Je(De,ht,rt,!1)}else if(Ve==="Polygon")Je(De,ht,rt,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(const Lt of ae.geometry.geometries)Ee(ot,{id:ct,geometry:Lt,properties:ae.properties},oe,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Lt of De){const wt=[];Je(Lt,wt,rt,!0),ht.push(wt)}}ot.push(St(ct,Ve,ht,ae.properties))}function Ne(ot,ae){ae.push(gt(ot[0]),bt(ot[1]),0)}function qe(ot,ae,oe,ye){let De,Ve,rt=0;for(let ct=0;ct<ot.length;ct++){const Lt=gt(ot[ct][0]),wt=bt(ot[ct][1]);ae.push(Lt,wt,0),ct>0&&(rt+=ye?(De*wt-Lt*Ve)/2:Math.sqrt(Math.pow(Lt-De,2)+Math.pow(wt-Ve,2))),De=Lt,Ve=wt}const ht=ae.length-3;ae[2]=1,tt(ae,0,ht,oe),ae[ht+2]=1,ae.size=Math.abs(rt),ae.start=0,ae.end=ae.size}function Je(ot,ae,oe,ye){for(let De=0;De<ot.length;De++){const Ve=[];qe(ot[De],Ve,oe,ye),ae.push(Ve)}}function gt(ot){return ot/360+.5}function bt(ot){const ae=Math.sin(ot*Math.PI/180),oe=.5-.25*Math.log((1+ae)/(1-ae))/Math.PI;return oe<0?0:oe>1?1:oe}function ft(ot,ae,oe,ye,De,Ve,rt,ht){if(ye/=ae,Ve>=(oe/=ae)&&rt<ye)return ot;if(rt<oe||Ve>=ye)return null;const ct=[];for(const Lt of ot){const wt=Lt.geometry;let st=Lt.type;const Ft=De===0?Lt.minX:Lt.minY,it=De===0?Lt.maxX:Lt.maxY;if(Ft>=oe&&it<ye){ct.push(Lt);continue}if(it<oe||Ft>=ye)continue;let hr=[];if(st==="Point"||st==="MultiPoint")Ct(wt,hr,oe,ye,De);else if(st==="LineString")Ut(wt,hr,oe,ye,De,!1,ht.lineMetrics);else if(st==="MultiLineString")rr(wt,hr,oe,ye,De,!1);else if(st==="Polygon")rr(wt,hr,oe,ye,De,!0);else if(st==="MultiPolygon")for(const Xr of wt){const wr=[];rr(Xr,wr,oe,ye,De,!0),wr.length&&hr.push(wr)}if(hr.length){if(ht.lineMetrics&&st==="LineString"){for(const Xr of hr)ct.push(St(Lt.id,st,Xr,Lt.tags));continue}st!=="LineString"&&st!=="MultiLineString"||(hr.length===1?(st="LineString",hr=hr[0]):st="MultiLineString"),st!=="Point"&&st!=="MultiPoint"||(st=hr.length===3?"Point":"MultiPoint"),ct.push(St(Lt.id,st,hr,Lt.tags))}}return ct.length?ct:null}function Ct(ot,ae,oe,ye,De){for(let Ve=0;Ve<ot.length;Ve+=3){const rt=ot[Ve+De];rt>=oe&&rt<=ye&&It(ae,ot[Ve],ot[Ve+1],ot[Ve+2])}}function Ut(ot,ae,oe,ye,De,Ve,rt){let ht=gr(ot);const ct=De===0?Ue:Lr;let Lt,wt,st=ot.start;for(let wr=0;wr<ot.length-3;wr+=3){const er=ot[wr],nn=ot[wr+1],Hn=ot[wr+2],Dn=ot[wr+3],hn=ot[wr+4],Dr=De===0?er:nn,fn=De===0?Dn:hn;let qn=!1;rt&&(Lt=Math.sqrt(Math.pow(er-Dn,2)+Math.pow(nn-hn,2))),Dr<oe?fn>oe&&(wt=ct(ht,er,nn,Dn,hn,oe),rt&&(ht.start=st+Lt*wt)):Dr>ye?fn<ye&&(wt=ct(ht,er,nn,Dn,hn,ye),rt&&(ht.start=st+Lt*wt)):It(ht,er,nn,Hn),fn<oe&&Dr>=oe&&(wt=ct(ht,er,nn,Dn,hn,oe),qn=!0),fn>ye&&Dr<=ye&&(wt=ct(ht,er,nn,Dn,hn,ye),qn=!0),!Ve&&qn&&(rt&&(ht.end=st+Lt*wt),ae.push(ht),ht=gr(ot)),rt&&(st+=Lt)}let Ft=ot.length-3;const it=ot[Ft],hr=ot[Ft+1],Xr=De===0?it:hr;Xr>=oe&&Xr<=ye&&It(ht,it,hr,ot[Ft+2]),Ft=ht.length-3,Ve&&Ft>=3&&(ht[Ft]!==ht[0]||ht[Ft+1]!==ht[1])&&It(ht,ht[0],ht[1],ht[2]),ht.length&&ae.push(ht)}function gr(ot){const ae=[];return ae.size=ot.size,ae.start=ot.start,ae.end=ot.end,ae}function rr(ot,ae,oe,ye,De,Ve){for(const rt of ot)Ut(rt,ae,oe,ye,De,Ve,!1)}function It(ot,ae,oe,ye){ot.push(ae,oe,ye)}function Ue(ot,ae,oe,ye,De,Ve){const rt=(Ve-ae)/(ye-ae);return It(ot,Ve,oe+(De-oe)*rt,1),rt}function Lr(ot,ae,oe,ye,De,Ve){const rt=(Ve-oe)/(De-oe);return It(ot,ae+(ye-ae)*rt,Ve,1),rt}function Nr(ot,ae){const oe=[];for(let ye=0;ye<ot.length;ye++){const De=ot[ye],Ve=De.type;let rt;if(Ve==="Point"||Ve==="MultiPoint"||Ve==="LineString")rt=Pr(De.geometry,ae);else if(Ve==="MultiLineString"||Ve==="Polygon"){rt=[];for(const ht of De.geometry)rt.push(Pr(ht,ae))}else if(Ve==="MultiPolygon"){rt=[];for(const ht of De.geometry){const ct=[];for(const Lt of ht)ct.push(Pr(Lt,ae));rt.push(ct)}}oe.push(St(De.id,Ve,rt,De.tags))}return oe}function Pr(ot,ae){const oe=[];oe.size=ot.size,ot.start!==void 0&&(oe.start=ot.start,oe.end=ot.end);for(let ye=0;ye<ot.length;ye+=3)oe.push(ot[ye]+ae,ot[ye+1],ot[ye+2]);return oe}function Ht(ot,ae){if(ot.transformed)return ot;const oe=1<<ot.z,ye=ot.x,De=ot.y;for(const Ve of ot.features){const rt=Ve.geometry,ht=Ve.type;if(Ve.geometry=[],ht===1)for(let ct=0;ct<rt.length;ct+=2)Ve.geometry.push(Er(rt[ct],rt[ct+1],ae,oe,ye,De));else for(let ct=0;ct<rt.length;ct++){const Lt=[];for(let wt=0;wt<rt[ct].length;wt+=2)Lt.push(Er(rt[ct][wt],rt[ct][wt+1],ae,oe,ye,De));Ve.geometry.push(Lt)}}return ot.transformed=!0,ot}function Er(ot,ae,oe,ye,De,Ve){return[Math.round(oe*(ot*ye-De)),Math.round(oe*(ae*ye-Ve))]}function vr(ot,ae,oe,ye,De){const Ve=ae===De.maxZoom?0:De.tolerance/((1<<ae)*De.extent),rt={features:[],numPoints:0,numSimplified:0,numFeatures:ot.length,source:null,x:oe,y:ye,z:ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ht of ot)dr(rt,ht,Ve,De);return rt}function dr(ot,ae,oe,ye){const De=ae.geometry,Ve=ae.type,rt=[];if(ot.minX=Math.min(ot.minX,ae.minX),ot.minY=Math.min(ot.minY,ae.minY),ot.maxX=Math.max(ot.maxX,ae.maxX),ot.maxY=Math.max(ot.maxY,ae.maxY),Ve==="Point"||Ve==="MultiPoint")for(let ht=0;ht<De.length;ht+=3)rt.push(De[ht],De[ht+1]),ot.numPoints++,ot.numSimplified++;else if(Ve==="LineString")qr(rt,De,ot,oe,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(let ht=0;ht<De.length;ht++)qr(rt,De[ht],ot,oe,Ve==="Polygon",ht===0);else if(Ve==="MultiPolygon")for(let ht=0;ht<De.length;ht++){const ct=De[ht];for(let Lt=0;Lt<ct.length;Lt++)qr(rt,ct[Lt],ot,oe,!0,Lt===0)}if(rt.length){let ht=ae.tags||null;if(Ve==="LineString"&&ye.lineMetrics){ht={};for(const Lt in ae.tags)ht[Lt]=ae.tags[Lt];ht.mapbox_clip_start=De.start/De.size,ht.mapbox_clip_end=De.end/De.size}const ct={geometry:rt,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:ht};ae.id!==null&&(ct.id=ae.id),ot.features.push(ct)}}function qr(ot,ae,oe,ye,De,Ve){const rt=ye*ye;if(ye>0&&ae.size<(De?rt:ye))return void(oe.numPoints+=ae.length/3);const ht=[];for(let ct=0;ct<ae.length;ct+=3)(ye===0||ae[ct+2]>rt)&&(oe.numSimplified++,ht.push(ae[ct],ae[ct+1])),oe.numPoints++;De&&function(ct,Lt){let wt=0;for(let st=0,Ft=ct.length,it=Ft-2;st<Ft;it=st,st+=2)wt+=(ct[st]-ct[it])*(ct[st+1]+ct[it+1]);if(wt>0===Lt)for(let st=0,Ft=ct.length;st<Ft/2;st+=2){const it=ct[st],hr=ct[st+1];ct[st]=ct[Ft-2-st],ct[st+1]=ct[Ft-1-st],ct[Ft-2-st]=it,ct[Ft-1-st]=hr}}(ht,Ve),ot.push(ht)}const En={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class cn{constructor(ae,oe){const ye=(oe=this.options=function(Ve,rt){for(const ht in rt)Ve[ht]=rt[ht];return Ve}(Object.create(En),oe)).debug;if(ye&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let De=function(Ve,rt){const ht=[];if(Ve.type==="FeatureCollection")for(let ct=0;ct<Ve.features.length;ct++)Ee(ht,Ve.features[ct],rt,ct);else Ee(ht,Ve.type==="Feature"?Ve:{geometry:Ve},rt);return ht}(ae,oe);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=function(Ve,rt){const ht=rt.buffer/rt.extent;let ct=Ve;const Lt=ft(Ve,1,-1-ht,ht,0,-1,2,rt),wt=ft(Ve,1,1-ht,2+ht,0,-1,2,rt);return(Lt||wt)&&(ct=ft(Ve,1,-ht,1+ht,0,-1,2,rt)||[],Lt&&(ct=Nr(Lt,1).concat(ct)),wt&&(ct=ct.concat(Nr(wt,-1)))),ct}(De,oe),De.length&&this.splitTile(De,0,0,0),ye&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ae,oe,ye,De,Ve,rt,ht){const ct=[ae,oe,ye,De],Lt=this.options,wt=Lt.debug;for(;ct.length;){De=ct.pop(),ye=ct.pop(),oe=ct.pop(),ae=ct.pop();const st=1<<oe,Ft=Jr(oe,ye,De);let it=this.tiles[Ft];if(!it&&(wt>1&&console.time("creation"),it=this.tiles[Ft]=vr(ae,oe,ye,De,Lt),this.tileCoords.push({z:oe,x:ye,y:De}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ye,De,it.numFeatures,it.numPoints,it.numSimplified),console.timeEnd("creation"));const qn=`z${oe}`;this.stats[qn]=(this.stats[qn]||0)+1,this.total++}if(it.source=ae,Ve==null){if(oe===Lt.indexMaxZoom||it.numPoints<=Lt.indexMaxPoints)continue}else{if(oe===Lt.maxZoom||oe===Ve)continue;if(Ve!=null){const qn=Ve-oe;if(ye!==rt>>qn||De!==ht>>qn)continue}}if(it.source=null,ae.length===0)continue;wt>1&&console.time("clipping");const hr=.5*Lt.buffer/Lt.extent,Xr=.5-hr,wr=.5+hr,er=1+hr;let nn=null,Hn=null,Dn=null,hn=null,Dr=ft(ae,st,ye-hr,ye+wr,0,it.minX,it.maxX,Lt),fn=ft(ae,st,ye+Xr,ye+er,0,it.minX,it.maxX,Lt);ae=null,Dr&&(nn=ft(Dr,st,De-hr,De+wr,1,it.minY,it.maxY,Lt),Hn=ft(Dr,st,De+Xr,De+er,1,it.minY,it.maxY,Lt),Dr=null),fn&&(Dn=ft(fn,st,De-hr,De+wr,1,it.minY,it.maxY,Lt),hn=ft(fn,st,De+Xr,De+er,1,it.minY,it.maxY,Lt),fn=null),wt>1&&console.timeEnd("clipping"),ct.push(nn||[],oe+1,2*ye,2*De),ct.push(Hn||[],oe+1,2*ye,2*De+1),ct.push(Dn||[],oe+1,2*ye+1,2*De),ct.push(hn||[],oe+1,2*ye+1,2*De+1)}}getTile(ae,oe,ye){ae=+ae,oe=+oe,ye=+ye;const De=this.options,{extent:Ve,debug:rt}=De;if(ae<0||ae>24)return null;const ht=1<<ae,ct=Jr(ae,oe=oe+ht&ht-1,ye);if(this.tiles[ct])return Ht(this.tiles[ct],Ve);rt>1&&console.log("drilling down to z%d-%d-%d",ae,oe,ye);let Lt,wt=ae,st=oe,Ft=ye;for(;!Lt&&wt>0;)wt--,st>>=1,Ft>>=1,Lt=this.tiles[Jr(wt,st,Ft)];return Lt&&Lt.source?(rt>1&&(console.log("found parent tile z%d-%d-%d",wt,st,Ft),console.time("drilling down")),this.splitTile(Lt.source,wt,st,Ft,ae,oe,ye),rt>1&&console.timeEnd("drilling down"),this.tiles[ct]?Ht(this.tiles[ct],Ve):null):null}}function Jr(ot,ae,oe){return 32*((1<<ot)*oe+ae)+ot}function An(ot,ae){return ae?ot.properties[ae]:ot.id}function en(ot,ae){if(ot==null)return!0;if(ot.type==="Feature")return An(ot,ae)!=null;if(ot.type==="FeatureCollection"){const oe=new Set;for(const ye of ot.features){const De=An(ye,ae);if(De==null||oe.has(De))return!1;oe.add(De)}return!0}return!1}function Ur(ot,ae){const oe=new Map;if(ot!=null)if(ot.type==="Feature")oe.set(An(ot,ae),ot);else for(const ye of ot.features)oe.set(An(ye,ae),ye);return oe}class Br extends P{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ae,oe){return f._(this,void 0,void 0,function*(){const ye=ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const De=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);if(!De)return null;const Ve=new Q(De.features);let rt=ve(Ve);return rt.byteOffset===0&&rt.byteLength===rt.buffer.byteLength||(rt=new Uint8Array(rt)),{vectorTile:Ve,rawData:rt.buffer}})}loadData(ae){return f._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();const ye=!!(ae&&ae.request&&ae.request.collectResourceTiming)&&new f.cM(ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ae,this._pendingRequest),this._geoJSONIndex=ae.cluster?new Ae(function({superclusterOptions:rt,clusterProperties:ht}){if(!ht||!rt)return rt;const ct={},Lt={},wt={accumulated:null,zoom:0},st={properties:null},Ft=Object.keys(ht);for(const it of Ft){const[hr,Xr]=ht[it],wr=f.cT(Xr),er=f.cT(typeof hr=="string"?[hr,["accumulated"],["get",it]]:hr);ct[it]=wr.value,Lt[it]=er.value}return rt.map=it=>{st.properties=it;const hr={};for(const Xr of Ft)hr[Xr]=ct[Xr].evaluate(wt,st);return hr},rt.reduce=(it,hr)=>{st.properties=hr;for(const Xr of Ft)wt.accumulated=it[Xr],it[Xr]=Lt[Xr].evaluate(wt,st)},rt}(ae)).load((yield this._pendingData).features):(De=yield this._pendingData,new cn(De,ae.geojsonVtOptions)),this.loaded={};const Ve={};if(ye){const rt=ye.finish();rt&&(Ve.resourceTiming={},Ve.resourceTiming[ae.source]=JSON.parse(JSON.stringify(rt)))}return Ve}catch(Ve){if(delete this._pendingRequest,f.cx(Ve))return{abandoned:!0};throw Ve}var De})}getData(){return f._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(ae){const oe=this.loaded;return oe&&oe[ae.uid]?super.reloadTile(ae):this.loadTile(ae)}loadAndProcessGeoJSON(ae,oe){return f._(this,void 0,void 0,function*(){let ye=yield this.loadGeoJSON(ae,oe);if(delete this._pendingRequest,typeof ye!="object")throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(W(ye,!0),ae.filter){const De=f.cT(ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(De.result==="error")throw new Error(De.value.map(rt=>`${rt.key}: ${rt.message}`).join(", "));ye={type:"FeatureCollection",features:ye.features.filter(rt=>De.value.evaluate({zoom:0},rt))}}return ye})}loadGeoJSON(ae,oe){return f._(this,void 0,void 0,function*(){const{promoteId:ye}=ae;if(ae.request){const De=yield f.j(ae.request,oe);return this._dataUpdateable=en(De.data,ye)?Ur(De.data,ye):void 0,De.data}if(typeof ae.data=="string")try{const De=JSON.parse(ae.data);return this._dataUpdateable=en(De,ye)?Ur(De,ye):void 0,De}catch{throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`)}if(!ae.dataDiff)throw new Error(`Input data given to '${ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ae.source}`);return function(De,Ve,rt){var ht,ct,Lt,wt;if(Ve.removeAll&&De.clear(),Ve.remove)for(const st of Ve.remove)De.delete(st);if(Ve.add)for(const st of Ve.add){const Ft=An(st,rt);Ft!=null&&De.set(Ft,st)}if(Ve.update)for(const st of Ve.update){let Ft=De.get(st.id);if(Ft==null)continue;const it=!st.removeAllProperties&&(((ht=st.removeProperties)===null||ht===void 0?void 0:ht.length)>0||((ct=st.addOrUpdateProperties)===null||ct===void 0?void 0:ct.length)>0);if((st.newGeometry||st.removeAllProperties||it)&&(Ft=Object.assign({},Ft),De.set(st.id,Ft),it&&(Ft.properties=Object.assign({},Ft.properties))),st.newGeometry&&(Ft.geometry=st.newGeometry),st.removeAllProperties)Ft.properties={};else if(((Lt=st.removeProperties)===null||Lt===void 0?void 0:Lt.length)>0)for(const hr of st.removeProperties)Object.prototype.hasOwnProperty.call(Ft.properties,hr)&&delete Ft.properties[hr];if(((wt=st.addOrUpdateProperties)===null||wt===void 0?void 0:wt.length)>0)for(const{key:hr,value:Xr}of st.addOrUpdateProperties)Ft.properties[hr]=Xr}}(this._dataUpdateable,ae.dataDiff,ye),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(ae){return f._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(ae){return this._geoJSONIndex.getClusterExpansionZoom(ae.clusterId)}getClusterChildren(ae){return this._geoJSONIndex.getChildren(ae.clusterId)}getClusterLeaves(ae){return this._geoJSONIndex.getLeaves(ae.clusterId,ae.limit,ae.offset)}}class _r{constructor(ae){this.self=ae,this.actor=new f.J(ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,ye)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=ye},this.self.addProtocol=f.cz,this.self.removeProtocol=f.cA,this.self.registerRTLTextPlugin=oe=>{f.cU.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,ye)=>this._getDEMWorkerSource(oe,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RDT",(oe,ye)=>f._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,ye.source).removeTile(ye)})),this.actor.registerMessageHandler("GCEZ",(oe,ye)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ye.type,ye.source).getClusterExpansionZoom(ye)})),this.actor.registerMessageHandler("GCC",(oe,ye)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ye.type,ye.source).getClusterChildren(ye)})),this.actor.registerMessageHandler("GCL",(oe,ye)=>f._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ye.type,ye.source).getClusterLeaves(ye)})),this.actor.registerMessageHandler("LD",(oe,ye)=>this._getWorkerSource(oe,ye.type,ye.source).loadData(ye)),this.actor.registerMessageHandler("GD",(oe,ye)=>this._getWorkerSource(oe,ye.type,ye.source).getData()),this.actor.registerMessageHandler("LT",(oe,ye)=>this._getWorkerSource(oe,ye.type,ye.source).loadTile(ye)),this.actor.registerMessageHandler("RT",(oe,ye)=>this._getWorkerSource(oe,ye.type,ye.source).reloadTile(ye)),this.actor.registerMessageHandler("AT",(oe,ye)=>this._getWorkerSource(oe,ye.type,ye.source).abortTile(ye)),this.actor.registerMessageHandler("RMT",(oe,ye)=>this._getWorkerSource(oe,ye.type,ye.source).removeTile(ye)),this.actor.registerMessageHandler("RS",(oe,ye)=>f._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][ye.type]||!this.workerSources[oe][ye.type][ye.source])return;const De=this.workerSources[oe][ye.type][ye.source];delete this.workerSources[oe][ye.type][ye.source],De.removeSource!==void 0&&De.removeSource(ye)})),this.actor.registerMessageHandler("RM",oe=>f._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,ye)=>f._(this,void 0,void 0,function*(){this.referrer=ye})),this.actor.registerMessageHandler("SRPS",(oe,ye)=>this._syncRTLPluginState(oe,ye)),this.actor.registerMessageHandler("IS",(oe,ye)=>f._(this,void 0,void 0,function*(){this.self.importScripts(ye)})),this.actor.registerMessageHandler("SI",(oe,ye)=>this._setImages(oe,ye)),this.actor.registerMessageHandler("UL",(oe,ye)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(ye.layers,ye.removedIds)})),this.actor.registerMessageHandler("SL",(oe,ye)=>f._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(ye)}))}_setImages(ae,oe){return f._(this,void 0,void 0,function*(){this.availableImages[ae]=oe;for(const ye in this.workerSources[ae]){const De=this.workerSources[ae][ye];for(const Ve in De)De[Ve].availableImages=oe}})}_syncRTLPluginState(ae,oe){return f._(this,void 0,void 0,function*(){return yield f.cU.syncState(oe,this.self.importScripts)})}_getAvailableImages(ae){let oe=this.availableImages[ae];return oe||(oe=[]),oe}_getLayerIndex(ae){let oe=this.layerIndexes[ae];return oe||(oe=this.layerIndexes[ae]=new a),oe}_getWorkerSource(ae,oe,ye){if(this.workerSources[ae]||(this.workerSources[ae]={}),this.workerSources[ae][oe]||(this.workerSources[ae][oe]={}),!this.workerSources[ae][oe][ye]){const De={sendAsync:(Ve,rt)=>(Ve.targetMapId=ae,this.actor.sendAsync(Ve,rt))};switch(oe){case"vector":this.workerSources[ae][oe][ye]=new P(De,this._getLayerIndex(ae),this._getAvailableImages(ae));break;case"geojson":this.workerSources[ae][oe][ye]=new Br(De,this._getLayerIndex(ae),this._getAvailableImages(ae));break;default:this.workerSources[ae][oe][ye]=new this.externalWorkerSourceTypes[oe](De,this._getLayerIndex(ae),this._getAvailableImages(ae))}}return this.workerSources[ae][oe][ye]}_getDEMWorkerSource(ae,oe){return this.demWorkerSources[ae]||(this.demWorkerSources[ae]={}),this.demWorkerSources[ae][oe]||(this.demWorkerSources[ae][oe]=new D),this.demWorkerSources[ae][oe]}}return f.i(self)&&(self.worker=new _r(self)),_r}),s("index",["exports","./shared"],function(f,a){var y="5.6.0";function v(){var _=new a.A(4);return a.A!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_}let S,P;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(_,i,u){const p=requestAnimationFrame(b=>{m(),i(b)}),{unsubscribe:m}=a.s(_.signal,"abort",()=>{m(),cancelAnimationFrame(p),u(a.c())},!1)},frameAsync(_){return new Promise((i,u)=>{this.frame(_,i,u)})},getImageData(_,i=0){return this.getImageCanvasContext(_).getImageData(-i,-i,_.width+2*i,_.height+2*i)},getImageCanvasContext(_){const i=window.document.createElement("canvas"),u=i.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return i.width=_.width,i.height=_.height,u.drawImage(_,0,0,_.width,_.height),u},resolveURL:_=>(S||(S=document.createElement("a")),S.href=_,S.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}};class E{static testProp(i){if(!E.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in E.docStyle)return i[u];return i[0]}static create(i,u,p){const m=window.document.createElement(i);return u!==void 0&&(m.className=u),p&&p.appendChild(m),m}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(i,u){i.style[E.transformProp]=u}static addEventListener(i,u,p,m={}){i.addEventListener(u,p,"passive"in m?m:m.capture)}static removeEventListener(i,u,p,m={}){i.removeEventListener(u,p,"passive"in m?m:m.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",E.suppressClickInternal,!0)},0)}static getScale(i){const u=i.getBoundingClientRect();return{x:u.width/i.offsetWidth||1,y:u.height/i.offsetHeight||1,boundingClientRect:u}}static getPoint(i,u,p){const m=u.boundingClientRect;return new a.P((p.clientX-m.left)/u.x-i.clientLeft,(p.clientY-m.top)/u.y-i.clientTop)}static mousePos(i,u){const p=E.getScale(i);return E.getPoint(i,p,u)}static touchPos(i,u){const p=[],m=E.getScale(i);for(let b=0;b<u.length;b++)p.push(E.getPoint(i,m,u[b]));return p}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}static sanitize(i){const u=new DOMParser().parseFromString(i,"text/html").body||document.createElement("body"),p=u.querySelectorAll("script");for(const m of p)m.remove();return E.clean(u),u.innerHTML}static isPossiblyDangerous(i,u){const p=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(i)||!p.includes("javascript:")&&!p.includes("data:"))||!!i.startsWith("on")||void 0}static clean(i){const u=i.children;for(const p of u)E.removeAttributes(p),E.clean(p)}static removeAttributes(i){for(const{name:u,value:p}of i.attributes)E.isPossiblyDangerous(u,p)&&i.removeAttribute(u)}}E.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);const F={supported:!1,testSupport:function(_){!$&&W&&(Y?Q(_):z=_)}};let z,W,$=!1,Y=!1;function Q(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,W),_.isContextLost())return;F.supported=!0}catch{}_.deleteTexture(i),$=!0}var K;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{z&&Q(z),z=null,Y=!0},W.onerror=()=>{$=!0,z=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,u,p,m;_.resetRequestQueue=()=>{i=[],u=0,p=0,m={}},_.addThrottleControl=R=>{const B=p++;return m[B]=R,B},_.removeThrottleControl=R=>{delete m[R],C()},_.getImage=(R,B,q=!0)=>new Promise((X,Z)=>{F.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),a.e(R,{type:"image"}),i.push({abortController:B,requestParameters:R,supportImageRefresh:q,state:"queued",onError:ee=>{Z(ee)},onSuccess:ee=>{X(ee)}}),C()});const b=R=>a._(this,void 0,void 0,function*(){R.state="running";const{requestParameters:B,supportImageRefresh:q,onError:X,onSuccess:Z,abortController:ee}=R,he=q===!1&&!a.i(self)&&!a.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce((Me,Be)=>Me&&Be==="accept",!0));u++;const Ie=he?I(B,ee):a.m(B,ee);try{const Me=yield Ie;delete R.abortController,R.state="completed",Me.data instanceof HTMLImageElement||a.b(Me.data)?Z(Me):Me.data&&Z({data:yield(Pe=Me.data,typeof createImageBitmap=="function"?a.f(Pe):a.h(Pe)),cacheControl:Me.cacheControl,expires:Me.expires})}catch(Me){delete R.abortController,X(Me)}finally{u--,C()}var Pe}),C=()=>{const R=(()=>{for(const B of Object.keys(m))if(m[B]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=u;B<R&&i.length>0;B++){const q=i.shift();q.abortController.signal.aborted?B--:b(q)}},I=(R,B)=>new Promise((q,X)=>{const Z=new Image,ee=R.url,he=R.credentials;he&&he==="include"?Z.crossOrigin="use-credentials":(he&&he==="same-origin"||!a.d(ee))&&(Z.crossOrigin="anonymous"),B.signal.addEventListener("abort",()=>{Z.src="",X(a.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,q({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,B.signal.aborted||X(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=ee})}(K||(K={})),K.resetRequestQueue();class xe{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function de(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const u=[];for(const{id:p,url:m}of _){const b=`${p}${m}`;u.indexOf(b)===-1&&(u.push(b),i.push({id:p,url:m}))}}return i}function be(_,i,u){try{const p=new URL(_);return p.pathname+=`${i}${u}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${_}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function me(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class ve extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(i){const u=this.images[i];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new a.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let p=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${i}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${i}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new a.k(new Error(`Image "${i}" has invalid "content" value`))),p=!1),p}_validateStretch(i,u){if(!i)return!0;let p=0;for(const m of i){if(m[0]<p||m[1]<m[0]||u<m[1])return!1;p=m[1]}return!0}_validateContent(i,u){if(!i)return!0;if(i.length!==4)return!1;const p=u.spriteData,m=p&&p.width||u.data.width,b=p&&p.height||u.data.height;return!(i[0]<0||m<i[0]||i[1]<0||b<i[1]||i[2]<0||m<i[2]||i[3]<0||b<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,u,p=!0){const m=this.getImage(i);if(p&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((u,p)=>{let m=!0;if(!this.isLoaded())for(const b of i)this.images[b]||(m=!1);this.isLoaded()||m?u(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:u})})}_getImagesForIds(i){const u={};for(const p of i){let m=this.getImage(p);m||(this.fire(new a.l("styleimagemissing",{id:p})),m=this.getImage(p)),m?u[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],p=this.getImage(i);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new a.I(m,p);this.patterns[i]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const b in this.patterns)i.push(this.patterns[b].bin);const{w:u,h:p}=a.p(i),m=this.atlasImage;m.resize({width:u||1,height:p||1});for(const b in this.patterns){const{bin:C}=this.patterns[b],I=C.x+1,R=C.y+1,B=this.getImage(b).data,q=B.width,X=B.height;a.R.copy(B,m,{x:0,y:0},{x:I,y:R},{width:q,height:X}),a.R.copy(B,m,{x:0,y:X-1},{x:I,y:R-1},{width:q,height:1}),a.R.copy(B,m,{x:0,y:0},{x:I,y:R+X},{width:q,height:1}),a.R.copy(B,m,{x:q-1,y:0},{x:I-1,y:R},{width:1,height:X}),a.R.copy(B,m,{x:0,y:0},{x:I+q,y:R},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||a.w(`Image with ID: "${u}" was not found`),me(p)&&this.updateImage(u,p)}}}const Re=1e20;function le(_,i,u,p,m,b,C,I,R){for(let B=i;B<i+p;B++)G(_,u*b+B,b,m,C,I,R);for(let B=u;B<u+m;B++)G(_,B*b+i,1,p,C,I,R)}function G(_,i,u,p,m,b,C){b[0]=0,C[0]=-1e20,C[1]=Re,m[0]=_[i];for(let I=1,R=0,B=0;I<p;I++){m[I]=_[i+I*u];const q=I*I;do{const X=b[R];B=(m[I]-m[X]+q-X*X)/(I-X)/2}while(B<=C[R]&&--R>-1);R++,b[R]=I,C[R]=B,C[R+1]=Re}for(let I=0,R=0;I<p;I++){for(;C[R+1]<I;)R++;const B=b[R],q=I-B;_[i+I*u]=m[B]+q*q}}class Ae{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return a._(this,void 0,void 0,function*(){const u=[];for(const b in i)for(const C of i[b])u.push(this._getAndCacheGlyphsPromise(b,C));const p=yield Promise.all(u),m={};for(const{stack:b,id:C,glyph:I}of p)m[b]||(m[b]={}),m[b][C]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return m})}_getAndCacheGlyphsPromise(i,u){return a._(this,void 0,void 0,function*(){let p=this.entries[i];p||(p=this.entries[i]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[u];if(m!==void 0)return{stack:i,id:u,glyph:m};if(m=this._tinySDF(p,i,u),m)return p.glyphs[u]=m,{stack:i,id:u,glyph:m};const b=Math.floor(u/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[b])return{stack:i,id:u,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[b]){const I=Ae.loadGlyphRange(i,b,this.url,this.requestManager);p.requests[b]=I}const C=yield p.requests[b];for(const I in C)this._doesCharSupportLocalGlyph(+I)||(p.glyphs[+I]=C[+I]);return p.ranges[b]=!0,{stack:i,id:u,glyph:C[u]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))||a.u["CJK Unified Ideographs"](i)||a.u["Hangul Syllables"](i)||a.u.Hiragana(i)||a.u.Katakana(i)||a.u["CJK Symbols and Punctuation"](i)||a.u["Halfwidth and Fullwidth Forms"](i))}_tinySDF(i,u,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let b=i.tinySDF;if(!b){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),b=i.tinySDF=new Ae.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:I})}const C=b.draw(String.fromCharCode(p));return{id:p,bitmap:new a.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}Ae.loadGlyphRange=function(_,i,u,p){return a._(this,void 0,void 0,function*(){const m=256*i,b=m+255,C=p.transformRequest(u.replace("{fontstack}",_).replace("{range}",`${m}-${b}`),"Glyphs"),I=yield a.n(C,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${i}, ${m}-${b}`);const R={};for(const B of a.o(I.data))R[B.id]=B;return R})},Ae.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:u=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=p,this.radius=u;const I=this.size=_+4*i,R=this._createCanvas(I),B=this.ctx=R.getContext("2d",{willReadFrequently:!0});B.font=`${C} ${b} ${_}px ${m}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(_),C=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-m))),R=Math.min(this.size-this.buffer,C+Math.ceil(p)),B=I+2*this.buffer,q=R+2*this.buffer,X=Math.max(B*q,0),Z=new Uint8ClampedArray(X),ee={data:Z,width:B,height:q,glyphWidth:I,glyphHeight:R,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(I===0||R===0)return ee;const{ctx:he,buffer:Ie,gridInner:Pe,gridOuter:Me}=this;he.clearRect(Ie,Ie,I,R),he.fillText(_,Ie,Ie+C);const Be=he.getImageData(Ie,Ie,I,R);Me.fill(Re,0,X),Pe.fill(0,0,X);for(let Ke=0;Ke<R;Ke++)for(let He=0;He<I;He++){const et=Be.data[4*(Ke*I+He)+3]/255;if(et===0)continue;const at=(Ke+Ie)*B+He+Ie;if(et===1)Me[at]=0,Pe[at]=Re;else{const Ge=.5-et;Me[at]=Ge>0?Ge*Ge:0,Pe[at]=Ge<0?Ge*Ge:0}}le(Me,0,0,B,q,B,this.f,this.v,this.z),le(Pe,Ie,Ie,I,R,B,this.f,this.v,this.z);for(let Ke=0;Ke<X;Ke++){const He=Math.sqrt(Me[Ke])-Math.sqrt(Pe[Ke]);Z[Ke]=Math.round(255-255*(He/this.radius+this.cutoff))}return ee}};class we{constructor(){this.specification=a.v.light.position}possiblyEvaluate(i,u){return a.B(i.expression.evaluate(u))}interpolate(i,u,p){return{x:a.C.number(i.x,u.x,p),y:a.C.number(i.y,u.y,p),z:a.C.number(i.z,u.z,p)}}}let lt;class pt extends a.E{constructor(i){super(),lt=lt||new a.r({anchor:new a.D(a.v.light.anchor),position:new we,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(lt),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(a.x,i,u))for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p){return(!p||p.validate!==!1)&&a.y(this,i.call(a.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}const At=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Ze extends a.E{constructor(i){super(),this._transitionable=new a.t(At),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(i,u={}){if(!this._validate(a.G,i,u)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in i){const m=i[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,p={}){return(p==null?void 0:p.validate)!==!1&&a.y(this,i.call(a.z,a.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class tt{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const p=i.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(i,u)),this.dashEntry[p]}getDashRanges(i,u,p){const m=[];let b=i.length%2==1?-i[i.length-1]*p:0,C=i[0]*p,I=!0;m.push({left:b,right:C,isDash:I,zeroLength:i[0]===0});let R=i[0];for(let B=1;B<i.length;B++){I=!I;const q=i[B];b=R*p,R+=q,C=R*p,m.push({left:b,right:C,isDash:I,zeroLength:q===0})}return m}addRoundDash(i,u,p){const m=u/2;for(let b=-p;b<=p;b++){const C=this.width*(this.nextRow+p+b);let I=0,R=i[I];for(let B=0;B<this.width;B++){B/R.right>1&&(R=i[++I]);const q=Math.abs(B-R.left),X=Math.abs(B-R.right),Z=Math.min(q,X);let ee;const he=b/p*(m+1);if(R.isDash){const Ie=m-Math.abs(he);ee=Math.sqrt(Z*Z+Ie*Ie)}else ee=m-Math.sqrt(Z*Z+he*he);this.data[C+B]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(i){for(let I=i.length-1;I>=0;--I){const R=i[I],B=i[I+1];R.zeroLength?i.splice(I,1):B&&B.isDash===R.isDash&&(B.left=R.left,i.splice(I,1))}const u=i[0],p=i[i.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const m=this.width*this.nextRow;let b=0,C=i[b];for(let I=0;I<this.width;I++){I/C.right>1&&(C=i[++b]);const R=Math.abs(I-C.left),B=Math.abs(I-C.right),q=Math.min(R,B);this.data[m+I]=Math.max(0,Math.min(255,(C.isDash?q:-q)+128))}}addDash(i,u){const p=u?7:0,m=2*p+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let b=0;for(let I=0;I<i.length;I++)b+=i[I];if(b!==0){const I=this.width/b,R=this.getDashRanges(i,this.width,I);u?this.addRoundDash(R,I,p):this.addRegularDash(R)}const C={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=m,this.dirty=!0,C}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Ot="maplibre_preloaded_worker_pool";class St{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ot]}numActive(){return Object.keys(this.active).length}}const ne=Math.floor(D.hardwareConcurrency/2);let Ee,Ne;function qe(){return Ee||(Ee=new St),Ee}St.workerCount=a.H(globalThis)?Math.max(Math.min(ne,3),1):1;class Je{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let m=0;m<p.length;m++){const b=new a.J(p[m],u);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:i,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,u){for(const p of this.actors)p.registerMessageHandler(i,u)}}function gt(){return Ne||(Ne=new Je(qe(),a.K),Ne.registerMessageHandler("GR",(_,i,u)=>a.m(i,u))),Ne}function bt(_,i){const u=a.L();return a.M(u,u,[1,1,0]),a.N(u,u,[.5*_.width,.5*_.height,1]),_.calculatePosMatrix?a.O(u,u,_.calculatePosMatrix(i.toUnwrapped())):u}function ft(_,i,u,p,m,b,C){var I;const R=function(Z,ee,he){if(Z)for(const Ie of Z){const Pe=ee[Ie];if(Pe&&Pe.source===he&&Pe.type==="fill-extrusion")return!0}else for(const Ie in ee){const Pe=ee[Ie];if(Pe.source===he&&Pe.type==="fill-extrusion")return!0}return!1}((I=m==null?void 0:m.layers)!==null&&I!==void 0?I:null,i,_.id),B=b.maxPitchScaleFactor(),q=_.tilesIn(p,B,R);q.sort(Ct);const X=[];for(const Z of q)X.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(i,u,_._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,m,b,B,bt(_.transform,Z.tileID),C?(ee,he)=>C(Z.tileID,ee,he):void 0)});return function(Z,ee){for(const he in Z)for(const Ie of Z[he])Ut(Ie,ee);return Z}(function(Z){const ee={},he={};for(const Ie of Z){const Pe=Ie.queryResults,Me=Ie.wrappedTileID,Be=he[Me]=he[Me]||{};for(const Ke in Pe){const He=Pe[Ke],et=Be[Ke]=Be[Ke]||{},at=ee[Ke]=ee[Ke]||[];for(const Ge of He)et[Ge.featureIndex]||(et[Ge.featureIndex]=!0,at.push(Ge))}}return ee}(X),_)}function Ct(_,i){const u=_.tileID,p=i.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function Ut(_,i){const u=_.feature,p=i.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=p}function gr(_,i,u){return a._(this,void 0,void 0,function*(){let p=_;if(_.url?p=(yield a.j(i.transformRequest(_.url,"Source"),u)).data:yield D.frameAsync(u),!p)return null;const m=a.Q(a.e(p,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(b=>b.id)),m})}class rr{constructor(i,u){i&&(u?this.setSouthWest(i).setNorthEast(u):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof a.S?new a.S(i.lng,i.lat):a.S.convert(i),this}setSouthWest(i){return this._sw=i instanceof a.S?new a.S(i.lng,i.lat):a.S.convert(i),this}extend(i){const u=this._sw,p=this._ne;let m,b;if(i instanceof a.S)m=i,b=i;else{if(!(i instanceof rr))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(rr.convert(i)):this.extend(a.S.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(a.S.convert(i)):this;if(m=i._sw,b=i._ne,!m||!b)return this}return u||p?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),p.lng=Math.max(b.lng,p.lng),p.lat=Math.max(b.lat,p.lat)):(this._sw=new a.S(m.lng,m.lat),this._ne=new a.S(b.lng,b.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:u,lat:p}=a.S.convert(i);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(i){return i instanceof rr?i:i&&new rr(i)}static fromLngLat(i,u=0){const p=360*u/40075017,m=p/Math.cos(Math.PI/180*i.lat);return new rr(new a.S(i.lng-m,i.lat-p),new a.S(i.lng+m,i.lat+p))}adjustAntiMeridian(){const i=new a.S(this._sw.lng,this._sw.lat),u=new a.S(this._ne.lng,this._ne.lat);return new rr(i,i.lng>u.lng?new a.S(u.lng+360,u.lat):u)}}class It{constructor(i,u,p){this.bounds=rr.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),p=Math.floor(a.V(this.bounds.getWest())*u),m=Math.floor(a.U(this.bounds.getNorth())*u),b=Math.ceil(a.V(this.bounds.getEast())*u),C=Math.ceil(a.U(this.bounds.getSouth())*u);return i.x>=p&&i.x<b&&i.y>=m&&i.y<C}}class Ue extends a.E{constructor(i,u,p,m){if(super(),this.id=i,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(u,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield gr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(a.e(this,i),i.bounds&&(this.tileBounds=new It(i.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new a.k(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(i){return a._(this,void 0,void 0,function*(){const u=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((b,C)=>{i.reloadPromise={resolve:b,reject:C}})}else i.actor=this.dispatcher.getActor(),m="LT";i.abortController=new AbortController;try{const b=yield i.actor.sendAsync({type:m,data:p},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,b)}catch(b){if(delete i.abortController,i.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,u){if(u&&u.resourceTiming&&(i.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&i.setExpiryData(u),i.loadVectorData(u,this.map.painter),i.reloadPromise){const p=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(p.resolve).catch(p.reject)}}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Lr extends a.E{constructor(i,u,p,m){super(),this.id=i,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},u),a.e(this,a.Q(u,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(i=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield gr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(a.e(this,u),u.bounds&&(this.tileBounds=new It(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:i})))}catch(u){this._tileJSONRequest=null,this.fire(new a.k(u))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load(!0)}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return a.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return a._(this,void 0,void 0,function*(){const u=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const p=yield K.getImage(this.map._requestManager.transformRequest(u,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,b=m.gl,C=p.data;i.texture=this.map.painter.getTileTexture(C.width),i.texture?i.texture.update(C,{useMipmap:!0}):(i.texture=new a.T(m,C,b.RGBA,{useMipmap:!0}),i.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class Nr extends Lr{constructor(i,u,p,m){super(i,u,p,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(i){return a._(this,void 0,void 0,function*(){const u=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const m=yield K.getImage(p,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(m&&m.data){const b=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&i.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const C=a.b(b)&&a.W()?b:yield this.readImageNow(b),I={type:this.type,uid:i.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const R=yield i.actor.sendAsync({type:"LDT",data:I});i.dem=R,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(m){if(delete i.abortController,i.aborted)i.state="unloaded";else if(m)throw i.state="errored",m}})}readImageNow(i){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&a.X()){const u=i.width+2,p=i.height+2;try{return new a.R({width:u,height:p},yield a.Y(i,-1,-1,u,p))}catch{}}return D.getImageData(i,1)})}_getNeighboringTiles(i){const u=i.canonical,p=Math.pow(2,u.z),m=(u.x-1+p)%p,b=u.x===0?i.wrap-1:i.wrap,C=(u.x+1+p)%p,I=u.x+1===p?i.wrap+1:i.wrap,R={};return R[new a.Z(i.overscaledZ,b,u.z,m,u.y).key]={backfilled:!1},R[new a.Z(i.overscaledZ,I,u.z,C,u.y).key]={backfilled:!1},u.y>0&&(R[new a.Z(i.overscaledZ,b,u.z,m,u.y-1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,I,u.z,C,u.y-1).key]={backfilled:!1}),u.y+1<p&&(R[new a.Z(i.overscaledZ,b,u.z,m,u.y+1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},R[new a.Z(i.overscaledZ,I,u.z,C,u.y+1).key]={backfilled:!1}),R}unloadTile(i){return a._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Pr extends a.E{constructor(i,u,p,m){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=u.data,this._options=a.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(i){return i*(a.$/this.tileSize)}_getClusterMaxZoom(i){const u=i?Math.round(i):this.maxzoom-1;return Number.isInteger(i)||i===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${i}" rounded to "${u}"`),u}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return a._(this,void 0,void 0,function*(){const i=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}getCoordinatesFromGeometry(i){return i.type==="GeometryCollection"?i.geometries.map(u=>u.coordinates).flat(1/0):i.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){const i=new rr,u=yield this.getData();let p;switch(u.type){case"FeatureCollection":p=u.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(u.geometry);break;default:p=this.getCoordinatesFromGeometry(u)}if(p.length==0)return i;for(let m=0;m<p.length-1;m+=2)i.extend([p[m],p[m+1]]);return i})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(i.clusterRadius)),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(i.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:u,offset:p}})}_updateWorkerData(i){return a._(this,void 0,void 0,function*(){const u=a.e({type:this.type},this.workerOptions);i?u.dataDiff=i:typeof this._data=="string"?(u.request=this.map._requestManager.transformRequest(D.resolveURL(this._data),"Source"),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:u});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const b={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&a.e(b,{resourceTiming:m}),this.fire(new a.l("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(p))}})}loaded(){return this._pendingLoads===0}loadTile(i){return a._(this,void 0,void 0,function*(){const u=i.actor?"RT":"LT";i.actor=this.actor;const p={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};i.abortController=new AbortController;const m=yield this.actor.sendAsync({type:u,data:p},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(m,this.map.painter,u==="RT")})}abortTile(i){return a._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return a._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Ht extends a.E{constructor(i,u,p,m){super(),this.flippedWindingOrder=!1,this.id=i,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(i){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield K.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,i&&(this.coordinates=i),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new a.k(u))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const u=i.map(a.a0.fromLngLat);var p;return this.tileID=function(m){const b=a.a1.fromPoints(m),C=b.width(),I=b.height(),R=Math.max(C,I),B=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),q=Math.pow(2,B);return new a.a3(B,Math.floor((b.minX+b.maxX)/2*q),Math.floor((b.minY+b.maxY)/2*q))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.texture||(this.texture=new a.T(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(i){const{minX:u,minY:p,maxX:m,maxY:b}=a.a1.fromPoints(i),C={};for(let I=0;I<=a.a2;I++){const R=Math.pow(2,I),B=Math.floor(u*R),q=Math.floor(p*R),X=Math.floor(m*R),Z=Math.floor(b*R);C[I]={minTileX:B,minTileY:q,maxTileX:X,maxTileY:Z}}return C}}class Er extends Ht{constructor(i,u,p,m){super(i,u,p,m),this.roundZoom=!0,this.type="video",this.options=u}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield a.a4(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new a.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new a.k(new a.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,p=!0)}p&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class vr extends Ht{constructor(i,u,p,m){super(i,u,p,m),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(C=>typeof C!="number"))||this.fire(new a.k(new a.a5(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.k(new a.a5(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.k(new a.a5(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a5(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.k(new a.a5(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,p=u.gl;this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(u,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const b in this.tiles){const C=this.tiles[b];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const dr={},qr=_=>{switch(_){case"geojson":return Pr;case"image":return Ht;case"raster":return Lr;case"raster-dem":return Nr;case"vector":return Ue;case"video":return Er;case"canvas":return vr}return dr[_]},En="RTLPluginLoaded";class cn extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=gt()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return a._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(En))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Jr=null;function An(){return Jr||(Jr=new cn),Jr}class en{constructor(i,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=a.a6(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,b){const C={};if(!b)return C;for(const I of m){const R=I.layerIds.map(B=>b.getLayer(B)).filter(Boolean);if(R.length!==0){I.layers=R,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(B=>R.filter(q=>q.id===B)[0]));for(const B of R)C[B.id]=I}}return C}(i.buckets,u==null?void 0:u.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const b=this.buckets[m];if(b instanceof a.a8){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const b=this.buckets[m];if(b instanceof a.a8&&b.hasRTLText){this.hasRTLText=!0,An().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(b))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.a7}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,p,m,b,C,I,R,B,q,X){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:C,tileSize:this.tileSize,pixelPosMatrix:q,transform:R,params:I,queryPadding:this.queryPadding*B,getElevation:X},i,u,p):{}}querySourceFeatures(i,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),b=u&&u.sourceLayer?u.sourceLayer:"",C=m._geojsonTileLayer||m[b];if(!C)return;const I=a.a9(u&&u.filter),{z:R,x:B,y:q}=this.tileID.canonical,X={z:R,x:B,y:q};for(let Z=0;Z<C.length;Z++){const ee=C.feature(Z);if(I.needGeometry){const Pe=a.aa(ee,!0);if(!I.filter(new a.F(this.tileID.overscaledZ),Pe,this.tileID.canonical))continue}else if(!I.filter(new a.F(this.tileID.overscaledZ),ee))continue;const he=p.getId(ee,b),Ie=new a.ab(ee,R,B,q,he);Ie.tile=X,i.push(Ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const p=a.ac(i.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const b=this.expirationTime-u;b?this.expirationTime=p+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const b=this.buckets[m],C=b.layers[0].sourceLayer||"_geojsonTileLayer",I=p[C],R=i[C];if(!I||!R||Object.keys(R).length===0)continue;b.update(R,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=u&&u.style&&u.style.getLayer(m);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(b)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=D.now()+i}setDependencies(i,u){const p={};for(const m of u)p[m]=!0;this.dependencies[i]=p}hasDependency(i,u){for(const p of i){const m=this.dependencies[p];if(m){for(const b of u)if(m[b])return!0}}return!1}}class Ur{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,p){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const b={value:u,timeout:void 0};if(p!==void 0&&(b.timeout=setTimeout(()=>{this.remove(i,b)},p)),this.data[m].push(b),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const p=i.wrapped().key,m=u===void 0?0:this.data[p].indexOf(u),b=this.data[p][m];return this.data[p].splice(m,1),b.timeout&&clearTimeout(b.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const p in this.data)for(const m of this.data[p])i(m.value)||u.push(m);for(const p of u)this.remove(p.value.tileID,p)}}class Br{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,p){const m=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},a.e(this.stateChanges[i][m],p),this.deletedStates[i]===null){this.deletedStates[i]={};for(const b in this.state[i])b!==m&&(this.deletedStates[i][b]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const b in this.state[i][m])p[b]||(this.deletedStates[i][m][b]=null)}else for(const b in p)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][b]===null&&delete this.deletedStates[i][m][b]}removeFeatureState(i,u,p){if(this.deletedStates[i]===null)return;const m=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},p&&u!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][p]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(p in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][p]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,u){const p=String(u),m=a.e({},(this.state[i]||{})[p],(this.stateChanges[i]||{})[p]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const b=this.deletedStates[i][u];if(b===null)return{};for(const C in b)delete m[C]}return m}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const b={};for(const C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),a.e(this.state[m][C],this.stateChanges[m][C]),b[C]=this.state[m][C];p[m]=b}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const b={};if(this.deletedStates[m]===null)for(const C in this.state[m])b[C]={},this.state[m][C]={};else for(const C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(const I of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][I];b[C]=this.state[m][C]}p[m]=p[m]||{},a.e(p[m],b)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in i)i[m].setFeatureState(p,u)}}const _r=89.25;function ot(_,i){const u=a.ag(i.lat,-85.051129,a.ah);return new a.P(a.V(i.lng)*_,a.U(u)*_)}function ae(_,i){return new a.a0(i.x/_,i.y/_).toLngLat()}function oe(_){return _.cameraToCenterDistance*Math.min(.85*Math.tan(a.ad(90-_.pitch)),Math.tan(a.ad(_r-_.pitch)))}function ye(_,i){const u=_.canonical,p=i/a.ae(u.z),m=u.x+Math.pow(2,u.z)*_.wrap,b=a.af(new Float64Array(16));return a.M(b,b,[m*p,u.y*p,0]),a.N(b,b,[p/a.$,p/a.$,1]),b}function De(_,i,u,p,m){const b=a.a0.fromLngLat(_,i),C=m*a.ai(1,_.lat),I=C*Math.cos(a.ad(u)),R=Math.sqrt(C*C-I*I),B=R*Math.sin(a.ad(-p)),q=R*Math.cos(a.ad(-p));return new a.a0(b.x+B,b.y+q,b.z+I)}function Ve(_,i,u){const p=i.intersectsFrustum(_);if(!u||p===0)return p;const m=i.intersectsPlane(u);return m===0?0:p===2&&m===2?2:1}function rt(_,i,u){let p=0;const m=(u-i)/10;for(let b=0;b<10;b++)p+=m*Math.pow(Math.cos(i+(b+.5)/10*(u-i)),_);return p}function ht(_,i){return function(u,p,m,b,C){const I=2*((_-1)/a.aj(Math.cos(a.ad(_r-C))/Math.cos(a.ad(_r)))-1),R=Math.acos(m/b),B=2*rt(I-1,0,a.ad(C/2)),q=Math.min(a.ad(_r),R+a.ad(C/2)),X=rt(I-1,Math.min(q,R-a.ad(C/2)),q),Z=Math.atan(p/m),ee=Math.hypot(p,m);let he=u;return he+=a.aj(b/ee/Math.max(.5,Math.cos(a.ad(C/2)))),he+=I*a.aj(Math.cos(Z))/2,he-=a.aj(Math.max(1,X/B/i))/2,he}}const ct=ht(9.314,3);function Lt(_,i){const u=(i.roundZoom?Math.round:Math.floor)(_.zoom+a.aj(_.tileSize/i.tileSize));return Math.max(0,u)}function wt(_,i){const u=_.getCameraFrustum(),p=_.getClippingPlane(),m=_.screenPointToMercatorCoordinate(_.getCameraPoint()),b=a.a0.fromLngLat(_.center,_.elevation);m.z=b.z+Math.cos(_.pitchInRadians)*_.cameraToCenterDistance/_.worldSize;const C=_.getCoveringTilesDetailsProvider(),I=C.allowVariableZoom(_,i),R=Lt(_,i),B=i.minzoom||0,q=i.maxzoom!==void 0?i.maxzoom:_.maxZoom,X=Math.min(Math.max(0,R),q),Z=Math.pow(2,X),ee=[Z*m.x,Z*m.y,0],he=[Z*b.x,Z*b.y,0],Ie=Math.hypot(b.x-m.x,b.y-m.y),Pe=Math.abs(b.z-m.z),Me=Math.hypot(Ie,Pe),Be=et=>({zoom:0,x:0,y:0,wrap:et,fullyVisible:!1}),Ke=[],He=[];if(_.renderWorldCopies&&C.allowWorldCopies())for(let et=1;et<=3;et++)Ke.push(Be(-et)),Ke.push(Be(et));for(Ke.push(Be(0));Ke.length>0;){const et=Ke.pop(),at=et.x,Ge=et.y;let mt=et.fullyVisible;const Nt={x:at,y:Ge,z:et.zoom},Mt=C.getTileBoundingVolume(Nt,et.wrap,_.elevation,i);if(!mt){const mr=Ve(u,Mt,p);if(mr===0)continue;mt=mr===2}const kt=C.distanceToTile2d(m.x,m.y,Nt,Mt);let zt=R;I&&(zt=(i.calculateTileZoom||ct)(_.zoom+a.aj(_.tileSize/i.tileSize),kt,Pe,Me,_.fov)),zt=(i.roundZoom?Math.round:Math.floor)(zt),zt=Math.max(0,zt);const yr=Math.min(zt,q);if(et.wrap=C.getWrap(b,Nt,et.wrap),et.zoom>=yr){if(et.zoom<B)continue;const mr=X-et.zoom,Kt=ee[0]-.5-(at<<mr),Fr=ee[1]-.5-(Ge<<mr),Nn=i.reparseOverscaled?Math.max(et.zoom,zt):et.zoom;He.push({tileID:new a.Z(et.zoom===q?Nn:et.zoom,et.wrap,et.zoom,at,Ge),distanceSq:a.ak([he[0]-.5-at,he[1]-.5-Ge]),tileDistanceToCamera:Math.sqrt(Kt*Kt+Fr*Fr)})}else for(let mr=0;mr<4;mr++)Ke.push({zoom:et.zoom+1,x:(at<<1)+mr%2,y:(Ge<<1)+(mr>>1),wrap:et.wrap,fullyVisible:mt})}return He.sort((et,at)=>et.distanceSq-at.distanceSq).map(et=>et.tileID)}const st=a.a1.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Ft extends a.E{constructor(i,u,p){super(),this.id=i,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,b,C,I)=>{const R=new(qr(b.type))(m,b,C,I);if(R.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${R.id}`);return R})(i,u,p,this),this._tiles={},this._cache=new Ur(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Br,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u,p){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,u,p)}catch(m){i.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new a.l("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(i),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(it).map(i=>i.key)}getRenderableIds(i){const u=[];for(const p in this._tiles)this._isIdRenderable(p,i)&&u.push(this._tiles[p]);return i?u.sort((p,m)=>{const b=p.tileID,C=m.tileID,I=new a.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians),R=new a.P(C.canonical.x,C.canonical.y)._rotate(-this.transform.bearingInRadians);return b.overscaledZ-C.overscaledZ||R.y-I.y||R.x-I.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(it).map(p=>p.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(i){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)i?this._reloadTile(u,"expired"):this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(i,u){return a._(this,void 0,void 0,function*(){const p=this._tiles[i];p&&(p.state!=="loading"&&(p.state=u),yield this._loadTile(p,i,u))})}_tileLoaded(i,u,p){i.timeAdded=D.now(),p==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const b=u[m];if(i.neighboringTiles&&i.neighboringTiles[b]){const C=this.getTileByID(b);p(i,C),p(C,i)}}function p(m,b){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=b.tileID.canonical.x-m.tileID.canonical.x;const I=b.tileID.canonical.y-m.tileID.canonical.y,R=Math.pow(2,m.tileID.canonical.z),B=b.tileID.key;C===0&&I===0||Math.abs(I)>1||(Math.abs(C)>1&&(Math.abs(C+R)===1?C+=R:Math.abs(C-R)===1&&(C-=R)),b.dem&&m.dem&&(m.dem.backfillBorder(b.dem,C,I),m.neighboringTiles&&m.neighboringTiles[B]&&(m.neighboringTiles[B].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,p,m){for(const b in this._tiles){let C=this._tiles[b];if(m[b]||!C.hasData()||C.tileID.overscaledZ<=u||C.tileID.overscaledZ>p)continue;let I=C.tileID;for(;C&&C.tileID.overscaledZ>u+1;){const B=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[B.key],C&&C.hasData()&&(I=B)}let R=I;for(;R.overscaledZ>u;)if(R=R.scaledTo(R.overscaledZ-1),i[R.key]||i[R.canonical.key]){m[I.key]=I;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const p=this._loadedParentTiles[i.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=i.overscaledZ-1;p>=u;p--){const m=i.scaledTo(p),b=this._getLoadedTile(m);if(b)return b}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,p=Math.ceil(i.height/this._source.tileSize)+1,m=Math.floor(u*p*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(b)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const p={};for(const m in this._tiles){const b=this._tiles[m];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+u),p[b.tileID.key]=b}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(i,u,p,m,b,C){const I={},R={},B=Object.keys(i),q=D.now();for(const X of B){const Z=i[X],ee=this._tiles[X];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=q)continue;const he=this.findLoadedParent(Z,u),Ie=this.findLoadedSibling(Z),Pe=he||Ie||null;Pe&&(this._addTile(Pe.tileID),I[Pe.tileID.key]=Pe.tileID),R[X]=Z}this._retainLoadedChildren(R,m,p,i);for(const X in I)i[X]||(this._coveredTiles[X]=!0,i[X]=I[X]);if(C){const X={},Z={};for(const ee of b)this._tiles[ee.key].hasData()?X[ee.key]=ee:Z[ee.key]=ee;for(const ee in Z){const he=Z[ee].children(this._source.maxzoom);this._tiles[he[0].key]&&this._tiles[he[1].key]&&this._tiles[he[2].key]&&this._tiles[he[3].key]&&(X[he[0].key]=i[he[0].key]=he[0],X[he[1].key]=i[he[1].key]=he[1],X[he[2].key]=i[he[2].key]=he[2],X[he[3].key]=i[he[3].key]=he[3],delete Z[ee])}for(const ee in Z){const he=Z[ee],Ie=this.findLoadedParent(he,this._source.minzoom),Pe=this.findLoadedSibling(he),Me=Ie||Pe||null;if(Me){X[Me.tileID.key]=i[Me.tileID.key]=Me.tileID;for(const Be in X)X[Be].isChildOf(Me.tileID)&&delete X[Be]}}for(const ee in this._tiles)X[ee]||(this._coveredTiles[ee]=!0)}}update(i,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=i,this.terrain=u,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(q=>new a.Z(q.canonical.z,q.wrap,q.canonical.z,q.canonical.x,q.canonical.y)):(p=wt(i,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(q=>this._source.hasTile(q)))):p=[];const m=Lt(i,this._source),b=Math.max(m-Ft.maxOverzooming,this._source.minzoom),C=Math.max(m+Ft.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const q={};for(const X of p)if(X.canonical.z>this._source.minzoom){const Z=X.scaledTo(X.canonical.z-1);q[Z.key]=Z;const ee=X.scaledTo(Math.max(this._source.minzoom,Math.min(X.canonical.z,5)));q[ee.key]=ee}p=p.concat(Object.values(q))}const I=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const R=this._updateRetainedTiles(p,m);hr(this._source.type)&&this._updateCoveredAndRetainedTiles(R,b,C,m,p,u);for(const q in R)this._tiles[q].clearFadeHold();const B=a.al(this._tiles,R);for(const q of B){const X=this._tiles[q];X.hasSymbolBuckets&&!X.holdingForFade()?X.setHoldDuration(this.map._fadeDuration):X.hasSymbolBuckets&&!X.symbolFadeFinished()||this._removeTile(q)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){var p;const m={},b={},C=Math.max(u-Ft.maxOverzooming,this._source.minzoom),I=Math.max(u+Ft.maxUnderzooming,this._source.minzoom),R={};for(const B of i){const q=this._addTile(B);m[B.key]=B,q.hasData()||u<this._source.maxzoom&&(R[B.key]=B)}this._retainLoadedChildren(R,u,I,m);for(const B of i){let q=this._tiles[B.key];if(q.hasData())continue;if(u+1>this._source.maxzoom){const Z=B.children(this._source.maxzoom)[0],ee=this.getTile(Z);if(ee&&ee.hasData()){m[Z.key]=Z;continue}}else{const Z=B.children(this._source.maxzoom);if(m[Z[0].key]&&m[Z[1].key]&&m[Z[2].key]&&m[Z[3].key])continue}let X=q.wasRequested();for(let Z=B.overscaledZ-1;Z>=C;--Z){const ee=B.scaledTo(Z);if(b[ee.key])break;if(b[ee.key]=!0,q=this.getTile(ee),!q&&X&&(q=this._addTile(ee)),q){const he=q.hasData();if((he||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||X)&&(m[ee.key]=ee),X=q.wasRequested(),he)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let p,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}u.push(m.key);const b=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;m=b}for(const b of u)this._loadedParentTiles[b]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const u=this._tiles[i].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const p=u;return u||(u=new en(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,i.key,u.state)),u.uses++,this._tiles[i.key]=u,p||this._source.fire(new a.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const p=u.getExpiryTimeout();p&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},p))}refreshTiles(i){for(const u in this._tiles)(this._isIdRenderable(u)||this._tiles[u].state=="errored")&&i.some(p=>p.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(i){const u=i.sourceDataType;i.dataType==="source"&&u==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&u==="content"&&(this.reload(i.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,p){const m=[],b=this.transform;if(!b)return m;const C=b.getCoveringTilesDetailsProvider().allowWorldCopies(),I=p?b.getCameraQueryGeometry(i):i,R=ee=>b.screenPointToMercatorCoordinate(ee,this.terrain),B=this.transformBbox(i,R,!C),q=this.transformBbox(I,R,!C),X=this.getIds(),Z=a.a1.fromPoints(q);for(let ee=0;ee<X.length;ee++){const he=this._tiles[X[ee]];if(he.holdingForFade())continue;const Ie=C?[he.tileID]:[he.tileID.unwrapTo(-1),he.tileID.unwrapTo(0)],Pe=Math.pow(2,b.zoom-he.tileID.overscaledZ),Me=u*he.queryPadding*a.$/he.tileSize/Pe;for(const Be of Ie){const Ke=Z.map(He=>Be.getTilePoint(new a.a0(He.x,He.y)));if(Ke.expandBy(Me),Ke.intersects(st)){const He=B.map(at=>Be.getTilePoint(at)),et=q.map(at=>Be.getTilePoint(at));m.push({tile:he,tileID:C?Be:Be.unwrapTo(0),queryGeometry:He,cameraQueryGeometry:et,scale:Pe})}}}return m}transformBbox(i,u,p){let m=i.map(u);if(p){const b=a.a1.fromPoints(i);b.shrinkBy(.001*Math.min(b.width(),b.height()));const C=b.map(u);a.a1.fromPoints(m).covers(C)||(m=m.map(I=>I.x>.5?new a.a0(I.x-1,I.y,I.z):I))}return m}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(hr(this._source.type)){const i=D.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=i)return!0}return!1}setFeatureState(i,u,p){this._state.updateState(i=i||"_geojsonTileLayer",u,p)}removeFeatureState(i,u,p){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,p)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,p){const m=this._tiles[i];m&&m.setDependencies(u,p)}reloadTilesForDependencies(i,u){for(const p in this._tiles)this._tiles[p].hasDependency(i,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(i,u))}}function it(_,i){const u=Math.abs(2*_.wrap)-+(_.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||p-u||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function hr(_){return _==="raster"||_==="image"||_==="video"}Ft.maxOverzooming=10,Ft.maxUnderzooming=3;class Xr{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.ag(i,0,1);let u=1,p=this._distances[u];const m=i*this.paddedLength+this.padding;for(;p<m&&u<this._distances.length;)p=this._distances[++u];const b=u-1,C=this._distances[b],I=p-C,R=I>0?(m-C)/I:0;return this.points[b].mult(1-R).add(this.points[u].mult(R))}}function wr(_,i){let u=!0;return _==="always"||_!=="never"&&i!=="never"||(u=!1),u}class er{constructor(i,u,p){const m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(i/p),this.yCellCount=Math.ceil(u/p);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,p,m,b){this._forEachCell(u,p,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(i,u,p,m){this._forEachCell(u-m,p-m,u+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(p),this.circles.push(m)}_insertBoxCell(i,u,p,m,b,C){this.boxCells[b].push(C)}_insertCircleCell(i,u,p,m,b,C){this.circleCells[b].push(C)}_query(i,u,p,m,b,C,I){if(p<0||i>this.width||m<0||u>this.height)return[];const R=[];if(i<=0&&u<=0&&this.width<=p&&this.height<=m){if(b)return[{key:null,x1:i,y1:u,x2:p,y2:m}];for(let B=0;B<this.boxKeys.length;B++)R.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const q=this.circles[3*B],X=this.circles[3*B+1],Z=this.circles[3*B+2];R.push({key:this.circleKeys[B],x1:q-Z,y1:X-Z,x2:q+Z,y2:X+Z})}}else this._forEachCell(i,u,p,m,this._queryCell,R,{hitTest:b,overlapMode:C,seenUids:{box:{},circle:{}}},I);return R}query(i,u,p,m){return this._query(i,u,p,m,!1,null)}hitTest(i,u,p,m,b,C){return this._query(i,u,p,m,!0,b,C).length>0}hitTestCircle(i,u,p,m,b){const C=i-p,I=i+p,R=u-p,B=u+p;if(I<0||C>this.width||B<0||R>this.height)return!1;const q=[];return this._forEachCell(C,R,I,B,this._queryCellCircle,q,{hitTest:!0,overlapMode:m,circle:{x:i,y:u,radius:p},seenUids:{box:{},circle:{}}},b),q.length>0}_queryCell(i,u,p,m,b,C,I,R){const{seenUids:B,hitTest:q,overlapMode:X}=I,Z=this.boxCells[b];if(Z!==null){const he=this.bboxes;for(const Ie of Z)if(!B.box[Ie]){B.box[Ie]=!0;const Pe=4*Ie,Me=this.boxKeys[Ie];if(i<=he[Pe+2]&&u<=he[Pe+3]&&p>=he[Pe+0]&&m>=he[Pe+1]&&(!R||R(Me))&&(!q||!wr(X,Me.overlapMode))&&(C.push({key:Me,x1:he[Pe],y1:he[Pe+1],x2:he[Pe+2],y2:he[Pe+3]}),q))return!0}}const ee=this.circleCells[b];if(ee!==null){const he=this.circles;for(const Ie of ee)if(!B.circle[Ie]){B.circle[Ie]=!0;const Pe=3*Ie,Me=this.circleKeys[Ie];if(this._circleAndRectCollide(he[Pe],he[Pe+1],he[Pe+2],i,u,p,m)&&(!R||R(Me))&&(!q||!wr(X,Me.overlapMode))){const Be=he[Pe],Ke=he[Pe+1],He=he[Pe+2];if(C.push({key:Me,x1:Be-He,y1:Ke-He,x2:Be+He,y2:Ke+He}),q)return!0}}}return!1}_queryCellCircle(i,u,p,m,b,C,I,R){const{circle:B,seenUids:q,overlapMode:X}=I,Z=this.boxCells[b];if(Z!==null){const he=this.bboxes;for(const Ie of Z)if(!q.box[Ie]){q.box[Ie]=!0;const Pe=4*Ie,Me=this.boxKeys[Ie];if(this._circleAndRectCollide(B.x,B.y,B.radius,he[Pe+0],he[Pe+1],he[Pe+2],he[Pe+3])&&(!R||R(Me))&&!wr(X,Me.overlapMode))return C.push(!0),!0}}const ee=this.circleCells[b];if(ee!==null){const he=this.circles;for(const Ie of ee)if(!q.circle[Ie]){q.circle[Ie]=!0;const Pe=3*Ie,Me=this.circleKeys[Ie];if(this._circlesCollide(he[Pe],he[Pe+1],he[Pe+2],B.x,B.y,B.radius)&&(!R||R(Me))&&!wr(X,Me.overlapMode))return C.push(!0),!0}}}_forEachCell(i,u,p,m,b,C,I,R){const B=this._convertToXCellCoord(i),q=this._convertToYCellCoord(u),X=this._convertToXCellCoord(p),Z=this._convertToYCellCoord(m);for(let ee=B;ee<=X;ee++)for(let he=q;he<=Z;he++)if(b.call(this,i,u,p,m,this.xCellCount*he+ee,C,I,R))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,p,m,b,C){const I=m-i,R=b-u,B=p+C;return B*B>I*I+R*R}_circleAndRectCollide(i,u,p,m,b,C,I){const R=(C-m)/2,B=Math.abs(i-(m+R));if(B>R+p)return!1;const q=(I-b)/2,X=Math.abs(u-(b+q));if(X>q+p)return!1;if(B<=R||X<=q)return!0;const Z=B-R,ee=X-q;return Z*Z+ee*ee<=p*p}}function nn(_,i,u){const p=a.L();if(!_){const{vecSouth:X,vecEast:Z}=Dn(i),ee=v();ee[0]=Z[0],ee[1]=Z[1],ee[2]=X[0],ee[3]=X[1],m=ee,(q=(C=(b=ee)[0])*(B=b[3])-(R=b[2])*(I=b[1]))&&(m[0]=B*(q=1/q),m[1]=-I*q,m[2]=-R*q,m[3]=C*q),p[0]=ee[0],p[1]=ee[1],p[4]=ee[2],p[5]=ee[3]}var m,b,C,I,R,B,q;return a.N(p,p,[1/u,1/u,1]),p}function Hn(_,i,u,p){if(_){const m=a.L();if(!i){const{vecSouth:b,vecEast:C}=Dn(u);m[0]=C[0],m[1]=C[1],m[4]=b[0],m[5]=b[1]}return a.N(m,m,[p,p,1]),m}return u.pixelsToClipSpaceMatrix}function Dn(_){const i=Math.cos(_.rollInRadians),u=Math.sin(_.rollInRadians),p=Math.cos(_.pitchInRadians),m=Math.cos(_.bearingInRadians),b=Math.sin(_.bearingInRadians),C=a.aq();C[0]=-m*p*u-b*i,C[1]=-b*p*u+m*i;const I=a.ar(C);I<1e-9?a.as(C):a.at(C,C,1/I);const R=a.aq();R[0]=m*p*i-b*u,R[1]=b*p*i+m*u;const B=a.ar(R);return B<1e-9?a.as(R):a.at(R,R,1/B),{vecEast:R,vecSouth:C}}function hn(_,i,u,p){let m;p?(m=[_,i,p(_,i),1],a.av(m,m,u)):(m=[_,i,0,1],Sl(m,m,u));const b=m[3];return{point:new a.P(m[0]/b,m[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function Dr(_,i){return .5+_/i*.5}function fn(_,i){return _.x>=-i[0]&&_.x<=i[0]&&_.y>=-i[1]&&_.y<=i[1]}function qn(_,i,u,p,m,b,C,I,R,B,q,X,Z){const ee=u?_.textSizeData:_.iconSizeData,he=a.am(ee,i.transform.zoom),Ie=[256/i.width*2+1,256/i.height*2+1],Pe=u?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;Pe.clear();const Me=_.lineVertexArray,Be=u?_.text.placedSymbolArray:_.icon.placedSymbolArray,Ke=i.transform.width/i.transform.height;let He=!1;for(let et=0;et<Be.length;et++){const at=Be.get(et);if(at.hidden||at.writingMode===a.an.vertical&&!He){ha(at.numGlyphs,Pe);continue}He=!1;const Ge=new a.P(at.anchorX,at.anchorY),mt={getElevation:Z,pitchedLabelPlaneMatrix:p,lineVertexArray:Me,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:i.transform,tileAnchorPoint:Ge,unwrappedTileID:R,width:B,height:q,translation:X},Nt=Sn(at.anchorX,at.anchorY,mt);if(!fn(Nt.point,Ie)){ha(at.numGlyphs,Pe);continue}const Mt=Dr(i.transform.cameraToCenterDistance,Nt.signedDistanceFromCamera),kt=a.ao(ee,he,at),zt=b?kt*i.transform.getPitchedTextCorrection(at.anchorX,at.anchorY,R)/Mt:kt*Mt,yr=Gn({projectionContext:mt,pitchedLabelPlaneMatrixInverse:m,symbol:at,fontSize:zt,flip:!1,keepUpright:C,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:Pe,aspectRatio:Ke,rotateToLine:I});He=yr.useVertical,(yr.notEnoughRoom||He||yr.needsFlipping&&Gn({projectionContext:mt,pitchedLabelPlaneMatrixInverse:m,symbol:at,fontSize:zt,flip:!0,keepUpright:C,glyphOffsetArray:_.glyphOffsetArray,dynamicLayoutVertexArray:Pe,aspectRatio:Ke,rotateToLine:I}).notEnoughRoom)&&ha(at.numGlyphs,Pe)}u?_.text.dynamicLayoutVertexBuffer.updateData(Pe):_.icon.dynamicLayoutVertexBuffer.updateData(Pe)}function nr(_,i,u,p,m,b,C,I){const R=b.glyphStartIndex+b.numGlyphs,B=b.lineStartIndex,q=b.lineStartIndex+b.lineLength,X=i.getoffsetX(b.glyphStartIndex),Z=i.getoffsetX(R-1),ee=ca(_*X,u,p,m,b.segment,B,q,I,C);if(!ee)return null;const he=ca(_*Z,u,p,m,b.segment,B,q,I,C);return he?I.projectionCache.anyProjectionOccluded?null:{first:ee,last:he}:null}function Bi(_,i,u,p){return _===a.an.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*p?{useVertical:!0}:(_===a.an.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Gn(_){const{projectionContext:i,pitchedLabelPlaneMatrixInverse:u,symbol:p,fontSize:m,flip:b,keepUpright:C,glyphOffsetArray:I,dynamicLayoutVertexArray:R,aspectRatio:B,rotateToLine:q}=_,X=m/24,Z=p.lineOffsetX*X,ee=p.lineOffsetY*X;let he;if(p.numGlyphs>1){const Ie=p.glyphStartIndex+p.numGlyphs,Pe=p.lineStartIndex,Me=p.lineStartIndex+p.lineLength,Be=nr(X,I,Z,ee,b,p,q,i);if(!Be)return{notEnoughRoom:!0};const Ke=$r(Be.first.point.x,Be.first.point.y,i,u),He=$r(Be.last.point.x,Be.last.point.y,i,u);if(C&&!b){const et=Bi(p.writingMode,Ke,He,B);if(et)return et}he=[Be.first];for(let et=p.glyphStartIndex+1;et<Ie-1;et++){const at=ca(X*I.getoffsetX(et),Z,ee,b,p.segment,Pe,Me,i,q);if(!at)return{notEnoughRoom:!0};he.push(at)}he.push(Be.last)}else{if(C&&!b){const Pe=lr(i.tileAnchorPoint.x,i.tileAnchorPoint.y,i).point,Me=p.lineStartIndex+p.segment+1,Be=new a.P(i.lineVertexArray.getx(Me),i.lineVertexArray.gety(Me)),Ke=lr(Be.x,Be.y,i),He=Ke.signedDistanceFromCamera>0?Ke.point:yo(i.tileAnchorPoint,Be,Pe,1,i),et=$r(Pe.x,Pe.y,i,u),at=$r(He.x,He.y,i,u),Ge=Bi(p.writingMode,et,at,B);if(Ge)return Ge}const Ie=ca(X*I.getoffsetX(p.glyphStartIndex),Z,ee,b,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,i,q);if(!Ie||i.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};he=[Ie]}for(const Ie of he)a.au(R,Ie.point,Ie.angle);return{}}function yo(_,i,u,p,m){const b=_.add(_.sub(i)._unit()),C=lr(b.x,b.y,m).point,I=u.sub(C);return u.add(I._mult(p/I.mag()))}function Xo(_,i,u){const p=i.projectionCache;if(p.projections[_])return p.projections[_];const m=new a.P(i.lineVertexArray.getx(_),i.lineVertexArray.gety(_)),b=lr(m.x,m.y,i);if(b.signedDistanceFromCamera>0)return p.projections[_]=b.point,p.anyProjectionOccluded=p.anyProjectionOccluded||b.isOccluded,b.point;const C=_-u.direction;return yo(u.distanceFromAnchor===0?i.tileAnchorPoint:new a.P(i.lineVertexArray.getx(C),i.lineVertexArray.gety(C)),m,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,i)}function lr(_,i,u){const p=_+u.translation[0],m=i+u.translation[1];let b;return u.pitchWithMap?(b=hn(p,m,u.pitchedLabelPlaneMatrix,u.getElevation),b.isOccluded=!1):(b=u.transform.projectTileCoordinates(p,m,u.unwrappedTileID,u.getElevation),b.point.x=(.5*b.point.x+.5)*u.width,b.point.y=(.5*-b.point.y+.5)*u.height),b}function $r(_,i,u,p){if(u.pitchWithMap){const m=[_,i,0,1];return a.av(m,m,p),u.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],u.unwrappedTileID,u.getElevation).point}return{x:_/u.width*2-1,y:i/u.height*2-1}}function Sn(_,i,u){return u.transform.projectTileCoordinates(_,i,u.unwrappedTileID,u.getElevation)}function ro(_,i,u){return _._unit()._perp()._mult(i*u)}function Hs(_,i,u,p,m,b,C,I,R){if(I.projectionCache.offsets[_])return I.projectionCache.offsets[_];const B=u.add(i);if(_+R.direction<p||_+R.direction>=m)return I.projectionCache.offsets[_]=B,B;const q=Xo(_+R.direction,I,R),X=ro(q.sub(u),C,R.direction),Z=u.add(X),ee=q.add(X);return I.projectionCache.offsets[_]=a.aw(b,B,Z,ee)||B,I.projectionCache.offsets[_]}function ca(_,i,u,p,m,b,C,I,R){const B=p?_-i:_+i;let q=B>0?1:-1,X=0;p&&(q*=-1,X=Math.PI),q<0&&(X+=Math.PI);let Z,ee=q>0?b+m:b+m+1;I.projectionCache.cachedAnchorPoint?Z=I.projectionCache.cachedAnchorPoint:(Z=lr(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=Z);let he,Ie,Pe=Z,Me=Z,Be=0,Ke=0;const He=Math.abs(B),et=[];let at;for(;Be+Ke<=He;){if(ee+=q,ee<b||ee>=C)return null;Be+=Ke,Me=Pe,Ie=he;const Nt={absOffsetX:He,direction:q,distanceFromAnchor:Be,previousVertex:Me};if(Pe=Xo(ee,I,Nt),u===0)et.push(Me),at=Pe.sub(Me);else{let Mt;const kt=Pe.sub(Me);Mt=kt.mag()===0?ro(Xo(ee+q,I,Nt).sub(Pe),u,q):ro(kt,u,q),Ie||(Ie=Me.add(Mt)),he=Hs(ee,Mt,Pe,b,C,Ie,u,I,Nt),et.push(Ie),at=he.sub(Ie)}Ke=at.mag()}const Ge=at._mult((He-Be)/Ke)._add(Ie||Me),mt=X+Math.atan2(Pe.y-Me.y,Pe.x-Me.x);return et.push(Ge),{point:Ge,angle:R?mt:0,path:et}}const Tn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ha(_,i){for(let u=0;u<_;u++){const p=i.length;i.resize(p+4),i.float32.set(Tn,3*p)}}function Sl(_,i,u){const p=i[0],m=i[1];return _[0]=u[0]*p+u[4]*m+u[12],_[1]=u[1]*p+u[5]*m+u[13],_[3]=u[3]*p+u[7]*m+u[15],_}const Si=100;class Ws{constructor(i,u=new er(i.width+200,i.height+200,25),p=new er(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=p,this.pitchFactor=Math.cos(i.pitch*Math.PI/180)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Si,this.screenBottomBoundary=i.height+Si,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,p,m,b,C,I,R,B,q,X,Z){const ee=this.projectAndGetPerspectiveRatio(i.anchorPointX+R[0],i.anchorPointY+R[1],b,q,Z),he=p*ee.perspectiveRatio;let Ie;if(C||I)Ie=this._projectCollisionBox(i,he,m,b,C,I,R,ee,q,X,Z);else{const at=ee.x+(X?X.x*he:0),Ge=ee.y+(X?X.y*he:0);Ie={allPointsOccluded:!1,box:[at+i.x1*he,Ge+i.y1*he,at+i.x2*he,Ge+i.y2*he]}}const[Pe,Me,Be,Ke]=Ie.box,He=C?Ie.allPointsOccluded:ee.isOccluded;let et=He;return et||(et=ee.perspectiveRatio<this.perspectiveRatioCutoff),et||(et=!this.isInsideGrid(Pe,Me,Be,Ke)),et||u!=="always"&&this.grid.hitTest(Pe,Me,Be,Ke,u,B)?{box:[Pe,Me,Be,Ke],placeable:!1,offscreen:!1,occluded:He}:{box:[Pe,Me,Be,Ke],placeable:!0,offscreen:this.isOffscreen(Pe,Me,Be,Ke),occluded:He}}placeCollisionCircles(i,u,p,m,b,C,I,R,B,q,X,Z,ee,he){const Ie=[],Pe=new a.P(u.anchorX,u.anchorY),Me=this.getPerspectiveRatio(Pe.x,Pe.y,C,he),Be=(B?b*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,C)/Me:b*Me)/a.aA,Ke={getElevation:he,pitchedLabelPlaneMatrix:I,lineVertexArray:p,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Pe,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:ee},He=nr(Be,m,u.lineOffsetX*Be,u.lineOffsetY*Be,!1,u,!1,Ke);let et=!1,at=!1,Ge=!0;if(He){const mt=.5*X*Me+Z,Nt=new a.P(-100,-100),Mt=new a.P(this.screenRightBoundary,this.screenBottomBoundary),kt=new Xr,zt=He.first,yr=He.last;let mr=[];for(let Nn=zt.path.length-1;Nn>=1;Nn--)mr.push(zt.path[Nn]);for(let Nn=1;Nn<yr.path.length;Nn++)mr.push(yr.path[Nn]);const Kt=2.5*mt;if(B){const Nn=this.projectPathToScreenSpace(mr,Ke);mr=Nn.some(ti=>ti.signedDistanceFromCamera<=0)?[]:Nn.map(ti=>ti.point)}let Fr=[];if(mr.length>0){const Nn=mr[0].clone(),ti=mr[0].clone();for(let Vi=1;Vi<mr.length;Vi++)Nn.x=Math.min(Nn.x,mr[Vi].x),Nn.y=Math.min(Nn.y,mr[Vi].y),ti.x=Math.max(ti.x,mr[Vi].x),ti.y=Math.max(ti.y,mr[Vi].y);Fr=Nn.x>=Nt.x&&ti.x<=Mt.x&&Nn.y>=Nt.y&&ti.y<=Mt.y?[mr]:ti.x<Nt.x||Nn.x>Mt.x||ti.y<Nt.y||Nn.y>Mt.y?[]:a.ax([mr],Nt.x,Nt.y,Mt.x,Mt.y)}for(const Nn of Fr){kt.reset(Nn,.25*mt);let ti=0;ti=kt.length<=.5*mt?1:Math.ceil(kt.paddedLength/Kt)+1;for(let Vi=0;Vi<ti;Vi++){const yi=Vi/Math.max(ti-1,1),vi=kt.lerp(yi),hi=vi.x+Si,li=vi.y+Si;Ie.push(hi,li,mt,0);const xi=hi-mt,na=li-mt,Xn=hi+mt,da=li+mt;if(Ge=Ge&&this.isOffscreen(xi,na,Xn,da),at=at||this.isInsideGrid(xi,na,Xn,da),i!=="always"&&this.grid.hitTestCircle(hi,li,mt,i,q)&&(et=!0,!R))return{circles:[],offscreen:!1,collisionDetected:et}}}}return{circles:!R&&et||!at||Me<this.perspectiveRatioCutoff?[]:Ie,offscreen:Ge,collisionDetected:et}}projectPathToScreenSpace(i,u){const p=function(m,b){const C=a.L();return a.ap(C,b.pitchedLabelPlaneMatrix),m.map(I=>{const R=hn(I.x,I.y,C,b.getElevation),B=b.transform.projectTileCoordinates(R.point.x,R.point.y,b.unwrappedTileID,b.getElevation);return B.point.x=(.5*B.point.x+.5)*b.width,B.point.y=(.5*-B.point.y+.5)*b.height,B})}(i,u);return function(m){let b=0,C=0,I=0,R=0;for(let B=0;B<m.length;B++)m[B].isOccluded?(I=B+1,R=0):(R++,R>C&&(C=R,b=I));return m.slice(b,b+C)}(p)}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],p=new a.a1;for(const X of i){const Z=new a.P(X.x+Si,X.y+Si);p.extend(Z),u.push(Z)}const{minX:m,minY:b,maxX:C,maxY:I}=p,R=this.grid.query(m,b,C,I).concat(this.ignoredGrid.query(m,b,C,I)),B={},q={};for(const X of R){const Z=X.key;if(B[Z.bucketInstanceId]===void 0&&(B[Z.bucketInstanceId]={}),B[Z.bucketInstanceId][Z.featureIndex])continue;const ee=[new a.P(X.x1,X.y1),new a.P(X.x2,X.y1),new a.P(X.x2,X.y2),new a.P(X.x1,X.y2)];a.ay(u,ee)&&(B[Z.bucketInstanceId][Z.featureIndex]=!0,q[Z.bucketInstanceId]===void 0&&(q[Z.bucketInstanceId]=[]),q[Z.bucketInstanceId].push(Z.featureIndex))}return q}insertCollisionBox(i,u,p,m,b,C){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:C,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,p,m,b,C){const I=p?this.ignoredGrid:this.grid,R={bucketInstanceId:m,featureIndex:b,collisionGroupID:C,overlapMode:u};for(let B=0;B<i.length;B+=4)I.insertCircle(R,i[B],i[B+1],i[B+2])}projectAndGetPerspectiveRatio(i,u,p,m,b){if(b){let C;m?(C=[i,u,m(i,u),1],a.av(C,C,b)):(C=[i,u,0,1],Sl(C,C,b));const I=C[3];return{x:(C[0]/I+1)/2*this.transform.width+Si,y:(-C[1]/I+1)/2*this.transform.height+Si,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const C=this.transform.projectTileCoordinates(i,u,p,m);return{x:(C.point.x+1)/2*this.transform.width+Si,y:(1-C.point.y)/2*this.transform.height+Si,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5,isOccluded:C.isOccluded,signedDistanceFromCamera:C.signedDistanceFromCamera}}}getPerspectiveRatio(i,u,p,m){const b=this.transform.projectTileCoordinates(i,u,p,m);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(i,u,p,m){return p<Si||i>=this.screenRightBoundary||m<Si||u>this.screenBottomBoundary}isInsideGrid(i,u,p,m){return p>=0&&i<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=a.af([]);return a.M(i,i,[-100,-100,0]),i}_projectCollisionBox(i,u,p,m,b,C,I,R,B,q,X){let Z=1,ee=0,he=0,Ie=1;const Pe=i.anchorPointX+I[0],Me=i.anchorPointY+I[1];if(C&&!b){const mr=this.projectAndGetPerspectiveRatio(Pe+1,Me,m,B,X),Kt=mr.x-R.x,Fr=Math.atan((mr.y-R.y)/Kt)+(Kt<0?Math.PI:0),Nn=Math.sin(Fr),ti=Math.cos(Fr);Z=ti,ee=Nn,he=-Nn,Ie=ti}else if(!C&&b){const mr=Dn(this.transform);Z=mr.vecEast[0],ee=mr.vecEast[1],he=mr.vecSouth[0],Ie=mr.vecSouth[1]}let Be=R.x,Ke=R.y,He=u;b&&(Be=Pe,Ke=Me,He=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),He*=this.transform.getPitchedTextCorrection(Pe,Me,m),q||(He*=a.ag(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(Be+=Z*q.x*He+he*q.y*He,Ke+=ee*q.x*He+Ie*q.y*He);const et=i.x1*He,at=i.x2*He,Ge=(et+at)/2,mt=i.y1*He,Nt=i.y2*He,Mt=(mt+Nt)/2,kt=[{offsetX:et,offsetY:mt},{offsetX:Ge,offsetY:mt},{offsetX:at,offsetY:mt},{offsetX:at,offsetY:Mt},{offsetX:at,offsetY:Nt},{offsetX:Ge,offsetY:Nt},{offsetX:et,offsetY:Nt},{offsetX:et,offsetY:Mt}];let zt=[];for(const{offsetX:mr,offsetY:Kt}of kt)zt.push(new a.P(Be+Z*mr+he*Kt,Ke+ee*mr+Ie*Kt));let yr=!1;if(b){const mr=zt.map(Kt=>this.projectAndGetPerspectiveRatio(Kt.x,Kt.y,m,B,X));yr=mr.some(Kt=>!Kt.isOccluded),zt=mr.map(Kt=>new a.P(Kt.x,Kt.y))}else yr=!0;return{box:a.az(zt),allPointsOccluded:!yr}}}class Zs{constructor(i,u,p,m){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Un{constructor(i,u,p,m,b){this.text=new Zs(i?i.text:null,u,p,b),this.icon=new Zs(i?i.icon:null,u,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Xs{constructor(i,u,p){this.text=i,this.icon=u,this.skipFade=p}}class Yo{constructor(i,u,p,m,b){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=b}}class Kn{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[i]}}function Da(_,i,u,p,m){const{horizontalAlign:b,verticalAlign:C}=a.aG(_);return new a.P(-(b-.5)*i+p[0]*m,-(C-.5)*u+p[1]*m)}class As{constructor(i,u,p,m,b){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Ws(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Kn(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const u=this.terrain;return u?(p,m)=>u.getElevation(i,p,m):null}getBucketParts(i,u,p,m){const b=p.getBucket(u),C=p.latestFeatureIndex;if(!b||!C||u.id!==b.layerIds[0])return;const I=p.collisionBoxArray,R=b.layers[0].layout,B=b.layers[0].paint,q=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),X=p.tileSize/a.$,Z=p.tileID.toUnwrapped(),ee=R.get("text-rotation-alignment")==="map",he=a.aB(p,1,this.transform.zoom),Ie=a.aC(this.collisionIndex.transform,p,B.get("text-translate"),B.get("text-translate-anchor")),Pe=a.aC(this.collisionIndex.transform,p,B.get("icon-translate"),B.get("icon-translate-anchor")),Me=nn(ee,this.transform,he);this.retainedQueryData[b.bucketInstanceId]=new Yo(b.bucketInstanceId,C,b.sourceLayerIndex,b.index,p.tileID);const Be={bucket:b,layout:R,translationText:Ie,translationIcon:Pe,unwrappedTileID:Z,pitchedLabelPlaneMatrix:Me,scale:q,textPixelRatio:X,holdingForFade:p.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:a.am(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(const Ke of b.sortKeyRanges){const{sortKey:He,symbolInstanceStart:et,symbolInstanceEnd:at}=Ke;i.push({sortKey:He,symbolInstanceStart:et,symbolInstanceEnd:at,parameters:Be})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Be})}attemptAnchorPlacement(i,u,p,m,b,C,I,R,B,q,X,Z,ee,he,Ie,Pe,Me,Be,Ke,He){const et=a.aD[i.textAnchor],at=[i.textOffset0,i.textOffset1],Ge=Da(et,p,m,at,b),mt=this.collisionIndex.placeCollisionBox(u,Z,R,B,q,I,C,Pe,X.predicate,Ke,Ge,He);if((!Be||this.collisionIndex.placeCollisionBox(Be,Z,R,B,q,I,C,Me,X.predicate,Ke,Ge,He).placeable)&&mt.placeable){let Nt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Nt=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:at,width:p,height:m,anchor:et,textBoxScale:b,prevAnchor:Nt},this.markUsedJustification(he,et,ee,Ie),he.allowVerticalPlacement&&(this.markUsedOrientation(he,Ie,ee),this.placedOrientations[ee.crossTileID]=Ie),{shift:Ge,placedGlyphBoxes:mt}}}placeLayerBucketPart(i,u,p){const{bucket:m,layout:b,translationText:C,translationIcon:I,unwrappedTileID:R,pitchedLabelPlaneMatrix:B,textPixelRatio:q,holdingForFade:X,collisionBoxArray:Z,partiallyEvaluatedTextSize:ee,collisionGroup:he}=i.parameters,Ie=b.get("text-optional"),Pe=b.get("icon-optional"),Me=a.aE(b,"text-overlap","text-allow-overlap"),Be=Me==="always",Ke=a.aE(b,"icon-overlap","icon-allow-overlap"),He=Ke==="always",et=b.get("text-rotation-alignment")==="map",at=b.get("text-pitch-alignment")==="map",Ge=b.get("icon-text-fit")!=="none",mt=b.get("symbol-z-order")==="viewport-y",Nt=Be&&(He||!m.hasIconData()||Pe),Mt=He&&(Be||!m.hasTextData()||Ie);!m.collisionArrays&&Z&&m.deserializeCollisionBoxes(Z);const kt=this.retainedQueryData[m.bucketInstanceId].tileID,zt=this._getTerrainElevationFunc(kt),yr=this.transform.getFastPathSimpleProjectionMatrix(kt),mr=(Kt,Fr,Nn)=>{var ti,Vi;if(u[Kt.crossTileID])return;if(X)return void(this.placements[Kt.crossTileID]=new Xs(!1,!1,!1));let yi=!1,vi=!1,hi=!0,li=null,xi={box:null,placeable:!1,offscreen:null,occluded:!1},na={placeable:!1},Xn=null,da=null,ia=null,Ql=0,sh=0,lh=0;Fr.textFeatureIndex?Ql=Fr.textFeatureIndex:Kt.useRuntimeCollisionCircles&&(Ql=Kt.featureIndex),Fr.verticalTextFeatureIndex&&(sh=Fr.verticalTextFeatureIndex);const Zu=Fr.textBox;if(Zu){const hl=qo=>{let oo=a.an.horizontal;if(m.allowVerticalPlacement&&!qo&&this.prevPlacement){const Rs=this.prevPlacement.placedOrientations[Kt.crossTileID];Rs&&(this.placedOrientations[Kt.crossTileID]=Rs,oo=Rs,this.markUsedOrientation(m,oo,Kt))}return oo},Su=(qo,oo)=>{if(m.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&Fr.verticalTextBox){for(const Rs of m.writingModes)if(Rs===a.an.vertical?(xi=oo(),na=xi):xi=qo(),xi&&xi.placeable)break}else xi=qo()},uh=Kt.textAnchorOffsetStartIndex,qh=Kt.textAnchorOffsetEndIndex;if(qh===uh){const qo=(oo,Rs)=>{const Ea=this.collisionIndex.placeCollisionBox(oo,Me,q,kt,R,at,et,C,he.predicate,zt,void 0,yr);return Ea&&Ea.placeable&&(this.markUsedOrientation(m,Rs,Kt),this.placedOrientations[Kt.crossTileID]=Rs),Ea};Su(()=>qo(Zu,a.an.horizontal),()=>{const oo=Fr.verticalTextBox;return m.allowVerticalPlacement&&Kt.numVerticalGlyphVertices>0&&oo?qo(oo,a.an.vertical):{box:null,offscreen:null}}),hl(xi&&xi.placeable)}else{let qo=a.aD[(Vi=(ti=this.prevPlacement)===null||ti===void 0?void 0:ti.variableOffsets[Kt.crossTileID])===null||Vi===void 0?void 0:Vi.anchor];const oo=(Ea,Iv,Jb)=>{const Yg=Ea.x2-Ea.x1,Pd=Ea.y2-Ea.y1,kf=Kt.textBoxScale,Ec=Ge&&Ke==="never"?Iv:null;let os=null,Tc=Me==="never"?1:2,Kg="never";qo&&Tc++;for(let ch=0;ch<Tc;ch++){for(let Jg=uh;Jg<qh;Jg++){const Qg=m.textAnchorOffsets.get(Jg);if(qo&&Qg.textAnchor!==qo)continue;const Id=this.attemptAnchorPlacement(Qg,Ea,Yg,Pd,kf,et,at,q,kt,R,he,Kg,Kt,m,Jb,C,I,Ec,zt);if(Id&&(os=Id.placedGlyphBoxes,os&&os.placeable))return yi=!0,li=Id.shift,os}qo?qo=null:Kg=Me}return p&&!os&&(os={box:this.collisionIndex.placeCollisionBox(Zu,"always",q,kt,R,at,et,C,he.predicate,zt,void 0,yr).box,offscreen:!1,placeable:!1,occluded:!1}),os};Su(()=>oo(Zu,Fr.iconBox,a.an.horizontal),()=>{const Ea=Fr.verticalTextBox;return m.allowVerticalPlacement&&(!xi||!xi.placeable)&&Kt.numVerticalGlyphVertices>0&&Ea?oo(Ea,Fr.verticalIconBox,a.an.vertical):{box:null,occluded:!0,offscreen:null}}),xi&&(yi=xi.placeable,hi=xi.offscreen);const Rs=hl(xi&&xi.placeable);if(!yi&&this.prevPlacement){const Ea=this.prevPlacement.variableOffsets[Kt.crossTileID];Ea&&(this.variableOffsets[Kt.crossTileID]=Ea,this.markUsedJustification(m,Ea.anchor,Kt,Rs))}}}if(Xn=xi,yi=Xn&&Xn.placeable,hi=Xn&&Xn.offscreen,Kt.useRuntimeCollisionCircles){const hl=m.text.placedSymbolArray.get(Kt.centerJustifiedTextSymbolIndex),Su=a.ao(m.textSizeData,ee,hl),uh=b.get("text-padding");da=this.collisionIndex.placeCollisionCircles(Me,hl,m.lineVertexArray,m.glyphOffsetArray,Su,R,B,p,at,he.predicate,Kt.collisionCircleDiameter,uh,C,zt),da.circles.length&&da.collisionDetected&&!p&&a.w("Collisions detected, but collision boxes are not shown"),yi=Be||da.circles.length>0&&!da.collisionDetected,hi=hi&&da.offscreen}if(Fr.iconFeatureIndex&&(lh=Fr.iconFeatureIndex),Fr.iconBox){const hl=Su=>this.collisionIndex.placeCollisionBox(Su,Ke,q,kt,R,at,et,I,he.predicate,zt,Ge&&li?li:void 0,yr);na&&na.placeable&&Fr.verticalIconBox?(ia=hl(Fr.verticalIconBox),vi=ia.placeable):(ia=hl(Fr.iconBox),vi=ia.placeable),hi=hi&&ia.offscreen}const Td=Ie||Kt.numHorizontalGlyphVertices===0&&Kt.numVerticalGlyphVertices===0,Ad=Pe||Kt.numIconVertices===0;Td||Ad?Ad?Td||(vi=vi&&yi):yi=vi&&yi:vi=yi=vi&&yi;const Mf=vi&&ia.placeable;if(yi&&Xn.placeable&&this.collisionIndex.insertCollisionBox(Xn.box,Me,b.get("text-ignore-placement"),m.bucketInstanceId,na&&na.placeable&&sh?sh:Ql,he.ID),Mf&&this.collisionIndex.insertCollisionBox(ia.box,Ke,b.get("icon-ignore-placement"),m.bucketInstanceId,lh,he.ID),da&&yi&&this.collisionIndex.insertCollisionCircles(da.circles,Me,b.get("text-ignore-placement"),m.bucketInstanceId,Ql,he.ID),p&&this.storeCollisionData(m.bucketInstanceId,Nn,Fr,Xn,ia,da),Kt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Kt.crossTileID]=new Xs((yi||Nt)&&!(Xn!=null&&Xn.occluded),(vi||Mt)&&!(ia!=null&&ia.occluded),hi||m.justReloaded),u[Kt.crossTileID]=!0};if(mt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Kt=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Fr=Kt.length-1;Fr>=0;--Fr){const Nn=Kt[Fr];mr(m.symbolInstances.get(Nn),m.collisionArrays[Nn],Nn)}}else for(let Kt=i.symbolInstanceStart;Kt<i.symbolInstanceEnd;Kt++)mr(m.symbolInstances.get(Kt),m.collisionArrays[Kt],Kt);m.justReloaded=!1}storeCollisionData(i,u,p,m,b,C){if(p.textBox||p.iconBox){let I,R;this.collisionBoxArrays.has(i)?I=this.collisionBoxArrays.get(i):(I=new Map,this.collisionBoxArrays.set(i,I)),I.has(u)?R=I.get(u):(R={text:null,icon:null},I.set(u,R)),p.textBox&&(R.text=m.box),p.iconBox&&(R.icon=b.box)}if(C){let I=this.collisionCircleArrays[i];I===void 0&&(I=this.collisionCircleArrays[i]=[]);for(let R=0;R<C.circles.length;R+=4)I.push(C.circles[R+0]-Si),I.push(C.circles[R+1]-Si),I.push(C.circles[R+2]),I.push(C.collisionDetected?1:0)}}markUsedJustification(i,u,p,m){let b;b=m===a.an.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[a.aF(u)];const C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const I of C)I>=0&&(i.text.placedSymbolArray.get(I).crossTileID=b>=0&&I!==b?0:p.crossTileID)}markUsedOrientation(i,u,p){const m=u===a.an.horizontal||u===a.an.horizontalOnly?u:0,b=u===a.an.vertical?u:0,C=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const I of C)i.text.placedSymbolArray.get(I).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(i):1,b=u?u.opacities:{},C=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const R in this.placements){const B=this.placements[R],q=b[R];q?(this.opacities[R]=new Un(q,m,B.text,B.icon),p=p||B.text!==q.text.placed||B.icon!==q.icon.placed):(this.opacities[R]=new Un(null,m,B.text,B.icon,B.skipFade),p=p||B.text||B.icon)}for(const R in b){const B=b[R];if(!this.opacities[R]){const q=new Un(B,m,!1,!1);q.isHidden()||(this.opacities[R]=q,p=p||B.text.placed||B.icon.placed)}}for(const R in C)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=C[R]);for(const R in I)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=I[R]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const p={};for(const m of u){const b=m.getBucket(i);b&&m.latestFeatureIndex&&i.id===b.layerIds[0]&&this.updateBucketOpacities(b,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(i,u,p,m){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const b=i.layers[0],C=b.layout,I=new Un(null,0,!1,!1,!0),R=C.get("text-allow-overlap"),B=C.get("icon-allow-overlap"),q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),X=C.get("text-rotation-alignment")==="map",Z=C.get("text-pitch-alignment")==="map",ee=C.get("icon-text-fit")!=="none",he=new Un(null,0,R&&(B||!i.hasIconData()||C.get("icon-optional")),B&&(R||!i.hasTextData()||C.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const Ie=(Me,Be,Ke)=>{for(let He=0;He<Be/4;He++)Me.opacityVertexArray.emplaceBack(Ke);Me.hasVisibleVertices=Me.hasVisibleVertices||Ke!==fs},Pe=this.collisionBoxArrays.get(i.bucketInstanceId);for(let Me=0;Me<i.symbolInstances.length;Me++){const Be=i.symbolInstances.get(Me),{numHorizontalGlyphVertices:Ke,numVerticalGlyphVertices:He,crossTileID:et}=Be;let at=this.opacities[et];p[et]?at=I:at||(at=he,this.opacities[et]=at),p[et]=!0;const Ge=Be.numIconVertices>0,mt=this.placedOrientations[Be.crossTileID],Nt=mt===a.an.vertical,Mt=mt===a.an.horizontal||mt===a.an.horizontalOnly;if(Ke>0||He>0){const zt=Ya(at.text);Ie(i.text,Ke,Nt?fs:zt),Ie(i.text,He,Mt?fs:zt);const yr=at.text.isHidden();[Be.rightJustifiedTextSymbolIndex,Be.centerJustifiedTextSymbolIndex,Be.leftJustifiedTextSymbolIndex].forEach(Fr=>{Fr>=0&&(i.text.placedSymbolArray.get(Fr).hidden=yr||Nt?1:0)}),Be.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Be.verticalPlacedTextSymbolIndex).hidden=yr||Mt?1:0);const mr=this.variableOffsets[Be.crossTileID];mr&&this.markUsedJustification(i,mr.anchor,Be,mt);const Kt=this.placedOrientations[Be.crossTileID];Kt&&(this.markUsedJustification(i,"left",Be,Kt),this.markUsedOrientation(i,Kt,Be))}if(Ge){const zt=Ya(at.icon),yr=!(ee&&Be.verticalPlacedIconSymbolIndex&&Nt);Be.placedIconSymbolIndex>=0&&(Ie(i.icon,Be.numIconVertices,yr?zt:fs),i.icon.placedSymbolArray.get(Be.placedIconSymbolIndex).hidden=at.icon.isHidden()),Be.verticalPlacedIconSymbolIndex>=0&&(Ie(i.icon,Be.numVerticalIconVertices,yr?fs:zt),i.icon.placedSymbolArray.get(Be.verticalPlacedIconSymbolIndex).hidden=at.icon.isHidden())}const kt=Pe&&Pe.has(Me)?Pe.get(Me):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const zt=i.collisionArrays[Me];if(zt){let yr=new a.P(0,0);if(zt.textBox||zt.verticalTextBox){let mr=!0;if(q){const Kt=this.variableOffsets[et];Kt?(yr=Da(Kt.anchor,Kt.width,Kt.height,Kt.textOffset,Kt.textBoxScale),X&&yr._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):mr=!1}if(zt.textBox||zt.verticalTextBox){let Kt;zt.textBox&&(Kt=Nt),zt.verticalTextBox&&(Kt=Mt),Xa(i.textCollisionBox.collisionVertexArray,at.text.placed,!mr||Kt,kt.text,yr.x,yr.y)}}if(zt.iconBox||zt.verticalIconBox){const mr=!!(!Mt&&zt.verticalIconBox);let Kt;zt.iconBox&&(Kt=mr),zt.verticalIconBox&&(Kt=!mr),Xa(i.iconCollisionBox.collisionVertexArray,at.icon.placed,Kt,kt.icon,ee?yr.x:0,ee?yr.y:0)}}}}if(i.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);i.bucketInstanceId in this.collisionCircleArrays&&(i.collisionCircleArray=this.collisionCircleArrays[i.bucketInstanceId],delete this.collisionCircleArrays[i.bucketInstanceId])}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>i}setStale(){this.stale=!0}}function Xa(_,i,u,p,m,b){p&&p.length!==0||(p=[0,0,0,0]);const C=p[0]-Si,I=p[1]-Si,R=p[2]-Si,B=p[3]-Si;_.emplaceBack(i?1:0,u?1:0,m||0,b||0,C,I),_.emplaceBack(i?1:0,u?1:0,m||0,b||0,R,I),_.emplaceBack(i?1:0,u?1:0,m||0,b||0,R,B),_.emplaceBack(i?1:0,u?1:0,m||0,b||0,C,B)}const Bo=Math.pow(2,25),Ps=Math.pow(2,24),lo=Math.pow(2,17),pc=Math.pow(2,16),mc=Math.pow(2,9),wa=Math.pow(2,8),Ys=Math.pow(2,1);function Ya(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,u=Math.floor(127*_.opacity);return u*Bo+i*Ps+u*lo+i*pc+u*mc+i*wa+u*Ys+i}const fs=0;class uo{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,p,m,b){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(C,m,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,R)=>I.sortKey-R.sortKey));this._currentPartIndex<C.length;)if(u.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class qu{constructor(i,u,p,m,b,C,I,R){this.placement=new As(i,u,C,I,R),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(i,u,p){const m=D.now(),b=()=>!this._forceFullPlacement&&D.now()-m>2;for(;this._currentPlacementIndex>=0;){const C=u[i[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new uo(C)),this._inProgressLayer.continuePlacement(p[C.source],this.placement,this._showCollisionBoxes,C,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const $l=512/a.$/2;class jl{constructor(i,u,p){this.tileID=i,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let b=0;b<u.length;b++){const C=u.get(b),I=C.key,R=m.get(I);R?R.push(C):m.set(I,[C])}for(const[b,C]of m){const I={positions:C.map(R=>({x:Math.floor(R.anchorX*$l),y:Math.floor(R.anchorY*$l)})),crossTileIDs:C.map(R=>R.crossTileID)};if(I.positions.length>128){const R=new a.aH(I.positions.length,16,Uint16Array);for(const{x:B,y:q}of I.positions)R.add(B,q);R.finish(),delete I.positions,I.index=R}this._symbolsByKey[b]=I}}getScaledCoordinates(i,u){const{x:p,y:m,z:b}=this.tileID.canonical,{x:C,y:I,z:R}=u.canonical,B=$l/Math.pow(2,R-b),q=(I*a.$+i.anchorY)*B,X=m*a.$*$l;return{x:Math.floor((C*a.$+i.anchorX)*B-p*a.$*$l),y:Math.floor(q-X)}}findMatches(i,u,p){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let b=0;b<i.length;b++){const C=i.get(b);if(C.crossTileID)continue;const I=this._symbolsByKey[C.key];if(!I)continue;const R=this.getScaledCoordinates(C,u);if(I.index){const B=I.index.range(R.x-m,R.y-m,R.x+m,R.y+m).sort();for(const q of B){const X=I.crossTileIDs[q];if(!p[X]){p[X]=!0,C.crossTileID=X;break}}}else if(I.positions)for(let B=0;B<I.positions.length;B++){const q=I.positions[B],X=I.crossTileIDs[B];if(Math.abs(q.x-R.x)<=m&&Math.abs(q.y-R.y)<=m&&!p[X]){p[X]=!0,C.crossTileID=X;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class k{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class V{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const p in this.indexes){const m=this.indexes[p],b={};for(const C in m){const I=m[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),b[I.tileID.key]=I}this.indexes[p]=b}this.lng=i}addBucket(i,u,p){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let b=0;b<u.symbolInstances.length;b++)u.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const m=this.usedCrossTileIDs[i.overscaledZ];for(const b in this.indexes){const C=this.indexes[b];if(Number(b)>i.overscaledZ)for(const I in C){const R=C[I];R.tileID.isChildOf(i)&&R.findMatches(u.symbolInstances,i,m)}else{const I=C[i.scaledTo(Number(b)).key];I&&I.findMatches(u.symbolInstances,i,m)}}for(let b=0;b<u.symbolInstances.length;b++){const C=u.symbolInstances.get(b);C.crossTileID||(C.crossTileID=p.generate(),m[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new jl(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const p of u.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[i][m]}removeStaleBuckets(i){let u=!1;for(const p in this.indexes){const m=this.indexes[p];for(const b in m)i[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[b]),delete m[b],u=!0)}return u}}class pe{constructor(){this.layerIndexes={},this.crossTileIDs=new k,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,p){let m=this.layerIndexes[i.id];m===void 0&&(m=this.layerIndexes[i.id]=new V);let b=!1;const C={};m.handleWrapJump(p);for(const I of u){const R=I.getBucket(i);R&&i.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(I.tileID,R,this.crossTileIDs)&&(b=!0),C[R.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(b=!0),b}pruneUnusedLayers(i){const u={};i.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var We="void main() {fragColor=vec4(1.0);}";const nt={prelude:Ye(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ye("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ye("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ye(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ye(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ye(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ye(We,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ye(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ye(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ye("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ye("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ye(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ye("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ye(We,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ye(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ye(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ye(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ye(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ye(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ye(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ye(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ye(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ye(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ye(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ye(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ye(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ye(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ye(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ye(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ye(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ye("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ye("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ye("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ye("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ye(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ye("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ye(_,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=i.match(/in ([\w]+) ([\w]+)/g),m=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=b?b.concat(m):m,I={};return{fragmentSource:_=_.replace(u,(R,B,q,X,Z)=>(I[Z]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${q} ${X} ${Z};
#else
uniform ${q} ${X} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${q} ${X} ${Z} = u_${Z};
#endif
`)),vertexSource:i=i.replace(u,(R,B,q,X,Z)=>{const ee=X==="float"?"vec2":"vec4",he=Z.match(/color/)?"color":ee;return I[Z]?B==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${q} ${ee} a_${Z};
out ${q} ${X} ${Z};
#else
uniform ${q} ${X} u_${Z};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${q} ${X} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${he}(a_${Z}, u_${Z}_t);
#else
    ${q} ${X} ${Z} = u_${Z};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${q} ${ee} a_${Z};
#else
uniform ${q} ${X} u_${Z};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${q} ${X} ${Z} = a_${Z};
#else
    ${q} ${X} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${q} ${X} ${Z} = unpack_mix_${he}(a_${Z}, u_${Z}_t);
#else
    ${q} ${X} ${Z} = u_${Z};
#endif
`}),staticAttributes:p,staticUniforms:C}}class yt{constructor(i,u,p){this.vertexBuffer=i,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Jt=a.aI([{name:"a_pos",type:"Int16",components:2}]);const ur="#define PROJECTION_MERCATOR",Cr="mercator";class xr{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Cr}get shaderDefine(){return ur}get shaderPreludeCode(){return nt.projectionMercator}get vertexShaderPreludeCode(){return nt.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(i){}getMeshFromTileID(i,u,p,m,b){if(this._cachedMesh)return this._cachedMesh;const C=new a.aK;C.emplaceBack(0,0),C.emplaceBack(a.$,0),C.emplaceBack(0,a.$),C.emplaceBack(a.$,a.$);const I=i.createVertexBuffer(C,Jt.members),R=a.aL.simpleSegment(0,0,4,2),B=new a.aM;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3);const q=i.createIndexBuffer(B);return this._cachedMesh=new yt(I,q,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(i){}}class ar{constructor(i=0,u=0,p=0,m=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=p,this.right=m}interpolate(i,u,p){return u.top!=null&&i.top!=null&&(this.top=a.C.number(i.top,u.top,p)),u.bottom!=null&&i.bottom!=null&&(this.bottom=a.C.number(i.bottom,u.bottom,p)),u.left!=null&&i.left!=null&&(this.left=a.C.number(i.left,u.left,p)),u.right!=null&&i.right!=null&&(this.right=a.C.number(i.right,u.right,p)),this}getCenter(i,u){const p=a.ag((this.left+i-this.right)/2,0,i),m=a.ag((this.top+u-this.bottom)/2,0,u);return new a.P(p,m)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ar(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function an(_,i){if(!_.renderWorldCopies||_.lngRange)return;const u=i.lng-_.center.lng;i.lng+=u>180?-360:u<-180?360:0}function jr(_){return Math.max(0,Math.floor(_))}class yn{constructor(i,u,p,m,b,C){this._callbacks=i,this._tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=m??0,this._maxPitch=b??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=jr(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ar,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(i,u,p){this._latRange=i.latRange,this._lngRange=i.lngRange,this._width=i.width,this._height=i.height,this._center=i.center,this._elevation=i.elevation,this._minElevationForCurrentTile=i.minElevationForCurrentTile,this._zoom=i.zoom,this._tileZoom=jr(this._zoom),this._scale=a.ae(this._zoom),this._bearingInRadians=i.bearingInRadians,this._fovInRadians=i.fovInRadians,this._pitchInRadians=i.pitchInRadians,this._rollInRadians=i.rollInRadians,this._unmodified=i.unmodified,this._edgeInsets=new ar(i.padding.top,i.padding.bottom,i.padding.left,i.padding.right),this._minZoom=i.minZoom,this._maxZoom=i.maxZoom,this._minPitch=i.minPitch,this._maxPitch=i.maxPitch,this._renderWorldCopies=i.renderWorldCopies,this._cameraToCenterDistance=i.cameraToCenterDistance,this._nearZ=i.nearZ,this._farZ=i.farZ,this._autoCalculateNearFarZ=!p&&i.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(i){this._minElevationForCurrentTile=i}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(i){this._minZoom!==i&&(this._minZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(i){this._minPitch!==i&&(this._minPitch=i,this.setPitch(Math.max(this.pitch,i)))}get maxPitch(){return this._maxPitch}setMaxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.setPitch(Math.min(this.pitch,i)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(i){const u=a.aN(i,-180,180)*Math.PI/180;var p,m,b,C,I,R,B,q,X;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=v(),p=this._rotationMatrix,b=-this._bearingInRadians,C=(m=this._rotationMatrix)[0],I=m[1],R=m[2],B=m[3],q=Math.sin(b),X=Math.cos(b),p[0]=C*X+R*q,p[1]=I*X+B*q,p[2]=C*-q+R*X,p[3]=I*-q+B*X)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(i){const u=a.ag(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(i){const u=i/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aO(this._fovInRadians)}setFov(i){i=a.ag(i,.1,150),this.fov!==i&&(this._unmodified=!1,this._fovInRadians=a.ad(i),this._calcMatrices())}get zoom(){return this._zoom}setZoom(i){const u=this.getConstrained(this._center,i).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=a.ae(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(i,u){this._autoCalculateNearFarZ=!1,this._nearZ=i,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,p){this._unmodified=!1,this._edgeInsets.interpolate(i,u,p),this._constrain(),this._calcMatrices()}resize(i,u,p=!0){this._width=i,this._height=u,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new rr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(i){i?(this._lngRange=[i.getWest(),i.getEast()],this._latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.ah])}getConstrained(i,u){return this._callbacks.getConstrained(i,u)}getCameraQueryGeometry(i,u){if(u.length===1)return[u[0],i];{const{minX:p,minY:m,maxX:b,maxY:C}=a.a1.fromPoints(u).extend(i);return[new a.P(p,m),new a.P(b,m),new a.P(b,C),new a.P(p,C),new a.P(p,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(p),this._unmodified=i,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let i=a.af(new Float64Array(16));a.N(i,i,[this._width/2,-this._height/2,1]),a.M(i,i,[1,-1,0]),this._clipSpaceToPixelsMatrix=i,i=a.af(new Float64Array(16)),a.N(i,i,[1,-1,1]),a.M(i,i,[-1,-1,0]),a.N(i,i,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=i,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(i,u,p,m){const b=p!==void 0?p:this.bearing,C=m=m!==void 0?m:this.pitch,I=a.a0.fromLngLat(i,u),R=-Math.cos(a.ad(C)),B=Math.sin(a.ad(C)),q=B*Math.sin(a.ad(b)),X=-B*Math.cos(a.ad(b));let Z=this.elevation;const ee=u-Z;let he;R*ee>=0||Math.abs(R)<.1?(he=1e4,Z=u+he*R):he=-ee/R;let Ie,Pe,Me=a.aP(1,I.y),Be=0;do{if(Be+=1,Be>10)break;Pe=he/Me,Ie=new a.a0(I.x+q*Pe,I.y+X*Pe),Me=1/Ie.meterInMercatorCoordinateUnits()}while(Math.abs(he-Pe*Me)>1e-12);return{center:Ie.toLngLat(),elevation:Z,zoom:a.aj(this.height/2/Math.tan(this.fovInRadians/2)/Pe/this.tileSize)}}recalculateZoomAndCenter(i){if(this.elevation-i==0)return;const u=a.ai(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/u,m=a.a0.fromLngLat(this.center,this.elevation),b=De(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=i;const C=this.calculateCenterFromCameraLngLatAlt(b.toLngLat(),a.aP(b.z,m.y),this.bearing,this.pitch);this._elevation=C.elevation,this._center=C.center,this.setZoom(C.zoom)}getCameraPoint(){const i=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(i*Math.sin(this.rollInRadians),i*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const i=a.ai(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/i).toLngLat()}getMercatorTileCoordinates(i){if(!i)return[0,0,1,1];const u=i.canonical.z>=0?1<<i.canonical.z:Math.pow(2,i.canonical.z);return[i.canonical.x/u,i.canonical.y/u,1/u/a.$,1/u/a.$]}}class Vr{constructor(i,u){this.min=i,this.max=u,this.center=a.aQ([],a.aR([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],p=a.aS(this.min),m=a.aS(this.max);for(let b=0;b<u.length;b++)p[b]=u[b]?this.min[b]:this.center[b],m[b]=u[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new Vr(p,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersectsFrustum(i){let u=!0;for(let p=0;p<i.planes.length;p++){const m=this.intersectsPlane(i.planes[p]);if(m===0)return 0;m===1&&(u=!1)}return u?2:i.aabb.min[0]>this.max[0]||i.aabb.min[1]>this.max[1]||i.aabb.min[2]>this.max[2]||i.aabb.max[0]<this.min[0]||i.aabb.max[1]<this.min[1]||i.aabb.max[2]<this.min[2]?0:1}intersectsPlane(i){let u=i[3],p=i[3];for(let m=0;m<3;m++)i[m]>0?(u+=i[m]*this.min[m],p+=i[m]*this.max[m]):(p+=i[m]*this.min[m],u+=i[m]*this.max[m]);return u>=0?2:p<0?0:1}}class Zt{distanceToTile2d(i,u,p,m){const b=m.distanceX([i,u]),C=m.distanceY([i,u]);return Math.hypot(b,C)}getWrap(i,u,p){return p}getTileBoundingVolume(i,u,p,m){var b,C;let I=p,R=p;if(m!=null&&m.terrain){const q=new a.Z(i.z,u,i.z,i.x,i.y),X=m.terrain.getMinMaxElevation(q);I=(b=X.minElevation)!==null&&b!==void 0?b:p,R=(C=X.maxElevation)!==null&&C!==void 0?C:p}const B=1<<i.z;return new Vr([u+i.x/B,i.y/B,I],[u+(i.x+1)/B,(i.y+1)/B,R])}allowVariableZoom(i,u){const p=i.fov*(Math.abs(Math.cos(i.rollInRadians))*i.height+Math.abs(Math.sin(i.rollInRadians))*i.width)/i.height,m=a.ag(78.5-p/2,0,60);return!!u.terrain||i.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class Ir{constructor(i,u,p){this.points=i,this.planes=u,this.aabb=p}static fromInvProjectionMatrix(i,u=1,p=0,m,b){const C=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,p),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Z=>function(ee,he,Ie,Pe){const Me=a.av([],ee,he),Be=1/Me[3]/Ie*Pe;return a.aX(Me,Me,[Be,Be,1/Me[3],Be])}(Z,i,u,I));m&&function(Z,ee,he,Ie){const Pe=Ie?4:0,Me=Ie?0:4;let Be=0;const Ke=[],He=[];for(let Ge=0;Ge<4;Ge++){const mt=a.aT([],Z[Ge+Me],Z[Ge+Pe]),Nt=a.aY(mt);a.aQ(mt,mt,1/Nt),Ke.push(Nt),He.push(mt)}for(let Ge=0;Ge<4;Ge++){const mt=a.aZ(Z[Ge+Pe],He[Ge],he);Be=mt!==null&&mt>=0?Math.max(Be,mt):Math.max(Be,Ke[Ge])}const et=function(Ge,mt){const Nt=a.aT([],Ge[mt[0]],Ge[mt[1]]),Mt=a.aT([],Ge[mt[2]],Ge[mt[1]]),kt=[0,0,0,0];return a.aU(kt,a.aV([],Nt,Mt)),kt[3]=-a.aW(kt,Ge[mt[0]]),kt}(Z,ee),at=function(Ge,mt){const Nt=a.a_(Ge),Mt=a.a$([],Ge,1/Nt),kt=a.aT([],mt,a.aQ([],Mt,a.aW(mt,Mt))),zt=a.a_(kt);if(zt>0){const yr=Math.sqrt(1-Mt[3]*Mt[3]),mr=a.aQ([],Mt,-Mt[3]),Kt=a.aR([],mr,a.aQ([],kt,yr/zt));return a.b0(mt,Kt)}return null}(he,et);if(at!==null){const Ge=at/a.aW(He[0],et);Be=Math.min(Be,Ge)}for(let Ge=0;Ge<4;Ge++){const mt=Math.min(Be,Ke[Ge]);Z[Ge+Me]=[Z[Ge+Pe][0]+He[Ge][0]*mt,Z[Ge+Pe][1]+He[Ge][1]*mt,Z[Ge+Pe][2]+He[Ge][2]*mt,1]}}(R,C[0],m,b);const B=C.map(Z=>{const ee=a.aT([],R[Z[0]],R[Z[1]]),he=a.aT([],R[Z[2]],R[Z[1]]),Ie=a.aU([],a.aV([],ee,he)),Pe=-a.aW(Ie,R[Z[1]]);return Ie.concat(Pe)}),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],X=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Z of R)for(let ee=0;ee<3;ee++)q[ee]=Math.min(q[ee],Z[ee]),X[ee]=Math.max(X[ee],Z[ee]);return new Ir(R,B,new Vr(q,X))}}class xn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,u,p){return this._helper.interpolatePadding(i,u,p)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,u,p=!0){this._helper.resize(i,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,u){this._helper.overrideNearFarZ(i,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i,u){}constructor(i,u,p,m,b){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new yn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(C,I)=>this.getConstrained(C,I)},i,u,p,m,b),this._coveringTilesDetailsProvider=new Zt}clone(){const i=new xn;return i.apply(this),i}apply(i,u,p){this._helper.apply(i,u,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(i){const u=[new a.b1(0,i)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),C=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),I=Math.floor(Math.min(p.x,m.x,b.x,C.x)),R=Math.floor(Math.max(p.x,m.x,b.x,C.x)),B=1;for(let q=I-B;q<=R+B;q++)q!==0&&u.push(new a.b1(q,i))}return u}getCameraFrustum(){return Ir.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){const u=this.screenPointToLocation(this.centerPoint,i),p=i?i.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(i,u){const p=a.ai(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(u,p),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),C=a.a0.fromLngLat(i),I=new a.a0(C.x-(m.x-b.x),C.y-(m.y-b.y));this.setCenter(I==null?void 0:I.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(i,u){return u?this.coordinatePoint(a.a0.fromLngLat(i),u.getElevationForLngLatZoom(i,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a0.fromLngLat(i))}screenPointToLocation(i,u){var p;return(p=this.screenPointToMercatorCoordinate(i,u))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(i,u){if(u){const p=u.pointCoordinate(i);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(i)}screenPointToMercatorCoordinateAtZ(i,u){const p=u||0,m=[i.x,i.y,0,1],b=[i.x,i.y,1,1];a.av(m,m,this._pixelMatrixInverse),a.av(b,b,this._pixelMatrixInverse);const C=m[3],I=b[3],R=m[1]/C,B=b[1]/I,q=m[2]/C,X=b[2]/I,Z=q===X?0:(p-q)/(X-q);return new a.a0(a.C.number(m[0]/C,b[0]/I,Z)/this.worldSize,a.C.number(R,B,Z)/this.worldSize,p)}coordinatePoint(i,u=0,p=this._pixelMatrix){const m=[i.x*this.worldSize,i.y*this.worldSize,u,1];return a.av(m,m,p),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){const i=Math.max(0,this._helper._height/2-oe(this));return new rr().extend(this.screenPointToLocation(new a.P(0,i))).extend(this.screenPointToLocation(new a.P(this._helper._width,i))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(i,u){return u?u.pointCoordinate(i)!=null:i.y>this.height/2-oe(this)}calculatePosMatrix(i,u=!1,p){var m;const b=(m=i.key)!==null&&m!==void 0?m:a.b2(i.wrap,i.canonical.z,i.canonical.z,i.canonical.x,i.canonical.y),C=u?this._alignedPosMatrixCache:this._posMatrixCache;if(C.has(b)){const B=C.get(b);return p?B.f32:B.f64}const I=ye(i,this.worldSize);a.O(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const R={f64:I,f32:new Float32Array(I)};return C.set(b,R),p?R.f32:R.f64}calculateFogMatrix(i){const u=i.key,p=this._fogMatrixCacheF32;if(p.has(u))return p.get(u);const m=ye(i,this.worldSize);return a.O(m,this._fogMatrix,m),p.set(u,new Float32Array(m)),p.get(u)}getConstrained(i,u){u=a.ag(+u,this.minZoom,this.maxZoom);const p={center:new a.S(i.lng,i.lat),zoom:u};let m=this._helper._lngRange;this._helper._renderWorldCopies||m!==null||(m=[-179.9999999999,180-1e-10]);const b=this.tileSize*a.ae(p.zoom);let C=0,I=b,R=0,B=b,q=0,X=0;const{x:Z,y:ee}=this.size;if(this._helper._latRange){const Ke=this._helper._latRange;C=a.U(Ke[1])*b,I=a.U(Ke[0])*b,I-C<ee&&(q=ee/(I-C))}m&&(R=a.aN(a.V(m[0])*b,0,b),B=a.aN(a.V(m[1])*b,0,b),B<R&&(B+=b),B-R<Z&&(X=Z/(B-R)));const{x:he,y:Ie}=ot(b,i);let Pe,Me;const Be=Math.max(X||0,q||0);if(Be){const Ke=new a.P(X?(B+R)/2:he,q?(I+C)/2:Ie);return p.center=ae(b,Ke).wrap(),p.zoom+=a.aj(Be),p}if(this._helper._latRange){const Ke=ee/2;Ie-Ke<C&&(Me=C+Ke),Ie+Ke>I&&(Me=I-Ke)}if(m){const Ke=(R+B)/2;let He=he;this._helper._renderWorldCopies&&(He=a.aN(he,Ke-b/2,Ke+b/2));const et=Z/2;He-et<R&&(Pe=R+et),He+et>B&&(Pe=B-et)}if(Pe!==void 0||Me!==void 0){const Ke=new a.P(Pe??he,Me??Ie);p.center=ae(b,Ke).wrap()}return p}calculateCenterFromCameraLngLatAlt(i,u,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(i,u,p,m)}_calculateNearFarZIfNeeded(i,u,p){if(!this._helper.autoCalculateNearFarZ)return;const m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=i-m*this._helper._pixelPerMeter/Math.cos(u),C=m<0?b:i,I=Math.PI/2+this.pitchInRadians,R=a.ad(this.fov)*(Math.abs(Math.cos(a.ad(this.roll)))*this.height+Math.abs(Math.sin(a.ad(this.roll)))*this.width)/this.height*(.5+p.y/this.height),B=Math.sin(R)*C/Math.sin(a.ag(Math.PI-I-R,.01,Math.PI-.01)),q=oe(this),X=Math.atan(q/this._helper.cameraToCenterDistance),Z=a.ad(.75),ee=X>Z?2*X*(.5+p.y/(2*q)):Z,he=Math.sin(ee)*C/Math.sin(a.ag(Math.PI-I-ee,.01,Math.PI-.01)),Ie=Math.min(B,he);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*Ie+C),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const i=this.centerOffset,u=ot(this.worldSize,this.center),p=u.x,m=u.y;this._helper._pixelPerMeter=a.ai(1,this.center.lat)*this.worldSize;const b=a.ad(Math.min(this.pitch,_r)),C=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let I;this._calculateNearFarZIfNeeded(C,b,i),I=new Float64Array(16),a.b3(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.ap(this._invProjMatrix,I),I[8]=2*-i.x/this._helper._width,I[9]=2*i.y/this._helper._height,this._projectionMatrix=a.b4(I),a.N(I,I,[1,-1,1]),a.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),a.b5(I,I,-this.rollInRadians),a.b6(I,I,this.pitchInRadians),a.b5(I,I,-this.bearingInRadians),a.M(I,I,[-p,-m,0]),this._mercatorMatrix=a.N([],I,[this.worldSize,this.worldSize,this.worldSize]),a.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),a.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=a.ap([],I);const R=[0,0,-1,1];a.av(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),a.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,C,this._helper._farZ),this._fogMatrix[8]=2*-i.x/this.width,this._fogMatrix[9]=2*i.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-p,-m,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const B=this._helper._width%2/2,q=this._helper._height%2/2,X=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),ee=p-Math.round(p)+X*B+Z*q,he=m-Math.round(m)+X*q+Z*B,Ie=new Float64Array(I);if(a.M(Ie,Ie,[ee>.5?ee-1:ee,he>.5?he-1:he,0]),this._alignedProjMatrix=Ie,I=a.ap(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const i=this.screenPointToMercatorCoordinate(new a.P(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.av(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const i=a.ai(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/i).toLngLat()}lngLatToCameraDepth(i,u){const p=a.a0.fromLngLat(i),m=[p.x*this.worldSize,p.y*this.worldSize,u,1];return a.av(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(i){const{overscaledTileID:u,aligned:p,applyTerrainMatrix:m}=i,b=this._helper.getMercatorTileCoordinates(u),C=u?this.calculatePosMatrix(u,p,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&m?u.terrainRttPosMatrix32f:C||a.b7(),{mainMatrix:I,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(i){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(i,u,p){return 1}transformLightDirection(i){return a.aS(i)}getRayDirectionFromPixel(i){throw new Error("Not implemented.")}projectTileCoordinates(i,u,p,m){const b=this.calculatePosMatrix(p);let C;m?(C=[i,u,m(i,u),1],a.av(C,C,b)):(C=[i,u,0,1],Sl(C,C,b));const I=C[3];return{point:new a.P(C[0]/I,C[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(i){for(const u of i)this.calculatePosMatrix(u)}getMatrixForModel(i,u){const p=a.a0.fromLngLat(i,u),m=p.meterInMercatorCoordinateUnits(),b=a.b8();return a.M(b,b,[p.x,p.y,p.z]),a.b5(b,b,Math.PI),a.b6(b,b,Math.PI/2),a.N(b,b,[-m,m,m]),b}getProjectionDataForCustomLayer(i=!0){const u=new a.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:i}),m=ye(u,this.worldSize);a.O(m,this._viewProjMatrix,m),p.tileMercatorCoords=[0,0,1,1];const b=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],C=a.b9();return a.N(C,m,b),p.fallbackMatrix=C,p.mainMatrix=C,p}getFastPathSimpleProjectionMatrix(i){return this.calculatePosMatrix(i)}}function Jn(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Pn(_){if(_.useSlerp)if(_.k<1){const i=a.ba(_.startEulerAngles.roll,_.startEulerAngles.pitch,_.startEulerAngles.bearing),u=a.ba(_.endEulerAngles.roll,_.endEulerAngles.pitch,_.endEulerAngles.bearing),p=new Float64Array(4);a.bb(p,i,u,_.k);const m=a.bc(p);_.tr.setRoll(m.roll),_.tr.setPitch(m.pitch),_.tr.setBearing(m.bearing)}else _.tr.setRoll(_.endEulerAngles.roll),_.tr.setPitch(_.endEulerAngles.pitch),_.tr.setBearing(_.endEulerAngles.bearing);else _.tr.setRoll(a.C.number(_.startEulerAngles.roll,_.endEulerAngles.roll,_.k)),_.tr.setPitch(a.C.number(_.startEulerAngles.pitch,_.endEulerAngles.pitch,_.k)),_.tr.setBearing(a.C.number(_.startEulerAngles.bearing,_.endEulerAngles.bearing,_.k))}function ii(_,i,u,p,m){const b=m.padding,C=ot(m.worldSize,u.getNorthWest()),I=ot(m.worldSize,u.getNorthEast()),R=ot(m.worldSize,u.getSouthEast()),B=ot(m.worldSize,u.getSouthWest()),q=a.ad(-p),X=C.rotate(q),Z=I.rotate(q),ee=R.rotate(q),he=B.rotate(q),Ie=new a.P(Math.max(X.x,Z.x,he.x,ee.x),Math.max(X.y,Z.y,he.y,ee.y)),Pe=new a.P(Math.min(X.x,Z.x,he.x,ee.x),Math.min(X.y,Z.y,he.y,ee.y)),Me=Ie.sub(Pe),Be=(m.width-(b.left+b.right+i.left+i.right))/Me.x,Ke=(m.height-(b.top+b.bottom+i.top+i.bottom))/Me.y;if(Ke<0||Be<0)return void Jn();const He=Math.min(a.aj(m.scale*Math.min(Be,Ke)),_.maxZoom),et=a.P.convert(_.offset),at=new a.P((i.left-i.right)/2,(i.top-i.bottom)/2).rotate(a.ad(p)),Ge=et.add(at).mult(m.scale/a.ae(He));return{center:ae(m.worldSize,C.add(R).div(2).sub(Ge)),zoom:He,bearing:p}}class Gu{get useGlobeControls(){return!1}handlePanInertia(i,u){return{easingOffset:i,easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(i,u){i.bearingDelta&&u.setBearing(u.bearing+i.bearingDelta),i.pitchDelta&&u.setPitch(u.pitch+i.pitchDelta),i.rollDelta&&u.setRoll(u.roll+i.rollDelta),i.zoomDelta&&u.setZoom(u.zoom+i.zoomDelta)}handleMapControlsPan(i,u,p){i.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(p,i.around)}cameraForBoxAndBearing(i,u,p,m,b){return ii(i,u,p,m,b)}handleJumpToCenterZoom(i,u){i.zoom!==(u.zoom!==void 0?+u.zoom:i.zoom)&&i.setZoom(+u.zoom),u.center!==void 0&&i.setCenter(a.S.convert(u.center))}handleEaseTo(i,u){const p=i.zoom,m=i.padding,b={roll:i.roll,pitch:i.pitch,bearing:i.bearing},C={roll:u.roll===void 0?i.roll:u.roll,pitch:u.pitch===void 0?i.pitch:u.pitch,bearing:u.bearing===void 0?i.bearing:u.bearing},I=u.zoom!==void 0,R=!i.isPaddingEqual(u.padding);let B=!1;const q=I?+u.zoom:i.zoom;let X=i.centerPoint.add(u.offsetAsPoint);const Z=i.screenPointToLocation(X),{center:ee,zoom:he}=i.getConstrained(a.S.convert(u.center||Z),q??p);an(i,ee);const Ie=ot(i.worldSize,Z),Pe=ot(i.worldSize,ee).sub(Ie),Me=a.ae(he-p);return B=he!==p,{easeFunc:Be=>{if(B&&i.setZoom(a.C.number(p,he,Be)),a.bd(b,C)||Pn({startEulerAngles:b,endEulerAngles:C,tr:i,k:Be,useSlerp:b.roll!=C.roll}),R&&(i.interpolatePadding(m,u.padding,Be),X=i.centerPoint.add(u.offsetAsPoint)),u.around)i.setLocationAtPoint(u.around,u.aroundPoint);else{const Ke=a.ae(i.zoom-p),He=he>p?Math.min(2,Me):Math.max(.5,Me),et=Math.pow(He,1-Be),at=ae(i.worldSize,Ie.add(Pe.mult(Be*et)).mult(Ke));i.setLocationAtPoint(i.renderWorldCopies?at.wrap():at,X)}},isZooming:B,elevationCenter:ee}}handleFlyTo(i,u){const p=u.zoom!==void 0,m=i.zoom,b=i.getConstrained(a.S.convert(u.center||u.locationAtOffset),p?+u.zoom:m),C=b.center,I=b.zoom;an(i,C);const R=ot(i.worldSize,u.locationAtOffset),B=ot(i.worldSize,C).sub(R),q=B.mag(),X=a.ae(I-m);let Z;if(u.minZoom!==void 0){const ee=Math.min(+u.minZoom,m,I),he=i.getConstrained(C,ee).zoom;Z=a.ae(he-m)}return{easeFunc:(ee,he,Ie,Pe)=>{i.setZoom(ee===1?I:m+a.aj(he));const Me=ee===1?C:ae(i.worldSize,R.add(B.mult(Ie)).mult(he));i.setLocationAtPoint(i.renderWorldCopies?Me.wrap():Me,Pe)},scaleOfZoom:X,targetCenter:C,scaleOfMinZoom:Z,pixelPathLength:q}}}class Wr{constructor(i,u,p){this.blendFunction=i,this.blendColor=u,this.mask=p}}Wr.Replace=[1,0],Wr.disabled=new Wr(Wr.Replace,a.be.transparent,[!1,!1,!1,!1]),Wr.unblended=new Wr(Wr.Replace,a.be.transparent,[!0,!0,!0,!0]),Wr.alphaBlended=new Wr([1,771],a.be.transparent,[!0,!0,!0,!0]);const vo=2305;class vn{constructor(i,u,p){this.enable=i,this.mode=u,this.frontFace=p}}vn.disabled=new vn(!1,1029,vo),vn.backCCW=new vn(!0,1029,vo),vn.frontCCW=new vn(!0,1028,vo);class sn{constructor(i,u,p){this.func=i,this.mask=u,this.range=p}}sn.ReadOnly=!1,sn.ReadWrite=!0,sn.disabled=new sn(519,sn.ReadOnly,[0,1]);const Ka=7680;class tn{constructor(i,u,p,m,b,C){this.test=i,this.ref=u,this.mask=p,this.fail=m,this.depthFail=b,this.pass=C}}tn.disabled=new tn({func:519,mask:0},0,0,Ka,Ka,Ka);const Ks=new WeakMap;function co(_){var i;if(Ks.has(_))return Ks.get(_);{const u=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ks.set(_,u),u}}class Is{get awaitingQuery(){return!!this._readbackQueue}constructor(i){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=i;const u=i.context,p=u.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const m=new a.aK;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);const b=new a.aM;b.emplaceBack(0,1,2),this._fullscreenTriangle=new yt(u.createVertexBuffer(m,Jt.members),u.createIndexBuffer(b),a.aL.simpleSegment(0,0,m.length,b.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(p.TEXTURE1);const C=p.createTexture();p.bindTexture(p.TEXTURE_2D,C),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(C),co(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const i=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),i.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(i,u){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(i,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const i=this._cachedRenderContext.context,u=i.gl;i.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),i.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(i,u){const p=this._cachedRenderContext.context,m=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:a.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,m.TRIANGLES,sn.disabled,tn.disabled,Wr.unblended,vn.disabled,((b,C)=>({u_input:b,u_output_expected:C}))(i,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&co(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);const b=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const i=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&co(i)){const u=i.clientWaitSync(this._readbackQueue.sync,0,0);if(u===i.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===i.TIMEOUT_EXPIRED)return;i.bindBuffer(i.PIXEL_PACK_BUFFER,this._pbo),i.getBufferSubData(i.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),i.bindBuffer(i.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),i.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Is._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(i){let u=0;return u+=i[0]/256,u+=i[1]/65536,u+=i[2]/16777216,i[3]<127&&(u=-u),u/128}}const To=a.$/128;function Cl(_,i){const u=_.granularity!==void 0?Math.max(_.granularity,1):1,p=u+(_.generateBorders?2:0),m=u+(_.extendToNorthPole||_.generateBorders?1:0)+(_.extendToSouthPole||_.generateBorders?1:0),b=p+1,C=m+1,I=_.generateBorders?-1:0,R=_.generateBorders||_.extendToNorthPole?-1:0,B=u+(_.generateBorders?1:0),q=u+(_.generateBorders||_.extendToSouthPole?1:0),X=b*C,Z=p*m*6,ee=b*C>65536;if(ee&&i==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const he=ee||i==="32bit",Ie=new Int16Array(2*X);let Pe=0;for(let Ke=R;Ke<=q;Ke++)for(let He=I;He<=B;He++){let et=He/u*a.$;He===-1&&(et=-64),He===u+1&&(et=a.$+To);let at=Ke/u*a.$;Ke===-1&&(at=_.extendToNorthPole?a.bg:-64),Ke===u+1&&(at=_.extendToSouthPole?a.bh:a.$+To),Ie[Pe++]=et,Ie[Pe++]=at}const Me=he?new Uint32Array(Z):new Uint16Array(Z);let Be=0;for(let Ke=0;Ke<m;Ke++)for(let He=0;He<p;He++){const et=He+1+Ke*b,at=He+(Ke+1)*b,Ge=He+1+(Ke+1)*b;Me[Be++]=He+Ke*b,Me[Be++]=at,Me[Be++]=et,Me[Be++]=et,Me[Be++]=at,Me[Be++]=Ge}return{vertices:Ie.buffer.slice(0),indices:Me.buffer.slice(0),uses32bitIndices:he}}const Ra=new a.aJ({fill:new a.bi(128,2),line:new a.bi(512,0),tile:new a.bi(128,32),stencil:new a.bi(128,1),circle:3});class pu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return nt.projectionGlobe}get vertexShaderPreludeCode(){return nt.projectionMercator.vertexSource}get subdivisionGranularity(){return Ra}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(i){this._errorMeasurement||(this._errorMeasurement=new Is(i));const u=a.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(u,p),b=D.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=b);const C=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bk(C))}_getMeshKey(i){return`${i.granularity.toString(36)}_${i.generateBorders?"b":""}${i.extendToNorthPole?"n":""}${i.extendToSouthPole?"s":""}`}getMeshFromTileID(i,u,p,m,b){const C=(b==="stencil"?Ra.stencil:Ra.tile).getGranularityForZoomLevel(u.z);return this._getMesh(i,{granularity:C,generateBorders:p,extendToNorthPole:u.y===0&&m,extendToSouthPole:u.y===(1<<u.z)-1&&m})}_getMesh(i,u){const p=this._getMeshKey(u);if(p in this._tileMeshCache)return this._tileMeshCache[p];const m=function(b,C){const I=Cl(C,"16bit"),R=a.aK.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),B=a.aM.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new yt(b.createVertexBuffer(R,Jt.members),b.createIndexBuffer(B),a.aL.simpleSegment(0,0,R.length,B.length))}(i,u);return this._tileMeshCache[p]=m,m}recalculate(i){}hasTransition(){const i=D.now();let u=!1;return u=u||(i-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(i){this._errorQueryLatitudeDegrees=i}}const mu=new a.r({type:new a.D(a.v.projection.type)});class ds extends a.E{constructor(i){super(),this._transitionable=new a.t(mu),this.setProjection(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new xr,this._verticalPerspectiveProjection=new pu}get transitionState(){const i=this.properties.get("type");if(typeof i=="string"&&i==="mercator")return 0;if(typeof i=="string"&&i==="vertical-perspective")return 1;if(i instanceof a.bl){if(i.from==="vertical-perspective"&&i.to==="mercator")return 1-i.transition;if(i.from==="mercator"&&i.to==="vertical-perspective")return i.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(i){this._mercatorProjection.updateGPUdependent(i),this._verticalPerspectiveProjection.updateGPUdependent(i)}getMeshFromTileID(i,u,p,m,b){return this.currentProjection.getMeshFromTileID(i,u,p,m,b)}setProjection(i){this._transitionable.setValue("type",(i==null?void 0:i.type)||"mercator")}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}setErrorQueryLatitudeDegrees(i){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(i),this._mercatorProjection.setErrorQueryLatitudeDegrees(i)}}function Js(_){const i=zo(_.worldSize,_.center.lat);return 2*Math.PI*i}function Sa(_,i,u,p,m){const b=1/(1<<m),C=i/a.$*b+p*b,I=a.bn((_/a.$*b+u*b)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI,B=Math.cos(R),q=new Float64Array(3);return q[0]=Math.sin(I)*B,q[1]=Math.sin(R),q[2]=Math.cos(I)*B,q}function gi(_){return function(i,u){const p=Math.cos(u),m=new Float64Array(3);return m[0]=Math.sin(i)*p,m[1]=Math.sin(u),m[2]=Math.cos(i)*p,m}(_.lng*Math.PI/180,_.lat*Math.PI/180)}function zo(_,i){return _/(2*Math.PI)/Math.cos(i*Math.PI/180)}function O(_){const i=Math.asin(_[1])/Math.PI*180,u=Math.sqrt(_[0]*_[0]+_[2]*_[2]);if(u>1e-6){const p=_[0]/u,m=Math.acos(_[2]/u),b=(p>0?m:-m)/Math.PI*180;return new a.S(a.aN(b,-180,180),i)}return new a.S(0,i)}function ue(_){return Math.cos(_*Math.PI/180)}function Le(_,i){const u=ue(_),p=ue(i);return a.aj(p/u)}function ut(_,i){const u=_.rotate(i.bearingInRadians),p=i.zoom+Le(i.center.lat,0),m=a.bj(1/ue(i.center.lat),1/ue(Math.min(Math.abs(i.center.lat),60)),a.bm(p,7,3,0,1)),b=360/Js({worldSize:i.worldSize,center:{lat:i.center.lat}});return new a.S(i.center.lng-u.x*b*m,a.ag(i.center.lat+u.y*b,-85.051129,a.ah))}function Et(_){const i=.5*_,u=Math.sin(i),p=Math.cos(i);return Math.log(u+p)-Math.log(p-u)}function Wt(_,i,u,p){const m=_.lat+u*p;if(Math.abs(u)>1){const b=(Math.sign(_.lat+u)!==Math.sign(_.lat)?-Math.abs(_.lat):Math.abs(_.lat))*Math.PI/180,C=Math.abs(_.lat+u)*Math.PI/180,I=Et(b+p*(C-b)),R=Et(b),B=Et(C);return new a.S(_.lng+i*((I-R)/(B-R)),m)}return new a.S(_.lng+i*p,m)}class or{constructor(i){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=i}swapBuffers(){if(!this._hadAnyChanges)return;const i=this._cachePrevious;this._cachePrevious=this._cache,this._cache=i,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(i,u,p,m){const b=`${i.z}_${i.x}_${i.y}_${m!=null&&m.terrain?"t":""}`,C=this._cache.get(b);if(C)return C;const I=this._cachePrevious.get(b);if(I)return this._cache.set(b,I),I;const R=this._boundingVolumeFactory(i,u,p,m);return this._cache.set(b,R),this._hadAnyChanges=!0,R}}class Or{constructor(i,u,p,m){this.min=p,this.max=m,this.points=i,this.planes=u}static fromAabb(i,u){const p=[];for(let m=0;m<8;m++)p.push([1&~m?i[0]:u[0],(m>>1&1)==1?u[1]:i[1],(m>>2&1)==1?u[2]:i[2]]);return new Or(p,[[-1,0,0,u[0]],[1,0,0,-i[0]],[0,-1,0,u[1]],[0,1,0,-i[1]],[0,0,-1,u[2]],[0,0,1,-i[2]]],i,u)}static fromCenterSizeAngles(i,u,p){const m=a.bq([],p[0],p[1],p[2]),b=a.br([],[u[0],0,0],m),C=a.br([],[0,u[1],0],m),I=a.br([],[0,0,u[2]],m),R=[...i],B=[...i];for(let X=0;X<8;X++)for(let Z=0;Z<3;Z++){const ee=i[Z]+b[Z]*(1&~X?-1:1)+C[Z]*((X>>1&1)==1?1:-1)+I[Z]*((X>>2&1)==1?1:-1);R[Z]=Math.min(R[Z],ee),B[Z]=Math.max(B[Z],ee)}const q=[];for(let X=0;X<8;X++){const Z=[...i];a.aR(Z,Z,a.aQ([],b,1&~X?-1:1)),a.aR(Z,Z,a.aQ([],C,(X>>1&1)==1?1:-1)),a.aR(Z,Z,a.aQ([],I,(X>>2&1)==1?1:-1)),q.push(Z)}return new Or(q,[[...b,-a.aW(b,q[0])],[...C,-a.aW(C,q[0])],[...I,-a.aW(I,q[0])],[-b[0],-b[1],-b[2],-a.aW(b,q[7])],[-C[0],-C[1],-C[2],-a.aW(C,q[7])],[-I[0],-I[1],-I[2],-a.aW(I,q[7])]],R,B)}intersectsFrustum(i){let u=!0;const p=this.points.length,m=this.planes.length,b=i.planes.length,C=i.points.length;for(let I=0;I<b;I++){const R=i.planes[I];let B=0;for(let q=0;q<p;q++){const X=this.points[q];R[0]*X[0]+R[1]*X[1]+R[2]*X[2]+R[3]>=0&&B++}if(B===0)return 0;B<p&&(u=!1)}if(u)return 2;for(let I=0;I<m;I++){const R=this.planes[I];let B=0;for(let q=0;q<C;q++){const X=i.points[q];R[0]*X[0]+R[1]*X[1]+R[2]*X[2]+R[3]>=0&&B++}if(B===0)return 0}return 1}intersectsPlane(i){const u=this.points.length;let p=0;for(let m=0;m<u;m++){const b=this.points[m];i[0]*b[0]+i[1]*b[1]+i[2]*b[2]+i[3]>=0&&p++}return p===u?2:p===0?0:1}}function Zr(_,i,u){const p=_-i;return p<0?-p:Math.max(0,p-u)}function wn(_,i,u,p,m){const b=_-u;let C;return C=b<0?Math.min(-b,1+b-m):b>1?Math.min(Math.max(b-m,0),1-b):0,Math.max(C,Zr(i,p,m))}class Rn{constructor(){this._boundingVolumeCache=new or(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(i,u,p,m){const b=1<<p.z,C=1/b,I=p.x/b,R=p.y/b;let B=2;return B=Math.min(B,wn(i,u,I,R,C)),B=Math.min(B,wn(i,u,I+.5,-R-C,C)),B=Math.min(B,wn(i,u,I+.5,2-R-C,C)),B}getWrap(i,u,p){const m=1<<u.z,b=1/m,C=u.x/m,I=Zr(i.x,C,b),R=Zr(i.x,C-1,b),B=Zr(i.x,C+1,b),q=Math.min(I,R,B);return q===B?1:q===R?-1:0}allowVariableZoom(i,u){return Lt(i,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(i,u,p,m){return this._boundingVolumeCache.getTileBoundingVolume(i,u,p,m)}_computeTileBoundingVolume(i,u,p,m){var b,C;let I=p,R=p;if(m!=null&&m.terrain){const B=new a.Z(i.z,u,i.z,i.x,i.y),q=m.terrain.getMinMaxElevation(B);I=(b=q.minElevation)!==null&&b!==void 0?b:p,R=(C=q.maxElevation)!==null&&C!==void 0?C:p}if(I/=a.bt,R/=a.bt,I+=1,R+=1,i.z<=0)return Or.fromAabb([-R,-R,-R],[R,R,R]);if(i.z===1)return Or.fromAabb([i.x===0?-R:0,i.y===0?0:-R,-R],[i.x===0?0:R,i.y===0?R:0,R]);{const B=[Sa(0,0,i.x,i.y,i.z),Sa(a.$,0,i.x,i.y,i.z),Sa(a.$,a.$,i.x,i.y,i.z),Sa(0,a.$,i.x,i.y,i.z)],q=[];for(const kt of B)q.push(a.aQ([],kt,R));if(R!==I)for(const kt of B)q.push(a.aQ([],kt,I));i.y===0&&q.push([0,1,0]),i.y===(1<<i.z)-1&&q.push([0,-1,0]);const X=[1,1,1],Z=[-1,-1,-1];for(const kt of q)for(let zt=0;zt<3;zt++)X[zt]=Math.min(X[zt],kt[zt]),Z[zt]=Math.max(Z[zt],kt[zt]);const ee=Sa(a.$/2,a.$/2,i.x,i.y,i.z),he=a.aV([],[0,1,0],ee);a.aU(he,he);const Ie=a.aV([],ee,he);a.aU(Ie,Ie);const Pe=a.aV([],B[2],B[1]);a.aU(Pe,Pe);const Me=a.aV([],B[0],B[3]);a.aU(Me,Me),q.push(a.aQ([],ee,R)),i.y>=(1<<i.z)/2&&q.push(a.aQ([],Sa(a.$/2,0,i.x,i.y,i.z),R)),i.y<(1<<i.z)/2&&q.push(a.aQ([],Sa(a.$/2,a.$,i.x,i.y,i.z),R));const Be=_n(ee,q),Ke=_n(Ie,q),He=[-ee[0],-ee[1],-ee[2],Be.max],et=[ee[0],ee[1],ee[2],-Be.min],at=[-Ie[0],-Ie[1],-Ie[2],Ke.max],Ge=[Ie[0],Ie[1],Ie[2],-Ke.min],mt=[...Pe,0],Nt=[...Me,0],Mt=[];return i.y===0?Mt.push(a.bs(Nt,mt,He),a.bs(Nt,mt,et)):Mt.push(a.bs(at,mt,He),a.bs(at,mt,et),a.bs(at,Nt,He),a.bs(at,Nt,et)),i.y===(1<<i.z)-1?Mt.push(a.bs(Nt,mt,He),a.bs(Nt,mt,et)):Mt.push(a.bs(Ge,mt,He),a.bs(Ge,mt,et),a.bs(Ge,Nt,He),a.bs(Ge,Nt,et)),new Or(Mt,[He,et,at,Ge,mt,Nt],X,Z)}}}function _n(_,i){let u=1/0,p=-1/0;for(const m of i){const b=a.aW(_,m);u=Math.min(u,b),p=Math.max(p,b)}return{min:u,max:p}}class _i{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,u,p){return this._helper.interpolatePadding(i,u,p)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,u){this._helper.resize(i,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,u){this._helper.overrideNearFarZ(i,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(i){}constructor(){this._cachedClippingPlane=a.bu(),this._projectionMatrix=a.b8(),this._globeViewProjMatrix32f=a.b7(),this._globeViewProjMatrixNoCorrection=a.b8(),this._globeViewProjMatrixNoCorrectionInverted=a.b8(),this._globeProjMatrixInverted=a.b8(),this._cameraPosition=a.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new yn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,u)=>this.getConstrained(i,u)}),this._coveringTilesDetailsProvider=new Rn}clone(){const i=new _i;return i.apply(this),i}apply(i,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(i)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const i=a.bo();return i[0]=this._cameraPosition[0],i[1]=this._cameraPosition[1],i[2]=this._cameraPosition[2],i}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(i){const{overscaledTileID:u,applyGlobeMatrix:p}=i,m=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(i){const u=this.pitchInRadians,p=this.cameraToCenterDistance/i,m=Math.sin(u)*p,b=Math.cos(u)*p+1,C=1/Math.sqrt(m*m+b*b)*1;let I=-m,R=b;const B=Math.sqrt(I*I+R*R);I/=B,R/=B;const q=[0,I,R];a.bv(q,q,[0,0,0],-this.bearingInRadians),a.bw(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),a.bx(q,q,[0,0,0],this.center.lng*Math.PI/180);const X=1/a.aY(q);return a.aQ(q,q,X),[...q,-C*X]}isLocationOccluded(i){return!this.isSurfacePointVisible(gi(i))}transformLightDirection(i){const u=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,m=Math.cos(p),b=[Math.sin(u)*m,Math.sin(p),Math.cos(u)*m],C=[b[2],0,-b[0]],I=[0,0,0];a.aV(I,C,b),a.aU(C,C),a.aU(I,I);const R=[0,0,0];return a.aU(R,[C[0]*i[0]+I[0]*i[1]+b[0]*i[2],C[1]*i[0]+I[1]*i[1]+b[1]*i[2],C[2]*i[0]+I[2]*i[1]+b[2]*i[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(i,u,p){const m=function(I,R,B){const q=1/(1<<B.z);return new a.a0(I/a.$*q+B.x*q,R/a.$*q+B.y*q)}(i,u,p.canonical),b=(C=m.y,[a.bn(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI]);var C;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(i,u,p,m){const b=p.canonical,C=Sa(i,u,b.x,b.y,b.z),I=1+(m?m(i,u):0)/a.bt,R=[C[0]*I,C[1]*I,C[2]*I,1];a.av(R,R,this._globeViewProjMatrixNoCorrection);const B=this._cachedClippingPlane,q=B[0]*C[0]+B[1]*C[1]+B[2]*C[2]+B[3]<0;return{point:new a.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const i=zo(this.worldSize,this.center.lat),u=a.b9(),p=a.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*i),a.b3(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const m=this.centerOffset;u[8]=2*-m.x/this._helper._width,u[9]=2*m.y/this._helper._height,this._projectionMatrix=a.b4(u),this._globeProjMatrixInverted=a.b9(),a.ap(this._globeProjMatrixInverted,u),a.M(u,u,[0,0,-this.cameraToCenterDistance]),a.b5(u,u,this.rollInRadians),a.b6(u,u,-this.pitchInRadians),a.b5(u,u,this.bearingInRadians),a.M(u,u,[0,0,-i]);const b=a.bo();b[0]=i,b[1]=i,b[2]=i,a.b6(p,u,this.center.lat*Math.PI/180),a.by(p,p,-this.center.lng*Math.PI/180),a.N(p,p,b),this._globeViewProjMatrixNoCorrection=p,a.b6(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.by(u,u,-this.center.lng*Math.PI/180),a.N(u,u,b),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),a.ap(this._globeViewProjMatrixNoCorrectionInverted,p);const C=a.bo();this._cameraPosition=a.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/i,a.bv(this._cameraPosition,this._cameraPosition,C,-this.rollInRadians),a.bw(this._cameraPosition,this._cameraPosition,C,this.pitchInRadians),a.bv(this._cameraPosition,this._cameraPosition,C,-this.bearingInRadians),a.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bw(this._cameraPosition,this._cameraPosition,C,-this.center.lat*Math.PI/180),a.bx(this._cameraPosition,this._cameraPosition,C,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(i);const I=a.b4(this._globeViewProjMatrixNoCorrectionInverted);a.N(I,I,[1,1,-1]),this._cachedFrustum=Ir.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(i){a.w("calculateFogMatrix is not supported on globe projection.");const u=a.b9();return a.af(u),u}getVisibleUnwrappedCoordinates(i){return[new a.b1(0,i)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(i){i&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=gi(i);a.aQ(p,p,1+u/a.bt);const m=a.bu();return a.av(m,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(i){}getBounds(){const i=.5*this.width,u=.5*this.height,p=[new a.P(0,0),new a.P(i,0),new a.P(this.width,0),new a.P(this.width,u),new a.P(this.width,this.height),new a.P(i,this.height),new a.P(0,this.height),new a.P(0,u)],m=[];for(const X of p)m.push(this.unprojectScreenPoint(X));let b=0,C=0,I=0,R=0;const B=this.center;for(const X of m){const Z=a.bz(B.lng,X.lng),ee=a.bz(B.lat,X.lat);Z<C&&(C=Z),Z>b&&(b=Z),ee<R&&(R=ee),ee>I&&(I=ee)}const q=[B.lng+C,B.lat+R,B.lng+b,B.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new rr(q)}getConstrained(i,u){const p=a.ag(i.lat,-85.051129,a.ah),m=a.ag(+u,this.minZoom+Le(0,p),this.maxZoom);return{center:new a.S(i.lng,p),zoom:m}}calculateCenterFromCameraLngLatAlt(i,u,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(i,u,p,m)}setLocationAtPoint(i,u){const p=gi(this.unprojectScreenPoint(u)),m=gi(i),b=a.bo();a.bA(b);const C=a.bo();a.bx(C,p,b,-this.center.lng*Math.PI/180),a.bw(C,C,b,this.center.lat*Math.PI/180);const I=m[0]*m[0]+m[2]*m[2],R=C[0]*C[0];if(I<R)return;const B=Math.sqrt(I-R),q=-B,X=a.bB(m[0],m[2],C[0],B),Z=a.bB(m[0],m[2],C[0],q),ee=a.bo();a.bx(ee,m,b,-X);const he=a.bB(ee[1],ee[2],C[1],C[2]),Ie=a.bo();a.bx(Ie,m,b,-Z);const Pe=a.bB(Ie[1],Ie[2],C[1],C[2]),Me=.5*Math.PI,Be=he>=-Me&&he<=Me,Ke=Pe>=-Me&&Pe<=Me;let He,et;if(Be&&Ke){const Nt=this.center.lng*Math.PI/180,Mt=this.center.lat*Math.PI/180;a.bC(X,Nt)+a.bC(he,Mt)<a.bC(Z,Nt)+a.bC(Pe,Mt)?(He=X,et=he):(He=Z,et=Pe)}else if(Be)He=X,et=he;else{if(!Ke)return;He=Z,et=Pe}const at=He/Math.PI*180,Ge=et/Math.PI*180,mt=this.center.lat;this.setCenter(new a.S(at,a.ag(Ge,-90,90))),this.setZoom(this.zoom+Le(mt,this.center.lat))}locationToScreenPoint(i,u){const p=gi(i);if(u){const m=u.getElevationForLngLatZoom(i,this._helper._tileZoom);a.aQ(p,p,1+m/a.bt)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(i){const u=a.bu();return a.av(u,[...i,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new a.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(i,u){if(u){const p=u.pointCoordinate(i);if(p)return p}return a.a0.fromLngLat(this.unprojectScreenPoint(i))}screenPointToLocation(i,u){var p;return(p=this.screenPointToMercatorCoordinate(i,u))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(i,u){const p=this._cameraPosition,m=this.getRayDirectionFromPixel(i);return!!this.rayPlanetIntersection(p,m)}getRayDirectionFromPixel(i){const u=a.bu();u[0]=i.x/this.width*2-1,u[1]=-1*(i.y/this.height*2-1),u[2]=1,u[3]=1,a.av(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const p=a.bo();p[0]=u[0]-this._cameraPosition[0],p[1]=u[1]-this._cameraPosition[1],p[2]=u[2]-this._cameraPosition[2];const m=a.bo();return a.aU(m,p),m}isSurfacePointVisible(i){const u=this._cachedClippingPlane;return u[0]*i[0]+u[1]*i[1]+u[2]*i[2]+u[3]>=0}isSurfacePointOnScreen(i){if(!this.isSurfacePointVisible(i))return!1;const u=a.bu();return a.av(u,[...i,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(i,u){const p=a.aW(i,u),m=a.bo(),b=a.bo();a.aQ(b,u,p),a.aT(m,i,b);const C=1-a.aW(m,m);if(C<0)return null;const I=a.aW(i,i)-1,R=-p+(p<0?1:-1)*Math.sqrt(C),B=I/R,q=R;return{tMin:Math.min(B,q),tMax:Math.max(B,q)}}unprojectScreenPoint(i){const u=this._cameraPosition,p=this.getRayDirectionFromPixel(i),m=this.rayPlanetIntersection(u,p);if(m){const q=a.bo();a.aR(q,u,[p[0]*m.tMin,p[1]*m.tMin,p[2]*m.tMin]);const X=a.bo();return a.aU(X,q),O(X)}const b=this._cachedClippingPlane,C=b[0]*p[0]+b[1]*p[1]+b[2]*p[2],I=-a.b0(b,u)/C,R=a.bo();if(I>0)a.aR(R,u,[p[0]*I,p[1]*I,p[2]*I]);else{const q=a.bo();a.aR(q,u,[2*p[0],2*p[1],2*p[2]]);const X=a.b0(this._cachedClippingPlane,q);a.aT(R,q,[this._cachedClippingPlane[0]*X,this._cachedClippingPlane[1]*X,this._cachedClippingPlane[2]*X])}const B=function(q){const X=a.bo();return X[0]=q[0]*-q[3],X[1]=q[1]*-q[3],X[2]=q[2]*-q[3],{center:X,radius:Math.sqrt(1-q[3]*q[3])}}(b);return O(function(q,X,Z){const ee=a.bo();a.aT(ee,Z,q);const he=a.bo();return a.bp(he,q,ee,X/a.a_(ee)),he}(B.center,B.radius,R))}getMatrixForModel(i,u){const p=a.S.convert(i),m=1/a.bt,b=a.b8();return a.by(b,b,p.lng/180*Math.PI),a.b6(b,b,-p.lat/180*Math.PI),a.M(b,b,[0,0,1+u/a.bt]),a.b6(b,b,.5*Math.PI),a.N(b,b,[m,m,m]),b}getProjectionDataForCustomLayer(i=!0){const u=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:i});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(i){}}class fi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(i){this._helper.setMinZoom(i)}setMaxZoom(i){this._helper.setMaxZoom(i)}setMinPitch(i){this._helper.setMinPitch(i)}setMaxPitch(i){this._helper.setMaxPitch(i)}setRenderWorldCopies(i){this._helper.setRenderWorldCopies(i)}setBearing(i){this._helper.setBearing(i)}setPitch(i){this._helper.setPitch(i)}setRoll(i){this._helper.setRoll(i)}setFov(i){this._helper.setFov(i)}setZoom(i){this._helper.setZoom(i)}setCenter(i){this._helper.setCenter(i)}setElevation(i){this._helper.setElevation(i)}setMinElevationForCurrentTile(i){this._helper.setMinElevationForCurrentTile(i)}setPadding(i){this._helper.setPadding(i)}interpolatePadding(i,u,p){return this._helper.interpolatePadding(i,u,p)}isPaddingEqual(i){return this._helper.isPaddingEqual(i)}resize(i,u,p=!0){this._helper.resize(i,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(i){this._helper.setMaxBounds(i)}overrideNearFarZ(i,u){this._helper.overrideNearFarZ(i,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(i){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),i)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(i,u){this._globeness=i,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new yn({calcMatrices:()=>{this._calcMatrices()},getConstrained:(i,u)=>this.getConstrained(i,u)}),this._globeness=1,this._mercatorTransform=new xn,this._verticalPerspectiveTransform=new _i}clone(){const i=new fi;return i._globeness=this._globeness,i._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,i.apply(this),i}apply(i){this._helper.apply(i),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(i){const u=this._mercatorTransform.getProjectionData(i),p=this._verticalPerspectiveTransform.getProjectionData(i);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:u.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:i.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(i){return this.currentTransform.isLocationOccluded(i)}transformLightDirection(i){return this.currentTransform.transformLightDirection(i)}getPixelScale(){return a.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(i,u,p){const m=this._mercatorTransform.getPitchedTextCorrection(i,u,p),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(i,u,p);return a.bj(m,b,this._globeness)}projectTileCoordinates(i,u,p,m){return this.currentTransform.projectTileCoordinates(i,u,p,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(i){return this.currentTransform.calculateFogMatrix(i)}getVisibleUnwrappedCoordinates(i){return this.currentTransform.getVisibleUnwrappedCoordinates(i)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(i){this._mercatorTransform.recalculateZoomAndCenter(i),this._verticalPerspectiveTransform.recalculateZoomAndCenter(i)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(i,u){return this.currentTransform.lngLatToCameraDepth(i,u)}populateCache(i){this._mercatorTransform.populateCache(i),this._verticalPerspectiveTransform.populateCache(i)}getBounds(){return this.currentTransform.getBounds()}getConstrained(i,u){return this.currentTransform.getConstrained(i,u)}calculateCenterFromCameraLngLatAlt(i,u,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(i,u,p,m)}setLocationAtPoint(i,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(i,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(i,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(i,u){return this.currentTransform.locationToScreenPoint(i,u)}screenPointToMercatorCoordinate(i,u){return this.currentTransform.screenPointToMercatorCoordinate(i,u)}screenPointToLocation(i,u){return this.currentTransform.screenPointToLocation(i,u)}isPointOnMapSurface(i,u){return this.currentTransform.isPointOnMapSurface(i,u)}getRayDirectionFromPixel(i){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(i)}getMatrixForModel(i,u){return this.currentTransform.getMatrixForModel(i,u)}getProjectionDataForCustomLayer(i=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(i);if(!this.isGlobeRendering)return u;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(i);return p.fallbackMatrix=u.mainMatrix,p}getFastPathSimpleProjectionMatrix(i){return this.currentTransform.getFastPathSimpleProjectionMatrix(i)}}class Fn{get useGlobeControls(){return!0}handlePanInertia(i,u){const p=ut(i,u);return Math.abs(p.lng-u.center.lng)>180&&(p.lng=u.center.lng+179.5*Math.sign(p.lng-u.center.lng)),{easingCenter:p,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(i,u){const p=i.around,m=u.screenPointToLocation(p);i.bearingDelta&&u.setBearing(u.bearing+i.bearingDelta),i.pitchDelta&&u.setPitch(u.pitch+i.pitchDelta),i.rollDelta&&u.setRoll(u.roll+i.rollDelta);const b=u.zoom;i.zoomDelta&&u.setZoom(u.zoom+i.zoomDelta);const C=u.zoom-b;if(C===0)return;const I=a.bz(u.center.lng,m.lng),R=I/(Math.abs(I/180)+1),B=a.bz(u.center.lat,m.lat),q=u.getRayDirectionFromPixel(p),X=u.cameraPosition,Z=-1*a.aW(X,q),ee=a.bo();a.aR(ee,X,[q[0]*Z,q[1]*Z,q[2]*Z]);const he=a.aY(ee)-1,Ie=Math.exp(.5*-Math.max(he-.3,0)),Pe=zo(u.worldSize,u.center.lat)/Math.min(u.width,u.height),Me=a.bm(Pe,.9,.5,1,.25),Be=(1-a.ae(-C))*Math.min(Ie,Me),Ke=u.center.lat,He=u.zoom,et=new a.S(u.center.lng+R*Be,a.ag(u.center.lat+B*Be,-85.051129,a.ah));u.setLocationAtPoint(m,p);const at=u.center,Ge=a.bm(Math.abs(I),45,85,0,1),mt=a.bm(Pe,.75,.35,0,1),Nt=Math.pow(Math.max(Ge,mt),.25),Mt=a.bz(at.lng,et.lng),kt=a.bz(at.lat,et.lat);u.setCenter(new a.S(at.lng+Mt*Nt,at.lat+kt*Nt).wrap()),u.setZoom(He+Le(Ke,u.center.lat))}handleMapControlsPan(i,u,p){if(!i.panDelta)return;const m=u.center.lat,b=u.zoom;u.setCenter(ut(i.panDelta,u).wrap()),u.setZoom(b+Le(m,u.center.lat))}cameraForBoxAndBearing(i,u,p,m,b){const C=ii(i,u,p,m,b),I=u.left/b.width*2-1,R=(b.width-u.right)/b.width*2-1,B=u.top/b.height*-2+1,q=(b.height-u.bottom)/b.height*-2+1,X=a.bz(p.getWest(),p.getEast())<0,Z=X?p.getEast():p.getWest(),ee=X?p.getWest():p.getEast(),he=Math.max(p.getNorth(),p.getSouth()),Ie=Math.min(p.getNorth(),p.getSouth()),Pe=Z+.5*a.bz(Z,ee),Me=he+.5*a.bz(he,Ie),Be=b.clone();Be.setCenter(C.center),Be.setBearing(C.bearing),Be.setPitch(0),Be.setRoll(0),Be.setZoom(C.zoom);const Ke=Be.modelViewProjectionMatrix,He=[gi(p.getNorthWest()),gi(p.getNorthEast()),gi(p.getSouthWest()),gi(p.getSouthEast()),gi(new a.S(ee,Me)),gi(new a.S(Z,Me)),gi(new a.S(Pe,he)),gi(new a.S(Pe,Ie))],et=gi(C.center);let at=Number.POSITIVE_INFINITY;for(const Ge of He)I<0&&(at=Fn.getLesserNonNegativeNonNull(at,Fn.solveVectorScale(Ge,et,Ke,"x",I))),R>0&&(at=Fn.getLesserNonNegativeNonNull(at,Fn.solveVectorScale(Ge,et,Ke,"x",R))),B>0&&(at=Fn.getLesserNonNegativeNonNull(at,Fn.solveVectorScale(Ge,et,Ke,"y",B))),q<0&&(at=Fn.getLesserNonNegativeNonNull(at,Fn.solveVectorScale(Ge,et,Ke,"y",q)));if(Number.isFinite(at)&&at!==0)return C.zoom=Be.zoom+a.aj(at),C;Jn()}handleJumpToCenterZoom(i,u){const p=i.center.lat,m=i.getConstrained(u.center?a.S.convert(u.center):i.center,i.zoom).center;i.setCenter(m.wrap());const b=u.zoom!==void 0?+u.zoom:i.zoom+Le(p,m.lat);i.zoom!==b&&i.setZoom(b)}handleEaseTo(i,u){const p=i.zoom,m=i.center,b=i.padding,C={roll:i.roll,pitch:i.pitch,bearing:i.bearing},I={roll:u.roll===void 0?i.roll:u.roll,pitch:u.pitch===void 0?i.pitch:u.pitch,bearing:u.bearing===void 0?i.bearing:u.bearing},R=u.zoom!==void 0,B=!i.isPaddingEqual(u.padding);let q=!1;const X=u.center?a.S.convert(u.center):m,Z=i.getConstrained(X,p).center;an(i,Z);const ee=i.clone();ee.setCenter(Z),ee.setZoom(R?+u.zoom:p+Le(m.lat,X.lat)),ee.setBearing(u.bearing);const he=new a.P(a.ag(i.centerPoint.x+u.offsetAsPoint.x,0,i.width),a.ag(i.centerPoint.y+u.offsetAsPoint.y,0,i.height));ee.setLocationAtPoint(Z,he);const Ie=(u.offset&&u.offsetAsPoint.mag())>0?ee.center:Z,Pe=R?+u.zoom:p+Le(m.lat,Ie.lat),Me=p+Le(m.lat,0),Be=Pe+Le(Ie.lat,0),Ke=a.bz(m.lng,Ie.lng),He=a.bz(m.lat,Ie.lat),et=a.ae(Be-Me);return q=Pe!==p,{easeFunc:at=>{if(a.bd(C,I)||Pn({startEulerAngles:C,endEulerAngles:I,tr:i,k:at,useSlerp:C.roll!=I.roll}),B&&i.interpolatePadding(b,u.padding,at),u.around)a.w("Easing around a point is not supported under globe projection."),i.setLocationAtPoint(u.around,u.aroundPoint);else{const Ge=Be>Me?Math.min(2,et):Math.max(.5,et),mt=Math.pow(Ge,1-at),Nt=Wt(m,Ke,He,at*mt);i.setCenter(Nt.wrap())}if(q){const Ge=a.C.number(Me,Be,at)+Le(0,i.center.lat);i.setZoom(Ge)}},isZooming:q,elevationCenter:Ie}}handleFlyTo(i,u){const p=u.zoom!==void 0,m=i.center,b=i.zoom,C=i.padding,I=!i.isPaddingEqual(u.padding),R=i.getConstrained(a.S.convert(u.center||u.locationAtOffset),b).center,B=p?+u.zoom:i.zoom+Le(i.center.lat,R.lat),q=i.clone();q.setCenter(R),q.setZoom(B),q.setBearing(u.bearing);const X=new a.P(a.ag(i.centerPoint.x+u.offsetAsPoint.x,0,i.width),a.ag(i.centerPoint.y+u.offsetAsPoint.y,0,i.height));q.setLocationAtPoint(R,X);const Z=q.center;an(i,Z);const ee=function(He,et,at){const Ge=gi(et),mt=gi(at),Nt=a.aW(Ge,mt),Mt=Math.acos(Nt),kt=Js(He);return Mt/(2*Math.PI)*kt}(i,m,Z),he=b+Le(m.lat,0),Ie=B+Le(Z.lat,0),Pe=a.ae(Ie-he);let Me;if(typeof u.minZoom=="number"){const He=+u.minZoom+Le(Z.lat,0),et=Math.min(He,he,Ie)+Le(0,Z.lat),at=i.getConstrained(Z,et).zoom+Le(Z.lat,0);Me=a.ae(at-he)}const Be=a.bz(m.lng,Z.lng),Ke=a.bz(m.lat,Z.lat);return{easeFunc:(He,et,at,Ge)=>{const mt=Wt(m,Be,Ke,at);I&&i.interpolatePadding(C,u.padding,He);const Nt=He===1?Z:mt;i.setCenter(Nt.wrap());const Mt=he+a.aj(et);i.setZoom(He===1?B:Mt+Le(0,Nt.lat))},scaleOfZoom:Pe,targetCenter:Z,scaleOfMinZoom:Me,pixelPathLength:ee}}static solveVectorScale(i,u,p,m,b){const C=m==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],I=[p[3],p[7],p[11],p[15]],R=i[0]*C[0]+i[1]*C[1]+i[2]*C[2],B=i[0]*I[0]+i[1]*I[1]+i[2]*I[2],q=u[0]*C[0]+u[1]*C[1]+u[2]*C[2],X=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return q+b*B===R+b*X||I[3]*(R-q)+C[3]*(X-B)+R*X==q*B?null:(q+C[3]-b*X-b*I[3])/(q-R-b*X+b*B)}static getLesserNonNegativeNonNull(i,u){return u!==null&&u>=0&&u<i?u:i}}class qi{constructor(i){this._globe=i,this._mercatorCameraHelper=new Gu,this._verticalPerspectiveCameraHelper=new Fn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(i,u){return this.currentHelper.handlePanInertia(i,u)}handleMapControlsRollPitchBearingZoom(i,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(i,u)}handleMapControlsPan(i,u,p){this.currentHelper.handleMapControlsPan(i,u,p)}cameraForBoxAndBearing(i,u,p,m,b){return this.currentHelper.cameraForBoxAndBearing(i,u,p,m,b)}handleJumpToCenterZoom(i,u){this.currentHelper.handleJumpToCenterZoom(i,u)}handleEaseTo(i,u){return this.currentHelper.handleEaseTo(i,u)}handleFlyTo(i,u){return this.currentHelper.handleFlyTo(i,u)}}const Ci=(_,i)=>a.y(_,i&&i.filter(u=>u.identifier!=="source.canvas")),Ui=a.bD();class Ja extends a.E{constructor(i,u={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=i,this.dispatcher=new Je(qe(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new ve,this.imageManager.setEventedParent(this),this.glyphManager=new Ae(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new tt(256,512),this.crossTileSymbolIndex=new pe,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bF()),An().on(En,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const b=m.getSource();if(b&&b.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===b.id&&this._validateLayer(I)}})}setGlobalStateProperty(i,u){var p,m,b;this._checkLoaded();const C=u===null?(b=(m=(p=this.stylesheet.state)===null||p===void 0?void 0:p[i])===null||m===void 0?void 0:m.default)!==null&&b!==void 0?b:null:u;if(a.bG(C,this._globalState[i]))return this;this._globalState[i]=C;const I=this._findGlobalStateAffectedSources([i]);for(const R in this.sourceCaches)I.has(R)&&(this._reloadSource(R),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(i){this._checkLoaded();const u=[];for(const m in i)!a.bG(this._globalState[m],i[m].default)&&(u.push(m),this._globalState[m]=i[m].default);const p=this._findGlobalStateAffectedSources(u);for(const m in this.sourceCaches)p.has(m)&&(this._reloadSource(m),this._changed=!0)}_findGlobalStateAffectedSources(i){if(i.length===0)return new Set;const u=new Set;for(const p in this._layers){const m=this._layers[p],b=m.getLayoutAffectingGlobalStateRefs();for(const C of i)b.has(C)&&u.add(m.source)}return u}loadURL(i,u={},p){this.fire(new a.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const m=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,u,p)}).catch(C=>{this._loadStyleRequest=null,C&&!b.signal.aborted&&this.fire(new a.k(C))})}loadJSON(i,u={},p){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(i,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(Ui,{validate:!1})}_load(i,u,p){var m,b,C;const I=u.transformStyle?u.transformStyle(p,i):i;if(!u.validate||!Ci(this,a.z(I))){this._loaded=!0,this.stylesheet=I;for(const R in I.sources)this.addSource(R,I.sources[R],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new pt(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Ze(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.setGlobalState((C=this.stylesheet.state)!==null&&C!==void 0?C:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){const i=a.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of i){const p=a.bI(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(i,u=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,C,I,R){return a._(this,void 0,void 0,function*(){const B=de(b),q=I>1?"@2x":"",X={},Z={};for(const{id:ee,url:he}of B){const Ie=C.transformRequest(be(he,q,".json"),"SpriteJSON");X[ee]=a.j(Ie,R);const Pe=C.transformRequest(be(he,q,".png"),"SpriteImage");Z[ee]=K.getImage(Pe,R)}return yield Promise.all([...Object.values(X),...Object.values(Z)]),function(ee,he){return a._(this,void 0,void 0,function*(){const Ie={};for(const Pe in ee){Ie[Pe]={};const Me=D.getImageCanvasContext((yield he[Pe]).data),Be=(yield ee[Pe]).data;for(const Ke in Be){const{width:He,height:et,x:at,y:Ge,sdf:mt,pixelRatio:Nt,stretchX:Mt,stretchY:kt,content:zt,textFitWidth:yr,textFitHeight:mr}=Be[Ke];Ie[Pe][Ke]={data:null,pixelRatio:Nt,sdf:mt,stretchX:Mt,stretchY:kt,content:zt,textFitWidth:yr,textFitHeight:mr,spriteData:{width:He,height:et,x:at,y:Ge,context:Me}}}}return Ie})}(X,Z)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const C in b){this._spritesImagesIds[C]=[];const I=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(R=>!(R in b)):[];for(const R of I)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(const R in b[C]){const B=C==="default"?R:`${C}:${R}`;this._spritesImagesIds[C].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,b[C][R],!1):this.imageManager.addImage(B,b[C][R]),u&&(this._changedImages[B]=!0)}}}).catch(b=>{this._spriteRequest=null,m=b,this.fire(new a.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const p=i.sourceLayer;if(!p)return;const m=u.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new a.k(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,u=!1){const p=this._serializedAllLayers();if(!i||i.length===0)return Object.values(u?a.bJ(p):p);const m=[];for(const b of i)if(p[b]){const C=u?a.bJ(p[b]):p[b];m.push(C)}return m}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const m=this._layers[p];m.type!=="custom"&&(i[p]=m.serialize())}return i}hasTransitions(){var i,u,p;if(!((i=this.light)===null||i===void 0)&&i.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(const m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(u){const m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(const C in this._updatedSources){const I=this._updatedSources[C];if(I==="reload")this._reloadSource(C);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const b=this.sourceCaches[m];p[m]=b.used,b.used=!1}for(const m of this._order){const b=this._layers[m];b.recalculate(i,this._availableImages),!b.isHidden(i.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const m in p){const b=this.sourceCaches[m];!!p[m]!=!!b.used&&b.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(i),this.sky.recalculate(i),this.projection.recalculate(i),this.z=i.zoom,u&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,u={}){var p;this._checkLoaded();const m=this.serialize();if(i=u.transformStyle?u.transformStyle(m,i):i,((p=u.validate)===null||p===void 0||p)&&Ci(this,a.z(i)))return!1;(i=a.bJ(i)).layers=a.bH(i.layers);const b=a.bK(m,i),C=this._getOperationsToPerform(b);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const I of C.operations)I();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const u=[],p=[];for(const m of i)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":u.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":u.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":u.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,m.args));break;case"setTransition":u.push(()=>{});break;default:p.push(m.command)}return{operations:u,unimplemented:p}}addImage(i,u){if(this.getImage(i))return this.fire(new a.k(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.k(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,p={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.z.source,`sources.${i}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[i]=new Ft(i,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:i})),m.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===i)return this.fire(new a.k(new Error(`Source "${i}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const p=this.sourceCaches[i].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,p={}){this._checkLoaded();const m=i.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let b;if(i.type==="custom"){if(Ci(this,a.bL(i)))return;b=a.bI(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(m,i.source),i=a.bJ(i),i=a.e(i,{source:m})),this._validate(a.z.layer,`layers.${m}`,i,{arrayIndex:-1},p))return;b=a.bI(i),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}})}const C=u?this._order.indexOf(u):this._order.length;if(u&&C===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&b.type!=="custom"){const I=this._removedLayers[m];delete this._removedLayers[m],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.k(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const p=this._order.indexOf(i);this._order.splice(p,1);const m=u?this._order.indexOf(u):this._order.length;u&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(m,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const p=this._order.indexOf(i);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,p){this._checkLoaded();const m=this.getLayer(i);m?m.minzoom===u&&m.maxzoom===p||(u!=null&&(m.minzoom=u),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,p={}){this._checkLoaded();const m=this.getLayer(i);if(m){if(!a.bG(m.filter,u))return u==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.z.filter,`layers.${m.id}.filter`,u,null,p)||(m.setFilter(a.bJ(u)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.bJ(this.getLayer(i).filter)}setLayoutProperty(i,u,p,m={}){this._checkLoaded();const b=this.getLayer(i);b?a.bG(b.getLayoutProperty(u),p)||(b.setLayoutProperty(u,p,m),this._updateLayer(b)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const p=this.getLayer(i);if(p)return p.getLayoutProperty(u);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,p,m={}){this._checkLoaded();const b=this.getLayer(i);b?a.bG(b.getPaintProperty(u),p)||(b.setPaintProperty(u,p,m)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const p=i.source,m=i.sourceLayer,b=this.sourceCaches[p];if(b===void 0)return void this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)));const C=b.getSource().type;C==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(i.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,i.id,u)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const p=i.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${p}' does not exist in the map's style.`)));const b=m.getSource().type,C=b==="vector"?i.sourceLayer:void 0;b!=="vector"||C?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,i.id,u):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,p=i.sourceLayer,m=this.sourceCaches[u];if(m!==void 0)return m.getSource().type!=="vector"||p?(i.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,i.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=a.bM(this.sourceCaches,b=>b.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return a.bN({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:i,layers:u,terrain:p},b=>b!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=C=>this._layers[C].type==="fill-extrusion",p={},m=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I)){p[I]=C;for(const R of i){const B=R[I];if(B)for(const q of B)m.push(q)}}}m.sort((C,I)=>I.intersectionZ-C.intersectionZ);const b=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(u(I))for(let R=m.length-1;R>=0;R--){const B=m[R].feature;if(p[B.layer.id]<C)break;b.push(B),m.pop()}else for(const R of i){const B=R[I];if(B)for(const q of B)b.push(q.feature)}}return b}queryRenderedFeatures(i,u,p){u&&u.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const B of u.layers){const q=this._layers[B];if(!q)return this.fire(new a.k(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];m[q.source]=!0}}const b=[];u.availableImages=this._availableImages;const C=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,R=Object.assign(Object.assign({},u),{layers:I});for(const B in this.sourceCaches)u.layers&&!m[B]||b.push(ft(this.sourceCaches[B],this._layers,C,i,R,p,this.map.terrain?(q,X,Z)=>this.map.terrain.getElevation(q,X,Z):void 0));return this.placement&&b.push(function(B,q,X,Z,ee,he,Ie){const Pe={},Me=he.queryRenderedSymbols(Z),Be=[];for(const Ke of Object.keys(Me).map(Number))Be.push(Ie[Ke]);Be.sort(Ct);for(const Ke of Be){const He=Ke.featureIndex.lookupSymbolFeatures(Me[Ke.bucketInstanceId],q,Ke.bucketIndex,Ke.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,B);for(const et in He){const at=Pe[et]=Pe[et]||[],Ge=He[et];Ge.sort((mt,Nt)=>{const Mt=Ke.featureSortOrder;if(Mt){const kt=Mt.indexOf(mt.featureIndex);return Mt.indexOf(Nt.featureIndex)-kt}return Nt.featureIndex-mt.featureIndex});for(const mt of Ge)at.push(mt)}}return function(Ke,He,et){for(const at in Ke)for(const Ge of Ke[at])Ut(Ge,et[He[at].source]);return Ke}(Pe,B,X)}(this._layers,C,this.sourceCaches,i,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(i,u){u&&u.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[i];return p?function(m,b){const C=m.getRenderableIds().map(B=>m.getTileByID(B)),I=[],R={};for(let B=0;B<C.length;B++){const q=C[B],X=q.tileID.canonical.key;R[X]||(R[X]=!0,q.querySourceFeatures(I,b))}return I}(p,u):[]}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const C in i)if(!a.bG(i[C],p[C])){m=!0;break}if(!m)return;const b={now:D.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(b)}getProjection(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.projection}setProjection(i){if(this._checkLoaded(),this.projection){if(this.projection.name===i.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=i,this._setProjectionInternal(i.type)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,u={}){this._checkLoaded();const p=this.getSky();let m=!1;if(!i&&!p)return;if(i&&!p)m=!0;else if(!i&&p)m=!0;else for(const C in i)if(!a.bG(i[C],p[C])){m=!0;break}if(!m)return;const b={now:D.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,u),this.sky.updateTransitions(b)}_setProjectionInternal(i){const u=function(p){if(Array.isArray(p)){const m=new ds({type:p});return{projection:m,transform:new fi,cameraHelper:new qi(m)}}switch(p){case"mercator":return{projection:new xr,transform:new xn,cameraHelper:new Gu};case"globe":{const m=new ds({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new fi,cameraHelper:new qi(m)}}case"vertical-perspective":return{projection:new pu,transform:new _i,cameraHelper:new Fn};default:return a.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new xr,transform:new xn,cameraHelper:new Gu}}}(i);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(i,u,p,m,b={}){return(!b||b.validate!==!1)&&Ci(this,i.call(a.z,a.e({key:u,style:this.serialize(),value:p,styleSpec:a.v},m)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),An().off(En,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,p,m,b=!1){let C=!1,I=!1;const R={};for(const B of this._order){const q=this._layers[B];if(q.type!=="symbol")continue;if(!R[q.source]){const Z=this.sourceCaches[q.source];R[q.source]=Z.getRenderableIds(!0).map(ee=>Z.getTileByID(ee)).sort((ee,he)=>he.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(he.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(q,R[q.source],i.center.lng);C=C||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),i.zoom))&&(this.pauseablePlacement=new qu(i,this.map.terrain,this._order,b,u,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const B of this._order){const q=this._layers[B];q.type==="symbol"&&this.placement.updateLayerOpacities(q,R[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u){return a._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(i,u){return a._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,u={}){this._checkLoaded(),i&&this._validate(a.z.glyphs,"glyphs",i,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,u,p={},m){this._checkLoaded();const b=[{id:i,url:u}],C=[...de(this.stylesheet.sprite),...b];this._validate(a.z.sprite,"sprite",C,null,p)||(this.stylesheet.sprite=C,this._loadSprite(b,!0,m))}removeSprite(i){this._checkLoaded();const u=de(this.stylesheet.sprite);if(u.find(p=>p.id===i)){if(this._spritesImagesIds[i])for(const p of this._spritesImagesIds[i])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===i),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return de(this.stylesheet.sprite)}setSprite(i,u={},p){this._checkLoaded(),i&&this._validate(a.z.sprite,"sprite",i,null,u)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,p):(this._unloadSprite(),p&&p(null)))}}var Qs=a.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class gu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,p,m,b,C,I,R,B){this.context=i;let q=this.boundPaintVertexBuffers.length!==m.length;for(let X=0;!q&&X<m.length;X++)this.boundPaintVertexBuffers[X]!==m[X]&&(q=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||q||this.boundIndexBuffer!==b||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==B?this.freshBind(u,p,m,b,C,I,R,B):(i.bindVertexArray.set(this.vao),I&&I.bind(),b&&b.dynamicDraw&&b.bind(),R&&R.bind(),B&&B.bind())}freshBind(i,u,p,m,b,C,I,R){const B=i.numAttributes,q=this.context,X=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=R,u.enableAttributes(X,i);for(const Z of p)Z.enableAttributes(X,i);C&&C.enableAttributes(X,i),I&&I.enableAttributes(X,i),R&&R.enableAttributes(X,i),u.bind(),u.setVertexAttribPointers(X,i,b);for(const Z of p)Z.bind(),Z.setVertexAttribPointers(X,i,b);C&&(C.bind(),C.setVertexAttribPointers(X,i,b)),m&&m.bind(),I&&(I.bind(),I.setVertexAttribPointers(X,i,b)),R&&(R.bind(),R.setVertexAttribPointers(X,i,b)),q.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Kc=(_,i,u,p,m)=>({u_texture:0,u_ele_delta:_,u_fog_matrix:i,u_fog_color:u?u.properties.get("fog-color"):a.be.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:u?u.calculateFogBlendOpacity(p):0,u_horizon_color:u?u.properties.get("horizon-color"):a.be.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),yu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Na(_){const i=[];for(let u=0;u<_.length;u++){if(_[u]===null)continue;const p=_[u].split(" ");i.push(p.pop())}return i}class Ul{constructor(i,u,p,m,b,C,I,R,B=[]){const q=i.gl;this.program=q.createProgram();const X=Na(u.staticAttributes),Z=p?p.getBinderAttributes():[],ee=X.concat(Z),he=nt.prelude.staticUniforms?Na(nt.prelude.staticUniforms):[],Ie=I.staticUniforms?Na(I.staticUniforms):[],Pe=u.staticUniforms?Na(u.staticUniforms):[],Me=p?p.getBinderUniforms():[],Be=he.concat(Ie).concat(Pe).concat(Me),Ke=[];for(const Mt of Be)Ke.indexOf(Mt)<0&&Ke.push(Mt);const He=p?p.defines():[];co(q)&&He.unshift("#version 300 es"),b&&He.push("#define OVERDRAW_INSPECTOR;"),C&&He.push("#define TERRAIN3D;"),R&&He.push(R),B&&He.push(...B);let et=He.concat(nt.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join(`
`),at=He.concat(nt.prelude.vertexSource,I.vertexSource,u.vertexSource).join(`
`);co(q)||(et=function(Mt){return Mt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(et),at=function(Mt){return Mt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(at));const Ge=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Ge,et),q.compileShader(Ge),!q.getShaderParameter(Ge,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(Ge)}`);q.attachShader(this.program,Ge);const mt=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(mt,at),q.compileShader(mt),!q.getShaderParameter(mt,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(mt)}`);q.attachShader(this.program,mt),this.attributes={};const Nt={};this.numAttributes=ee.length;for(let Mt=0;Mt<this.numAttributes;Mt++)ee[Mt]&&(q.bindAttribLocation(this.program,Mt,ee[Mt]),this.attributes[ee[Mt]]=Mt);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(mt),q.deleteShader(Ge);for(let Mt=0;Mt<Ke.length;Mt++){const kt=Ke[Mt];if(kt&&!Nt[kt]){const zt=q.getUniformLocation(this.program,kt);zt&&(Nt[kt]=zt)}}this.fixedUniforms=m(i,Nt),this.terrainUniforms=((Mt,kt)=>({u_depth:new a.bO(Mt,kt.u_depth),u_terrain:new a.bO(Mt,kt.u_terrain),u_terrain_dim:new a.bf(Mt,kt.u_terrain_dim),u_terrain_matrix:new a.bQ(Mt,kt.u_terrain_matrix),u_terrain_unpack:new a.bR(Mt,kt.u_terrain_unpack),u_terrain_exaggeration:new a.bf(Mt,kt.u_terrain_exaggeration)}))(i,Nt),this.projectionUniforms=((Mt,kt)=>({u_projection_matrix:new a.bQ(Mt,kt.u_projection_matrix),u_projection_tile_mercator_coords:new a.bR(Mt,kt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bR(Mt,kt.u_projection_clipping_plane),u_projection_transition:new a.bf(Mt,kt.u_projection_transition),u_projection_fallback_matrix:new a.bQ(Mt,kt.u_projection_fallback_matrix)}))(i,Nt),this.binderUniforms=p?p.getUniforms(i,Nt):[]}draw(i,u,p,m,b,C,I,R,B,q,X,Z,ee,he,Ie,Pe,Me,Be,Ke){const He=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(p),i.setStencilMode(m),i.setColorMode(b),i.setCullFace(C),R){i.activeTexture.set(He.TEXTURE2),He.bindTexture(He.TEXTURE_2D,R.depthTexture),i.activeTexture.set(He.TEXTURE3),He.bindTexture(He.TEXTURE_2D,R.texture);for(const at in this.terrainUniforms)this.terrainUniforms[at].set(R[at])}if(B)for(const at in B)this.projectionUniforms[yu[at]].set(B[at]);if(I)for(const at in this.fixedUniforms)this.fixedUniforms[at].set(I[at]);Pe&&Pe.setUniforms(i,this.binderUniforms,he,{zoom:Ie});let et=0;switch(u){case He.LINES:et=2;break;case He.TRIANGLES:et=3;break;case He.LINE_STRIP:et=1}for(const at of ee.get()){const Ge=at.vaos||(at.vaos={});(Ge[q]||(Ge[q]=new gu)).bind(i,this,X,Pe?Pe.getPaintVertexBuffers():[],Z,at.vertexOffset,Me,Be,Ke),He.drawElements(u,at.primitiveLength*et,He.UNSIGNED_SHORT,at.primitiveOffset*et*2)}}}function El(_,i,u){const p=1/a.aB(u,1,i.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,i.transform.tileZoom)/m,C=b*(u.tileID.canonical.x+u.tileID.wrap*m),I=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[C>>16,I>>16],u_pixel_coord_lower:[65535&C,65535&I]}}const Qa=(_,i,u,p)=>{const m=_.style.light,b=m.properties.get("position"),C=[b.x,b.y,b.z],I=a.bU();m.properties.get("anchor")==="viewport"&&a.bV(I,_.transform.bearingInRadians),a.bW(C,C,I);const R=_.transform.transformLightDirection(C),B=m.properties.get("color");return{u_lightpos:C,u_lightpos_globe:R,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+i,u_opacity:u,u_fill_translate:p}},no=(_,i,u,p,m,b,C)=>a.e(Qa(_,i,u,p),El(b,_,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),$o=(_,i,u,p)=>a.e(El(i,_,u),{u_fill_translate:p}),ki=(_,i)=>({u_world:_,u_fill_translate:i}),ps=(_,i,u,p,m)=>a.e($o(_,i,u,m),{u_world:p}),el=(_,i,u,p,m)=>{const b=_.transform;let C,I,R=0;if(u.paint.get("circle-pitch-alignment")==="map"){const B=a.aB(i,1,b.zoom);C=!0,I=[B,B],R=B/(a.$*Math.pow(2,i.tileID.overscaledZ))*2*Math.PI*m}else C=!1,I=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+C,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:R,u_translate:p}},Li=_=>({u_pixel_extrude_scale:[1/_.width,1/_.height]}),Vl=_=>({u_viewport_size:[_.width,_.height]}),tl=(_,i=1)=>({u_color:_,u_overlay:0,u_overlay_scale:i}),ms=(_,i,u,p)=>{const m=a.aB(_,1,i)/(a.$*Math.pow(2,_.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:a.aB(_,1,i),u_intensity:u,u_globe_extrude_scale:m}},ho=(_,i,u,p)=>{const m=a.L();a.bX(m,0,_.width,_.height,0,0,1);const b=_.context.gl;return{u_matrix:m,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:i.paint.get("heatmap-opacity")}},jo=(_,i,u)=>{const p=u.paint.get("hillshade-accent-color");let m;switch(u.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}const b=u.getIlluminationProperties();for(let C=0;C<b.directionRadians.length;C++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[C]+=_.transform.bearingInRadians);return{u_image:0,u_latrange:Hu(0,i.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:p,u_method:m,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},gc=(_,i)=>{const u=i.stride,p=a.L();return a.bX(p,0,a.$,-8192,0,0,1),a.M(p,p,[0,-8192,0]),{u_matrix:p,u_image:1,u_dimension:[u,u],u_zoom:_.overscaledZ,u_unpack:i.getUnpackVector()}};function Hu(_,i){const u=Math.pow(2,i.canonical.z),p=i.canonical.y;return[new a.a0(0,p/u).toLngLat().lat,new a.a0(0,(p+1)/u).toLngLat().lat]}const Tl=(_,i)=>({u_image:0,u_unpack:i.getUnpackVector(),u_dimension:[i.stride,i.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:_.paint.get("color-relief-opacity")}),rl=(_,i,u,p)=>{const m=_.transform;return{u_translation:nl(_,i,u),u_ratio:p/a.aB(i,1,m.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ao=(_,i,u,p,m)=>a.e(rl(_,i,u,p),{u_image:0,u_image_height:m}),_o=(_,i,u,p,m)=>{const b=_.transform,C=Po(i,b);return{u_translation:nl(_,i,u),u_texsize:i.imageAtlasTexture.size,u_ratio:p/a.aB(i,1,b.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[C,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},ql=(_,i,u,p,m,b)=>{const C=_.lineAtlas,I=Po(i,_.transform),R=u.layout.get("line-cap")==="round",B=C.getDash(m.from,R),q=C.getDash(m.to,R),X=B.width*b.fromScale,Z=q.width*b.toScale;return a.e(rl(_,i,u,p),{u_patternscale_a:[I/X,-B.height/2],u_patternscale_b:[I/Z,-q.height/2],u_sdfgamma:C.width/(256*Math.min(X,Z)*_.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:q.y,u_mix:b.t})};function Po(_,i){return 1/a.aB(_,1,i.tileZoom)}function nl(_,i,u){return a.aC(_.transform,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Ko=(_,i,u,p,m)=>{return{u_tl_parent:_,u_scale_parent:i,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(C=p.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(b=p.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:il(p.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var b,C};function il(_){_*=Math.PI/180;const i=Math.sin(_),u=Math.cos(_);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const Gi=(_,i,u,p,m,b,C,I,R,B,q,X,Z)=>{const ee=C.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ee.width/ee.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:R,u_is_text:+q,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:b,u_texsize:X,u_texture:0,u_translation:B,u_pitched_scale:Z}},Ms=(_,i,u,p,m,b,C,I,R,B,q,X,Z,ee)=>{const he=C.transform;return a.e(Gi(_,i,u,p,m,b,C,I,R,B,q,X,ee),{u_gamma_scale:p?Math.cos(he.pitch*Math.PI/180)*he.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:1})},gs=(_,i,u,p,m,b,C,I,R,B,q,X,Z)=>a.e(Ms(_,i,u,p,m,b,C,I,R,B,!0,q,0,Z),{u_texsize_icon:X,u_texture_icon:1}),Oa=(_,i)=>({u_opacity:_,u_color:i}),vu=(_,i,u,p,m)=>a.e(function(b,C,I,R){const B=I.imageManager.getPattern(b.from.toString()),q=I.imageManager.getPattern(b.to.toString()),{width:X,height:Z}=I.imageManager.getPixelSize(),ee=Math.pow(2,R.tileID.overscaledZ),he=R.tileSize*Math.pow(2,I.transform.tileZoom)/ee,Ie=he*(R.tileID.canonical.x+R.tileID.wrap*ee),Pe=he*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[X,Z],u_mix:C.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/a.aB(R,1,I.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,Pe>>16],u_pixel_coord_lower:[65535&Ie,65535&Pe]}}(u,m,i,p),{u_opacity:_}),_u=(_,i)=>{},ks={fillExtrusion:(_,i)=>({u_lightpos:new a.bS(_,i.u_lightpos),u_lightpos_globe:new a.bS(_,i.u_lightpos_globe),u_lightintensity:new a.bf(_,i.u_lightintensity),u_lightcolor:new a.bS(_,i.u_lightcolor),u_vertical_gradient:new a.bf(_,i.u_vertical_gradient),u_opacity:new a.bf(_,i.u_opacity),u_fill_translate:new a.bT(_,i.u_fill_translate)}),fillExtrusionPattern:(_,i)=>({u_lightpos:new a.bS(_,i.u_lightpos),u_lightpos_globe:new a.bS(_,i.u_lightpos_globe),u_lightintensity:new a.bf(_,i.u_lightintensity),u_lightcolor:new a.bS(_,i.u_lightcolor),u_vertical_gradient:new a.bf(_,i.u_vertical_gradient),u_height_factor:new a.bf(_,i.u_height_factor),u_opacity:new a.bf(_,i.u_opacity),u_fill_translate:new a.bT(_,i.u_fill_translate),u_image:new a.bO(_,i.u_image),u_texsize:new a.bT(_,i.u_texsize),u_pixel_coord_upper:new a.bT(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(_,i.u_pixel_coord_lower),u_scale:new a.bS(_,i.u_scale),u_fade:new a.bf(_,i.u_fade)}),fill:(_,i)=>({u_fill_translate:new a.bT(_,i.u_fill_translate)}),fillPattern:(_,i)=>({u_image:new a.bO(_,i.u_image),u_texsize:new a.bT(_,i.u_texsize),u_pixel_coord_upper:new a.bT(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(_,i.u_pixel_coord_lower),u_scale:new a.bS(_,i.u_scale),u_fade:new a.bf(_,i.u_fade),u_fill_translate:new a.bT(_,i.u_fill_translate)}),fillOutline:(_,i)=>({u_world:new a.bT(_,i.u_world),u_fill_translate:new a.bT(_,i.u_fill_translate)}),fillOutlinePattern:(_,i)=>({u_world:new a.bT(_,i.u_world),u_image:new a.bO(_,i.u_image),u_texsize:new a.bT(_,i.u_texsize),u_pixel_coord_upper:new a.bT(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(_,i.u_pixel_coord_lower),u_scale:new a.bS(_,i.u_scale),u_fade:new a.bf(_,i.u_fade),u_fill_translate:new a.bT(_,i.u_fill_translate)}),circle:(_,i)=>({u_camera_to_center_distance:new a.bf(_,i.u_camera_to_center_distance),u_scale_with_map:new a.bO(_,i.u_scale_with_map),u_pitch_with_map:new a.bO(_,i.u_pitch_with_map),u_extrude_scale:new a.bT(_,i.u_extrude_scale),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_globe_extrude_scale:new a.bf(_,i.u_globe_extrude_scale),u_translate:new a.bT(_,i.u_translate)}),collisionBox:(_,i)=>({u_pixel_extrude_scale:new a.bT(_,i.u_pixel_extrude_scale)}),collisionCircle:(_,i)=>({u_viewport_size:new a.bT(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new a.bP(_,i.u_color),u_overlay:new a.bO(_,i.u_overlay),u_overlay_scale:new a.bf(_,i.u_overlay_scale)}),depth:_u,clippingMask:_u,heatmap:(_,i)=>({u_extrude_scale:new a.bf(_,i.u_extrude_scale),u_intensity:new a.bf(_,i.u_intensity),u_globe_extrude_scale:new a.bf(_,i.u_globe_extrude_scale)}),heatmapTexture:(_,i)=>({u_matrix:new a.bQ(_,i.u_matrix),u_world:new a.bT(_,i.u_world),u_image:new a.bO(_,i.u_image),u_color_ramp:new a.bO(_,i.u_color_ramp),u_opacity:new a.bf(_,i.u_opacity)}),hillshade:(_,i)=>({u_image:new a.bO(_,i.u_image),u_latrange:new a.bT(_,i.u_latrange),u_exaggeration:new a.bf(_,i.u_exaggeration),u_altitudes:new a.bZ(_,i.u_altitudes),u_azimuths:new a.bZ(_,i.u_azimuths),u_accent:new a.bP(_,i.u_accent),u_method:new a.bO(_,i.u_method),u_shadows:new a.bY(_,i.u_shadows),u_highlights:new a.bY(_,i.u_highlights)}),hillshadePrepare:(_,i)=>({u_matrix:new a.bQ(_,i.u_matrix),u_image:new a.bO(_,i.u_image),u_dimension:new a.bT(_,i.u_dimension),u_zoom:new a.bf(_,i.u_zoom),u_unpack:new a.bR(_,i.u_unpack)}),colorRelief:(_,i)=>({u_image:new a.bO(_,i.u_image),u_unpack:new a.bR(_,i.u_unpack),u_dimension:new a.bT(_,i.u_dimension),u_elevation_stops:new a.bO(_,i.u_elevation_stops),u_color_stops:new a.bO(_,i.u_color_stops),u_opacity:new a.bf(_,i.u_opacity)}),line:(_,i)=>({u_translation:new a.bT(_,i.u_translation),u_ratio:new a.bf(_,i.u_ratio),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_units_to_pixels:new a.bT(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_translation:new a.bT(_,i.u_translation),u_ratio:new a.bf(_,i.u_ratio),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_units_to_pixels:new a.bT(_,i.u_units_to_pixels),u_image:new a.bO(_,i.u_image),u_image_height:new a.bf(_,i.u_image_height)}),linePattern:(_,i)=>({u_translation:new a.bT(_,i.u_translation),u_texsize:new a.bT(_,i.u_texsize),u_ratio:new a.bf(_,i.u_ratio),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_image:new a.bO(_,i.u_image),u_units_to_pixels:new a.bT(_,i.u_units_to_pixels),u_scale:new a.bS(_,i.u_scale),u_fade:new a.bf(_,i.u_fade)}),lineSDF:(_,i)=>({u_translation:new a.bT(_,i.u_translation),u_ratio:new a.bf(_,i.u_ratio),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_units_to_pixels:new a.bT(_,i.u_units_to_pixels),u_patternscale_a:new a.bT(_,i.u_patternscale_a),u_patternscale_b:new a.bT(_,i.u_patternscale_b),u_sdfgamma:new a.bf(_,i.u_sdfgamma),u_image:new a.bO(_,i.u_image),u_tex_y_a:new a.bf(_,i.u_tex_y_a),u_tex_y_b:new a.bf(_,i.u_tex_y_b),u_mix:new a.bf(_,i.u_mix)}),raster:(_,i)=>({u_tl_parent:new a.bT(_,i.u_tl_parent),u_scale_parent:new a.bf(_,i.u_scale_parent),u_buffer_scale:new a.bf(_,i.u_buffer_scale),u_fade_t:new a.bf(_,i.u_fade_t),u_opacity:new a.bf(_,i.u_opacity),u_image0:new a.bO(_,i.u_image0),u_image1:new a.bO(_,i.u_image1),u_brightness_low:new a.bf(_,i.u_brightness_low),u_brightness_high:new a.bf(_,i.u_brightness_high),u_saturation_factor:new a.bf(_,i.u_saturation_factor),u_contrast_factor:new a.bf(_,i.u_contrast_factor),u_spin_weights:new a.bS(_,i.u_spin_weights),u_coords_top:new a.bR(_,i.u_coords_top),u_coords_bottom:new a.bR(_,i.u_coords_bottom)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new a.bO(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(_,i.u_is_size_feature_constant),u_size_t:new a.bf(_,i.u_size_t),u_size:new a.bf(_,i.u_size),u_camera_to_center_distance:new a.bf(_,i.u_camera_to_center_distance),u_pitch:new a.bf(_,i.u_pitch),u_rotate_symbol:new a.bO(_,i.u_rotate_symbol),u_aspect_ratio:new a.bf(_,i.u_aspect_ratio),u_fade_change:new a.bf(_,i.u_fade_change),u_label_plane_matrix:new a.bQ(_,i.u_label_plane_matrix),u_coord_matrix:new a.bQ(_,i.u_coord_matrix),u_is_text:new a.bO(_,i.u_is_text),u_pitch_with_map:new a.bO(_,i.u_pitch_with_map),u_is_along_line:new a.bO(_,i.u_is_along_line),u_is_variable_anchor:new a.bO(_,i.u_is_variable_anchor),u_texsize:new a.bT(_,i.u_texsize),u_texture:new a.bO(_,i.u_texture),u_translation:new a.bT(_,i.u_translation),u_pitched_scale:new a.bf(_,i.u_pitched_scale)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new a.bO(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(_,i.u_is_size_feature_constant),u_size_t:new a.bf(_,i.u_size_t),u_size:new a.bf(_,i.u_size),u_camera_to_center_distance:new a.bf(_,i.u_camera_to_center_distance),u_pitch:new a.bf(_,i.u_pitch),u_rotate_symbol:new a.bO(_,i.u_rotate_symbol),u_aspect_ratio:new a.bf(_,i.u_aspect_ratio),u_fade_change:new a.bf(_,i.u_fade_change),u_label_plane_matrix:new a.bQ(_,i.u_label_plane_matrix),u_coord_matrix:new a.bQ(_,i.u_coord_matrix),u_is_text:new a.bO(_,i.u_is_text),u_pitch_with_map:new a.bO(_,i.u_pitch_with_map),u_is_along_line:new a.bO(_,i.u_is_along_line),u_is_variable_anchor:new a.bO(_,i.u_is_variable_anchor),u_texsize:new a.bT(_,i.u_texsize),u_texture:new a.bO(_,i.u_texture),u_gamma_scale:new a.bf(_,i.u_gamma_scale),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_is_halo:new a.bO(_,i.u_is_halo),u_translation:new a.bT(_,i.u_translation),u_pitched_scale:new a.bf(_,i.u_pitched_scale)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new a.bO(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bO(_,i.u_is_size_feature_constant),u_size_t:new a.bf(_,i.u_size_t),u_size:new a.bf(_,i.u_size),u_camera_to_center_distance:new a.bf(_,i.u_camera_to_center_distance),u_pitch:new a.bf(_,i.u_pitch),u_rotate_symbol:new a.bO(_,i.u_rotate_symbol),u_aspect_ratio:new a.bf(_,i.u_aspect_ratio),u_fade_change:new a.bf(_,i.u_fade_change),u_label_plane_matrix:new a.bQ(_,i.u_label_plane_matrix),u_coord_matrix:new a.bQ(_,i.u_coord_matrix),u_is_text:new a.bO(_,i.u_is_text),u_pitch_with_map:new a.bO(_,i.u_pitch_with_map),u_is_along_line:new a.bO(_,i.u_is_along_line),u_is_variable_anchor:new a.bO(_,i.u_is_variable_anchor),u_texsize:new a.bT(_,i.u_texsize),u_texsize_icon:new a.bT(_,i.u_texsize_icon),u_texture:new a.bO(_,i.u_texture),u_texture_icon:new a.bO(_,i.u_texture_icon),u_gamma_scale:new a.bf(_,i.u_gamma_scale),u_device_pixel_ratio:new a.bf(_,i.u_device_pixel_ratio),u_is_halo:new a.bO(_,i.u_is_halo),u_translation:new a.bT(_,i.u_translation),u_pitched_scale:new a.bf(_,i.u_pitched_scale)}),background:(_,i)=>({u_opacity:new a.bf(_,i.u_opacity),u_color:new a.bP(_,i.u_color)}),backgroundPattern:(_,i)=>({u_opacity:new a.bf(_,i.u_opacity),u_image:new a.bO(_,i.u_image),u_pattern_tl_a:new a.bT(_,i.u_pattern_tl_a),u_pattern_br_a:new a.bT(_,i.u_pattern_br_a),u_pattern_tl_b:new a.bT(_,i.u_pattern_tl_b),u_pattern_br_b:new a.bT(_,i.u_pattern_br_b),u_texsize:new a.bT(_,i.u_texsize),u_mix:new a.bf(_,i.u_mix),u_pattern_size_a:new a.bT(_,i.u_pattern_size_a),u_pattern_size_b:new a.bT(_,i.u_pattern_size_b),u_scale_a:new a.bf(_,i.u_scale_a),u_scale_b:new a.bf(_,i.u_scale_b),u_pixel_coord_upper:new a.bT(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.bT(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bf(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_texture:new a.bO(_,i.u_texture),u_ele_delta:new a.bf(_,i.u_ele_delta),u_fog_matrix:new a.bQ(_,i.u_fog_matrix),u_fog_color:new a.bP(_,i.u_fog_color),u_fog_ground_blend:new a.bf(_,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bf(_,i.u_fog_ground_blend_opacity),u_horizon_color:new a.bP(_,i.u_horizon_color),u_horizon_fog_blend:new a.bf(_,i.u_horizon_fog_blend),u_is_globe_mode:new a.bf(_,i.u_is_globe_mode)}),terrainDepth:(_,i)=>({u_ele_delta:new a.bf(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_texture:new a.bO(_,i.u_texture),u_terrain_coords_id:new a.bf(_,i.u_terrain_coords_id),u_ele_delta:new a.bf(_,i.u_ele_delta)}),projectionErrorMeasurement:(_,i)=>({u_input:new a.bf(_,i.u_input),u_output_expected:new a.bf(_,i.u_output_expected)}),atmosphere:(_,i)=>({u_sun_pos:new a.bS(_,i.u_sun_pos),u_atmosphere_blend:new a.bf(_,i.u_atmosphere_blend),u_globe_position:new a.bS(_,i.u_globe_position),u_globe_radius:new a.bf(_,i.u_globe_radius),u_inv_proj_matrix:new a.bQ(_,i.u_inv_proj_matrix)}),sky:(_,i)=>({u_sky_color:new a.bP(_,i.u_sky_color),u_horizon_color:new a.bP(_,i.u_horizon_color),u_horizon:new a.bT(_,i.u_horizon),u_horizon_normal:new a.bT(_,i.u_horizon_normal),u_sky_horizon_blend:new a.bf(_,i.u_sky_horizon_blend),u_sky_blend:new a.bf(_,i.u_sky_blend)})};class Gl{constructor(i,u,p){this.context=i;const m=i.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Hl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class _t{constructor(i,u,p,m){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=i;const b=i.gl;this.buffer=b.createBuffer(),i.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let p=0;p<this.attributes.length;p++){const m=u.attributes[this.attributes[p].name];m!==void 0&&i.enableVertexAttribArray(m)}}setVertexAttribPointers(i,u,p){for(let m=0;m<this.attributes.length;m++){const b=this.attributes[m],C=u.attributes[b.name];C!==void 0&&i.vertexAttribPointer(C,b.components,i[Hl[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Tt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class br extends Tt{getDefault(){return a.be.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class kr extends Tt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Wn extends Tt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Yr extends Tt{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Cn extends Tt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Bn extends Tt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ui extends Tt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class ci extends Tt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Di extends Tt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class Io extends Tt{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class es extends Tt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class fa extends Tt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class ol extends Tt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Wl extends Tt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class yc extends Tt{getDefault(){return a.be.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Zl extends Tt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Al extends Tt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Wu extends Tt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class vc extends Tt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Jc extends Tt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class oi extends Tt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class ai extends Tt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class al extends Tt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class Hi extends Tt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class _c extends Tt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Fa extends Tt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class ys extends Tt{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ca extends Tt{getDefault(){return null}set(i){var u;if(i===this.current&&!this.dirty)return;const p=this.gl;co(p)?p.bindVertexArray(i):(u=p.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Pl extends Tt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Xl extends Tt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Ls extends Tt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class ts extends Tt{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class bc extends ts{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class vs extends ts{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class bo extends ts{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}const Jo="Framebuffer is not complete";class Il{constructor(i,u,p,m,b){this.context=i,this.width=u,this.height=p;const C=i.gl,I=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new bc(i,I),m)this.depthAttachment=b?new bo(i,I):new vs(i,I);else if(b)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error(Jo)}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&i.deleteRenderbuffer(p)}i.deleteFramebuffer(this.framebuffer)}}class Mn{constructor(i){var u,p;if(this.gl=i,this.clearColor=new br(this),this.clearDepth=new kr(this),this.clearStencil=new Wn(this),this.colorMask=new Yr(this),this.depthMask=new Cn(this),this.stencilMask=new Bn(this),this.stencilFunc=new ui(this),this.stencilOp=new ci(this),this.stencilTest=new Di(this),this.depthRange=new Io(this),this.depthTest=new es(this),this.depthFunc=new fa(this),this.blend=new ol(this),this.blendFunc=new Wl(this),this.blendColor=new yc(this),this.blendEquation=new Zl(this),this.cullFace=new Al(this),this.cullFaceSide=new Wu(this),this.frontFace=new vc(this),this.program=new Jc(this),this.activeTexture=new oi(this),this.viewport=new ai(this),this.bindFramebuffer=new al(this),this.bindRenderbuffer=new Hi(this),this.bindTexture=new _c(this),this.bindVertexBuffer=new Fa(this),this.bindElementBuffer=new ys(this),this.bindVertexArray=new Ca(this),this.pixelStoreUnpack=new Pl(this),this.pixelStoreUnpackPremultiplyAlpha=new Xl(this),this.pixelStoreUnpackFlipY=new Ls(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),co(i)){this.HALF_FLOAT=i.HALF_FLOAT;const m=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=i.RGBA16F)!==null&&u!==void 0?u:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(p=i.RGB16F)!==null&&p!==void 0?p:m==null?void 0:m.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const m=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new Gl(this,i,u)}createVertexBuffer(i,u,p){return new _t(this,i,u,p)}createRenderbuffer(i,u,p){const m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,i,u,p),this.bindRenderbuffer.set(null),b}createFramebuffer(i,u,p,m){return new Il(this,i,u,p,m)}clear({color:i,depth:u,stencil:p}){const m=this.gl;let b=0;i&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),p!==void 0&&(b|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(b)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){a.bG(i.blendFunction,Wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return co(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var u;return co(this.gl)?this.gl.deleteVertexArray(i):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}let Ds;function Yl(_,i,u,p,m){const b=_.context,C=_.transform,I=b.gl,R=_.useProgram("collisionBox"),B=[];let q=0,X=0;for(let Me=0;Me<p.length;Me++){const Be=p[Me],Ke=i.getTile(Be).getBucket(u);if(!Ke)continue;const He=m?Ke.textCollisionBox:Ke.iconCollisionBox,et=Ke.collisionCircleArray;et.length>0&&(B.push({circleArray:et,circleOffset:X,coord:Be}),q+=et.length/4,X=q),He&&R.draw(b,I.LINES,sn.disabled,tn.disabled,_.colorModeForRenderPass(),vn.disabled,Li(_.transform),_.style.map.terrain&&_.style.map.terrain.getTerrainData(Be),C.getProjectionData({overscaledTileID:Be,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,null,_.transform.zoom,null,null,He.collisionVertexBuffer)}if(!m||!B.length)return;const Z=_.useProgram("collisionCircle"),ee=new a.b_;ee.resize(4*q),ee._trim();let he=0;for(const Me of B)for(let Be=0;Be<Me.circleArray.length/4;Be++){const Ke=4*Be,He=Me.circleArray[Ke+0],et=Me.circleArray[Ke+1],at=Me.circleArray[Ke+2],Ge=Me.circleArray[Ke+3];ee.emplace(he++,He,et,at,Ge,0),ee.emplace(he++,He,et,at,Ge,1),ee.emplace(he++,He,et,at,Ge,2),ee.emplace(he++,He,et,at,Ge,3)}(!Ds||Ds.length<2*q)&&(Ds=function(Me){const Be=2*Me,Ke=new a.c0;Ke.resize(Be),Ke._trim();for(let He=0;He<Be;He++){const et=6*He;Ke.uint16[et+0]=4*He+0,Ke.uint16[et+1]=4*He+1,Ke.uint16[et+2]=4*He+2,Ke.uint16[et+3]=4*He+2,Ke.uint16[et+4]=4*He+3,Ke.uint16[et+5]=4*He+0}return Ke}(q));const Ie=b.createIndexBuffer(Ds,!0),Pe=b.createVertexBuffer(ee,a.b$.members,!0);for(const Me of B){const Be=Vl(_.transform);Z.draw(b,I.TRIANGLES,sn.disabled,tn.disabled,_.colorModeForRenderPass(),vn.disabled,Be,_.style.map.terrain&&_.style.map.terrain.getTerrainData(Me.coord),null,u.id,Pe,Ie,a.aL.simpleSegment(0,2*Me.circleOffset,Me.circleArray.length,Me.circleArray.length/2),null,_.transform.zoom,null,null,null)}Pe.destroy(),Ie.destroy()}const Nh=a.af(new Float32Array(16));function xc(_,i,u,p,m,b){const{horizontalAlign:C,verticalAlign:I}=a.aG(_);return new a.P((-(C-.5)*i/m+p[0])*b,(-(I-.5)*u/m+p[1])*b)}function Np(_,i,u,p,m,b){const C=i.tileAnchorPoint.add(new a.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let I=p.mult(b);u||(I=I.rotate(-m));const R=C.add(I);return hn(R.x,R.y,i.pitchedLabelPlaneMatrix,i.getElevation).point}if(u){const I=lr(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(_),R=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return _.add(p.rotate(R))}return _.add(p)}function wd(_,i,u,p,m,b,C,I,R,B,q,X){const Z=_.text.placedSymbolArray,ee=_.text.dynamicLayoutVertexArray,he=_.icon.dynamicLayoutVertexArray,Ie={};ee.clear();for(let Pe=0;Pe<Z.length;Pe++){const Me=Z.get(Pe),Be=Me.hidden||!Me.crossTileID||_.allowVerticalPlacement&&!Me.placedOrientation?null:p[Me.crossTileID];if(Be){const Ke=new a.P(Me.anchorX,Me.anchorY),He={getElevation:X,width:m.width,height:m.height,pitchedLabelPlaneMatrix:b,pitchWithMap:u,transform:m,tileAnchorPoint:Ke,translation:B,unwrappedTileID:q},et=u?Sn(Ke.x,Ke.y,He):lr(Ke.x,Ke.y,He),at=Dr(m.cameraToCenterDistance,et.signedDistanceFromCamera);let Ge=a.ao(_.textSizeData,I,Me)*at/a.aA;u&&(Ge*=_.tilePixelRatio/C);const{width:mt,height:Nt,anchor:Mt,textOffset:kt,textBoxScale:zt}=Be,yr=xc(Mt,mt,Nt,kt,zt,Ge),mr=m.getPitchedTextCorrection(Ke.x+B[0],Ke.y+B[1],q),Kt=Np(et.point,He,i,yr,-m.bearingInRadians,mr),Fr=_.allowVerticalPlacement&&Me.placedOrientation===a.an.vertical?Math.PI/2:0;for(let Nn=0;Nn<Me.numGlyphs;Nn++)a.au(ee,Kt,Fr);R&&Me.associatedIconIndex>=0&&(Ie[Me.associatedIconIndex]={shiftedAnchor:Kt,angle:Fr})}else ha(Me.numGlyphs,ee)}if(R){he.clear();const Pe=_.icon.placedSymbolArray;for(let Me=0;Me<Pe.length;Me++){const Be=Pe.get(Me);if(Be.hidden)ha(Be.numGlyphs,he);else{const Ke=Ie[Me];if(Ke)for(let He=0;He<Be.numGlyphs;He++)a.au(he,Ke.shiftedAnchor,Ke.angle);else ha(Be.numGlyphs,he)}}_.icon.dynamicLayoutVertexBuffer.updateData(he)}_.text.dynamicLayoutVertexBuffer.updateData(ee)}function wf(_,i,u){return u.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Oh(_,i,u,p,m,b,C,I,R,B,q,X,Z){const ee=_.context,he=ee.gl,Ie=_.transform,Pe=I==="map",Me=R==="map",Be=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ke=Pe&&!Me&&!Be,He=!u.layout.get("symbol-sort-key").isConstant();let et=!1;const at=_.getDepthModeForSublayer(0,sn.ReadOnly),Ge=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),mt=[],Nt=Ie.getCircleRadiusCorrection();for(const Mt of p){const kt=i.getTile(Mt),zt=kt.getBucket(u);if(!zt)continue;const yr=m?zt.text:zt.icon;if(!yr||!yr.segments.get().length||!yr.hasVisibleVertices)continue;const mr=yr.programConfigurations.get(u.id),Kt=m||zt.sdfIcons,Fr=m?zt.textSizeData:zt.iconSizeData,Nn=Me||Ie.pitch!==0,ti=_.useProgram(wf(Kt,m,zt),mr),Vi=a.am(Fr,Ie.zoom),yi=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Mt);let vi,hi,li,xi,na=[0,0],Xn=null;if(m)hi=kt.glyphAtlasTexture,li=he.LINEAR,vi=kt.glyphAtlasTexture.size,zt.iconsInText&&(na=kt.imageAtlasTexture.size,Xn=kt.imageAtlasTexture,xi=Nn||_.options.rotating||_.options.zooming||Fr.kind==="composite"||Fr.kind==="camera"?he.LINEAR:he.NEAREST);else{const qo=u.layout.get("icon-size").constantOr(0)!==1||zt.iconsNeedLinear;hi=kt.imageAtlasTexture,li=Kt||_.options.rotating||_.options.zooming||qo||Nn?he.LINEAR:he.NEAREST,vi=kt.imageAtlasTexture.size}const da=a.aB(kt,1,_.transform.zoom),ia=nn(Pe,_.transform,da),Ql=a.L();a.ap(Ql,ia);const sh=Hn(Me,Pe,_.transform,da),lh=a.aC(Ie,kt,b,C),Zu=Ie.getProjectionData({overscaledTileID:Mt,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Td=Ge&&zt.hasTextData(),Ad=u.layout.get("icon-text-fit")!=="none"&&Td&&zt.hasIconData();if(Be){const qo=_.style.map.terrain?(Rs,Ea)=>_.style.map.terrain.getElevation(Mt,Rs,Ea):null,oo=u.layout.get("text-rotation-alignment")==="map";qn(zt,_,m,ia,Ql,Me,B,oo,Mt.toUnwrapped(),Ie.width,Ie.height,lh,qo)}const Mf=m&&Ge||Ad,hl=Be||Mf?Nh:Me?ia:_.transform.clipSpaceToPixelsMatrix,Su=Kt&&u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let uh;uh=Kt?zt.iconsInText?gs(Fr.kind,Vi,Ke,Me,Be,Mf,_,hl,sh,lh,vi,na,Nt):Ms(Fr.kind,Vi,Ke,Me,Be,Mf,_,hl,sh,lh,m,vi,0,Nt):Gi(Fr.kind,Vi,Ke,Me,Be,Mf,_,hl,sh,lh,m,vi,Nt);const qh={program:ti,buffers:yr,uniformValues:uh,projectionData:Zu,atlasTexture:hi,atlasTextureIcon:Xn,atlasInterpolation:li,atlasInterpolationIcon:xi,isSDF:Kt,hasHalo:Su};if(He&&zt.canOverlap){et=!0;const qo=yr.segments.get();for(const oo of qo)mt.push({segments:new a.aL([oo]),sortKey:oo.sortKey,state:qh,terrainData:yi})}else mt.push({segments:yr.segments,sortKey:0,state:qh,terrainData:yi})}et&&mt.sort((Mt,kt)=>Mt.sortKey-kt.sortKey);for(const Mt of mt){const kt=Mt.state;if(ee.activeTexture.set(he.TEXTURE0),kt.atlasTexture.bind(kt.atlasInterpolation,he.CLAMP_TO_EDGE),kt.atlasTextureIcon&&(ee.activeTexture.set(he.TEXTURE1),kt.atlasTextureIcon&&kt.atlasTextureIcon.bind(kt.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),kt.isSDF){const zt=kt.uniformValues;kt.hasHalo&&(zt.u_is_halo=1,Qc(kt.buffers,Mt.segments,u,_,kt.program,at,q,X,zt,kt.projectionData,Mt.terrainData)),zt.u_is_halo=0}Qc(kt.buffers,Mt.segments,u,_,kt.program,at,q,X,kt.uniformValues,kt.projectionData,Mt.terrainData)}}function Qc(_,i,u,p,m,b,C,I,R,B,q){const X=p.context;m.draw(X,X.gl.TRIANGLES,b,C,I,vn.backCCW,R,q,B,u.id,_.layoutVertexBuffer,_.indexBuffer,i,u.paint,p.transform.zoom,_.programConfigurations.get(u.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Sf(_,i,u,p,m){const b=_.context,C=b.gl,I=tn.disabled,R=new Wr([C.ONE,C.ONE],a.be.transparent,[!0,!0,!0,!0]),B=i.getBucket(u);if(!B)return;const q=p.key;let X=u.heatmapFbos.get(q);X||(X=eh(b,i.tileSize,i.tileSize),u.heatmapFbos.set(q,X)),b.bindFramebuffer.set(X.framebuffer),b.viewport.set([0,0,i.tileSize,i.tileSize]),b.clear({color:a.be.transparent});const Z=B.programConfigurations.get(u.id),ee=_.useProgram("heatmap",Z,!m),he=_.transform.getProjectionData({overscaledTileID:i.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=_.style.map.terrain.getTerrainData(p);ee.draw(b,C.TRIANGLES,sn.disabled,I,R,vn.disabled,ms(i,_.transform.zoom,u.paint.get("heatmap-intensity"),1),Ie,he,u.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,u.paint,_.transform.zoom,Z)}function Cf(_,i,u,p,m){const b=_.context,C=b.gl,I=_.transform;b.setColorMode(_.colorModeForRenderPass());const R=Ef(b,i),B=u.key,q=i.heatmapFbos.get(B);if(!q)return;b.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,q.colorAttachment.get()),b.activeTexture.set(C.TEXTURE1),R.bind(C.LINEAR,C.CLAMP_TO_EDGE);const X=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:m,applyGlobeMatrix:!p});_.useProgram("heatmapTexture").draw(b,C.TRIANGLES,sn.disabled,tn.disabled,_.colorModeForRenderPass(),vn.disabled,ho(_,i,0,1),null,X,i.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments,i.paint,I.zoom),q.destroy(),i.heatmapFbos.delete(B)}function eh(_,i,u){var p,m;const b=_.gl,C=b.createTexture();b.bindTexture(b.TEXTURE_2D,C),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const I=(p=_.HALF_FLOAT)!==null&&p!==void 0?p:b.UNSIGNED_BYTE,R=(m=_.RGBA16F)!==null&&m!==void 0?m:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,R,i,u,0,b.RGBA,I,null);const B=_.createFramebuffer(i,u,!1,!1);return B.colorAttachment.set(C),B}function Ef(_,i){return i.colorRampTexture||(i.colorRampTexture=new a.T(_,i.colorRamp,_.gl.RGBA)),i.colorRampTexture}function Sd(_,i,u,p,m){if(!u||!p||!p.imageAtlas)return;const b=p.imageAtlas.patternPositions;let C=b[u.to.toString()],I=b[u.from.toString()];if(!C&&I&&(C=I),!I&&C&&(I=C),!C||!I){const R=m.getPaintProperty(i);C=b[R],I=b[R]}C&&I&&_.setConstantPatternPositions(C,I)}function Fh(_,i,u,p,m,b,C,I){const R=_.context.gl,B="fill-pattern",q=u.paint.get(B),X=q&&q.constantOr(1),Z=u.getCrossfadeParameters();let ee,he,Ie,Pe,Me;const Be=_.transform,Ke=u.paint.get("fill-translate"),He=u.paint.get("fill-translate-anchor");C?(he=X&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=R.LINES):(he=X?"fillPattern":"fill",ee=R.TRIANGLES);const et=q.constantOr(null);for(const at of p){const Ge=i.getTile(at);if(X&&!Ge.patternsLoaded())continue;const mt=Ge.getBucket(u);if(!mt)continue;const Nt=mt.programConfigurations.get(u.id),Mt=_.useProgram(he,Nt),kt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(at);X&&(_.context.activeTexture.set(R.TEXTURE0),Ge.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Nt.updatePaintBuffers(Z)),Sd(Nt,B,et,Ge,u);const zt=Be.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),yr=a.aC(Be,Ge,Ke,He);if(C){Pe=mt.indexBuffer2,Me=mt.segments2;const Kt=[R.drawingBufferWidth,R.drawingBufferHeight];Ie=he==="fillOutlinePattern"&&X?ps(_,Z,Ge,Kt,yr):ki(Kt,yr)}else Pe=mt.indexBuffer,Me=mt.segments,Ie=X?$o(_,Z,Ge,yr):{u_fill_translate:yr};const mr=_.stencilModeForClipping(at);Mt.draw(_.context,ee,m,mr,b,vn.backCCW,Ie,kt,zt,u.id,mt.layoutVertexBuffer,Pe,Me,u.paint,_.transform.zoom,Nt)}}function th(_,i,u,p,m,b,C,I){const R=_.context,B=R.gl,q="fill-extrusion-pattern",X=u.paint.get(q),Z=X.constantOr(1),ee=u.getCrossfadeParameters(),he=u.paint.get("fill-extrusion-opacity"),Ie=X.constantOr(null),Pe=_.transform;for(const Me of p){const Be=i.getTile(Me),Ke=Be.getBucket(u);if(!Ke)continue;const He=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Me),et=Ke.programConfigurations.get(u.id),at=_.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",et);Z&&(_.context.activeTexture.set(B.TEXTURE0),Be.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),et.updatePaintBuffers(ee));const Ge=Pe.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!I,applyTerrainMatrix:!0});Sd(et,q,Ie,Be,u);const mt=a.aC(Pe,Be,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Nt=u.paint.get("fill-extrusion-vertical-gradient"),Mt=Z?no(_,Nt,he,mt,Me,ee,Be):Qa(_,Nt,he,mt);at.draw(R,R.gl.TRIANGLES,m,b,C,vn.backCCW,Mt,He,Ge,u.id,Ke.layoutVertexBuffer,Ke.indexBuffer,Ke.segments,u.paint,_.transform.zoom,et,_.style.map.terrain&&Ke.centroidVertexBuffer)}}function rh(_,i,u,p,m,b,C,I,R){var B;const q=_.style.projection,X=_.context,Z=_.transform,ee=X.gl,he=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],Ie=_.useProgram("hillshade",null,!1,he),Pe=!_.options.moving;for(const Me of p){const Be=i.getTile(Me),Ke=Be.fbo;if(!Ke)continue;const He=q.getMeshFromTileID(X,Me.canonical,I,!0,"raster"),et=(B=_.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(Me);X.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Ke.colorAttachment.get());const at=Z.getProjectionData({overscaledTileID:Me,aligned:Pe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});Ie.draw(X,ee.TRIANGLES,b,m[Me.overscaledZ],C,vn.backCCW,jo(_,Be,u),et,at,u.id,He.vertexBuffer,He.indexBuffer,He.segments)}}function wc(_,i,u,p,m,b,C,I,R){var B;const q=_.style.projection,X=_.context,Z=_.transform,ee=X.gl,he=_.useProgram("colorRelief"),Ie=!_.options.moving;let Pe=!0;for(const Me of p){const Be=i.getTile(Me),Ke=Be.dem;if(Pe){const Nt=ee.getParameter(ee.MAX_TEXTURE_SIZE),{elevationTexture:Mt,colorTexture:kt}=u.getColorRampTextures(X,Nt,Ke.getUnpackVector());X.activeTexture.set(ee.TEXTURE1),Mt.bind(ee.NEAREST,ee.CLAMP_TO_EDGE),X.activeTexture.set(ee.TEXTURE4),kt.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),Pe=!1}if(!Ke||!Ke.data)continue;const He=Ke.stride,et=Ke.getPixels();if(X.activeTexture.set(ee.TEXTURE0),X.pixelStoreUnpackPremultiplyAlpha.set(!1),Be.demTexture=Be.demTexture||_.getTileTexture(He),Be.demTexture){const Nt=Be.demTexture;Nt.update(et,{premultiply:!1}),Nt.bind(ee.LINEAR,ee.CLAMP_TO_EDGE)}else Be.demTexture=new a.T(X,et,ee.RGBA,{premultiply:!1}),Be.demTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const at=q.getMeshFromTileID(X,Me.canonical,I,!0,"raster"),Ge=(B=_.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(Me),mt=Z.getProjectionData({overscaledTileID:Me,aligned:Ie,applyGlobeMatrix:!R,applyTerrainMatrix:!0});he.draw(X,ee.TRIANGLES,b,m[Me.overscaledZ],C,vn.backCCW,Tl(u,Be.dem),Ge,mt,u.id,at.vertexBuffer,at.indexBuffer,at.segments)}}const Bh=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function sl(_,i,u,p,m,b,C,I,R=!1,B=!1){const q=p[p.length-1].overscaledZ,X=_.context,Z=X.gl,ee=_.useProgram("raster"),he=_.transform,Ie=_.style.projection,Pe=_.colorModeForRenderPass(),Me=!_.options.moving;for(const Be of p){const Ke=_.getDepthModeForSublayer(Be.overscaledZ-q,u.paint.get("raster-opacity")===1?sn.ReadWrite:sn.ReadOnly,Z.LESS),He=i.getTile(Be);He.registerFadeDuration(u.paint.get("raster-fade-duration"));const et=i.findLoadedParent(Be,0),at=i.findLoadedSibling(Be),Ge=Xg(He,et||at||null,i,u,_.transform,_.style.map.terrain);let mt,Nt;const Mt=u.paint.get("raster-resampling")==="nearest"?Z.NEAREST:Z.LINEAR;X.activeTexture.set(Z.TEXTURE0),He.texture.bind(Mt,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),X.activeTexture.set(Z.TEXTURE1),et?(et.texture.bind(Mt,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),mt=Math.pow(2,et.tileID.overscaledZ-He.tileID.overscaledZ),Nt=[He.tileID.canonical.x*mt%1,He.tileID.canonical.y*mt%1]):He.texture.bind(Mt,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),He.texture.useMipmap&&X.extTextureFilterAnisotropic&&_.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const kt=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Be),zt=he.getProjectionData({overscaledTileID:Be,aligned:Me,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),yr=Ko(Nt||[0,0],mt||1,Ge,u,I),mr=Ie.getMeshFromTileID(X,Be.canonical,b,C,"raster");ee.draw(X,Z.TRIANGLES,Ke,m?m[Be.overscaledZ]:tn.disabled,Pe,R?vn.frontCCW:vn.backCCW,yr,kt,zt,u.id,mr.vertexBuffer,mr.indexBuffer,mr.segments)}}function Xg(_,i,u,p,m,b){const C=p.paint.get("raster-fade-duration");if(!b&&C>0){const I=D.now(),R=(I-_.timeAdded)/C,B=i?(I-i.timeAdded)/C:-1,q=u.getSource(),X=Lt(m,{tileSize:q.tileSize,roundZoom:q.roundZoom}),Z=!i||Math.abs(i.tileID.overscaledZ-X)>Math.abs(_.tileID.overscaledZ-X),ee=Z&&_.refreshedUponExpiration?1:a.ag(Z?R:1-B,0,1);return _.refreshedUponExpiration&&R>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const Op=new a.be(1,0,0,1),zh=new a.be(0,1,0,1),Cd=new a.be(0,0,1,1),Fp=new a.be(1,0,1,1),Bp=new a.be(0,1,1,1);function $h(_,i,u,p){_s(_,0,i+u/2,_.transform.width,u,p)}function Ml(_,i,u,p){_s(_,i-u/2,0,u,_.transform.height,p)}function _s(_,i,u,p,m,b){const C=_.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(i*_.pixelRatio,u*_.pixelRatio,p*_.pixelRatio,m*_.pixelRatio),C.clear({color:b}),I.disable(I.SCISSOR_TEST)}function Kl(_,i,u){const p=_.context,m=p.gl,b=_.useProgram("debug"),C=sn.disabled,I=tn.disabled,R=_.colorModeForRenderPass(),B="$debug",q=_.style.map.terrain&&_.style.map.terrain.getTerrainData(u);p.activeTexture.set(m.TEXTURE0);const X=i.getTileByID(u.key).latestRawTileData,Z=Math.floor((X&&X.byteLength||0)/1024),ee=i.getTile(u).tileSize,he=512/Math.min(ee,512)*(u.overscaledZ/_.transform.zoom)*.5;let Ie=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Ie+=` => ${u.overscaledZ}`),function(Me,Be){Me.initDebugOverlayCanvas();const Ke=Me.debugOverlayCanvas,He=Me.context.gl,et=Me.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,Ke.width,Ke.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(Be,5,5),et.strokeText(Be,5,5),Me.debugOverlayTexture.update(Ke),Me.debugOverlayTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE)}(_,`${Ie} ${Z}kB`);const Pe=_.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(p,m.TRIANGLES,C,I,Wr.alphaBlended,vn.disabled,tl(a.be.transparent,he),null,Pe,B,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),b.draw(p,m.LINE_STRIP,C,I,R,vn.disabled,tl(a.be.red),q,Pe,B,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function fo(_,i,u,p){const{isRenderingGlobe:m}=p,b=_.context,C=b.gl,I=_.transform,R=_.colorModeForRenderPass(),B=_.getDepthModeFor3D(),q=_.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,_.width,_.height]);for(const X of u){const Z=i.getTerrainMesh(X.tileID),ee=_.renderToTexture.getTexture(X),he=i.getTerrainData(X.tileID);b.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,ee.texture);const Ie=i.getMeshFrameDelta(I.zoom),Pe=I.calculateFogMatrix(X.tileID.toUnwrapped()),Me=Kc(Ie,Pe,_.style.sky,I.pitch,m),Be=I.getProjectionData({overscaledTileID:X.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(b,C.TRIANGLES,B,tn.disabled,R,vn.backCCW,Me,he,Be,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function bu(_,i){if(!i.mesh){const u=new a.aK;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const p=new a.aM;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),i.mesh=new yt(_.createVertexBuffer(u,Jt.members),_.createIndexBuffer(p),a.aL.simpleSegment(0,0,u.length,p.length))}return i.mesh}class Qo{constructor(i,u){this.context=new Mn(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ft.maxUnderzooming+Ft.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new pe}resize(i,u,p){if(this.width=Math.floor(i*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,u=new a.aK;u.emplaceBack(0,0),u.emplaceBack(a.$,0),u.emplaceBack(0,a.$),u.emplaceBack(a.$,a.$),this.tileExtentBuffer=i.createVertexBuffer(u,Jt.members),this.tileExtentSegments=a.aL.simpleSegment(0,0,4,2);const p=new a.aK;p.emplaceBack(0,0),p.emplaceBack(a.$,0),p.emplaceBack(0,a.$),p.emplaceBack(a.$,a.$),this.debugBuffer=i.createVertexBuffer(p,Jt.members),this.debugSegments=a.aL.simpleSegment(0,0,4,5);const m=new a.c5;m.emplaceBack(0,0,0,0),m.emplaceBack(a.$,0,a.$,0),m.emplaceBack(0,a.$,0,a.$),m.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=i.createVertexBuffer(m,Qs.members),this.rasterBoundsSegments=a.aL.simpleSegment(0,0,4,2);const b=new a.aK;b.emplaceBack(0,0),b.emplaceBack(a.$,0),b.emplaceBack(0,a.$),b.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=i.createVertexBuffer(b,Jt.members),this.rasterBoundsSegmentsPosOnly=a.aL.simpleSegment(0,0,4,5);const C=new a.aK;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(C,Jt.members),this.viewportSegments=a.aL.simpleSegment(0,0,4,2);const I=new a.c6;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(I);const R=new a.aM;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(R);const B=this.context.gl;this.stencilClearMode=new tn({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.tileExtentMesh=new yt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=a.L();a.bX(p,0,this.width,this.height,0,0,1),a.N(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const m={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(i,u.TRIANGLES,sn.disabled,this.stencilClearMode,Wr.disabled,vn.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u,p){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source,this.nextStencilID+u.length>256&&this.clearStencil();const m=this.context;m.setColorMode(Wr.disabled),m.setDepthMode(sn.disabled);const b={};for(const C of u)b[C.key]=this.nextStencilID++;this._renderTileMasks(b,u,p,!0),this._renderTileMasks(b,u,p,!1),this._tileClippingMaskIDs=b}_renderTileMasks(i,u,p,m){const b=this.context,C=b.gl,I=this.style.projection,R=this.transform,B=this.useProgram("clippingMask");for(const q of u){const X=i[q.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),ee=I.getMeshFromTileID(this.context,q.canonical,m,!0,"stencil"),he=R.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!p,applyTerrainMatrix:!0});B.draw(b,C.TRIANGLES,sn.disabled,new tn({func:C.ALWAYS,mask:0},X,255,C.KEEP,C.KEEP,C.REPLACE),Wr.disabled,p?vn.disabled:vn.backCCW,null,Z,he,"$clipping",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}_renderTilesDepthBuffer(){const i=this.context,u=i.gl,p=this.style.projection,m=this.transform,b=this.useProgram("depth"),C=this.getDepthModeFor3D(),I=wt(m,{tileSize:m.tileSize});for(const R of I){const B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),q=p.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),X=m.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(i,u.TRIANGLES,C,tn.disabled,Wr.disabled,vn.backCCW,null,B,X,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new tn({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new tn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(i){const u=this.context.gl,p=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),m=p[p.length-1].overscaledZ,b=p[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const C={};for(let I=0;I<b;I++)C[I+m]=new tn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[C,p]}return[{[m]:tn.disabled},p]}stencilConfigForOverlapTwoPass(i){const u=this.context.gl,p=i.sort((C,I)=>I.overscaledZ-C.overscaledZ),m=p[p.length-1].overscaledZ,b=p[0].overscaledZ-m+1;if(this.clearStencil(),b>1){const C={},I={};for(let R=0;R<b;R++)C[R+m]=new tn({func:u.GREATER,mask:255},b+1+R,255,u.KEEP,u.KEEP,u.REPLACE),I[R+m]=new tn({func:u.GREATER,mask:255},1+R,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*b+1,[C,I,p]}return this.nextStencilID=3,[{[m]:new tn({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[m]:new tn({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},p]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Wr([i.CONSTANT_COLOR,i.ONE],new a.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Wr.unblended:Wr.alphaBlended}getDepthModeForSublayer(i,u,p){if(!this.opaquePassEnabledForLayer())return sn.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new sn(p||this.context.gl.LEQUAL,u,[m,m])}getDepthModeFor3D(){return new sn(this.context.gl.LEQUAL,sn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){var p,m;this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const b=this.style._order,C=this.style.sourceCaches,I={},R={},B={},q={isRenderingToTexture:!1,isRenderingGlobe:((p=i.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const Z in C){const ee=C[Z];ee.used&&ee.prepare(this.context),I[Z]=ee.getVisibleCoordinates(!1),R[Z]=I[Z].slice().reverse(),B[Z]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<b.length;Z++)if(this.style._layers[b[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of b){const ee=this.style._layers[Z];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const he=R[ee.source];(ee.type==="custom"||he.length)&&this.renderLayer(this,C[ee.source],ee,he,q)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.be.black:a.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,ee){const he=Z.context,Ie=he.gl,Pe=((at,Ge,mt)=>{const Nt=Math.cos(Ge.rollInRadians),Mt=Math.sin(Ge.rollInRadians),kt=oe(Ge),zt=Ge.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:at.properties.get("sky-color"),u_horizon_color:at.properties.get("horizon-color"),u_horizon:[(Ge.width/2-kt*Mt)*mt,(Ge.height/2+kt*Nt)*mt],u_horizon_normal:[-Mt,Nt],u_sky_horizon_blend:at.properties.get("sky-horizon-blend")*Ge.height/2*mt,u_sky_blend:zt}})(ee,Z.style.map.transform,Z.pixelRatio),Me=new sn(Ie.LEQUAL,sn.ReadWrite,[0,1]),Be=tn.disabled,Ke=Z.colorModeForRenderPass(),He=Z.useProgram("sky"),et=bu(he,ee);He.draw(he,Ie.TRIANGLES,Me,Be,Ke,vn.disabled,Pe,null,void 0,"sky",et.vertexBuffer,et.indexBuffer,et.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[b[this.currentLayer]],ee=C[Z.source],he=I[Z.source];this._renderTileClippingMasks(Z,he,!1),this.renderLayer(this,ee,Z,he,q)}this.renderPass="translucent";let X=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const Z=this.style._layers[b[this.currentLayer]],ee=C[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,q))continue;this.opaquePassEnabledForLayer()||X||(X=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const he=(Z.type==="symbol"?B:R)[Z.source];this._renderTileClippingMasks(Z,I[Z.source],!!this.renderToTexture),this.renderLayer(this,ee,Z,he,q)}if(q.isRenderingGlobe&&function(Z,ee,he){const Ie=Z.context,Pe=Ie.gl,Me=Z.useProgram("atmosphere"),Be=new sn(Pe.LEQUAL,sn.ReadOnly,[0,1]),Ke=Z.transform,He=function(zt,yr){const mr=zt.properties.get("position"),Kt=[-mr.x,-mr.y,-mr.z],Fr=a.af(new Float64Array(16));return zt.properties.get("anchor")==="map"&&(a.b5(Fr,Fr,yr.rollInRadians),a.b6(Fr,Fr,-yr.pitchInRadians),a.b5(Fr,Fr,yr.bearingInRadians),a.b6(Fr,Fr,yr.center.lat*Math.PI/180),a.by(Fr,Fr,-yr.center.lng*Math.PI/180)),a.c4(Kt,Kt,Fr),Kt}(he,Z.transform),et=Ke.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),at=ee.properties.get("atmosphere-blend")*et.projectionTransition;if(at===0)return;const Ge=zo(Ke.worldSize,Ke.center.lat),mt=Ke.inverseProjectionMatrix,Nt=new Float64Array(4);Nt[3]=1,a.av(Nt,Nt,Ke.modelViewProjectionMatrix),Nt[0]/=Nt[3],Nt[1]/=Nt[3],Nt[2]/=Nt[3],Nt[3]=1,a.av(Nt,Nt,mt),Nt[0]/=Nt[3],Nt[1]/=Nt[3],Nt[2]/=Nt[3],Nt[3]=1;const Mt=((zt,yr,mr,Kt,Fr)=>({u_sun_pos:zt,u_atmosphere_blend:yr,u_globe_position:mr,u_globe_radius:Kt,u_inv_proj_matrix:Fr}))(He,at,[Nt[0],Nt[1],Nt[2]],Ge,mt),kt=bu(Ie,ee);Me.draw(Ie,Pe.TRIANGLES,Be,tn.disabled,Wr.alphaBlended,vn.disabled,Mt,null,null,"atmosphere",kt.vertexBuffer,kt.indexBuffer,kt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(ee,he){let Ie=null;const Pe=Object.values(ee._layers).flatMap(He=>He.source&&!He.isHidden(he)?[ee.sourceCaches[He.source]]:[]),Me=Pe.filter(He=>He.getSource().type==="vector"),Be=Pe.filter(He=>He.getSource().type!=="vector"),Ke=He=>{(!Ie||Ie.getSource().maxzoom<He.getSource().maxzoom)&&(Ie=He)};return Me.forEach(He=>Ke(He)),Ie||Be.forEach(He=>Ke(He)),Ie}(this.style,this.transform.zoom);Z&&function(ee,he,Ie){for(let Pe=0;Pe<Ie.length;Pe++)Kl(ee,he,Ie[Pe])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const ee=Z.transform.padding;$h(Z,Z.transform.height-(ee.top||0),3,Op),$h(Z,ee.bottom||0,3,zh),Ml(Z,ee.left||0,3,Cd),Ml(Z,Z.transform.width-(ee.right||0),3,Fp);const he=Z.transform.centerPoint;(function(Ie,Pe,Me,Be){_s(Ie,Pe-1,Me-10,2,20,Be),_s(Ie,Pe-10,Me-1,20,2,Be)})(Z,he.x,Z.transform.height-he.y,Bp)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=i?!a.c7(u,p):!a.c8(u,p)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.c9(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,C){const I=b.context,R=I.gl,B=b.transform,q=Wr.unblended,X=new sn(R.LEQUAL,sn.ReadWrite,[0,1]),Z=C.sourceCache.getRenderableTiles(),ee=b.useProgram("terrainDepth");I.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),I.clear({color:a.be.transparent,depth:1});for(const he of Z){const Ie=C.getTerrainMesh(he.tileID),Pe=C.getTerrainData(he.tileID),Me=B.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Be={u_ele_delta:C.getMeshFrameDelta(B.zoom)};ee.draw(I,R.TRIANGLES,X,tn.disabled,q,vn.backCCW,Be,Pe,Me,"terrain",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,C){const I=b.context,R=I.gl,B=b.transform,q=Wr.unblended,X=new sn(R.LEQUAL,sn.ReadWrite,[0,1]),Z=C.getCoordsTexture(),ee=C.sourceCache.getRenderableTiles(),he=b.useProgram("terrainCoords");I.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),I.clear({color:a.be.transparent,depth:1}),C.coordsIndex=[];for(const Ie of ee){const Pe=C.getTerrainMesh(Ie.tileID),Me=C.getTerrainData(Ie.tileID);I.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,Z.texture);const Be={u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(B.zoom)},Ke=B.getProjectionData({overscaledTileID:Ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});he.draw(I,R.TRIANGLES,X,tn.disabled,q,vn.backCCW,Be,Me,Ke,"terrain",Pe.vertexBuffer,Pe.indexBuffer,Pe.segments),C.coordsIndex.push(Ie.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(i,u,p,m,b){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(m||[]).length)&&(this.id=p.id,a.ca(p)?function(C,I,R,B,q,X){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=X,ee=tn.disabled,he=C.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ie,Pe,Me,Be,Ke,He,et,at,Ge){const mt=Pe.transform,Nt=Pe.style.map.terrain,Mt=Ke==="map",kt=He==="map";for(const zt of Ie){const yr=Be.getTile(zt),mr=yr.getBucket(Me);if(!mr||!mr.text||!mr.text.segments.get().length)continue;const Kt=a.am(mr.textSizeData,mt.zoom),Fr=a.aB(yr,1,Pe.transform.zoom),Nn=nn(Mt,Pe.transform,Fr),ti=Me.layout.get("icon-text-fit")!=="none"&&mr.hasIconData();if(Kt){const Vi=Math.pow(2,mt.zoom-yr.tileID.overscaledZ),yi=Nt?(vi,hi)=>Nt.getElevation(zt,vi,hi):null;wd(mr,Mt,kt,Ge,mt,Nn,Vi,Kt,ti,a.aC(mt,yr,et,at),zt.toUnwrapped(),yi)}}}(B,C,R,I,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),q),R.paint.get("icon-opacity").constantOr(1)!==0&&Oh(C,I,R,B,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),ee,he,Z),R.paint.get("text-opacity").constantOr(1)!==0&&Oh(C,I,R,B,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),ee,he,Z),I.map.showCollisionBoxes&&(Yl(C,I,R,B,!0),Yl(C,I,R,B,!1))}(i,u,p,m,this.style.placement.variableOffsets,b):a.cb(p)?function(C,I,R,B,q){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:X}=q,Z=R.paint.get("circle-opacity"),ee=R.paint.get("circle-stroke-width"),he=R.paint.get("circle-stroke-opacity"),Ie=!R.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(ee.constantOr(1)===0||he.constantOr(1)===0))return;const Pe=C.context,Me=Pe.gl,Be=C.transform,Ke=C.getDepthModeForSublayer(0,sn.ReadOnly),He=tn.disabled,et=C.colorModeForRenderPass(),at=[],Ge=Be.getCircleRadiusCorrection();for(let mt=0;mt<B.length;mt++){const Nt=B[mt],Mt=I.getTile(Nt),kt=Mt.getBucket(R);if(!kt)continue;const zt=R.paint.get("circle-translate"),yr=R.paint.get("circle-translate-anchor"),mr=a.aC(Be,Mt,zt,yr),Kt=kt.programConfigurations.get(R.id),Fr=C.useProgram("circle",Kt),Nn=kt.layoutVertexBuffer,ti=kt.indexBuffer,Vi=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Nt),yi={programConfiguration:Kt,program:Fr,layoutVertexBuffer:Nn,indexBuffer:ti,uniformValues:el(C,Mt,R,mr,Ge),terrainData:Vi,projectionData:Be.getProjectionData({overscaledTileID:Nt,applyGlobeMatrix:!X,applyTerrainMatrix:!0})};if(Ie){const vi=kt.segments.get();for(const hi of vi)at.push({segments:new a.aL([hi]),sortKey:hi.sortKey,state:yi})}else at.push({segments:kt.segments,sortKey:0,state:yi})}Ie&&at.sort((mt,Nt)=>mt.sortKey-Nt.sortKey);for(const mt of at){const{programConfiguration:Nt,program:Mt,layoutVertexBuffer:kt,indexBuffer:zt,uniformValues:yr,terrainData:mr,projectionData:Kt}=mt.state;Mt.draw(Pe,Me.TRIANGLES,Ke,He,et,vn.backCCW,yr,mr,Kt,R.id,kt,zt,mt.segments,R.paint,C.transform.zoom,Nt)}}(i,u,p,m,b):a.cc(p)?function(C,I,R,B,q){if(R.paint.get("heatmap-opacity")===0)return;const X=C.context,{isRenderingToTexture:Z,isRenderingGlobe:ee}=q;if(C.style.map.terrain){for(const he of B){const Ie=I.getTile(he);I.hasRenderableParent(he)||(C.renderPass==="offscreen"?Sf(C,Ie,R,he,ee):C.renderPass==="translucent"&&Cf(C,R,he,Z,ee))}X.viewport.set([0,0,C.width,C.height])}else C.renderPass==="offscreen"?function(he,Ie,Pe,Me){const Be=he.context,Ke=Be.gl,He=he.transform,et=tn.disabled,at=new Wr([Ke.ONE,Ke.ONE],a.be.transparent,[!0,!0,!0,!0]);(function(Ge,mt,Nt){const Mt=Ge.gl;Ge.activeTexture.set(Mt.TEXTURE1),Ge.viewport.set([0,0,mt.width/4,mt.height/4]);let kt=Nt.heatmapFbos.get(a.c1);kt?(Mt.bindTexture(Mt.TEXTURE_2D,kt.colorAttachment.get()),Ge.bindFramebuffer.set(kt.framebuffer)):(kt=eh(Ge,mt.width/4,mt.height/4),Nt.heatmapFbos.set(a.c1,kt))})(Be,he,Pe),Be.clear({color:a.be.transparent});for(let Ge=0;Ge<Me.length;Ge++){const mt=Me[Ge];if(Ie.hasRenderableParent(mt))continue;const Nt=Ie.getTile(mt),Mt=Nt.getBucket(Pe);if(!Mt)continue;const kt=Mt.programConfigurations.get(Pe.id),zt=he.useProgram("heatmap",kt),yr=He.getProjectionData({overscaledTileID:mt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),mr=He.getCircleRadiusCorrection();zt.draw(Be,Ke.TRIANGLES,sn.disabled,et,at,vn.backCCW,ms(Nt,He.zoom,Pe.paint.get("heatmap-intensity"),mr),null,yr,Pe.id,Mt.layoutVertexBuffer,Mt.indexBuffer,Mt.segments,Pe.paint,He.zoom,kt)}Be.viewport.set([0,0,he.width,he.height])}(C,I,R,B):C.renderPass==="translucent"&&function(he,Ie){const Pe=he.context,Me=Pe.gl;Pe.setColorMode(he.colorModeForRenderPass());const Be=Ie.heatmapFbos.get(a.c1);Be&&(Pe.activeTexture.set(Me.TEXTURE0),Me.bindTexture(Me.TEXTURE_2D,Be.colorAttachment.get()),Pe.activeTexture.set(Me.TEXTURE1),Ef(Pe,Ie).bind(Me.LINEAR,Me.CLAMP_TO_EDGE),he.useProgram("heatmapTexture").draw(Pe,Me.TRIANGLES,sn.disabled,tn.disabled,he.colorModeForRenderPass(),vn.disabled,ho(he,Ie,0,1),null,null,Ie.id,he.viewportBuffer,he.quadTriangleIndexBuffer,he.viewportSegments,Ie.paint,he.transform.zoom))}(C,R)}(i,u,p,m,b):a.cd(p)?function(C,I,R,B,q){if(C.renderPass!=="translucent")return;const{isRenderingToTexture:X}=q,Z=R.paint.get("line-opacity"),ee=R.paint.get("line-width");if(Z.constantOr(1)===0||ee.constantOr(1)===0)return;const he=C.getDepthModeForSublayer(0,sn.ReadOnly),Ie=C.colorModeForRenderPass(),Pe=R.paint.get("line-dasharray"),Me=R.paint.get("line-pattern"),Be=Me.constantOr(1),Ke=R.paint.get("line-gradient"),He=R.getCrossfadeParameters(),et=Be?"linePattern":Pe?"lineSDF":Ke?"lineGradient":"line",at=C.context,Ge=at.gl,mt=C.transform;let Nt=!0;for(const Mt of B){const kt=I.getTile(Mt);if(Be&&!kt.patternsLoaded())continue;const zt=kt.getBucket(R);if(!zt)continue;const yr=zt.programConfigurations.get(R.id),mr=C.context.program.get(),Kt=C.useProgram(et,yr),Fr=Nt||Kt.program!==mr,Nn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Mt),ti=Me.constantOr(null);if(ti&&kt.imageAtlas){const li=kt.imageAtlas,xi=li.patternPositions[ti.to.toString()],na=li.patternPositions[ti.from.toString()];xi&&na&&yr.setConstantPatternPositions(xi,na)}const Vi=mt.getProjectionData({overscaledTileID:Mt,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),yi=mt.getPixelScale(),vi=Be?_o(C,kt,R,yi,He):Pe?ql(C,kt,R,yi,Pe,He):Ke?Ao(C,kt,R,yi,zt.lineClipsArray.length):rl(C,kt,R,yi);if(Be)at.activeTexture.set(Ge.TEXTURE0),kt.imageAtlasTexture.bind(Ge.LINEAR,Ge.CLAMP_TO_EDGE),yr.updatePaintBuffers(He);else if(Pe&&(Fr||C.lineAtlas.dirty))at.activeTexture.set(Ge.TEXTURE0),C.lineAtlas.bind(at);else if(Ke){const li=zt.gradients[R.id];let xi=li.texture;if(R.gradientVersion!==li.version){let na=256;if(R.stepInterpolant){const Xn=I.getSource().maxzoom,da=Mt.canonical.z===Xn?Math.ceil(1<<C.transform.maxZoom-Mt.canonical.z):1;na=a.ag(a.c2(zt.maxLineLength/a.$*1024*da),256,at.maxTextureSize)}li.gradient=a.c3({expression:R.gradientExpression(),evaluationKey:"lineProgress",resolution:na,image:li.gradient||void 0,clips:zt.lineClipsArray}),li.texture?li.texture.update(li.gradient):li.texture=new a.T(at,li.gradient,Ge.RGBA),li.version=R.gradientVersion,xi=li.texture}at.activeTexture.set(Ge.TEXTURE0),xi.bind(R.stepInterpolant?Ge.NEAREST:Ge.LINEAR,Ge.CLAMP_TO_EDGE)}const hi=C.stencilModeForClipping(Mt);Kt.draw(at,Ge.TRIANGLES,he,hi,Ie,vn.disabled,vi,Nn,Vi,R.id,zt.layoutVertexBuffer,zt.indexBuffer,zt.segments,R.paint,C.transform.zoom,yr,zt.layoutVertexBuffer2),Nt=!1}}(i,u,p,m,b):a.ce(p)?function(C,I,R,B,q){const X=R.paint.get("fill-color"),Z=R.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:ee}=q,he=C.colorModeForRenderPass(),Ie=R.paint.get("fill-pattern"),Pe=C.opaquePassEnabledForLayer()&&!Ie.constantOr(1)&&X.constantOr(a.be.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===Pe){const Me=C.getDepthModeForSublayer(1,C.renderPass==="opaque"?sn.ReadWrite:sn.ReadOnly);Fh(C,I,R,B,Me,he,!1,ee)}if(C.renderPass==="translucent"&&R.paint.get("fill-antialias")){const Me=C.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,sn.ReadOnly);Fh(C,I,R,B,Me,he,!0,ee)}}(i,u,p,m,b):a.cf(p)?function(C,I,R,B,q){const X=R.paint.get("fill-extrusion-opacity");if(X===0)return;const{isRenderingToTexture:Z}=q;if(C.renderPass==="translucent"){const ee=new sn(C.context.gl.LEQUAL,sn.ReadWrite,C.depthRangeFor3D);if(X!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))th(C,I,R,B,ee,tn.disabled,Wr.disabled,Z),th(C,I,R,B,ee,C.stencilModeFor3D(),C.colorModeForRenderPass(),Z);else{const he=C.colorModeForRenderPass();th(C,I,R,B,ee,tn.disabled,he,Z)}}}(i,u,p,m,b):a.cg(p)?function(C,I,R,B,q){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;const{isRenderingToTexture:X}=q,Z=C.context,ee=C.style.projection.useSubdivision,he=C.getDepthModeForSublayer(0,sn.ReadOnly),Ie=C.colorModeForRenderPass();if(C.renderPass==="offscreen")(function(Pe,Me,Be,Ke,He,et,at){const Ge=Pe.context,mt=Ge.gl;for(const Nt of Be){const Mt=Me.getTile(Nt),kt=Mt.dem;if(!kt||!kt.data||!Mt.needsHillshadePrepare)continue;const zt=kt.dim,yr=kt.stride,mr=kt.getPixels();if(Ge.activeTexture.set(mt.TEXTURE1),Ge.pixelStoreUnpackPremultiplyAlpha.set(!1),Mt.demTexture=Mt.demTexture||Pe.getTileTexture(yr),Mt.demTexture){const Fr=Mt.demTexture;Fr.update(mr,{premultiply:!1}),Fr.bind(mt.NEAREST,mt.CLAMP_TO_EDGE)}else Mt.demTexture=new a.T(Ge,mr,mt.RGBA,{premultiply:!1}),Mt.demTexture.bind(mt.NEAREST,mt.CLAMP_TO_EDGE);Ge.activeTexture.set(mt.TEXTURE0);let Kt=Mt.fbo;if(!Kt){const Fr=new a.T(Ge,{width:zt,height:zt,data:null},mt.RGBA);Fr.bind(mt.LINEAR,mt.CLAMP_TO_EDGE),Kt=Mt.fbo=Ge.createFramebuffer(zt,zt,!0,!1),Kt.colorAttachment.set(Fr.texture)}Ge.bindFramebuffer.set(Kt.framebuffer),Ge.viewport.set([0,0,zt,zt]),Pe.useProgram("hillshadePrepare").draw(Ge,mt.TRIANGLES,He,et,at,vn.disabled,gc(Mt.tileID,kt),null,null,Ke.id,Pe.rasterBoundsBuffer,Pe.quadTriangleIndexBuffer,Pe.rasterBoundsSegments),Mt.needsHillshadePrepare=!1}})(C,I,B,R,he,tn.disabled,Ie),Z.viewport.set([0,0,C.width,C.height]);else if(C.renderPass==="translucent")if(ee){const[Pe,Me,Be]=C.stencilConfigForOverlapTwoPass(B);rh(C,I,R,Be,Pe,he,Ie,!1,X),rh(C,I,R,Be,Me,he,Ie,!0,X)}else{const[Pe,Me]=C.getStencilConfigForOverlapAndUpdateStencilID(B);rh(C,I,R,Me,Pe,he,Ie,!1,X)}}(i,u,p,m,b):a.ch(p)?function(C,I,R,B,q){if(C.renderPass!=="translucent"||!B.length)return;const{isRenderingToTexture:X}=q,Z=C.style.projection.useSubdivision,ee=C.getDepthModeForSublayer(0,sn.ReadOnly),he=C.colorModeForRenderPass();if(Z){const[Ie,Pe,Me]=C.stencilConfigForOverlapTwoPass(B);wc(C,I,R,Me,Ie,ee,he,!1,X),wc(C,I,R,Me,Pe,ee,he,!0,X)}else{const[Ie,Pe]=C.getStencilConfigForOverlapAndUpdateStencilID(B);wc(C,I,R,Pe,Ie,ee,he,!1,X)}}(i,u,p,m,b):a.ci(p)?function(C,I,R,B,q){if(C.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!B.length)return;const{isRenderingToTexture:X}=q,Z=I.getSource(),ee=C.style.projection.useSubdivision;if(Z instanceof Ht)sl(C,I,R,B,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,X);else if(ee){const[he,Ie,Pe]=C.stencilConfigForOverlapTwoPass(B);sl(C,I,R,Pe,he,!1,!0,Bh,!1,X),sl(C,I,R,Pe,Ie,!0,!0,Bh,!1,X)}else{const[he,Ie]=C.getStencilConfigForOverlapAndUpdateStencilID(B);sl(C,I,R,Ie,he,!1,!0,Bh,!1,X)}}(i,u,p,m,b):a.cj(p)?function(C,I,R,B,q){const X=R.paint.get("background-color"),Z=R.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:ee}=q,he=C.context,Ie=he.gl,Pe=C.style.projection,Me=C.transform,Be=Me.tileSize,Ke=R.paint.get("background-pattern");if(C.isPatternMissing(Ke))return;const He=!Ke&&X.a===1&&Z===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==He)return;const et=tn.disabled,at=C.getDepthModeForSublayer(0,He==="opaque"?sn.ReadWrite:sn.ReadOnly),Ge=C.colorModeForRenderPass(),mt=C.useProgram(Ke?"backgroundPattern":"background"),Nt=B||wt(Me,{tileSize:Be,terrain:C.style.map.terrain});Ke&&(he.activeTexture.set(Ie.TEXTURE0),C.imageManager.bind(C.context));const Mt=R.getCrossfadeParameters();for(const kt of Nt){const zt=Me.getProjectionData({overscaledTileID:kt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),yr=Ke?vu(Z,C,Ke,{tileID:kt,tileSize:Be},Mt):Oa(Z,X),mr=C.style.map.terrain&&C.style.map.terrain.getTerrainData(kt),Kt=Pe.getMeshFromTileID(he,kt.canonical,!1,!0,"raster");mt.draw(he,Ie.TRIANGLES,at,et,Ge,vn.backCCW,yr,mr,zt,R.id,Kt.vertexBuffer,Kt.indexBuffer,Kt.segments)}}(i,0,p,m,b):a.ck(p)&&function(C,I,R,B){const{isRenderingGlobe:q}=B,X=C.context,Z=R.implementation,ee=C.style.projection,he=C.transform,Ie=he.getProjectionDataForCustomLayer(q),Pe={farZ:he.farZ,nearZ:he.nearZ,fov:he.fov*Math.PI/180,modelViewProjectionMatrix:he.modelViewProjectionMatrix,projectionMatrix:he.projectionMatrix,shaderData:{variantName:ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ee.shaderPreludeCode.vertexSource}`,define:ee.shaderDefine},defaultProjectionData:Ie},Me=Z.renderingMode?Z.renderingMode:"2d";if(C.renderPass==="offscreen"){const Be=Z.prerender;Be&&(C.setCustomLayerDefaults(),X.setColorMode(C.colorModeForRenderPass()),Be.call(Z,X.gl,Pe),X.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),X.setColorMode(C.colorModeForRenderPass()),X.setStencilMode(tn.disabled);const Be=Me==="3d"?C.getDepthModeFor3D():C.getDepthModeForSublayer(0,sn.ReadOnly);X.setDepthMode(Be),Z.render(X.gl,Pe),X.setDirty(),C.setBaseState(),X.bindFramebuffer.set(null)}}(i,0,p,b))}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),p=this.imageManager.getPattern(i.to.toString());return!u||!p}useProgram(i,u,p=!1,m=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,C=this.style.projection,I=p?nt.projectionMercator:C.shaderPreludeCode,R=p?ur:C.shaderDefine,B=i+(u?u.cacheKey:"")+`/${p?Cr:C.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[B]||(this.cache[B]=new Ul(this.context,nt[i],u,ks[i],this._showOverdrawInspector,b,I,R,m)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:u}=this.context.gl;return this.width!==i||this.height!==u}}function rs(_,i){let u,p=!1,m=null,b=null;const C=()=>{m=null,p&&(_.apply(b,u),m=setTimeout(C,i),p=!1)};return(...I)=>(p=!0,b=this,u=I,m||C(),m)}class jh{constructor(i){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const p=u.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let b=window.location.hash.replace(m,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let C=window.location.href.replace(/(#.+)?$/,b);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=rs(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),C=Math.round(u.lng*b)/b,I=Math.round(u.lat*b)/b,R=this._map.getBearing(),B=this._map.getPitch();let q="";if(q+=i?`/${C}/${I}/${p}`:`${p}/${I}/${C}`,(R||B)&&(q+="/"+Math.round(10*R)/10),B&&(q+=`/${Math.round(B)}`),this._hashName){const X=this._hashName;let Z=!1;const ee=window.location.hash.slice(1).split("&").map(he=>{const Ie=he.split("=")[0];return Ie===X?(Z=!0,`${Ie}=${q}`):he}).filter(he=>he);return Z||ee.push(`${X}=${q}`),`#${ee.join("&")}`}return`#${q}`}_isValidHash(i){if(i.length<3||i.some(isNaN))return!1;try{new a.S(+i[2],+i[1])}catch{return!1}const u=+i[0],p=+(i[3]||0),m=+(i[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&p>=-180&&p<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}const nh={linearity:.3,easing:a.cl(0,0,.3,1)},Sc=a.e({deceleration:2500,maxSpeed:1400},nh),Tf=a.e({deceleration:20,maxSpeed:1400},nh),ih=a.e({deceleration:1e3,maxSpeed:360},nh),Af=a.e({deceleration:1e3,maxSpeed:90},nh),zp=a.e({deceleration:1e3,maxSpeed:360},nh);class Uh{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=D.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)u.zoom+=b.zoomDelta||0,u.bearing+=b.bearingDelta||0,u.pitch+=b.pitchDelta||0,u.roll+=b.rollDelta||0,b.panDelta&&u.pan._add(b.panDelta),b.around&&(u.around=b.around),b.pinchAround&&(u.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const b=Jl(u.pan.mag(),p,a.e({},Sc,i||{})),C=u.pan.mult(b.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(C,this._map.transform);m.center=I.easingCenter,m.offset=I.easingOffset,xu(m,b)}if(u.zoom){const b=Jl(u.zoom,p,Tf);m.zoom=this._map.transform.zoom+b.amount,xu(m,b)}if(u.bearing){const b=Jl(u.bearing,p,ih);m.bearing=this._map.transform.bearing+a.ag(b.amount,-179,179),xu(m,b)}if(u.pitch){const b=Jl(u.pitch,p,Af);m.pitch=this._map.transform.pitch+b.amount,xu(m,b)}if(u.roll){const b=Jl(u.roll,p,zp);m.roll=this._map.transform.roll+a.ag(b.amount,-179,179),xu(m,b)}if(m.zoom||m.bearing){const b=u.pinchAround===void 0?u.around:u.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function xu(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function Jl(_,i,u){const{maxSpeed:p,linearity:m,deceleration:b}=u,C=a.ag(_*m/(i/1e3),-p,p),I=Math.abs(C)/(b*m);return{easing:u.easing,duration:1e3*I,amount:C*(I/2)}}class Ba extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p,m={}){p=p instanceof MouseEvent?p:new MouseEvent(i,p);const b=E.mousePos(u.getCanvas(),p),C=u.unproject(b);super(i,a.e({point:b,lngLat:C,originalEvent:p},m)),this._defaultPrevented=!1,this.target=u}}class kl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){const m=i==="touchend"?p.changedTouches:p.touches,b=E.touchPos(u.getCanvasContainer(),m),C=b.map(R=>u.unproject(R)),I=b.reduce((R,B,q,X)=>R.add(B.div(X.length)),new a.P(0,0));super(i,{points:b,point:I,lngLats:C,lngLat:u.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class Pf extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,u,p){super(i,{originalEvent:p}),this._defaultPrevented=!1}}class $p{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Pf(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new Ba(i.type,this._map,i))}mouseup(i){this._map.fire(new Ba(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Ba(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Ba(i.type,this._map,i))}mouseover(i){this._map.fire(new Ba(i.type,this._map,i))}mouseout(i){this._map.fire(new Ba(i.type,this._map,i))}touchstart(i){return this._firePreventable(new kl(i.type,this._map,i))}touchmove(i){this._map.fire(new kl(i.type,this._map,i))}touchend(i){this._map.fire(new kl(i.type,this._map,i))}touchcancel(i){this._map.fire(new kl(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class jp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Ba(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ba("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Ba(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class oh{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.screenPointToLocation(a.P.convert(i),this._map.terrain)}}class Ed{constructor(i,u){this._map=i,this._tr=new oh(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(E.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=E.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const b=Math.min(m.x,p.x),C=Math.max(m.x,p.x),I=Math.min(m.y,p.y),R=Math.max(m.y,p.y);E.setTransform(this._box,`translate(${b}px,${I}px)`),this._box.style.width=C-b+"px",this._box.style.height=R-I+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const p=this._startPos,m=u;if(this.reset(),E.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:i})),{cameraAnimation:b=>b.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new a.l(i,{originalEvent:u}))}}function If(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const u={};for(let p=0;p<_.length;p++)u[_[p].identifier]=i[p];return u}class Up{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const b=new a.P(0,0);for(const C of m)b._add(C);return b.div(m.length)}(u),this.touches=If(p,u)))}touchmove(i,u,p){if(this.aborted||!this.centroid)return;const m=If(p,u);for(const b in this.touches){const C=m[b];(!C||C.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(i,u,p){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Vh{constructor(i){this.singleTap=new Up(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,p){this.singleTap.touchstart(i,u,p)}touchmove(i,u,p){this.singleTap.touchmove(i,u,p)}touchend(i,u,p){const m=this.singleTap.touchend(i,u,p);if(m){const b=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(b&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Cc{constructor(i){this._tr=new oh(i),this._zoomIn=new Vh({numTouches:1,numTaps:2}),this._zoomOut=new Vh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,p){this._zoomIn.touchstart(i,u,p),this._zoomOut.touchstart(i,u,p)}touchmove(i,u,p){this._zoomIn.touchmove(i,u,p),this._zoomOut.touchmove(i,u,p)}touchend(i,u,p){const m=this._zoomIn.touchend(i,u,p),b=this._zoomOut.touchend(i,u,p),C=this._tr;return m?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(m)},{originalEvent:i})}):b?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(b)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ah{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const u=this._moveFunction(...i);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(i,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const m=Array.isArray(u)?u[0]:u;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&E.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const ll=0,ul=2,T={[ll]:1,[ul]:2};class M{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const u=E.mouseButton(i);this._eventButton=u}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(u,p){const m=T[p];return u.buttons===void 0||(u.buttons&m)!==m}(i,this._eventButton)}isValidEndEvent(i){return E.mouseButton(i)===this._eventButton}}class U{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}class J{constructor(i=new M({checkCorrectEvent:()=>!0}),u=new U){this.mouseMoveStateManager=i,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(i,u,p){return i instanceof MouseEvent?u(i):typeof TouchEvent<"u"&&i instanceof TouchEvent?p(i):void 0}startMove(i){this._executeRelevantHandler(i,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(i){this._executeRelevantHandler(i,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(i){return this._executeRelevantHandler(i,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(i){return this._executeRelevantHandler(i,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(i){return this._executeRelevantHandler(i,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}const ce=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=i=>{i.preventDefault()}};class ge{constructor(i,u){this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,u,p){return this._calculateTransform(i,u,p)}touchmove(i,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return i.preventDefault(),this._calculateTransform(i,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,u,p){this._calculateTransform(i,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,p){p.length>0&&(this._active=!0);const m=If(p,u),b=new a.P(0,0),C=new a.P(0,0);let I=0;for(const B in m){const q=m[B],X=this._touches[B];X&&(b._add(q),C._add(q.sub(X)),I++,m[B]=q)}if(this._touches=m,this._shouldBePrevented(I)||!C.mag())return;const R=C.div(I);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(I),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _e{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,p){if(!this._firstTwoTouches)return;i.preventDefault();const[m,b]=this._firstTwoTouches,C=Ce(p,u,m),I=Ce(p,u,b);if(!C||!I)return;const R=this._aroundCenter?null:C.add(I).div(2);return this._move([C,I],R,i)}touchend(i,u,p){if(!this._firstTwoTouches)return;const[m,b]=this._firstTwoTouches,C=Ce(p,u,m),I=Ce(p,u,b);C&&I||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ce(_,i,u){for(let p=0;p<_.length;p++)if(_[p].identifier===u)return i[p]}function ke(_,i){return Math.log(_/i)/Math.LN2}class ze extends _e{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const p=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(ke(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ke(this._distance,p),pinchAround:u}}}function $e(_,i){return 180*_.angleWith(i)/Math.PI}class $t extends _e{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u,p){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$e(this._vector,m),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,p=$e(i,this._startVector);return Math.abs(p)<u}}function je(_){return Math.abs(_.y)>Math.abs(_.x)}class xt extends _e{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,p){super.touchstart(i,u,p),this._currentTouchCount=p.length}_start(i){this._lastPoints=i,je(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=i[0].sub(this._lastPoints[0]),b=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,p.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,p){if(this._valid!==void 0)return this._valid;const m=i.mag()>=2,b=u.mag()>=2;if(!m&&!b)return;if(!m||!b)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const C=i.y>0==u.y>0;return je(i)&&je(u)&&C}}const Pt={panStep:100,bearingStep:15,pitchStep:10};class Gt{constructor(i){this._tr=new oh(i);const u=Pt;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,p=0,m=0,b=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?p=-1:(i.preventDefault(),b=-1);break;case 39:i.shiftKey?p=1:(i.preventDefault(),b=1);break;case 38:i.shiftKey?m=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?m=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:I=>{const R=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Bt,zoom:u?Math.round(R.zoom)+u*(i.shiftKey?2:1):R.zoom,bearing:R.bearing+p*this._bearingStep,pitch:R.pitch+m*this._pitchStep,offset:[-b*this._panStep,-C*this._panStep],center:R.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bt(_){return _*(2-_)}const Dt=4.000244140625,Xt=1/450;class pr{constructor(i,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=i,this._tr=new oh(i),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Xt}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const p=D.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,u!==0&&u%Dt==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=E.mousePos(this._map.getCanvas(),i),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(a.S.convert(p.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=i.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Dt?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&R!==0&&(R=1/R);const B=typeof this._targetZoom!="number"?i.scale:a.ae(this._targetZoom);this._targetZoom=i.getConstrained(i.getCameraLngLat(),a.aj(B*R)).zoom,this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?i.zoom:this._targetZoom,p=this._startZoom,m=this._easing;let b,C=!1;if(this._type==="wheel"&&p&&m){const I=D.now()-this._lastWheelEventTime,R=Math.min((I+5)/200,1),B=m(R);b=a.C.number(p,u,B),R<1?this._frameId||(this._frameId=!0):C=!0}else b=u,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!C,zoomDelta:b-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=a.cn;if(this._prevEase){const p=this._prevEase,m=(D.now()-p.start)/p.duration,b=p.easing(m+.01)-p.easing(m),C=.27/Math.sqrt(b*b+1e-4)*.01,I=Math.sqrt(.0729-C*C);u=a.cl(C,I,.25,1)}return this._prevEase={start:D.now(),duration:i,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ir{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class dn{constructor(i){this._tr=new oh(i),this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kr{constructor(){this._tap=new Vh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,u,p){if(!this._swipePoint)if(this._tapTime){const m=u[0],b=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(m)<30;b&&C?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(i,u,p)}touchmove(i,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=u[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,i.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(i,u,p)}touchend(i,u,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(i,u,p);m&&(this._tapTime=i.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zn{constructor(i,u,p){this._el=i,this._mousePan=u,this._touchPan=p}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Qr{constructor(i,u,p,m){this._pitchWithRotate=i.pitchWithRotate,this._rollEnabled=i.rollEnabled,this._mouseRotate=u,this._mousePitch=p,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Qn{constructor(i,u,p,m){this._el=i,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Uo{constructor(i,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=E.create("div","maplibregl-cooperative-gesture-screen",i);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=u,this._container.appendChild(m);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=p,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(E.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,u){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:i,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const kn=_=>_.zoom||_.drag||_.roll||_.pitch||_.rotate;class on extends a.l{}function Mr(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta||_.rollDelta}class Ri{constructor(i,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,b)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=m.type==="renderFrame"?void 0:m,I={needsRenderFrame:!1},R={},B={};for(const{handlerName:Z,handler:ee,allowed:he}of this._handlers){if(!ee.isEnabled())continue;let Ie;if(this._blockedByActive(B,he,Z))ee.reset();else if(ee[b||m.type]){if(a.co(m,b||m.type)){const Pe=E.mousePos(this._map.getCanvas(),m);Ie=ee[b||m.type](m,Pe)}else if(a.cp(m,b||m.type)){const Pe=this._getMapTouches(m.touches),Me=E.touchPos(this._map.getCanvas(),Pe);Ie=ee[b||m.type](m,Me,Pe)}else a.cq(b||m.type)||(Ie=ee[b||m.type](m));this.mergeHandlerResult(I,R,Ie,Z,C),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()}(Ie||ee.isActive())&&(B[Z]=ee)}const q={};for(const Z in this._previousActiveHandlers)B[Z]||(q[Z]=C);this._previousActiveHandlers=B,(Object.keys(q).length||Mr(I))&&(this._changes.push([I,R,q]),this._triggerRenderFrame()),(Object.keys(B).length||Mr(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=I;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Uh(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,b,C]of this._listeners)E.addEventListener(m,b,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,u,p]of this._listeners)E.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(i){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new $p(u,i));const m=u.boxZoom=new Ed(u,i);this._add("boxZoom",m),i.interactive&&i.boxZoom&&m.enable();const b=u.cooperativeGestures=new Uo(u,i.cooperativeGestures);this._add("cooperativeGestures",b),i.cooperativeGestures&&b.enable();const C=new Cc(u),I=new dn(u);u.doubleClickZoom=new ir(I,C),this._add("tapZoom",C),this._add("clickZoom",I),i.interactive&&i.doubleClickZoom&&u.doubleClickZoom.enable();const R=new Kr;this._add("tapDragZoom",R);const B=u.touchPitch=new xt(u);this._add("touchPitch",B),i.interactive&&i.touchPitch&&u.touchPitch.enable(i.touchPitch);const q=()=>u.project(u.getCenter()),X=function({enable:He,clickTolerance:et,aroundCenter:at=!0,minPixelCenterThreshold:Ge=100,rotateDegreesPerPixelMoved:mt=.8},Nt){const Mt=new M({checkCorrectEvent:kt=>E.mouseButton(kt)===0&&kt.ctrlKey||E.mouseButton(kt)===2&&!kt.ctrlKey});return new ah({clickTolerance:et,move:(kt,zt)=>{const yr=Nt();if(at&&Math.abs(yr.y-kt.y)>Ge)return{bearingDelta:a.cm(new a.P(kt.x,zt.y),zt,yr)};let mr=(zt.x-kt.x)*mt;return at&&zt.y<yr.y&&(mr=-mr),{bearingDelta:mr}},moveStateManager:Mt,enable:He,assignEvents:ce})}(i,q),Z=function({enable:He,clickTolerance:et,pitchDegreesPerPixelMoved:at=-.5}){const Ge=new M({checkCorrectEvent:mt=>E.mouseButton(mt)===0&&mt.ctrlKey||E.mouseButton(mt)===2});return new ah({clickTolerance:et,move:(mt,Nt)=>({pitchDelta:(Nt.y-mt.y)*at}),moveStateManager:Ge,enable:He,assignEvents:ce})}(i),ee=function({enable:He,clickTolerance:et,rollDegreesPerPixelMoved:at=.3},Ge){const mt=new M({checkCorrectEvent:Nt=>E.mouseButton(Nt)===2&&Nt.ctrlKey});return new ah({clickTolerance:et,move:(Nt,Mt)=>{const kt=Ge();let zt=(Mt.x-Nt.x)*at;return Mt.y<kt.y&&(zt=-zt),{rollDelta:zt}},moveStateManager:mt,enable:He,assignEvents:ce})}(i,q);u.dragRotate=new Qr(i,X,Z,ee),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ee,["mousePitch"]),i.interactive&&i.dragRotate&&u.dragRotate.enable();const he=function({enable:He,clickTolerance:et}){const at=new M({checkCorrectEvent:Ge=>E.mouseButton(Ge)===0&&!Ge.ctrlKey});return new ah({clickTolerance:et,move:(Ge,mt)=>({around:mt,panDelta:mt.sub(Ge)}),activateOnStart:!0,moveStateManager:at,enable:He,assignEvents:ce})}(i),Ie=new ge(i,u);u.dragPan=new zn(p,he,Ie),this._add("mousePan",he),this._add("touchPan",Ie,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&u.dragPan.enable(i.dragPan);const Pe=new $t,Me=new ze;u.touchZoomRotate=new Qn(p,Me,Pe,R),this._add("touchRotate",Pe,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&u.touchZoomRotate.enable(i.touchZoomRotate);const Be=u.scrollZoom=new pr(u,()=>this._triggerRenderFrame());this._add("scrollZoom",Be,["mousePan"]),i.interactive&&i.scrollZoom&&u.scrollZoom.enable(i.scrollZoom);const Ke=u.keyboard=new Gt(u);this._add("keyboard",Ke),i.interactive&&i.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new jp(u))}_add(i,u,p){this._handlers.push({handlerName:i,handler:u,allowed:p}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!kn(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,p){for(const m in i)if(m!==p&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(i){const u=[];for(const p of i)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(i,u,p,m,b){if(!p)return;a.e(i,p);const C={handlerName:m,originalEvent:p.originalEvent||b};p.zoomDelta!==void 0&&(u.zoom=C),p.panDelta!==void 0&&(u.drag=C),p.rollDelta!==void 0&&(u.roll=C),p.pitchDelta!==void 0&&(u.pitch=C),p.bearingDelta!==void 0&&(u.rotate=C)}_applyChanges(){const i={},u={},p={};for(const[m,b,C]of this._changes)m.panDelta&&(i.panDelta=(i.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(i.rollDelta=(i.rollDelta||0)+m.rollDelta),m.around!==void 0&&(i.around=m.around),m.pinchAround!==void 0&&(i.pinchAround=m.pinchAround),m.noInertia&&(i.noInertia=m.noInertia),a.e(u,b),a.e(p,C);this._updateMapTransform(i,u,p),this._changes=[]}_updateMapTransform(i,u,p){const m=this._map,b=m._getTransformForUpdate(),C=m.terrain;if(!(Mr(i)||C&&this._terrainMovement))return this._fireEvents(u,p,!0);m._stop(!0);let{panDelta:I,zoomDelta:R,bearingDelta:B,pitchDelta:q,rollDelta:X,around:Z,pinchAround:ee}=i;ee!==void 0&&(Z=ee),Z=Z||m.transform.centerPoint,C&&!b.isPointOnMapSurface(Z)&&(Z=b.centerPoint);const he={panDelta:I,zoomDelta:R,rollDelta:X,pitchDelta:q,bearingDelta:B,around:Z};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(Z)&&(Z=b.centerPoint);const Ie=Z.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(I?Z.sub(I):Z);C?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(he,b),this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?b.setCenter(b.screenPointToLocation(b.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(he,b,Ie):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(he,b,Ie))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(he,b),this._map.cameraHelper.handleMapControlsPan(he,b,Ie)),m._applyUpdatedTransform(b),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,p,!0)}_fireEvents(i,u,p){const m=kn(this._eventsInProgress),b=kn(i),C={};for(const X in i){const{originalEvent:Z}=i[X];this._eventsInProgress[X]||(C[`${X}start`]=Z),this._eventsInProgress[X]=i[X]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(const X in C)this._fireEvent(X,C[X]);b&&this._fireEvent("move",b.originalEvent);for(const X in i){const{originalEvent:Z}=i[X];this._fireEvent(X,Z)}const I={};let R;for(const X in this._eventsInProgress){const{handlerName:Z,originalEvent:ee}=this._eventsInProgress[X];this._handlersById[Z].isActive()||(delete this._eventsInProgress[X],R=u[Z]||ee,I[`${X}end`]=R)}for(const X in I)this._fireEvent(X,I[X]);const B=kn(this._eventsInProgress),q=(m||b)&&!B;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const X=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&X.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(X)}if(p&&q){this._updatingCamera=!0;const X=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!X||!X.essential&&D.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:R})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(X.bearing||this._map.getBearing())&&(X.bearing=0),X.freezeElevation=!0,this._map.easeTo(X,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new a.l(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new on("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Gr extends a.E{constructor(i,u,p){super(),this._renderFrameCallback=()=>{const m=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=p.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(i,u){i.apply(this.transform),this.transform=i,this.cameraHelper=u}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(i,u){return this.jumpTo({elevation:i},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(i){this._centerClampedToGround=i}panBy(i,u,p){return i=a.P.convert(i).mult(-1),this.panTo(this.transform.center,a.e({offset:i},u),p)}panTo(i,u,p){return this.easeTo(a.e({center:i},u),p)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,p){return this.easeTo(a.e({zoom:i},u),p)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(i,u){return i!=this.transform.fov&&(this.transform.setFov(i),this.fire(new a.l("movestart",u)).fire(new a.l("move",u)).fire(new a.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,p){return this.easeTo(a.e({bearing:i},u),p)}resetNorth(i,u){return this.rotateTo(0,a.e({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}getRoll(){return this.transform.roll}setRoll(i,u){return this.jumpTo({roll:i},u),this}cameraForBounds(i,u){i=rr.convert(i).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),p,u)}_cameraForBoxAndBearing(i,u,p,m){const b={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const B=m.padding;m.padding={top:B,bottom:B,right:B,left:B}}const C=a.e(b,m.padding);m.padding=C;const I=this.transform,R=new rr(i,u);return this.cameraHelper.cameraForBoxAndBearing(m,C,R,p,I)}fitBounds(i,u,p){return this._fitInternal(this.cameraForBounds(i,u),u,p)}fitScreenCoordinates(i,u,p,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(i)),this.transform.screenPointToLocation(a.P.convert(u)),p,m),m,b)}_fitInternal(i,u,p){return i?(delete(u=a.e(i,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(i,u){this.stop();const p=this._getTransformForUpdate();let m=!1,b=!1,C=!1;const I=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,i);const R=p.zoom!==I;return"elevation"in i&&p.elevation!==+i.elevation&&p.setElevation(+i.elevation),"bearing"in i&&p.bearing!==+i.bearing&&(m=!0,p.setBearing(+i.bearing)),"pitch"in i&&p.pitch!==+i.pitch&&(b=!0,p.setPitch(+i.pitch)),"roll"in i&&p.roll!==+i.roll&&(C=!0,p.setRoll(+i.roll)),i.padding==null||p.isPaddingEqual(i.padding)||p.setPadding(i.padding),this._applyUpdatedTransform(p),this.fire(new a.l("movestart",u)).fire(new a.l("move",u)),R&&this.fire(new a.l("zoomstart",u)).fire(new a.l("zoom",u)).fire(new a.l("zoomend",u)),m&&this.fire(new a.l("rotatestart",u)).fire(new a.l("rotate",u)).fire(new a.l("rotateend",u)),b&&this.fire(new a.l("pitchstart",u)).fire(new a.l("pitch",u)).fire(new a.l("pitchend",u)),C&&this.fire(new a.l("rollstart",u)).fire(new a.l("roll",u)).fire(new a.l("rollend",u)),this.fire(new a.l("moveend",u))}calculateCameraOptionsFromTo(i,u,p,m=0){const b=a.a0.fromLngLat(i,u),C=a.a0.fromLngLat(p,m),I=C.x-b.x,R=C.y-b.y,B=C.z-b.z,q=Math.hypot(I,R,B);if(q===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(I,R),Z=a.aj(this.transform.cameraToCenterDistance/q/this.transform.tileSize),ee=180*Math.atan2(I,-R)/Math.PI;let he=180*Math.acos(X/q)/Math.PI;return he=B<0?90-he:90+he,{center:C.toLngLat(),elevation:m,zoom:Z,pitch:he,bearing:ee}}calculateCameraOptionsFromCameraLngLatAltRotation(i,u,p,m,b){const C=this.transform.calculateCenterFromCameraLngLatAlt(i,u,p,m);return{center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:p,pitch:m,roll:b}}easeTo(i,u){this._stop(!1,i.easeId),((i=a.e({offset:[0,0],duration:500,easing:a.cn},i)).animate===!1||!i.essential&&D.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),m=this.getBearing(),b=p.pitch,C=p.roll,I="bearing"in i?this._normalizeBearing(i.bearing,m):m,R="pitch"in i?+i.pitch:b,B="roll"in i?this._normalizeBearing(i.roll,C):C,q="padding"in i?i.padding:p.padding,X=a.P.convert(i.offset);let Z,ee;i.around&&(Z=a.S.convert(i.around),ee=p.locationToScreenPoint(Z));const he={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ie=this.cameraHelper.handleEaseTo(p,{bearing:I,pitch:R,roll:B,padding:q,around:Z,aroundPoint:ee,offsetAsPoint:X,offset:i.offset,zoom:i.zoom,center:i.center});return this._rotating=this._rotating||m!==I,this._pitching=this._pitching||R!==b,this._rolling=this._rolling||B!==C,this._padding=!p.isPaddingEqual(q),this._zooming=this._zooming||Ie.isZooming,this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,he),this.terrain&&this._prepareElevation(Ie.elevationCenter),this._ease(Pe=>{Ie.easeFunc(Pe),this.terrain&&!i.freezeElevation&&this._updateElevation(Pe),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},Pe=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(u,Pe)},i),this}_prepareEase(i,u,p={}){this._moving=!0,u||p.moving||this.fire(new a.l("movestart",i)),this._zooming&&!p.zooming&&this.fire(new a.l("zoomstart",i)),this._rotating&&!p.rotating&&this.fire(new a.l("rotatestart",i)),this._pitching&&!p.pitching&&this.fire(new a.l("pitchstart",i)),this._rolling&&!p.rolling&&this.fire(new a.l("rollstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(p-(u-(p*i+this._elevationStart))/(1-i)),this._elevationTarget=u}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,i))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){if(!this.terrain&&i.elevation>=0&&i.pitch<=90)return{};const u=i.getCameraLngLat(),p=i.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(u,i.zoom):0;if(p<m){const b=this.calculateCameraOptionsFromTo(u,m,i.center,i.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(i){const u=[];if(u.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&u.push(m=>this.transformCameraUpdate(m)),!u.length)return;const p=i.clone();for(const m of u){const b=p.clone(),{center:C,zoom:I,roll:R,pitch:B,bearing:q,elevation:X}=m(b);C&&b.setCenter(C),X!==void 0&&b.setElevation(X),I!==void 0&&b.setZoom(I),R!==void 0&&b.setRoll(R),B!==void 0&&b.setPitch(B),q!==void 0&&b.setBearing(q),p.apply(b)}this.transform.apply(p)}_fireMoveEvents(i){this.fire(new a.l("move",i)),this._zooming&&this.fire(new a.l("zoom",i)),this._rotating&&this.fire(new a.l("rotate",i)),this._pitching&&this.fire(new a.l("pitch",i)),this._rolling&&this.fire(new a.l("roll",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,m=this._rotating,b=this._pitching,C=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new a.l("zoomend",i)),m&&this.fire(new a.l("rotateend",i)),b&&this.fire(new a.l("pitchend",i)),C&&this.fire(new a.l("rollend",i)),this.fire(new a.l("moveend",i))}flyTo(i,u){if(!i.essential&&D.prefersReducedMotion){const zt=a.Q(i,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(zt,u)}this.stop(),i=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cn},i);const p=this._getTransformForUpdate(),m=p.bearing,b=p.pitch,C=p.roll,I=p.padding,R="bearing"in i?this._normalizeBearing(i.bearing,m):m,B="pitch"in i?+i.pitch:b,q="roll"in i?this._normalizeBearing(i.roll,C):C,X="padding"in i?i.padding:p.padding,Z=a.P.convert(i.offset);let ee=p.centerPoint.add(Z);const he=p.screenPointToLocation(ee),Ie=this.cameraHelper.handleFlyTo(p,{bearing:R,pitch:B,roll:q,padding:X,locationAtOffset:he,offsetAsPoint:Z,center:i.center,minZoom:i.minZoom,zoom:i.zoom});let Pe=i.curve;const Me=Math.max(p.width,p.height),Be=Me/Ie.scaleOfZoom,Ke=Ie.pixelPathLength;typeof Ie.scaleOfMinZoom=="number"&&(Pe=Math.sqrt(Me/Ie.scaleOfMinZoom/Ke*2));const He=Pe*Pe;function et(zt){const yr=(Be*Be-Me*Me+(zt?-1:1)*He*He*Ke*Ke)/(2*(zt?Be:Me)*He*Ke);return Math.log(Math.sqrt(yr*yr+1)-yr)}function at(zt){return(Math.exp(zt)-Math.exp(-zt))/2}function Ge(zt){return(Math.exp(zt)+Math.exp(-zt))/2}const mt=et(!1);let Nt=function(zt){return Ge(mt)/Ge(mt+Pe*zt)},Mt=function(zt){return Me*((Ge(mt)*(at(yr=mt+Pe*zt)/Ge(yr))-at(mt))/He)/Ke;var yr},kt=(et(!0)-mt)/Pe;if(Math.abs(Ke)<2e-6||!isFinite(kt)){if(Math.abs(Me-Be)<1e-6)return this.easeTo(i,u);const zt=Be<Me?-1:1;kt=Math.abs(Math.log(Be/Me))/Pe,Mt=()=>0,Nt=yr=>Math.exp(zt*Pe*yr)}return i.duration="duration"in i?+i.duration:1e3*kt/("screenSpeed"in i?+i.screenSpeed/Pe:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=m!==R,this._pitching=B!==b,this._rolling=q!==C,this._padding=!p.isPaddingEqual(X),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Ie.targetCenter),this._ease(zt=>{const yr=zt*kt,mr=1/Nt(yr),Kt=Mt(yr);this._rotating&&p.setBearing(a.C.number(m,R,zt)),this._pitching&&p.setPitch(a.C.number(b,B,zt)),this._rolling&&p.setRoll(a.C.number(C,q,zt)),this._padding&&(p.interpolatePadding(I,X,zt),ee=p.centerPoint.add(Z)),Ie.easeFunc(zt,mr,Kt,ee),this.terrain&&!i.freezeElevation&&this._updateElevation(zt),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}return i||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(i,u,p){p.animate===!1||p.duration===0?(i(1),u()):(this._easeStart=D.now(),this._easeOptions=p,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,u){i=a.aN(i,-180,180);const p=Math.abs(i-u);return Math.abs(i-360-u)<p&&(i-=360),Math.abs(i+360-u)<p&&(i+=360),i}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(i),this.transform.tileZoom):null}}const Zn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Ni{constructor(i=Zn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const p=this._map._getUIString(`AttributionControl.${u}`);i.title=p,i.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const b=u[m];if(b.used||b.usedForTerrain){const C=b.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(m=>String(m).trim()),i.sort((m,b)=>m.length-b.length),i=i.filter((m,b)=>{for(let C=b+1;C<i.length;C++)if(i[C].indexOf(m)>=0)return!1;return!0});const p=i.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,i.length?(this._innerContainer.innerHTML=E.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ea{constructor(i={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl");const u=E.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class za{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const m of p)if(m.id===i)return void(m.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var po=a.aI([{name:"a_pos3d",type:"Int16",components:3}]);class $a extends a.E{constructor(i){super(),this._lastTilesetChange=D.now(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=i._source.tileSize*2**this.deltaZoom,i.usedForTerrain=!0,i.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];const p={};for(const m of wt(i,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.bX(m.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[m.key]=new en(m,this.tileSize),this._lastTilesetChange=D.now());for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(i){for(const u in this._tiles){const p=this._tiles[u];(!i||p.tileID.equals(i)||p.tileID.isChildOf(i)||i.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i,u){return u?this._getTerrainCoordsForTileRanges(i,u):this._getTerrainCoordsForRegularTile(i)}_getTerrainCoordsForRegularTile(i){const u={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID,b=i.clone(),C=a.b9();if(m.canonical.equals(i.canonical))a.bX(C,0,a.$,a.$,0,0,1);else if(m.canonical.isChildOf(i.canonical)){const I=m.canonical.z-i.canonical.z,R=m.canonical.x-(m.canonical.x>>I<<I),B=m.canonical.y-(m.canonical.y>>I<<I),q=a.$>>I;a.bX(C,0,q,q,0,0,1),a.M(C,C,[-R*q,-B*q,0])}else{if(!i.canonical.isChildOf(m.canonical))continue;{const I=i.canonical.z-m.canonical.z,R=i.canonical.x-(i.canonical.x>>I<<I),B=i.canonical.y-(i.canonical.y>>I<<I),q=a.$>>I;a.bX(C,0,a.$,a.$,0,0,1),a.M(C,C,[R*q,B*q,0]),a.N(C,C,[1/2**I,1/2**I,0])}}b.terrainRttPosMatrix32f=new Float32Array(C),u[p]=b}return u}_getTerrainCoordsForTileRanges(i,u){const p={};for(const m of this._renderableTilesKeys){const b=this._tiles[m].tileID;if(!this._isWithinTileRanges(b,u))continue;const C=i.clone(),I=a.b9();if(b.canonical.z===i.canonical.z){const R=i.canonical.x-b.canonical.x,B=i.canonical.y-b.canonical.y;a.bX(I,0,a.$,a.$,0,0,1),a.M(I,I,[R*a.$,B*a.$,0])}else if(b.canonical.z>i.canonical.z){const R=b.canonical.z-i.canonical.z,B=b.canonical.x-(b.canonical.x>>R<<R),q=b.canonical.y-(b.canonical.y>>R<<R),X=i.canonical.x-(b.canonical.x>>R),Z=i.canonical.y-(b.canonical.y>>R),ee=a.$>>R;a.bX(I,0,ee,ee,0,0,1),a.M(I,I,[-B*ee+X*a.$,-q*ee+Z*a.$,0])}else{const R=i.canonical.z-b.canonical.z,B=i.canonical.x-(i.canonical.x>>R<<R),q=i.canonical.y-(i.canonical.y>>R<<R),X=(i.canonical.x>>R)-b.canonical.x,Z=(i.canonical.y>>R)-b.canonical.y,ee=a.$<<R;a.bX(I,0,ee,ee,0,0,1),a.M(I,I,[B*a.$+X*ee,q*a.$+Z*ee,0])}C.terrainRttPosMatrix32f=new Float32Array(I),p[m]=C}return p}getSourceTile(i,u){const p=this.sourceCache._source;let m=i.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(m).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!b||!b.dem)&&u)for(;m>=p.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(i.scaledTo(m--).key);return b}anyTilesAfterTime(i=Date.now()){return this._lastTilesetChange>=i}_isWithinTileRanges(i,u){return u[i.canonical.z]&&i.canonical.x>=u[i.canonical.z].minTileX&&i.canonical.x<=u[i.canonical.z].maxTileX&&i.canonical.y>=u[i.canonical.z].minTileY&&i.canonical.y<=u[i.canonical.z].maxTileY}}class io{constructor(i,u,p){this._meshCache={},this.painter=i,this.sourceCache=new $a(u),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,u,p,m=a.$){var b;if(!(u>=0&&u<m&&p>=0&&p<m))return 0;const C=this.getTerrainData(i),I=(b=C.tile)===null||b===void 0?void 0:b.dem;if(!I)return 0;const R=a.cr([],[u/m*a.$,p/m*a.$],C.u_terrain_matrix),B=[R[0]*I.dim,R[1]*I.dim],q=Math.floor(B[0]),X=Math.floor(B[1]),Z=B[0]-q,ee=B[1]-X;return I.get(q,X)*(1-Z)*(1-ee)+I.get(q+1,X)*Z*(1-ee)+I.get(q,X+1)*(1-Z)*ee+I.get(q+1,X+1)*Z*ee}getElevationForLngLatZoom(i,u){if(!a.cs(u,i.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(i,u);return this.getElevation(p,m%a.$,b%a.$,a.$)}getElevation(i,u,p,m=a.$){return this.getDEMElevation(i,u,p,m)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const m=this.painter.context,b=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.af([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new a.T(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+i.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let b=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=m?b=i.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>b<<b),I=i.canonical.y-(i.canonical.y>>b<<b),R=a.ct(new Float64Array(16),[1/(a.$<<b),1/(a.$<<b),0]);a.M(R,R,[C*a.$,I*a.$,0]),this._demMatrixCache[i.key]={matrix:R,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(i){const u=this.painter,p=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,C=0;b<this._coordsTextureSize;b++)for(let I=0;I<this._coordsTextureSize;I++,C+=4)u[C+0]=255&I,u[C+1]=255&b,u[C+2]=I>>8<<4|b>>8,u[C+3]=0;const p=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new a.T(i,p,i.gl.RGBA,{premultiply:!1});return m.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,m=p.gl,b=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(b,I-C-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const R=u[0]+(u[2]>>4<<8),B=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],X=q&&this.sourceCache.getTileByID(q);if(!X)return null;const Z=this._coordsTextureSize,ee=(1<<X.tileID.canonical.z)*Z;return new a.a0((X.tileID.canonical.x*Z+R)/ee+X.tileID.wrap,(X.tileID.canonical.y*Z+B)/ee,this.getElevation(X.tileID,R,B,Z))}depthAtPoint(i){const u=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(i){var u;const p=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,m=p&&i.canonical.y===0,b=p&&i.canonical.y===(1<<i.canonical.z)-1,C=`m_${m?"n":""}_${b?"s":""}`;if(this._meshCache[C])return this._meshCache[C];const I=this.painter.context,R=new a.cu,B=new a.aM,q=this.meshSize,X=a.$/q,Z=q*q;for(let Ge=0;Ge<=q;Ge++)for(let mt=0;mt<=q;mt++)R.emplaceBack(mt*X,Ge*X,0);for(let Ge=0;Ge<Z;Ge+=q+1)for(let mt=0;mt<q;mt++)B.emplaceBack(mt+Ge,q+mt+Ge+1,q+mt+Ge+2),B.emplaceBack(mt+Ge,q+mt+Ge+2,mt+Ge+1);const ee=R.length,he=ee+(q+1),Ie=(q+1)*q,Pe=m?a.bg:0,Me=m?0:1,Be=b?a.bh:a.$,Ke=b?0:1;for(let Ge=0;Ge<=q;Ge++)R.emplaceBack(Ge*X,Pe,Me);for(let Ge=0;Ge<=q;Ge++)R.emplaceBack(Ge*X,Be,Ke);for(let Ge=0;Ge<q;Ge++)B.emplaceBack(Ie+Ge,he+Ge,he+Ge+1),B.emplaceBack(Ie+Ge,he+Ge+1,Ie+Ge+1),B.emplaceBack(0+Ge,ee+Ge+1,ee+Ge),B.emplaceBack(0+Ge,0+Ge+1,ee+Ge+1);const He=R.length,et=He+2*(q+1);for(const Ge of[0,1])for(let mt=0;mt<=q;mt++)for(const Nt of[0,1])R.emplaceBack(Ge*a.$,mt*X,Nt);for(let Ge=0;Ge<2*q;Ge+=2)B.emplaceBack(He+Ge,He+Ge+1,He+Ge+3),B.emplaceBack(He+Ge,He+Ge+3,He+Ge+2),B.emplaceBack(et+Ge,et+Ge+3,et+Ge+1),B.emplaceBack(et+Ge,et+Ge+2,et+Ge+3);const at=new yt(I.createVertexBuffer(R,po.members),I.createIndexBuffer(B),a.aL.simpleSegment(0,0,R.length,B.length));return this._meshCache[C]=at,at}getMeshFrameDelta(i){return 2*Math.PI*a.bt/Math.pow(2,Math.max(i,0))/5}getMinTileElevationForLngLatZoom(i,u){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(i,u);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(i,u){const p=a.a0.fromLngLat(i.wrap()),m=(1<<u)*a.$,b=p.x*m,C=p.y*m,I=Math.floor(b/a.$),R=Math.floor(C/a.$);return{tileID:new a.Z(u,0,u,I,R),mercatorX:b,mercatorY:C}}}class xo{constructor(i,u,p){this._context=i,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:i,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>i.id!==u),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const sr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Tr{constructor(i,u){this.painter=i,this.terrain=u,this.pool=new xo(i.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(p=>!i._layers[p].isHidden(u)),this._coordsAscending={};for(const p in i.sourceCaches){this._coordsAscending[p]={};const m=i.sourceCaches[p].getVisibleCoordinates(),b=i.sourceCaches[p].getSource(),C=b instanceof Ht?b.terrainTileRanges:null;for(const I of m){const R=this.terrain.sourceCache.getTerrainCoords(I,C);for(const B in R)this._coordsAscending[p][B]||(this._coordsAscending[p][B]=[]),this._coordsAscending[p][B].push(R[B])}}this._coordsAscendingStr={};for(const p of i._order){const m=i._layers[p],b=m.source;if(sr[m.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const C in this._coordsAscending[b])this._coordsAscendingStr[b][C]=this._coordsAscending[b][C].map(I=>I.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsAscendingStr){const b=this._coordsAscendingStr[m][p.tileID.key];b&&b!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(i,u){if(i.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),m=i.type,b=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(sr[m]&&(this._prevType&&sr[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(i.id),!C))return!0;if(sr[this._prevType]||sr[m]&&C){this._prevType=m;const I=this._stacks.length-1,R=this._stacks[I]||[];for(const B of this._renderableTiles){if(this.pool.isFull()&&(fo(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[I]){const X=this.pool.getObjectForId(B.rtt[I].id);if(X.stamp===B.rtt[I].stamp){this.pool.useObject(X);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),B.rtt[I]={id:q.id,stamp:q.stamp},b.context.bindFramebuffer.set(q.fbo.framebuffer),b.context.clear({color:a.be.transparent,stencil:0}),b.currentStencilSource=void 0;for(let X=0;X<R.length;X++){const Z=b.style._layers[R[X]],ee=Z.source?this._coordsAscending[Z.source][B.tileID.key]:[B.tileID];b.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),b._renderTileClippingMasks(Z,ee,!0),b.renderLayer(b,b.style.sourceCaches[Z.source],Z,ee,p),Z.source&&(B.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][B.tileID.key])}}return fo(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),sr[m]}return!1}}const Wi={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},bi=y,Mo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Zn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Zi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class wo{constructor(i,u,p=!1){this.mousedown=b=>{this.startMove(b,E.mousePos(this.element,b)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,E.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHanlder.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),E.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const m=new J;this._rotatePitchHanlder=new ah({clickTolerance:3,move:(b,C)=>{const I=u.getBoundingClientRect(),R=new a.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:a.cm(new a.P(b.x,C.y),C,R),pitchDelta:p?-.5*(C.y-b.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=i,E.addEventListener(u,"mousedown",this.mousedown),E.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(u,"touchcancel",this.reset)}startMove(i,u){this._rotatePitchHanlder.dragStart(i,u),E.disableDrag()}move(i,u){const p=this.map,{bearingDelta:m,pitchDelta:b}=this._rotatePitchHanlder.dragMove(i,u)||{};m&&p.setBearing(p.getBearing()+m),b&&p.setPitch(p.getPitch()+b)}off(){const i=this.element;E.removeEventListener(i,"mousedown",this.mousedown),E.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend),E.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend)}}let Ei;function Oi(_,i,u,p=!1){if(p||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return _==null?void 0:_.wrap();const m=new a.S(_.lng,_.lat);if(_=new a.S(_.lng,_.lat),i){const b=new a.S(_.lng-360,_.lat),C=new a.S(_.lng+360,_.lat),I=u.locationToScreenPoint(_).distSqr(i);u.locationToScreenPoint(b).distSqr(i)<I?_=b:u.locationToScreenPoint(C).distSqr(i)<I&&(_=C)}for(;Math.abs(_.lng-u.center.lng)>180;){const b=u.locationToScreenPoint(_);if(b.x>=0&&b.y>=0&&b.x<=u.width&&b.y<=u.height)break;_.lng>u.center.lng?_.lng-=360:_.lng+=360}return _.lng!==m.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(_))?_:m}const Xi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function si(_,i,u){const p=_.classList;for(const m in Xi)p.remove(`maplibregl-${u}-anchor-${m}`);p.add(`maplibregl-${u}-anchor-${i}`)}class ei extends a.E{constructor(i){if(super(),this._onKeyPress=u=>{const p=u.code,m=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((u==null?void 0:u.type)==="terrain"||(u==null?void 0:u.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=Oi(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${Xi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${m}`),D.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&u.type==="moveend")}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=a.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div");const u=E.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const b=E.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const C=E.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const I=E.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Me of R){const Be=E.createNS("http://www.w3.org/2000/svg","ellipse");Be.setAttributeNS(null,"opacity","0.04"),Be.setAttributeNS(null,"cx","10.5"),Be.setAttributeNS(null,"cy","5.80029008"),Be.setAttributeNS(null,"rx",Me.rx),Be.setAttributeNS(null,"ry",Me.ry),I.appendChild(Be)}const B=E.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const q=E.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(q);const X=E.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"fill","#000000");const Z=E.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),X.appendChild(Z);const ee=E.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const he=E.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ie=E.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#000000"),Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962");const Pe=E.createNS("http://www.w3.org/2000/svg","circle");Pe.setAttributeNS(null,"fill","#FFFFFF"),Pe.setAttributeNS(null,"cx","5.5"),Pe.setAttributeNS(null,"cy","5.5"),Pe.setAttributeNS(null,"r","5.4999962"),he.appendChild(Ie),he.appendChild(Pe),C.appendChild(I),C.appendChild(B),C.appendChild(X),C.appendChild(ee),C.appendChild(he),u.appendChild(C),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=a.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),si(this._element,this._anchor,"marker"),i&&i.className)for(const u of i.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),i.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.S.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const m=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var u,p;const m=(u=this._map)===null||u===void 0?void 0:u.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!m||b){const ee=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ee&&(this._element.style.opacity=ee))}if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const C=this._map,I=C.terrain.depthAtPoint(this._pos),R=C.terrain.getElevationForLngLatZoom(this._lngLat,C.transform.tileZoom);if(C.transform.lngLatToCameraDepth(this._lngLat,R)-I<.006)return void(this._element.style.opacity=this._opacity);const B=-this._offset.y/C.transform.pixelsPerMeter,q=Math.sin(C.getPitch()*Math.PI/180)*B,X=C.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),Z=C.transform.lngLatToCameraDepth(this._lngLat,R+q)-X>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&Z&&this._popup.remove(),this._element.style.opacity=Z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=a.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,u){return(this._opacity===void 0||i===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const bs={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Vo=0,ko=!1;const ns={maxWidth:100,unit:"metric"};function Ai(_,i,u){const p=u&&u.maxWidth||100,m=_._container.clientHeight/2,b=_._container.clientWidth/2,C=_.unproject([b-p/2,m]),I=_.unproject([b+p/2,m]),R=Math.round(_.project(I).x-_.project(C).x),B=Math.min(p,R,_._container.clientWidth),q=C.distanceTo(I);if(u&&u.unit==="imperial"){const X=3.2808*q;X>5280?ta(i,B,X/5280,_._getUIString("ScaleControl.Miles")):ta(i,B,X,_._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ta(i,B,q/1852,_._getUIString("ScaleControl.NauticalMiles")):q>=1e3?ta(i,B,q/1e3,_._getUIString("ScaleControl.Kilometers")):ta(i,B,q,_._getUIString("ScaleControl.Meters"))}function ta(_,i,u,p){const m=function(b){const C=Math.pow(10,`${Math.floor(b)}`.length-1);let I=b/C;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(R){const B=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*B)/B}(I),C*I}(u);_.style.width=i*(m/u)+"px",_.innerHTML=`${m}&nbsp;${p}`}const is={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},wu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function cl(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,_),"top-left":new a.P(i,i),"top-right":new a.P(-i,i),bottom:new a.P(0,-_),"bottom-left":new a.P(i,-i),"bottom-right":new a.P(-i,-i),left:new a.P(_,0),right:new a.P(-_,0)}}if(_ instanceof a.P||Array.isArray(_)){const i=a.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.P.convert(_.center||[0,0]),top:a.P.convert(_.top||[0,0]),"top-left":a.P.convert(_["top-left"]||[0,0]),"top-right":a.P.convert(_["top-right"]||[0,0]),bottom:a.P.convert(_.bottom||[0,0]),"bottom-left":a.P.convert(_["bottom-left"]||[0,0]),"bottom-right":a.P.convert(_["bottom-right"]||[0,0]),left:a.P.convert(_.left||[0,0]),right:a.P.convert(_.right||[0,0])}}return cl(new a.P(0,0))}const ra=y;f.AJAXError=a.cy,f.Event=a.l,f.Evented=a.E,f.LngLat=a.S,f.MercatorCoordinate=a.a0,f.Point=a.P,f.addProtocol=a.cz,f.config=a.a,f.removeProtocol=a.cA,f.AttributionControl=Ni,f.BoxZoomHandler=Ed,f.CanvasSource=vr,f.CooperativeGesturesHandler=Uo,f.DoubleClickZoomHandler=ir,f.DragPanHandler=zn,f.DragRotateHandler=Qr,f.EdgeInsets=ar,f.FullscreenControl=class extends a.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var i;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=u==null?void 0:u.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},f.GeoJSONSource=Pr,f.GeolocateControl=class extends a.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",i)),this._finish()}},this._updateCamera=i=>{const u=new a.S(i.coords.longitude,i.coords.latitude),p=i.coords.accuracy,m=this._map.getBearing(),b=a.e({bearing:m},this.options.fitBoundsOptions),C=rr.fromLngLat(u,p);this._map.fitBounds(C,b,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const u=new a.S(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&ko)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ei({element:this._dotElement}),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ei({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},bs,_)}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(i=!1){if(Ei!==void 0&&!i)return Ei;if(window.navigator.permissions===void 0)return Ei=!!window.navigator.geolocation,Ei;try{Ei=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ei=!!window.navigator.geolocation}return Ei})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Vo=0,ko=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),u=_.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),u=_.getNorthEast(),p=i.distanceTo(u),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Vo--,ko=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Vo++,Vo>1?(_={maximumAge:6e5,timeout:0},ko=!0):(_=this.options.positionOptions,ko=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},f.GlobeControl=class{constructor(){this._toggleProjection=()=>{var _;const i=(_=this._map.getProjection())===null||_===void 0?void 0:_.type;this._map.setProjection(i!=="mercator"&&i?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var _;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((_=this._map.getProjection())===null||_===void 0?void 0:_.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=E.create("button","maplibregl-ctrl-globe",this._container),E.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},f.Hash=jh,f.ImageSource=Ht,f.KeyboardHandler=Gt,f.LngLatBounds=rr,f.LogoControl=ea,f.Map=class extends Gr{constructor(_){var i,u;a.cv.mark(a.cw.create);const p=Object.assign(Object.assign(Object.assign({},Mo),_),{canvasContextAttributes:Object.assign(Object.assign({},Mo.canvasContextAttributes),_.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const m=new xn,b=new Gu;if(p.minZoom!==void 0&&m.setMinZoom(p.minZoom),p.maxZoom!==void 0&&m.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&m.setMinPitch(p.minPitch),p.maxPitch!==void 0&&m.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&m.setRenderWorldCopies(p.renderWorldCopies),super(m,b,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new za,this._controls=[],this._mapId=a.a6(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Wi),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new xe(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const R=rs(B=>{this._trackResize&&!this._removed&&(this.resize(B),this.redraw())},50);this._resizeObserver=new ResizeObserver(B=>{I?R(B):I=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ri(this,p),this._hash=p.hash&&new jh(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,a.e({},p.fitBoundsOptions,{duration:0}))));const C=typeof p.style=="string"||((u=(i=p.style)===null||i===void 0?void 0:i.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,C),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Ni(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new ea,p.logoPosition),this.on("style.load",()=>{if(C||this._resizeTransform(),this.transform.unmodified){const I=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}}),this.on("data",I=>{this._update(I.dataType==="style"),this.fire(new a.l(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new a.l(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new a.l("sourcedataabort",I))})}_getMapId(){return this._mapId}setGlobalStateProperty(_,i){return this.style.setGlobalStateProperty(_,i),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=_.onAdd(this);this._controls.push(_);const p=this._controlPositions[i];return i.indexOf("bottom")!==-1?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,u,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,u,p)}resize(_,i=!0){const[u,p]=this._containerDimensions(),m=this._getClampedPixelRatio(u,p);if(this._resizeCanvas(u,p,m),this.painter.resize(u,p,m),this.painter.overLimit()){const C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];const I=this._getClampedPixelRatio(u,p);this._resizeCanvas(u,p,I),this.painter.resize(u,p,I)}this._resizeTransform(i);const b=!this._moving;return b&&(this.stop(),this.fire(new a.l("movestart",_)).fire(new a.l("move",_))),this.fire(new a.l("resize",_)),b&&this.fire(new a.l("moveend",_)),this}_resizeTransform(_=!0){var i;const[u,p]=this._containerDimensions();this.transform.resize(u,p,_),(i=this._requestedCameraState)===null||i===void 0||i.resize(u,p,_)}_getClampedPixelRatio(_,i){const{0:u,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),b=_*m,C=i*m;return Math.min(b>u?u/b:1,C>p?p/C:1)*m}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(rr.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.setMinZoom(_),this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.setMaxZoom(_),this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.setMinPitch(_),this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(_>=this.transform.minPitch)return this.transform.setMaxPitch(_),this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.setRenderWorldCopies(_),this._update()}project(_){return this.transform.locationToScreenPoint(a.S.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.screenPointToLocation(a.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,u){if(_==="mouseenter"||_==="mouseover"){let p=!1;return{layers:i,listener:u,delegates:{mousemove:b=>{const C=i.filter(R=>this.getLayer(R)),I=C.length!==0?this.queryRenderedFeatures(b.point,{layers:C}):[];I.length?p||(p=!0,u.call(this,new Ba(_,this,b.originalEvent,{features:I}))):p=!1},mouseout:()=>{p=!1}}}}if(_==="mouseleave"||_==="mouseout"){let p=!1;return{layers:i,listener:u,delegates:{mousemove:C=>{const I=i.filter(R=>this.getLayer(R));(I.length!==0?this.queryRenderedFeatures(C.point,{layers:I}):[]).length?p=!0:p&&(p=!1,u.call(this,new Ba(_,this,C.originalEvent)))},mouseout:C=>{p&&(p=!1,u.call(this,new Ba(_,this,C.originalEvent)))}}}}{const p=m=>{const b=i.filter(I=>this.getLayer(I)),C=b.length!==0?this.queryRenderedFeatures(m.point,{layers:b}):[];C.length&&(m.features=C,u.call(this,m),delete m.features)};return{layers:i,listener:u,delegates:{[_]:p}}}}_saveDelegatedListener(_,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(i)}_removeDelegatedListener(_,i,u){if(!this._delegatedListeners||!this._delegatedListeners[_])return;const p=this._delegatedListeners[_];for(let m=0;m<p.length;m++){const b=p[m];if(b.listener===u&&b.layers.length===i.length&&b.layers.every(C=>i.includes(C))){for(const C in b.delegates)this.off(C,b.delegates[C]);return void p.splice(m,1)}}}on(_,i,u){if(u===void 0)return super.on(_,i);const p=typeof i=="string"?[i]:i,m=this._createDelegatedListener(_,p,u);this._saveDelegatedListener(_,m);for(const b in m.delegates)this.on(b,m.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(_,p,u)}}}once(_,i,u){if(u===void 0)return super.once(_,i);const p=typeof i=="string"?[i]:i,m=this._createDelegatedListener(_,p,u);for(const b in m.delegates){const C=m.delegates[b];m.delegates[b]=(...I)=>{this._removeDelegatedListener(_,p,u),C(...I)}}this._saveDelegatedListener(_,m);for(const b in m.delegates)this.once(b,m.delegates[b]);return this}off(_,i,u){return u===void 0?super.off(_,i):(this._removeDelegatedListener(_,typeof i=="string"?[i]:i,u),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let u;const p=_ instanceof a.P||Array.isArray(_),m=p?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(p?{}:_)||{},m instanceof a.P||typeof m[0]=="number")u=[a.P.convert(m)];else{const b=a.P.convert(m[0]),C=a.P.convert(m[1]);u=[b,new a.P(C.x,b.y),C,new a.P(b.x,C.y),b]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){var u,p;if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const m=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new Ja(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,m):this.style.loadJSON(_,i,m),this):((p=(u=this.style)===null||u===void 0?void 0:u.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ja(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const u=this._requestManager.transformRequest(_,"Style");a.j(u,new AbortController).then(p=>{this._updateDiff(p.data,i)}).catch(p=>{p&&this.fire(new a.k(p))})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(u){a.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new a.k(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&i.reload();for(const u in this.style._layers){const p=this.style._layers[u];p.type==="hillshade"&&p.source===_.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),p.type==="color-relief"&&p.source===_.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new io(this.painter,i,_),this.painter.renderToTexture=new Tr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var p;u.dataType==="style"?this.terrain.sourceCache.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==_.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=u.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const u=_[i]._tiles;for(const p in u){const m=u[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}setSourceTileLodParams(_,i,u){if(u){const p=this.getSource(u);if(!p)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);p.calculateTileZoom=ht(Math.max(1,_),Math.max(1,i))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=ht(Math.max(1,_),Math.max(1,i));return this._update(!0),this}refreshTiles(_,i){const u=this.style.sourceCaches[_];if(!u)throw new Error(`There is no source cache with ID "${_}", cannot refresh tile`);i===void 0?u.reload(!0):u.refreshTiles(i.map(p=>new a.a3(p.z,p.x,p.y)))}addImage(_,i,u={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:b,stretchY:C,content:I,textFitWidth:R,textFitHeight:B}=u;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||a.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:X,data:Z}=i,ee=i;return this.style.addImage(_,{data:new a.R({width:q,height:X},new Uint8Array(Z)),pixelRatio:p,stretchX:b,stretchY:C,content:I,textFitWidth:R,textFitHeight:B,sdf:m,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,_),this}}{const{width:q,height:X,data:Z}=D.getImageData(i);this.style.addImage(_,{data:new a.R({width:q,height:X},Z),pixelRatio:p,stretchX:b,stretchY:C,content:I,textFitWidth:R,textFitHeight:B,sdf:m,version:0})}}updateImage(_,i){const u=this.style.getImage(_);if(!u)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=i instanceof HTMLImageElement||a.b(i)?D.getImageData(i):i,{width:m,height:b,data:C}=p;if(m===void 0||b===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||b!==u.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(i instanceof HTMLImageElement||a.b(i));return u.data.replace(C,I),this.style.updateImage(_,u),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return K.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,u){return this.style.setLayerZoomRange(_,i,u),this._update(!0)}setFilter(_,i,u={}){return this.style.setFilter(_,i,u),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,u,p={}){return this.style.setPaintProperty(_,i,u,p),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,u,p={}){return this.style.setLayoutProperty(_,i,u,p),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,u,p=>{p||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,u=>{u||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSky(_,i),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=E.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const m=this._controlContainer=E.create("div","maplibregl-control-container",_),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{b[C]=E.create("div",`maplibregl-ctrl-${C} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,u){this._canvas.width=Math.floor(u*_),this._canvas.height=Math.floor(u*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let i=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{i={requestedAttributes:_},p&&(i.statusMessage=p.statusMessage,i.type=p.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,_):this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_),!u){const p="Failed to initialize WebGL";throw i?(i.message=p,new Error(JSON.stringify(i))):new Error(p)}this.painter=new Qo(u,this.transform),F.testSupport(u)}migrateProjection(_,i){super.migrateProjection(_,i),this.painter.transform=_,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){var i,u,p,m,b;const C=this._idleTriggered?this._fadeDuration:0,I=((i=this.style.projection)===null||i===void 0?void 0:i.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,Z=D.now();this.style.zoomHistory.update(X,Z);const ee=new a.F(X,{now:Z,fadeDuration:C,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),he=ee.crossFadingFactor();he===1&&he===this._crossFadingFactor||(R=!0,this._crossFadingFactor=he),this.style.update(ee)}const B=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==I;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||B)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,B),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cv.mark(a.cw.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,a.cv.mark(a.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cv.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frame(this._frameRequest,_=>{a.cv.frame(_),this._frameRequest=null;try{this._render(_)}catch(i){if(!a.cx(i)&&!function(u){return u.message===Jo}(i))throw i}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return bi}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(_){return this._lazyInitEmptyStyle(),this.style.setProjection(_),this._update(!0)}},f.MapMouseEvent=Ba,f.MapTouchEvent=kl,f.MapWheelEvent=Pf,f.Marker=ei,f.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),u=i===this._map.getMaxZoom(),p=i===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(i,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);i.title=p,i.setAttribute("aria-label",p)},this.options=a.e({},Zi,_),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),E.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),E.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=E.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const u=E.create("button",_,this._container);return u.type="button",u.addEventListener("click",i),u}},f.Popup=class extends a.E{constructor(_){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=E.create("div","maplibregl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Oi(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!i)return;const u=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const m=cl(this.options.offset);if(!p){const C=this._container.offsetWidth,I=this._container.offsetHeight;let R;R=u.y+m.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<C/2?R.push("left"):u.x>this._map.transform.width-C/2&&R.push("right"),p=R.length===0?"bottom":R.join("-")}let b=u.add(m[p]);this.options.subpixelPositioning||(b=b.round()),E.setTransform(this._container,`${Xi[p]} translate(${b.x}px,${b.y}px)`),si(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(is),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=a.S.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=_;p=u.firstChild,p;)i.appendChild(p);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(wu);_&&_.focus()}},f.RasterDEMTileSource=Nr,f.RasterTileSource=Lr,f.ScaleControl=class{constructor(_){this._onMove=()=>{Ai(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Ai(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ns),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},f.ScrollZoomHandler=pr,f.Style=Ja,f.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},f.TwoFingersTouchPitchHandler=xt,f.TwoFingersTouchRotateHandler=$t,f.TwoFingersTouchZoomHandler=ze,f.TwoFingersTouchZoomRotateHandler=Qn,f.VectorTileSource=Ue,f.VideoSource=Er,f.addSourceType=(_,i)=>a._(void 0,void 0,void 0,function*(){if(qr(_))throw new Error(`A source type called "${_}" already exists.`);((u,p)=>{dr[u]=p})(_,i)}),f.clearPrewarmedResources=function(){const _=Ee;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Ot),Ee=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},f.createTileMesh=Cl,f.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},f.getRTLTextPluginStatus=function(){return An().getRTLTextPluginStatus()},f.getVersion=function(){return ra},f.getWorkerCount=function(){return St.workerCount},f.getWorkerUrl=function(){return a.a.WORKER_URL},f.importScriptInWorkers=function(_){return gt().broadcast("IS",_)},f.prewarm=function(){qe().acquire(Ot)},f.setMaxParallelImageRequests=function(_){a.a.MAX_PARALLEL_IMAGE_REQUESTS=_},f.setRTLTextPlugin=function(_,i){return An().setRTLTextPlugin(_,i)},f.setWorkerCount=function(_){St.workerCount=_},f.setWorkerUrl=function(_){a.a.WORKER_URL=_}});var l=r;return l})})(YD);var t$=YD.exports;function up(e,...t){const r=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(n=>r.searchParams.append("args[]",n)),`Minified MUI error #${e}; visit ${r} for the full message.`}const sf="$$material";function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D_.apply(null,arguments)}function r$(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function n$(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var i$=function(){function e(r){var n=this;this._insertTag=function(s){var l;n.tags.length===0?n.insertionPoint?l=n.insertionPoint.nextSibling:n.prepend?l=n.container.firstChild:l=n.before:l=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,l),n.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(n$(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var l=r$(s);try{l.insertRule(n,l.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},e}(),_l="-ms-",R_="-moz-",$i="-webkit-",JD="comm",aE="rule",sE="decl",o$="@import",QD="@keyframes",a$="@layer",s$=Math.abs,k2=String.fromCharCode,l$=Object.assign;function u$(e,t){return zs(e,0)^45?(((t<<2^zs(e,0))<<2^zs(e,1))<<2^zs(e,2))<<2^zs(e,3):0}function eR(e){return e.trim()}function c$(e,t){return(e=t.exec(e))?e[0]:e}function ji(e,t,r){return e.replace(t,r)}function sS(e,t){return e.indexOf(t)}function zs(e,t){return e.charCodeAt(t)|0}function Py(e,t,r){return e.slice(t,r)}function vh(e){return e.length}function lE(e){return e.length}function c1(e,t){return t.push(e),e}function h$(e,t){return e.map(t).join("")}var L2=1,yg=1,tR=0,su=0,Ha=0,Ig="";function D2(e,t,r,n,s,l,f){return{value:e,root:t,parent:r,type:n,props:s,children:l,line:L2,column:yg,length:f,return:""}}function C0(e,t){return l$(D2("",null,null,"",null,null,0),e,{length:-e.length},t)}function f$(){return Ha}function d$(){return Ha=su>0?zs(Ig,--su):0,yg--,Ha===10&&(yg=1,L2--),Ha}function Nu(){return Ha=su<tR?zs(Ig,su++):0,yg++,Ha===10&&(yg=1,L2++),Ha}function Eh(){return zs(Ig,su)}function W1(){return su}function rv(e,t){return Py(Ig,e,t)}function Iy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rR(e){return L2=yg=1,tR=vh(Ig=e),su=0,[]}function nR(e){return Ig="",e}function Z1(e){return eR(rv(su-1,lS(e===91?e+2:e===40?e+1:e)))}function p$(e){for(;(Ha=Eh())&&Ha<33;)Nu();return Iy(e)>2||Iy(Ha)>3?"":" "}function m$(e,t){for(;--t&&Nu()&&!(Ha<48||Ha>102||Ha>57&&Ha<65||Ha>70&&Ha<97););return rv(e,W1()+(t<6&&Eh()==32&&Nu()==32))}function lS(e){for(;Nu();)switch(Ha){case e:return su;case 34:case 39:e!==34&&e!==39&&lS(Ha);break;case 40:e===41&&lS(e);break;case 92:Nu();break}return su}function g$(e,t){for(;Nu()&&e+Ha!==57;)if(e+Ha===84&&Eh()===47)break;return"/*"+rv(t,su-1)+"*"+k2(e===47?e:Nu())}function y$(e){for(;!Iy(Eh());)Nu();return rv(e,su)}function v$(e){return nR(X1("",null,null,null,[""],e=rR(e),0,[0],e))}function X1(e,t,r,n,s,l,f,a,y){for(var v=0,S=0,P=f,D=0,E=0,F=0,z=1,W=1,$=1,Y=0,Q="",K=s,xe=l,de=n,be=Q;W;)switch(F=Y,Y=Nu()){case 40:if(F!=108&&zs(be,P-1)==58){sS(be+=ji(Z1(Y),"&","&\f"),"&\f")!=-1&&($=-1);break}case 34:case 39:case 91:be+=Z1(Y);break;case 9:case 10:case 13:case 32:be+=p$(F);break;case 92:be+=m$(W1()-1,7);continue;case 47:switch(Eh()){case 42:case 47:c1(_$(g$(Nu(),W1()),t,r),y);break;default:be+="/"}break;case 123*z:a[v++]=vh(be)*$;case 125*z:case 59:case 0:switch(Y){case 0:case 125:W=0;case 59+S:$==-1&&(be=ji(be,/\f/g,"")),E>0&&vh(be)-P&&c1(E>32?i4(be+";",n,r,P-1):i4(ji(be," ","")+";",n,r,P-2),y);break;case 59:be+=";";default:if(c1(de=n4(be,t,r,v,S,s,a,Q,K=[],xe=[],P),l),Y===123)if(S===0)X1(be,t,de,de,K,l,P,a,xe);else switch(D===99&&zs(be,3)===110?100:D){case 100:case 108:case 109:case 115:X1(e,de,de,n&&c1(n4(e,de,de,0,0,s,a,Q,s,K=[],P),xe),s,xe,P,a,n?K:xe);break;default:X1(be,de,de,de,[""],xe,0,a,xe)}}v=S=E=0,z=$=1,Q=be="",P=f;break;case 58:P=1+vh(be),E=F;default:if(z<1){if(Y==123)--z;else if(Y==125&&z++==0&&d$()==125)continue}switch(be+=k2(Y),Y*z){case 38:$=S>0?1:(be+="\f",-1);break;case 44:a[v++]=(vh(be)-1)*$,$=1;break;case 64:Eh()===45&&(be+=Z1(Nu())),D=Eh(),S=P=vh(Q=be+=y$(W1())),Y++;break;case 45:F===45&&vh(be)==2&&(z=0)}}return l}function n4(e,t,r,n,s,l,f,a,y,v,S){for(var P=s-1,D=s===0?l:[""],E=lE(D),F=0,z=0,W=0;F<n;++F)for(var $=0,Y=Py(e,P+1,P=s$(z=f[F])),Q=e;$<E;++$)(Q=eR(z>0?D[$]+" "+Y:ji(Y,/&\f/g,D[$])))&&(y[W++]=Q);return D2(e,t,r,s===0?aE:a,y,v,S)}function _$(e,t,r){return D2(e,t,r,JD,k2(f$()),Py(e,2,-2),0)}function i4(e,t,r,n){return D2(e,t,r,sE,Py(e,0,n),Py(e,n+1,-1),n)}function rg(e,t){for(var r="",n=lE(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function b$(e,t,r,n){switch(e.type){case a$:if(e.children.length)break;case o$:case sE:return e.return=e.return||e.value;case JD:return"";case QD:return e.return=e.value+"{"+rg(e.children,n)+"}";case aE:e.value=e.props.join(",")}return vh(r=rg(e.children,n))?e.return=e.value+"{"+r+"}":""}function x$(e){var t=lE(e);return function(r,n,s,l){for(var f="",a=0;a<t;a++)f+=e[a](r,n,s,l)||"";return f}}function w$(e){return function(t){t.root||(t=t.return)&&e(t)}}function iR(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var S$=function(t,r,n){for(var s=0,l=0;s=l,l=Eh(),s===38&&l===12&&(r[n]=1),!Iy(l);)Nu();return rv(t,su)},C$=function(t,r){var n=-1,s=44;do switch(Iy(s)){case 0:s===38&&Eh()===12&&(r[n]=1),t[n]+=S$(su-1,r,n);break;case 2:t[n]+=Z1(s);break;case 4:if(s===44){t[++n]=Eh()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=k2(s)}while(s=Nu());return t},E$=function(t,r){return nR(C$(rR(t),r))},o4=new WeakMap,T$=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!o4.get(n))&&!s){o4.set(t,!0);for(var l=[],f=E$(r,l),a=n.props,y=0,v=0;y<f.length;y++)for(var S=0;S<a.length;S++,v++)t.props[v]=l[y]?f[y].replace(/&\f/g,a[S]):a[S]+" "+f[y]}}},A$=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function oR(e,t){switch(u$(e,t)){case 5103:return $i+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $i+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $i+e+R_+e+_l+e+e;case 6828:case 4268:return $i+e+_l+e+e;case 6165:return $i+e+_l+"flex-"+e+e;case 5187:return $i+e+ji(e,/(\w+).+(:[^]+)/,$i+"box-$1$2"+_l+"flex-$1$2")+e;case 5443:return $i+e+_l+"flex-item-"+ji(e,/flex-|-self/,"")+e;case 4675:return $i+e+_l+"flex-line-pack"+ji(e,/align-content|flex-|-self/,"")+e;case 5548:return $i+e+_l+ji(e,"shrink","negative")+e;case 5292:return $i+e+_l+ji(e,"basis","preferred-size")+e;case 6060:return $i+"box-"+ji(e,"-grow","")+$i+e+_l+ji(e,"grow","positive")+e;case 4554:return $i+ji(e,/([^-])(transform)/g,"$1"+$i+"$2")+e;case 6187:return ji(ji(ji(e,/(zoom-|grab)/,$i+"$1"),/(image-set)/,$i+"$1"),e,"")+e;case 5495:case 3959:return ji(e,/(image-set\([^]*)/,$i+"$1$`$1");case 4968:return ji(ji(e,/(.+:)(flex-)?(.*)/,$i+"box-pack:$3"+_l+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$i+e+e;case 4095:case 3583:case 4068:case 2532:return ji(e,/(.+)-inline(.+)/,$i+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(vh(e)-1-t>6)switch(zs(e,t+1)){case 109:if(zs(e,t+4)!==45)break;case 102:return ji(e,/(.+:)(.+)-([^]+)/,"$1"+$i+"$2-$3$1"+R_+(zs(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~sS(e,"stretch")?oR(ji(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(zs(e,t+1)!==115)break;case 6444:switch(zs(e,vh(e)-3-(~sS(e,"!important")&&10))){case 107:return ji(e,":",":"+$i)+e;case 101:return ji(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+$i+(zs(e,14)===45?"inline-":"")+"box$3$1"+$i+"$2$3$1"+_l+"$2box$3")+e}break;case 5936:switch(zs(e,t+11)){case 114:return $i+e+_l+ji(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $i+e+_l+ji(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $i+e+_l+ji(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return $i+e+_l+e+e}return e}var P$=function(t,r,n,s){if(t.length>-1&&!t.return)switch(t.type){case sE:t.return=oR(t.value,t.length);break;case QD:return rg([C0(t,{value:ji(t.value,"@","@"+$i)})],s);case aE:if(t.length)return h$(t.props,function(l){switch(c$(l,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return rg([C0(t,{props:[ji(l,/:(read-\w+)/,":"+R_+"$1")]})],s);case"::placeholder":return rg([C0(t,{props:[ji(l,/:(plac\w+)/,":"+$i+"input-$1")]}),C0(t,{props:[ji(l,/:(plac\w+)/,":"+R_+"$1")]}),C0(t,{props:[ji(l,/:(plac\w+)/,_l+"input-$1")]})],s)}return""})}},I$=[P$],M$=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(z){var W=z.getAttribute("data-emotion");W.indexOf(" ")!==-1&&(document.head.appendChild(z),z.setAttribute("data-s",""))})}var s=t.stylisPlugins||I$,l={},f,a=[];f=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(z){for(var W=z.getAttribute("data-emotion").split(" "),$=1;$<W.length;$++)l[W[$]]=!0;a.push(z)});var y,v=[T$,A$];{var S,P=[b$,w$(function(z){S.insert(z)})],D=x$(v.concat(s,P)),E=function(W){return rg(v$(W),D)};y=function(W,$,Y,Q){S=Y,E(W?W+"{"+$.styles+"}":$.styles),Q&&(F.inserted[$.name]=!0)}}var F={key:r,sheet:new i$({key:r,container:f,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:l,registered:{},insert:y};return F.sheet.hydrate(a),F},aR={exports:{}},to={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ts=typeof Symbol=="function"&&Symbol.for,uE=Ts?Symbol.for("react.element"):60103,cE=Ts?Symbol.for("react.portal"):60106,R2=Ts?Symbol.for("react.fragment"):60107,N2=Ts?Symbol.for("react.strict_mode"):60108,O2=Ts?Symbol.for("react.profiler"):60114,F2=Ts?Symbol.for("react.provider"):60109,B2=Ts?Symbol.for("react.context"):60110,hE=Ts?Symbol.for("react.async_mode"):60111,z2=Ts?Symbol.for("react.concurrent_mode"):60111,$2=Ts?Symbol.for("react.forward_ref"):60112,j2=Ts?Symbol.for("react.suspense"):60113,k$=Ts?Symbol.for("react.suspense_list"):60120,U2=Ts?Symbol.for("react.memo"):60115,V2=Ts?Symbol.for("react.lazy"):60116,L$=Ts?Symbol.for("react.block"):60121,D$=Ts?Symbol.for("react.fundamental"):60117,R$=Ts?Symbol.for("react.responder"):60118,N$=Ts?Symbol.for("react.scope"):60119;function Uu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case uE:switch(e=e.type,e){case hE:case z2:case R2:case O2:case N2:case j2:return e;default:switch(e=e&&e.$$typeof,e){case B2:case $2:case V2:case U2:case F2:return e;default:return t}}case cE:return t}}}function sR(e){return Uu(e)===z2}to.AsyncMode=hE;to.ConcurrentMode=z2;to.ContextConsumer=B2;to.ContextProvider=F2;to.Element=uE;to.ForwardRef=$2;to.Fragment=R2;to.Lazy=V2;to.Memo=U2;to.Portal=cE;to.Profiler=O2;to.StrictMode=N2;to.Suspense=j2;to.isAsyncMode=function(e){return sR(e)||Uu(e)===hE};to.isConcurrentMode=sR;to.isContextConsumer=function(e){return Uu(e)===B2};to.isContextProvider=function(e){return Uu(e)===F2};to.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===uE};to.isForwardRef=function(e){return Uu(e)===$2};to.isFragment=function(e){return Uu(e)===R2};to.isLazy=function(e){return Uu(e)===V2};to.isMemo=function(e){return Uu(e)===U2};to.isPortal=function(e){return Uu(e)===cE};to.isProfiler=function(e){return Uu(e)===O2};to.isStrictMode=function(e){return Uu(e)===N2};to.isSuspense=function(e){return Uu(e)===j2};to.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===R2||e===z2||e===O2||e===N2||e===j2||e===k$||typeof e=="object"&&e!==null&&(e.$$typeof===V2||e.$$typeof===U2||e.$$typeof===F2||e.$$typeof===B2||e.$$typeof===$2||e.$$typeof===D$||e.$$typeof===R$||e.$$typeof===N$||e.$$typeof===L$)};to.typeOf=Uu;aR.exports=to;var O$=aR.exports,lR=O$,F$={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},B$={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uR={};uR[lR.ForwardRef]=F$;uR[lR.Memo]=B$;var z$=!0;function cR(e,t,r){var n="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(n+=s+" ")}),n}var fE=function(t,r,n){var s=t.key+"-"+r.name;(n===!1||z$===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},dE=function(t,r,n){fE(t,r,n);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var l=r;do t.insert(r===l?"."+s:"",l,t.sheet,!0),l=l.next;while(l!==void 0)}};function $$(e){for(var t=0,r,n=0,s=e.length;s>=4;++n,s-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var j$={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},U$=/[A-Z]|^ms/g,V$=/_EMO_([^_]+?)_([^]*?)_EMO_/g,hR=function(t){return t.charCodeAt(1)===45},a4=function(t){return t!=null&&typeof t!="boolean"},pw=iR(function(e){return hR(e)?e:e.replace(U$,"-$&").toLowerCase()}),s4=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(V$,function(n,s,l){return _h={name:s,styles:l,next:_h},s})}return j$[t]!==1&&!hR(t)&&typeof r=="number"&&r!==0?r+"px":r};function My(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return _h={name:s.name,styles:s.styles,next:_h},s.name;var l=r;if(l.styles!==void 0){var f=l.next;if(f!==void 0)for(;f!==void 0;)_h={name:f.name,styles:f.styles,next:_h},f=f.next;var a=l.styles+";";return a}return q$(e,t,r)}case"function":{if(e!==void 0){var y=_h,v=r(e);return _h=y,My(e,t,v)}break}}var S=r;if(t==null)return S;var P=t[S];return P!==void 0?P:S}function q$(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=My(e,t,r[s])+";";else for(var l in r){var f=r[l];if(typeof f!="object"){var a=f;t!=null&&t[a]!==void 0?n+=l+"{"+t[a]+"}":a4(a)&&(n+=pw(l)+":"+s4(l,a)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&(t==null||t[f[0]]===void 0))for(var y=0;y<f.length;y++)a4(f[y])&&(n+=pw(l)+":"+s4(l,f[y])+";");else{var v=My(e,t,f);switch(l){case"animation":case"animationName":{n+=pw(l)+":"+v+";";break}default:n+=l+"{"+v+"}"}}}return n}var l4=/label:\s*([^\s;{]+)\s*(;|$)/g,_h;function nv(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,s="";_h=void 0;var l=e[0];if(l==null||l.raw===void 0)n=!1,s+=My(r,t,l);else{var f=l;s+=f[0]}for(var a=1;a<e.length;a++)if(s+=My(r,t,e[a]),n){var y=l;s+=y[a]}l4.lastIndex=0;for(var v="",S;(S=l4.exec(s))!==null;)v+="-"+S[1];var P=$$(s)+v;return{name:P,styles:s,next:_h}}var G$=function(t){return t()},fR=p5.useInsertionEffect?p5.useInsertionEffect:!1,dR=fR||G$,u4=fR||vt.useLayoutEffect,pR=vt.createContext(typeof HTMLElement<"u"?M$({key:"css"}):null);pR.Provider;var pE=function(t){return vt.forwardRef(function(r,n){var s=vt.useContext(pR);return t(r,s,n)})},iv=vt.createContext({}),mE={}.hasOwnProperty,uS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",H$=function(t,r){var n={};for(var s in r)mE.call(r,s)&&(n[s]=r[s]);return n[uS]=t,n},W$=function(t){var r=t.cache,n=t.serialized,s=t.isStringTag;return fE(r,n,s),dR(function(){return dE(r,n,s)}),null},Z$=pE(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var s=e[uS],l=[n],f="";typeof e.className=="string"?f=cR(t.registered,l,e.className):e.className!=null&&(f=e.className+" ");var a=nv(l,void 0,vt.useContext(iv));f+=t.key+"-"+a.name;var y={};for(var v in e)mE.call(e,v)&&v!=="css"&&v!==uS&&(y[v]=e[v]);return y.className=f,r&&(y.ref=r),vt.createElement(vt.Fragment,null,vt.createElement(W$,{cache:t,serialized:a,isStringTag:typeof s=="string"}),vt.createElement(s,y))}),X$=Z$,c4=function(t,r){var n=arguments;if(r==null||!mE.call(r,"css"))return vt.createElement.apply(void 0,n);var s=n.length,l=new Array(s);l[0]=X$,l[1]=H$(t,r);for(var f=2;f<s;f++)l[f]=n[f];return vt.createElement.apply(null,l)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(c4||(c4={}));var Y$=pE(function(e,t){var r=e.styles,n=nv([r],void 0,vt.useContext(iv)),s=vt.useRef();return u4(function(){var l=t.key+"-global",f=new t.sheet.constructor({key:l,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),a=!1,y=document.querySelector('style[data-emotion="'+l+" "+n.name+'"]');return t.sheet.tags.length&&(f.before=t.sheet.tags[0]),y!==null&&(a=!0,y.setAttribute("data-emotion",l),f.hydrate([y])),s.current=[f,a],function(){f.flush()}},[t]),u4(function(){var l=s.current,f=l[0],a=l[1];if(a){l[1]=!1;return}if(n.next!==void 0&&dE(t,n.next,!0),f.tags.length){var y=f.tags[f.tags.length-1].nextElementSibling;f.before=y,f.flush()}t.insert("",n,f,!1)},[t,n.name]),null});function gE(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return nv(t)}function ov(){var e=gE.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var K$=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,J$=iR(function(e){return K$.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Q$=J$,ej=function(t){return t!=="theme"},h4=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Q$:ej},f4=function(t,r,n){var s;if(r){var l=r.shouldForwardProp;s=t.__emotion_forwardProp&&l?function(f){return t.__emotion_forwardProp(f)&&l(f)}:l}return typeof s!="function"&&n&&(s=t.__emotion_forwardProp),s},tj=function(t){var r=t.cache,n=t.serialized,s=t.isStringTag;return fE(r,n,s),dR(function(){return dE(r,n,s)}),null},rj=function e(t,r){var n=t.__emotion_real===t,s=n&&t.__emotion_base||t,l,f;r!==void 0&&(l=r.label,f=r.target);var a=f4(t,r,n),y=a||h4(s),v=!y("as");return function(){var S=arguments,P=n&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(l!==void 0&&P.push("label:"+l+";"),S[0]==null||S[0].raw===void 0)P.push.apply(P,S);else{var D=S[0];P.push(D[0]);for(var E=S.length,F=1;F<E;F++)P.push(S[F],D[F])}var z=pE(function(W,$,Y){var Q=v&&W.as||s,K="",xe=[],de=W;if(W.theme==null){de={};for(var be in W)de[be]=W[be];de.theme=vt.useContext(iv)}typeof W.className=="string"?K=cR($.registered,xe,W.className):W.className!=null&&(K=W.className+" ");var me=nv(P.concat(xe),$.registered,de);K+=$.key+"-"+me.name,f!==void 0&&(K+=" "+f);var ve=v&&a===void 0?h4(Q):y,Re={};for(var le in W)v&&le==="as"||ve(le)&&(Re[le]=W[le]);return Re.className=K,Y&&(Re.ref=Y),vt.createElement(vt.Fragment,null,vt.createElement(tj,{cache:$,serialized:me,isStringTag:typeof Q=="string"}),vt.createElement(Q,Re))});return z.displayName=l!==void 0?l:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",z.defaultProps=t.defaultProps,z.__emotion_real=z,z.__emotion_base=s,z.__emotion_styles=P,z.__emotion_forwardProp=a,Object.defineProperty(z,"toString",{value:function(){return"."+f}}),z.withComponent=function(W,$){var Y=e(W,D_({},r,$,{shouldForwardProp:f4(z,$,!0)}));return Y.apply(void 0,P)},z}},nj=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],cS=rj.bind(null);nj.forEach(function(e){cS[e]=cS(e)});var mR={exports:{}},ij="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",oj=ij,aj=oj;function gR(){}function yR(){}yR.resetWarningCache=gR;var sj=function(){function e(n,s,l,f,a,y){if(y!==aj){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:yR,resetWarningCache:gR};return r.PropTypes=r,r};mR.exports=sj();var lj=mR.exports;const Rr=OL(lj);function uj(e){return e==null||Object.keys(e).length===0}function vR(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?s=>t(uj(s)?r:s):t;return Ar.jsx(Y$,{styles:n})}function _R(e,t){return cS(e,t)}function cj(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const d4=[];function od(e){return d4[0]=e,nv(d4)}var bR={exports:{}},go={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=Symbol.for("react.transitional.element"),vE=Symbol.for("react.portal"),q2=Symbol.for("react.fragment"),G2=Symbol.for("react.strict_mode"),H2=Symbol.for("react.profiler"),W2=Symbol.for("react.consumer"),Z2=Symbol.for("react.context"),X2=Symbol.for("react.forward_ref"),Y2=Symbol.for("react.suspense"),K2=Symbol.for("react.suspense_list"),J2=Symbol.for("react.memo"),Q2=Symbol.for("react.lazy"),hj=Symbol.for("react.view_transition"),fj=Symbol.for("react.client.reference");function cc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yE:switch(e=e.type,e){case q2:case H2:case G2:case Y2:case K2:case hj:return e;default:switch(e=e&&e.$$typeof,e){case Z2:case X2:case Q2:case J2:return e;case W2:return e;default:return t}}case vE:return t}}}go.ContextConsumer=W2;go.ContextProvider=Z2;go.Element=yE;go.ForwardRef=X2;go.Fragment=q2;go.Lazy=Q2;go.Memo=J2;go.Portal=vE;go.Profiler=H2;go.StrictMode=G2;go.Suspense=Y2;go.SuspenseList=K2;go.isContextConsumer=function(e){return cc(e)===W2};go.isContextProvider=function(e){return cc(e)===Z2};go.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yE};go.isForwardRef=function(e){return cc(e)===X2};go.isFragment=function(e){return cc(e)===q2};go.isLazy=function(e){return cc(e)===Q2};go.isMemo=function(e){return cc(e)===J2};go.isPortal=function(e){return cc(e)===vE};go.isProfiler=function(e){return cc(e)===H2};go.isStrictMode=function(e){return cc(e)===G2};go.isSuspense=function(e){return cc(e)===Y2};go.isSuspenseList=function(e){return cc(e)===K2};go.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===q2||e===H2||e===G2||e===Y2||e===K2||typeof e=="object"&&e!==null&&(e.$$typeof===Q2||e.$$typeof===J2||e.$$typeof===Z2||e.$$typeof===W2||e.$$typeof===X2||e.$$typeof===fj||e.getModuleId!==void 0)};go.typeOf=cc;bR.exports=go;var xR=bR.exports;function xh(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function wR(e){if(vt.isValidElement(e)||xR.isValidElementType(e)||!xh(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=wR(e[r])}),t}function Ou(e,t,r={clone:!0}){const n=r.clone?{...e}:e;return xh(e)&&xh(t)&&Object.keys(t).forEach(s=>{vt.isValidElement(t[s])||xR.isValidElementType(t[s])?n[s]=t[s]:xh(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&xh(e[s])?n[s]=Ou(e[s],t[s],r):r.clone?n[s]=xh(t[s])?wR(t[s]):t[s]:n[s]=t[s]}),n}const dj=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>({...r,[n.key]:n.val}),{})};function pj(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5,...s}=e,l=dj(t),f=Object.keys(l);function a(D){return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${r})`}function y(D){return`@media (max-width:${(typeof t[D]=="number"?t[D]:D)-n/100}${r})`}function v(D,E){const F=f.indexOf(E);return`@media (min-width:${typeof t[D]=="number"?t[D]:D}${r}) and (max-width:${(F!==-1&&typeof t[f[F]]=="number"?t[f[F]]:E)-n/100}${r})`}function S(D){return f.indexOf(D)+1<f.length?v(D,f[f.indexOf(D)+1]):a(D)}function P(D){const E=f.indexOf(D);return E===0?a(f[1]):E===f.length-1?y(f[E]):v(D,f[f.indexOf(D)+1]).replace("@media","@media not all and")}return{keys:f,values:l,up:a,down:y,between:v,only:S,not:P,unit:r,...s}}function p4(e,t){if(!e.containerQueries)return t;const r=Object.keys(t).filter(n=>n.startsWith("@container")).sort((n,s)=>{var f,a;const l=/min-width:\s*([0-9.]+)/;return+(((f=n.match(l))==null?void 0:f[1])||0)-+(((a=s.match(l))==null?void 0:a[1])||0)});return r.length?r.reduce((n,s)=>{const l=t[s];return delete n[s],n[s]=l,n},{...t}):t}function mj(e,t){return t==="@"||t.startsWith("@")&&(e.some(r=>t.startsWith(`@${r}`))||!!t.match(/^@\d/))}function gj(e,t){const r=t.match(/^@([^/]+)?\/?(.+)?$/);if(!r)return null;const[,n,s]=r,l=Number.isNaN(+n)?n||0:+n;return e.containerQueries(s).up(l)}function yj(e){const t=(l,f)=>l.replace("@media",f?`@container ${f}`:"@container");function r(l,f){l.up=(...a)=>t(e.breakpoints.up(...a),f),l.down=(...a)=>t(e.breakpoints.down(...a),f),l.between=(...a)=>t(e.breakpoints.between(...a),f),l.only=(...a)=>t(e.breakpoints.only(...a),f),l.not=(...a)=>{const y=t(e.breakpoints.not(...a),f);return y.includes("not all and")?y.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):y}}const n={},s=l=>(r(n,l),n);return r(s),{...e,containerQueries:s}}const vj={borderRadius:4};function oy(e,t){return t?Ou(e,t,{clone:!1}):e}const eb={xs:0,sm:600,md:900,lg:1200,xl:1536},m4={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${eb[e]}px)`},_j={containerQueries:e=>({up:t=>{let r=typeof t=="number"?t:eb[t]||t;return typeof r=="number"&&(r=`${r}px`),e?`@container ${e} (min-width:${r})`:`@container (min-width:${r})`}})};function pf(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const l=n.breakpoints||m4;return t.reduce((f,a,y)=>(f[l.up(l.keys[y])]=r(t[y]),f),{})}if(typeof t=="object"){const l=n.breakpoints||m4;return Object.keys(t).reduce((f,a)=>{if(mj(l.keys,a)){const y=gj(n.containerQueries?n:_j,a);y&&(f[y]=r(t[a],a))}else if(Object.keys(l.values||eb).includes(a)){const y=l.up(a);f[y]=r(t[a],a)}else{const y=a;f[y]=t[y]}return f},{})}return r(t)}function bj(e={}){var r;return((r=e.keys)==null?void 0:r.reduce((n,s)=>{const l=e.up(s);return n[l]={},n},{}))||{}}function g4(e,t){return e.reduce((r,n)=>{const s=r[n];return(!s||Object.keys(s).length===0)&&delete r[n],r},t)}function Ii(e){if(typeof e!="string")throw new Error(up(7));return e.charAt(0).toUpperCase()+e.slice(1)}function tb(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((s,l)=>s&&s[l]?s[l]:null,e);if(n!=null)return n}return t.split(".").reduce((n,s)=>n&&n[s]!=null?n[s]:null,e)}function N_(e,t,r,n=r){let s;return typeof e=="function"?s=e(r):Array.isArray(e)?s=e[r]||n:s=tb(e,r)||n,t&&(s=t(s,n,e)),s}function La(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:s}=e,l=f=>{if(f[t]==null)return null;const a=f[t],y=f.theme,v=tb(y,n)||{};return pf(f,a,P=>{let D=N_(v,s,P);return P===D&&typeof P=="string"&&(D=N_(v,s,`${t}${P==="default"?"":Ii(P)}`,P)),r===!1?D:{[r]:D}})};return l.propTypes={},l.filterProps=[t],l}function xj(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const wj={m:"margin",p:"padding"},Sj={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},y4={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Cj=xj(e=>{if(e.length>2)if(y4[e])e=y4[e];else return[e];const[t,r]=e.split(""),n=wj[t],s=Sj[r]||"";return Array.isArray(s)?s.map(l=>n+l):[n+s]}),_E=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],bE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[..._E,...bE];function av(e,t,r,n){const s=tb(e,t,!0)??r;return typeof s=="number"||typeof s=="string"?l=>typeof l=="string"?l:typeof s=="string"?s.startsWith("var(")&&l===0?0:s.startsWith("var(")&&l===1?s:`calc(${l} * ${s})`:s*l:Array.isArray(s)?l=>{if(typeof l=="string")return l;const f=Math.abs(l),a=s[f];return l>=0?a:typeof a=="number"?-a:typeof a=="string"&&a.startsWith("var(")?`calc(-1 * ${a})`:`-${a}`}:typeof s=="function"?s:()=>{}}function xE(e){return av(e,"spacing",8)}function sv(e,t){return typeof t=="string"||t==null?t:e(t)}function Ej(e,t){return r=>e.reduce((n,s)=>(n[s]=sv(t,r),n),{})}function Tj(e,t,r,n){if(!t.includes(r))return null;const s=Cj(r),l=Ej(s,n),f=e[r];return pf(e,f,l)}function SR(e,t){const r=xE(e.theme);return Object.keys(e).map(n=>Tj(e,t,n,r)).reduce(oy,{})}function ma(e){return SR(e,_E)}ma.propTypes={};ma.filterProps=_E;function ga(e){return SR(e,bE)}ga.propTypes={};ga.filterProps=bE;function CR(e=8,t=xE({spacing:e})){if(e.mui)return e;const r=(...n)=>(n.length===0?[1]:n).map(l=>{const f=t(l);return typeof f=="number"?`${f}px`:f}).join(" ");return r.mui=!0,r}function rb(...e){const t=e.reduce((n,s)=>(s.filterProps.forEach(l=>{n[l]=s}),n),{}),r=n=>Object.keys(n).reduce((s,l)=>t[l]?oy(s,t[l](n)):s,{});return r.propTypes={},r.filterProps=e.reduce((n,s)=>n.concat(s.filterProps),[]),r}function Ju(e){return typeof e!="number"?e:`${e}px solid`}function hc(e,t){return La({prop:e,themeKey:"borders",transform:t})}const Aj=hc("border",Ju),Pj=hc("borderTop",Ju),Ij=hc("borderRight",Ju),Mj=hc("borderBottom",Ju),kj=hc("borderLeft",Ju),Lj=hc("borderColor"),Dj=hc("borderTopColor"),Rj=hc("borderRightColor"),Nj=hc("borderBottomColor"),Oj=hc("borderLeftColor"),Fj=hc("outline",Ju),Bj=hc("outlineColor"),nb=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=av(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:sv(t,n)});return pf(e,e.borderRadius,r)}return null};nb.propTypes={};nb.filterProps=["borderRadius"];rb(Aj,Pj,Ij,Mj,kj,Lj,Dj,Rj,Nj,Oj,nb,Fj,Bj);const ib=e=>{if(e.gap!==void 0&&e.gap!==null){const t=av(e.theme,"spacing",8),r=n=>({gap:sv(t,n)});return pf(e,e.gap,r)}return null};ib.propTypes={};ib.filterProps=["gap"];const ob=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=av(e.theme,"spacing",8),r=n=>({columnGap:sv(t,n)});return pf(e,e.columnGap,r)}return null};ob.propTypes={};ob.filterProps=["columnGap"];const ab=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=av(e.theme,"spacing",8),r=n=>({rowGap:sv(t,n)});return pf(e,e.rowGap,r)}return null};ab.propTypes={};ab.filterProps=["rowGap"];const zj=La({prop:"gridColumn"}),$j=La({prop:"gridRow"}),jj=La({prop:"gridAutoFlow"}),Uj=La({prop:"gridAutoColumns"}),Vj=La({prop:"gridAutoRows"}),qj=La({prop:"gridTemplateColumns"}),Gj=La({prop:"gridTemplateRows"}),Hj=La({prop:"gridTemplateAreas"}),Wj=La({prop:"gridArea"});rb(ib,ob,ab,zj,$j,jj,Uj,Vj,qj,Gj,Hj,Wj);function ng(e,t){return t==="grey"?t:e}const Zj=La({prop:"color",themeKey:"palette",transform:ng}),Xj=La({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ng}),Yj=La({prop:"backgroundColor",themeKey:"palette",transform:ng});rb(Zj,Xj,Yj);function ku(e){return e<=1&&e!==0?`${e*100}%`:e}const Kj=La({prop:"width",transform:ku}),wE=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var s,l,f,a,y;const n=((f=(l=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:l.values)==null?void 0:f[r])||eb[r];return n?((y=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:y.unit)!=="px"?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:ku(r)}};return pf(e,e.maxWidth,t)}return null};wE.filterProps=["maxWidth"];const Jj=La({prop:"minWidth",transform:ku}),Qj=La({prop:"height",transform:ku}),eU=La({prop:"maxHeight",transform:ku}),tU=La({prop:"minHeight",transform:ku});La({prop:"size",cssProperty:"width",transform:ku});La({prop:"size",cssProperty:"height",transform:ku});const rU=La({prop:"boxSizing"});rb(Kj,wE,Jj,Qj,eU,tU,rU);const lv={border:{themeKey:"borders",transform:Ju},borderTop:{themeKey:"borders",transform:Ju},borderRight:{themeKey:"borders",transform:Ju},borderBottom:{themeKey:"borders",transform:Ju},borderLeft:{themeKey:"borders",transform:Ju},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ju},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:nb},color:{themeKey:"palette",transform:ng},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ng},backgroundColor:{themeKey:"palette",transform:ng},p:{style:ga},pt:{style:ga},pr:{style:ga},pb:{style:ga},pl:{style:ga},px:{style:ga},py:{style:ga},padding:{style:ga},paddingTop:{style:ga},paddingRight:{style:ga},paddingBottom:{style:ga},paddingLeft:{style:ga},paddingX:{style:ga},paddingY:{style:ga},paddingInline:{style:ga},paddingInlineStart:{style:ga},paddingInlineEnd:{style:ga},paddingBlock:{style:ga},paddingBlockStart:{style:ga},paddingBlockEnd:{style:ga},m:{style:ma},mt:{style:ma},mr:{style:ma},mb:{style:ma},ml:{style:ma},mx:{style:ma},my:{style:ma},margin:{style:ma},marginTop:{style:ma},marginRight:{style:ma},marginBottom:{style:ma},marginLeft:{style:ma},marginX:{style:ma},marginY:{style:ma},marginInline:{style:ma},marginInlineStart:{style:ma},marginInlineEnd:{style:ma},marginBlock:{style:ma},marginBlockStart:{style:ma},marginBlockEnd:{style:ma},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ib},rowGap:{style:ab},columnGap:{style:ob},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ku},maxWidth:{style:wE},minWidth:{transform:ku},height:{transform:ku},maxHeight:{transform:ku},minHeight:{transform:ku},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function nU(...e){const t=e.reduce((n,s)=>n.concat(Object.keys(s)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function iU(e,t){return typeof e=="function"?e(t):e}function oU(){function e(r,n,s,l){const f={[r]:n,theme:s},a=l[r];if(!a)return{[r]:n};const{cssProperty:y=r,themeKey:v,transform:S,style:P}=a;if(n==null)return null;if(v==="typography"&&n==="inherit")return{[r]:n};const D=tb(s,v)||{};return P?P(f):pf(f,n,F=>{let z=N_(D,S,F);return F===z&&typeof F=="string"&&(z=N_(D,S,`${r}${F==="default"?"":Ii(F)}`,F)),y===!1?z:{[y]:z}})}function t(r){const{sx:n,theme:s={},nested:l}=r||{};if(!n)return null;const f=s.unstable_sxConfig??lv;function a(y){let v=y;if(typeof y=="function")v=y(s);else if(typeof y!="object")return y;if(!v)return null;const S=bj(s.breakpoints),P=Object.keys(S);let D=S;return Object.keys(v).forEach(E=>{const F=iU(v[E],s);if(F!=null)if(typeof F=="object")if(f[E])D=oy(D,e(E,F,s,f));else{const z=pf({theme:s},F,W=>({[E]:W}));nU(z,F)?D[E]=t({sx:F,theme:s,nested:!0}):D=oy(D,z)}else D=oy(D,e(E,F,s,f))}),!l&&s.modularCssLayers?{"@layer sx":p4(s,g4(P,D))}:p4(s,g4(P,D))}return Array.isArray(n)?n.map(a):a(n)}return t}const ld=oU();ld.filterProps=["sx"];function aU(e,t){var n;const r=this;if(r.vars){if(!((n=r.colorSchemes)!=null&&n[e])||typeof r.getColorSchemeSelector!="function")return{};let s=r.getColorSchemeSelector(e);return s==="&"?t:((s.includes("data-")||s.includes("."))&&(s=`*:where(${s.replace(/\s*&$/,"")}) &`),{[s]:t})}return r.palette.mode===e?t:{}}function SE(e={},...t){const{breakpoints:r={},palette:n={},spacing:s,shape:l={},...f}=e,a=pj(r),y=CR(s);let v=Ou({breakpoints:a,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:y,shape:{...vj,...l}},f);return v=yj(v),v.applyStyles=aU,v=t.reduce((S,P)=>Ou(S,P),v),v.unstable_sxConfig={...lv,...f==null?void 0:f.unstable_sxConfig},v.unstable_sx=function(P){return ld({sx:P,theme:this})},v}function sU(e){return Object.keys(e).length===0}function CE(e=null){const t=vt.useContext(iv);return!t||sU(t)?e:t}const lU=SE();function EE(e=lU){return CE(e)}function mw(e){const t=od(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function uU({styles:e,themeId:t,defaultTheme:r={}}){const n=EE(r),s=t&&n[t]||n;let l=typeof e=="function"?e(s):e;return s.modularCssLayers&&(Array.isArray(l)?l=l.map(f=>mw(typeof f=="function"?f(s):f)):l=mw(l)),Ar.jsx(vR,{styles:l})}const cU=e=>{var n;const t={systemProps:{},otherProps:{}},r=((n=e==null?void 0:e.theme)==null?void 0:n.unstable_sxConfig)??lv;return Object.keys(e).forEach(s=>{r[s]?t.systemProps[s]=e[s]:t.otherProps[s]=e[s]}),t};function hU(e){const{sx:t,...r}=e,{systemProps:n,otherProps:s}=cU(r);let l;return Array.isArray(t)?l=[n,...t]:typeof t=="function"?l=(...f)=>{const a=t(...f);return xh(a)?{...n,...a}:n}:l={...n,...t},{...s,sx:l}}const v4=e=>e,fU=()=>{let e=v4;return{configure(t){e=t},generate(t){return e(t)},reset(){e=v4}}},TE=fU();function ER(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=ER(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function so(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=ER(e))&&(n&&(n+=" "),n+=t);return n}function TR(e={}){const{themeId:t,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:s}=e,l=_R("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(ld);return vt.forwardRef(function(y,v){const S=EE(r),{className:P,component:D="div",...E}=hU(y);return Ar.jsx(l,{as:D,ref:v,className:so(P,s?s(n):n),theme:t&&S[t]||S,...E})})}const dU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Vu(e,t,r="Mui"){const n=dU[t];return n?`${r}-${n}`:`${TE.generate(e)}-${t}`}function wl(e,t,r="Mui"){const n={};return t.forEach(s=>{n[s]=Vu(e,s,r)}),n}const pU=wl("MuiBox",["root"]),mU=TR({defaultClassName:pU.root,generateClassName:TE.generate});function AR(e){const{variants:t,...r}=e,n={variants:t,style:od(r),isProcessed:!0};return n.style===r||t&&t.forEach(s=>{typeof s.style!="function"&&(s.style=od(s.style))}),n}const gU=SE();function gw(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Xd(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}function yU(e){return e?(t,r)=>r[e]:null}function vU(e,t,r){e.theme=bU(e.theme)?r:e.theme[t]||e.theme}function Y1(e,t,r){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(s=>Y1(e,s,r));if(Array.isArray(n==null?void 0:n.variants)){let s;if(n.isProcessed)s=r?Xd(n.style,r):n.style;else{const{variants:l,...f}=n;s=r?Xd(od(f),r):f}return PR(e,n.variants,[s],r)}return n!=null&&n.isProcessed?r?Xd(od(n.style),r):n.style:r?Xd(od(n),r):n}function PR(e,t,r=[],n=void 0){var l;let s;e:for(let f=0;f<t.length;f+=1){const a=t[f];if(typeof a.props=="function"){if(s??(s={...e,...e.ownerState,ownerState:e.ownerState}),!a.props(s))continue}else for(const y in a.props)if(e[y]!==a.props[y]&&((l=e.ownerState)==null?void 0:l[y])!==a.props[y])continue e;typeof a.style=="function"?(s??(s={...e,...e.ownerState,ownerState:e.ownerState}),r.push(n?Xd(od(a.style(s)),n):a.style(s))):r.push(n?Xd(od(a.style),n):a.style)}return r}function IR(e={}){const{themeId:t,defaultTheme:r=gU,rootShouldForwardProp:n=gw,slotShouldForwardProp:s=gw}=e;function l(a){vU(a,t,r)}return(a,y={})=>{cj(a,de=>de.filter(be=>be!==ld));const{name:v,slot:S,skipVariantsResolver:P,skipSx:D,overridesResolver:E=yU(wU(S)),...F}=y,z=v&&v.startsWith("Mui")||S?"components":"custom",W=P!==void 0?P:S&&S!=="Root"&&S!=="root"||!1,$=D||!1;let Y=gw;S==="Root"||S==="root"?Y=n:S?Y=s:xU(a)&&(Y=void 0);const Q=_R(a,{shouldForwardProp:Y,label:_U(),...F}),K=de=>{if(de.__emotion_real===de)return de;if(typeof de=="function")return function(me){return Y1(me,de,me.theme.modularCssLayers?z:void 0)};if(xh(de)){const be=AR(de);return function(ve){return be.variants?Y1(ve,be,ve.theme.modularCssLayers?z:void 0):ve.theme.modularCssLayers?Xd(be.style,z):be.style}}return de},xe=(...de)=>{const be=[],me=de.map(K),ve=[];if(be.push(l),v&&E&&ve.push(function(Ae){var At,Ze;const lt=(Ze=(At=Ae.theme.components)==null?void 0:At[v])==null?void 0:Ze.styleOverrides;if(!lt)return null;const pt={};for(const tt in lt)pt[tt]=Y1(Ae,lt[tt],Ae.theme.modularCssLayers?"theme":void 0);return E(Ae,pt)}),v&&!W&&ve.push(function(Ae){var pt,At;const we=Ae.theme,lt=(At=(pt=we==null?void 0:we.components)==null?void 0:pt[v])==null?void 0:At.variants;return lt?PR(Ae,lt,[],Ae.theme.modularCssLayers?"theme":void 0):null}),$||ve.push(ld),Array.isArray(me[0])){const G=me.shift(),Ae=new Array(be.length).fill(""),we=new Array(ve.length).fill("");let lt;lt=[...Ae,...G,...we],lt.raw=[...Ae,...G.raw,...we],be.unshift(lt)}const Re=[...be,...me,...ve],le=Q(...Re);return a.muiName&&(le.muiName=a.muiName),le};return Q.withConfig&&(xe.withConfig=Q.withConfig),xe}}function _U(e,t){return void 0}function bU(e){for(const t in e)return!1;return!0}function xU(e){return typeof e=="string"&&e.charCodeAt(0)>96}function wU(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const Mg=IR();function O_(e,t,r=!1){const n={...t};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const l=s;if(l==="components"||l==="slots")n[l]={...e[l],...n[l]};else if(l==="componentsProps"||l==="slotProps"){const f=e[l],a=t[l];if(!a)n[l]=f||{};else if(!f)n[l]=a;else{n[l]={...a};for(const y in f)if(Object.prototype.hasOwnProperty.call(f,y)){const v=y;n[l][v]=O_(f[v],a[v],r)}}}else l==="className"&&r&&t.className?n.className=so(e==null?void 0:e.className,t==null?void 0:t.className):l==="style"&&r&&t.style?n.style={...e==null?void 0:e.style,...t==null?void 0:t.style}:n[l]===void 0&&(n[l]=e[l])}return n}const AE=typeof window<"u"?vt.useLayoutEffect:vt.useEffect;function SU(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}function PE(e,t=0,r=1){return SU(e,t,r)}function CU(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,s)=>s<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function ud(e){if(e.type)return e;if(e.charAt(0)==="#")return ud(CU(e));const t=e.indexOf("("),r=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(r))throw new Error(up(9,e));let n=e.substring(t+1,e.length-1),s;if(r==="color"){if(n=n.split(" "),s=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(s))throw new Error(up(10,s))}else n=n.split(",");return n=n.map(l=>parseFloat(l)),{type:r,values:n,colorSpace:s}}const EU=e=>{const t=ud(e);return t.values.slice(0,3).map((r,n)=>t.type.includes("hsl")&&n!==0?`${r}%`:r).join(" ")},$0=(e,t)=>{try{return EU(e)}catch{return e}};function sb(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.includes("rgb")?n=n.map((s,l)=>l<3?parseInt(s,10):s):t.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.includes("color")?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function MR(e){e=ud(e);const{values:t}=e,r=t[0],n=t[1]/100,s=t[2]/100,l=n*Math.min(s,1-s),f=(v,S=(v+r/30)%12)=>s-l*Math.max(Math.min(S-3,9-S,1),-1);let a="rgb";const y=[Math.round(f(0)*255),Math.round(f(8)*255),Math.round(f(4)*255)];return e.type==="hsla"&&(a+="a",y.push(t[3])),sb({type:a,values:y})}function hS(e){e=ud(e);let t=e.type==="hsl"||e.type==="hsla"?ud(MR(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function TU(e,t){const r=hS(e),n=hS(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function F_(e,t){return e=ud(e),t=PE(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,sb(e)}function Bd(e,t,r){try{return F_(e,t)}catch{return e}}function lb(e,t){if(e=ud(e),t=PE(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]*=1-t;return sb(e)}function Yi(e,t,r){try{return lb(e,t)}catch{return e}}function ub(e,t){if(e=ud(e),t=PE(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.includes("color"))for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return sb(e)}function Ki(e,t,r){try{return ub(e,t)}catch{return e}}function AU(e,t=.15){return hS(e)>.5?lb(e,t):ub(e,t)}function h1(e,t,r){try{return AU(e,t)}catch{return e}}const kR=vt.createContext(null);function IE(){return vt.useContext(kR)}const PU=typeof Symbol=="function"&&Symbol.for,IU=PU?Symbol.for("mui.nested"):"__THEME_NESTED__";function MU(e,t){return typeof t=="function"?t(e):{...e,...t}}function kU(e){const{children:t,theme:r}=e,n=IE(),s=vt.useMemo(()=>{const l=n===null?{...r}:MU(n,r);return l!=null&&(l[IU]=n!==null),l},[r,n]);return Ar.jsx(kR.Provider,{value:s,children:t})}const LU=vt.createContext();function DU({value:e,...t}){return Ar.jsx(LU.Provider,{value:e??!0,...t})}const LR=vt.createContext(void 0);function RU({value:e,children:t}){return Ar.jsx(LR.Provider,{value:e,children:t})}function NU(e){const{theme:t,name:r,props:n}=e;if(!t||!t.components||!t.components[r])return n;const s=t.components[r];return s.defaultProps?O_(s.defaultProps,n,t.components.mergeClassNameAndStyle):!s.styleOverrides&&!s.variants?O_(s,n,t.components.mergeClassNameAndStyle):n}function OU({props:e,name:t}){const r=vt.useContext(LR);return NU({props:e,name:t,theme:{components:r}})}let _4=0;function FU(e){const[t,r]=vt.useState(e),n=e||t;return vt.useEffect(()=>{t==null&&(_4+=1,r(`mui-${_4}`))},[t]),n}const BU={...p5},b4=BU.useId;function ME(e){if(b4!==void 0){const t=b4();return e??t}return FU(e)}function zU(e){const t=CE(),r=ME()||"",{modularCssLayers:n}=e;let s="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!n||t!==null?s="":typeof n=="string"?s=n.replace(/mui(?!\.)/g,s):s=`@layer ${s};`,AE(()=>{var a,y;const l=document.querySelector("head");if(!l)return;const f=l.firstChild;if(s){if(f&&((a=f.hasAttribute)!=null&&a.call(f,"data-mui-layer-order"))&&f.getAttribute("data-mui-layer-order")===r)return;const v=document.createElement("style");v.setAttribute("data-mui-layer-order",r),v.textContent=s,l.prepend(v)}else(y=l.querySelector(`style[data-mui-layer-order="${r}"]`))==null||y.remove()},[s,r]),s?Ar.jsx(uU,{styles:s}):null}const x4={};function w4(e,t,r,n=!1){return vt.useMemo(()=>{const s=e&&t[e]||t;if(typeof r=="function"){const l=r(s),f=e?{...t,[e]:l}:l;return n?()=>f:f}return e?{...t,[e]:r}:{...t,...r}},[e,t,r,n])}function DR(e){const{children:t,theme:r,themeId:n}=e,s=CE(x4),l=IE()||x4,f=w4(n,s,r),a=w4(n,l,r,!0),y=(n?f[n]:f).direction==="rtl",v=zU(f);return Ar.jsx(kU,{theme:a,children:Ar.jsx(iv.Provider,{value:f,children:Ar.jsx(DU,{value:y,children:Ar.jsxs(RU,{value:n?f[n].components:f.components,children:[v,t]})})})})}const S4={theme:void 0};function $U(e){let t,r;return function(s){let l=t;return(l===void 0||s.theme!==r)&&(S4.theme=s.theme,l=AR(e(S4)),t=l,r=s.theme),l}}const kE="mode",LE="color-scheme",jU="data-color-scheme";function UU(e){const{defaultMode:t="system",defaultLightColorScheme:r="light",defaultDarkColorScheme:n="dark",modeStorageKey:s=kE,colorSchemeStorageKey:l=LE,attribute:f=jU,colorSchemeNode:a="document.documentElement",nonce:y}=e||{};let v="",S=f;if(f==="class"&&(S=".%s"),f==="data"&&(S="[data-%s]"),S.startsWith(".")){const D=S.substring(1);v+=`${a}.classList.remove('${D}'.replace('%s', light), '${D}'.replace('%s', dark));
      ${a}.classList.add('${D}'.replace('%s', colorScheme));`}const P=S.match(/\[([^[\]]+)\]/);if(P){const[D,E]=P[1].split("=");E||(v+=`${a}.removeAttribute('${D}'.replace('%s', light));
      ${a}.removeAttribute('${D}'.replace('%s', dark));`),v+=`
      ${a}.setAttribute('${D}'.replace('%s', colorScheme), ${E?`${E}.replace('%s', colorScheme)`:'""'});`}else v+=`${a}.setAttribute('${S}', colorScheme);`;return Ar.jsx("script",{suppressHydrationWarning:!0,nonce:typeof window>"u"?y:"",dangerouslySetInnerHTML:{__html:`(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('${s}') || '${t}';
  const dark = localStorage.getItem('${l}-dark') || '${n}';
  const light = localStorage.getItem('${l}-light') || '${r}';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    ${v}
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function VU(){}const qU=({key:e,storageWindow:t})=>(!t&&typeof window<"u"&&(t=window),{get(r){if(typeof window>"u")return;if(!t)return r;let n;try{n=t.localStorage.getItem(e)}catch{}return n||r},set:r=>{if(t)try{t.localStorage.setItem(e,r)}catch{}},subscribe:r=>{if(!t)return VU;const n=s=>{const l=s.newValue;s.key===e&&r(l)};return t.addEventListener("storage",n),()=>{t.removeEventListener("storage",n)}}});function yw(){}function C4(e){if(typeof window<"u"&&typeof window.matchMedia=="function"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function RR(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function GU(e){return RR(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function HU(e){const{defaultMode:t="light",defaultLightColorScheme:r,defaultDarkColorScheme:n,supportedColorSchemes:s=[],modeStorageKey:l=kE,colorSchemeStorageKey:f=LE,storageWindow:a=typeof window>"u"?void 0:window,storageManager:y=qU,noSsr:v=!1}=e,S=s.join(","),P=s.length>1,D=vt.useMemo(()=>y==null?void 0:y({key:l,storageWindow:a}),[y,l,a]),E=vt.useMemo(()=>y==null?void 0:y({key:`${f}-light`,storageWindow:a}),[y,f,a]),F=vt.useMemo(()=>y==null?void 0:y({key:`${f}-dark`,storageWindow:a}),[y,f,a]),[z,W]=vt.useState(()=>{const me=(D==null?void 0:D.get(t))||t,ve=(E==null?void 0:E.get(r))||r,Re=(F==null?void 0:F.get(n))||n;return{mode:me,systemMode:C4(me),lightColorScheme:ve,darkColorScheme:Re}}),[$,Y]=vt.useState(v||!P);vt.useEffect(()=>{Y(!0)},[]);const Q=GU(z),K=vt.useCallback(me=>{W(ve=>{if(me===ve.mode)return ve;const Re=me??t;return D==null||D.set(Re),{...ve,mode:Re,systemMode:C4(Re)}})},[D,t]),xe=vt.useCallback(me=>{me?typeof me=="string"?me&&!S.includes(me)?console.error(`\`${me}\` does not exist in \`theme.colorSchemes\`.`):W(ve=>{const Re={...ve};return RR(ve,le=>{le==="light"&&(E==null||E.set(me),Re.lightColorScheme=me),le==="dark"&&(F==null||F.set(me),Re.darkColorScheme=me)}),Re}):W(ve=>{const Re={...ve},le=me.light===null?r:me.light,G=me.dark===null?n:me.dark;return le&&(S.includes(le)?(Re.lightColorScheme=le,E==null||E.set(le)):console.error(`\`${le}\` does not exist in \`theme.colorSchemes\`.`)),G&&(S.includes(G)?(Re.darkColorScheme=G,F==null||F.set(G)):console.error(`\`${G}\` does not exist in \`theme.colorSchemes\`.`)),Re}):W(ve=>(E==null||E.set(r),F==null||F.set(n),{...ve,lightColorScheme:r,darkColorScheme:n}))},[S,E,F,r,n]),de=vt.useCallback(me=>{z.mode==="system"&&W(ve=>{const Re=me!=null&&me.matches?"dark":"light";return ve.systemMode===Re?ve:{...ve,systemMode:Re}})},[z.mode]),be=vt.useRef(de);return be.current=de,vt.useEffect(()=>{if(typeof window.matchMedia!="function"||!P)return;const me=(...Re)=>be.current(...Re),ve=window.matchMedia("(prefers-color-scheme: dark)");return ve.addListener(me),me(ve),()=>{ve.removeListener(me)}},[P]),vt.useEffect(()=>{if(P){const me=(D==null?void 0:D.subscribe(le=>{(!le||["light","dark","system"].includes(le))&&K(le||t)}))||yw,ve=(E==null?void 0:E.subscribe(le=>{(!le||S.match(le))&&xe({light:le})}))||yw,Re=(F==null?void 0:F.subscribe(le=>{(!le||S.match(le))&&xe({dark:le})}))||yw;return()=>{me(),ve(),Re()}}},[xe,K,S,t,a,P,D,E,F]),{...z,mode:$?z.mode:void 0,systemMode:$?z.systemMode:void 0,colorScheme:$?Q:void 0,setMode:K,setColorScheme:xe}}const WU="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function ZU(e){const{themeId:t,theme:r={},modeStorageKey:n=kE,colorSchemeStorageKey:s=LE,disableTransitionOnChange:l=!1,defaultColorScheme:f,resolveTheme:a}=e,y={allColorSchemes:[],colorScheme:void 0,darkColorScheme:void 0,lightColorScheme:void 0,mode:void 0,setColorScheme:()=>{},setMode:()=>{},systemMode:void 0},v=vt.createContext(void 0),S=()=>vt.useContext(v)||y,P={},D={};function E($){var Jr,An,en,Ur;const{children:Y,theme:Q,modeStorageKey:K=n,colorSchemeStorageKey:xe=s,disableTransitionOnChange:de=l,storageManager:be,storageWindow:me=typeof window>"u"?void 0:window,documentNode:ve=typeof document>"u"?void 0:document,colorSchemeNode:Re=typeof document>"u"?void 0:document.documentElement,disableNestedContext:le=!1,disableStyleSheetGeneration:G=!1,defaultMode:Ae="system",forceThemeRerender:we=!1,noSsr:lt}=$,pt=vt.useRef(!1),At=IE(),Ze=vt.useContext(v),tt=!!Ze&&!le,Ot=vt.useMemo(()=>Q||(typeof r=="function"?r():r),[Q]),St=Ot[t],ne=St||Ot,{colorSchemes:Ee=P,components:Ne=D,cssVarPrefix:qe}=ne,Je=Object.keys(Ee).filter(Br=>!!Ee[Br]).join(","),gt=vt.useMemo(()=>Je.split(","),[Je]),bt=typeof f=="string"?f:f.light,ft=typeof f=="string"?f:f.dark,Ct=Ee[bt]&&Ee[ft]?Ae:((An=(Jr=Ee[ne.defaultColorScheme])==null?void 0:Jr.palette)==null?void 0:An.mode)||((en=ne.palette)==null?void 0:en.mode),{mode:Ut,setMode:gr,systemMode:rr,lightColorScheme:It,darkColorScheme:Ue,colorScheme:Lr,setColorScheme:Nr}=HU({supportedColorSchemes:gt,defaultLightColorScheme:bt,defaultDarkColorScheme:ft,modeStorageKey:K,colorSchemeStorageKey:xe,defaultMode:Ct,storageManager:be,storageWindow:me,noSsr:lt});let Pr=Ut,Ht=Lr;tt&&(Pr=Ze.mode,Ht=Ze.colorScheme);let Er=Ht||ne.defaultColorScheme;ne.vars&&!we&&(Er=ne.defaultColorScheme);const vr=vt.useMemo(()=>{var ot;const Br=((ot=ne.generateThemeVars)==null?void 0:ot.call(ne))||ne.vars,_r={...ne,components:Ne,colorSchemes:Ee,cssVarPrefix:qe,vars:Br};if(typeof _r.generateSpacing=="function"&&(_r.spacing=_r.generateSpacing()),Er){const ae=Ee[Er];ae&&typeof ae=="object"&&Object.keys(ae).forEach(oe=>{ae[oe]&&typeof ae[oe]=="object"?_r[oe]={..._r[oe],...ae[oe]}:_r[oe]=ae[oe]})}return a?a(_r):_r},[ne,Er,Ne,Ee,qe]),dr=ne.colorSchemeSelector;AE(()=>{if(Ht&&Re&&dr&&dr!=="media"){const Br=dr;let _r=dr;if(Br==="class"&&(_r=".%s"),Br==="data"&&(_r="[data-%s]"),Br!=null&&Br.startsWith("data-")&&!Br.includes("%s")&&(_r=`[${Br}="%s"]`),_r.startsWith("."))Re.classList.remove(...gt.map(ot=>_r.substring(1).replace("%s",ot))),Re.classList.add(_r.substring(1).replace("%s",Ht));else{const ot=_r.replace("%s",Ht).match(/\[([^\]]+)\]/);if(ot){const[ae,oe]=ot[1].split("=");oe||gt.forEach(ye=>{Re.removeAttribute(ae.replace(Ht,ye))}),Re.setAttribute(ae,oe?oe.replace(/"|'/g,""):"")}else Re.setAttribute(_r,Ht)}}},[Ht,dr,Re,gt]),vt.useEffect(()=>{let Br;if(de&&pt.current&&ve){const _r=ve.createElement("style");_r.appendChild(ve.createTextNode(WU)),ve.head.appendChild(_r),window.getComputedStyle(ve.body),Br=setTimeout(()=>{ve.head.removeChild(_r)},1)}return()=>{clearTimeout(Br)}},[Ht,de,ve]),vt.useEffect(()=>(pt.current=!0,()=>{pt.current=!1}),[]);const qr=vt.useMemo(()=>({allColorSchemes:gt,colorScheme:Ht,darkColorScheme:Ue,lightColorScheme:It,mode:Pr,setColorScheme:Nr,setMode:gr,systemMode:rr}),[gt,Ht,Ue,It,Pr,Nr,gr,rr,vr.colorSchemeSelector]);let En=!0;(G||ne.cssVariables===!1||tt&&(At==null?void 0:At.cssVarPrefix)===qe)&&(En=!1);const cn=Ar.jsxs(vt.Fragment,{children:[Ar.jsx(DR,{themeId:St?t:void 0,theme:vr,children:Y}),En&&Ar.jsx(vR,{styles:((Ur=vr.generateStyleSheets)==null?void 0:Ur.call(vr))||[]})]});return tt?cn:Ar.jsx(v.Provider,{value:qr,children:cn})}const F=typeof f=="string"?f:f.light,z=typeof f=="string"?f:f.dark;return{CssVarsProvider:E,useColorScheme:S,getInitColorSchemeScript:$=>UU({colorSchemeStorageKey:s,defaultLightColorScheme:F,defaultDarkColorScheme:z,modeStorageKey:n,...$})}}function XU(e=""){function t(...n){if(!n.length)return"";const s=n[0];return typeof s=="string"&&!s.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${s}${t(...n.slice(1))})`:`, ${s}`}return(n,...s)=>`var(--${e?`${e}-`:""}${n}${t(...s)})`}const E4=(e,t,r,n=[])=>{let s=e;t.forEach((l,f)=>{f===t.length-1?Array.isArray(s)?s[Number(l)]=r:s&&typeof s=="object"&&(s[l]=r):s&&typeof s=="object"&&(s[l]||(s[l]=n.includes(l)?[]:{}),s=s[l])})},YU=(e,t,r)=>{function n(s,l=[],f=[]){Object.entries(s).forEach(([a,y])=>{(!r||r&&!r([...l,a]))&&y!=null&&(typeof y=="object"&&Object.keys(y).length>0?n(y,[...l,a],Array.isArray(y)?[...f,a]:f):t([...l,a],y,f))})}n(e)},KU=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>e.includes(n))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function vw(e,t){const{prefix:r,shouldSkipGeneratingVar:n}=t||{},s={},l={},f={};return YU(e,(a,y,v)=>{if((typeof y=="string"||typeof y=="number")&&(!n||!n(a,y))){const S=`--${r?`${r}-`:""}${a.join("-")}`,P=KU(a,y);Object.assign(s,{[S]:P}),E4(l,a,`var(${S})`,v),E4(f,a,`var(${S}, ${P})`,v)}},a=>a[0]==="vars"),{css:s,vars:l,varsWithDefaults:f}}function JU(e,t={}){const{getSelector:r=$,disableCssColorScheme:n,colorSchemeSelector:s,enableContrastVars:l}=t,{colorSchemes:f={},components:a,defaultColorScheme:y="light",...v}=e,{vars:S,css:P,varsWithDefaults:D}=vw(v,t);let E=D;const F={},{[y]:z,...W}=f;if(Object.entries(W||{}).forEach(([K,xe])=>{const{vars:de,css:be,varsWithDefaults:me}=vw(xe,t);E=Ou(E,me),F[K]={css:be,vars:de}}),z){const{css:K,vars:xe,varsWithDefaults:de}=vw(z,t);E=Ou(E,de),F[y]={css:K,vars:xe}}function $(K,xe){var be,me;let de=s;if(s==="class"&&(de=".%s"),s==="data"&&(de="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(de=`[${s}="%s"]`),K){if(de==="media")return e.defaultColorScheme===K?":root":{[`@media (prefers-color-scheme: ${((me=(be=f[K])==null?void 0:be.palette)==null?void 0:me.mode)||K})`]:{":root":xe}};if(de)return e.defaultColorScheme===K?`:root, ${de.replace("%s",String(K))}`:de.replace("%s",String(K))}return":root"}return{vars:E,generateThemeVars:()=>{let K={...S};return Object.entries(F).forEach(([,{vars:xe}])=>{K=Ou(K,xe)}),K},generateStyleSheets:()=>{var ve,Re;const K=[],xe=e.defaultColorScheme||"light";function de(le,G){Object.keys(G).length&&K.push(typeof le=="string"?{[le]:{...G}}:le)}de(r(void 0,{...P}),P);const{[xe]:be,...me}=F;if(be){const{css:le}=be,G=(Re=(ve=f[xe])==null?void 0:ve.palette)==null?void 0:Re.mode,Ae=!n&&G?{colorScheme:G,...le}:{...le};de(r(xe,{...Ae}),Ae)}return Object.entries(me).forEach(([le,{css:G}])=>{var lt,pt;const Ae=(pt=(lt=f[le])==null?void 0:lt.palette)==null?void 0:pt.mode,we=!n&&Ae?{colorScheme:Ae,...G}:{...G};de(r(le,{...we}),we)}),l&&K.push({":root":{"--__l-threshold":"0.7","--__l":"clamp(0, (l / var(--__l-threshold) - 1) * -infinity, 1)","--__a":"clamp(0.87, (l / var(--__l-threshold) - 1) * -infinity, 1)"}}),K}}}function QU(e){return function(r){return e==="media"?`@media (prefers-color-scheme: ${r})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${r}"] &`:e==="class"?`.${r} &`:e==="data"?`[data-${r}] &`:`${e.replace("%s",r)} &`:"&"}}function fc(e,t,r=void 0){const n={};for(const s in e){const l=e[s];let f="",a=!0;for(let y=0;y<l.length;y+=1){const v=l[y];v&&(f+=(a===!0?"":" ")+t(v),a=!1,r&&r[v]&&(f+=" "+r[v]))}n[s]=f}return n}function eV(e,t){var r,n,s;return vt.isValidElement(e)&&t.indexOf(e.type.muiName??((s=(n=(r=e.type)==null?void 0:r._payload)==null?void 0:n.value)==null?void 0:s.muiName))!==-1}const ky={black:"#000",white:"#fff"},tV={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},nm={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},im={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},E0={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},om={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},am={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},sm={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function NR(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ky.white,default:ky.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const OR=NR();function FR(){return{text:{primary:ky.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ky.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const fS=FR();function T4(e,t,r,n){const s=n.light||n,l=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=ub(e.main,s):t==="dark"&&(e.dark=lb(e.main,l)))}function A4(e,t,r,n,s){const l=s.light||s,f=s.dark||s*1.5;t[r]||(t.hasOwnProperty(n)?t[r]=t[n]:r==="light"?t.light=`color-mix(in ${e}, ${t.main}, #fff ${(l*100).toFixed(0)}%)`:r==="dark"&&(t.dark=`color-mix(in ${e}, ${t.main}, #000 ${(f*100).toFixed(0)}%)`))}function rV(e="light"){return e==="dark"?{main:om[200],light:om[50],dark:om[400]}:{main:om[700],light:om[400],dark:om[800]}}function nV(e="light"){return e==="dark"?{main:nm[200],light:nm[50],dark:nm[400]}:{main:nm[500],light:nm[300],dark:nm[700]}}function iV(e="light"){return e==="dark"?{main:im[500],light:im[300],dark:im[700]}:{main:im[700],light:im[400],dark:im[800]}}function oV(e="light"){return e==="dark"?{main:am[400],light:am[300],dark:am[700]}:{main:am[700],light:am[500],dark:am[900]}}function aV(e="light"){return e==="dark"?{main:sm[400],light:sm[300],dark:sm[700]}:{main:sm[800],light:sm[500],dark:sm[900]}}function sV(e="light"){return e==="dark"?{main:E0[400],light:E0[300],dark:E0[700]}:{main:"#ed6c02",light:E0[500],dark:E0[900]}}function lV(e){return`oklch(from ${e} var(--__l) 0 h / var(--__a))`}function DE(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2,colorSpace:s,...l}=e,f=e.primary||rV(t),a=e.secondary||nV(t),y=e.error||iV(t),v=e.info||oV(t),S=e.success||aV(t),P=e.warning||sV(t);function D(W){return s?lV(W):TU(W,fS.text.primary)>=r?fS.text.primary:OR.text.primary}const E=({color:W,name:$,mainShade:Y=500,lightShade:Q=300,darkShade:K=700})=>{if(W={...W},!W.main&&W[Y]&&(W.main=W[Y]),!W.hasOwnProperty("main"))throw new Error(up(11,$?` (${$})`:"",Y));if(typeof W.main!="string")throw new Error(up(12,$?` (${$})`:"",JSON.stringify(W.main)));return s?(A4(s,W,"light",Q,n),A4(s,W,"dark",K,n)):(T4(W,"light",Q,n),T4(W,"dark",K,n)),W.contrastText||(W.contrastText=D(W.main)),W};let F;return t==="light"?F=NR():t==="dark"&&(F=FR()),Ou({common:{...ky},mode:t,primary:E({color:f,name:"primary"}),secondary:E({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:E({color:y,name:"error"}),warning:E({color:P,name:"warning"}),info:E({color:v,name:"info"}),success:E({color:S,name:"success"}),grey:tV,contrastThreshold:r,getContrastText:D,augmentColor:E,tonalOffset:n,...F},l)}function uV(e){const t={};return Object.entries(e).forEach(n=>{const[s,l]=n;typeof l=="object"&&(t[s]=`${l.fontStyle?`${l.fontStyle} `:""}${l.fontVariant?`${l.fontVariant} `:""}${l.fontWeight?`${l.fontWeight} `:""}${l.fontStretch?`${l.fontStretch} `:""}${l.fontSize||""}${l.lineHeight?`/${l.lineHeight} `:""}${l.fontFamily||""}`)}),t}function cV(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function hV(e){return Math.round(e*1e5)/1e5}const P4={textTransform:"uppercase"},I4='"Roboto", "Helvetica", "Arial", sans-serif';function BR(e,t){const{fontFamily:r=I4,fontSize:n=14,fontWeightLight:s=300,fontWeightRegular:l=400,fontWeightMedium:f=500,fontWeightBold:a=700,htmlFontSize:y=16,allVariants:v,pxToRem:S,...P}=typeof t=="function"?t(e):t,D=n/14,E=S||(W=>`${W/y*D}rem`),F=(W,$,Y,Q,K)=>({fontFamily:r,fontWeight:W,fontSize:E($),lineHeight:Y,...r===I4?{letterSpacing:`${hV(Q/$)}em`}:{},...K,...v}),z={h1:F(s,96,1.167,-1.5),h2:F(s,60,1.2,-.5),h3:F(l,48,1.167,0),h4:F(l,34,1.235,.25),h5:F(l,24,1.334,0),h6:F(f,20,1.6,.15),subtitle1:F(l,16,1.75,.15),subtitle2:F(f,14,1.57,.1),body1:F(l,16,1.5,.15),body2:F(l,14,1.43,.15),button:F(f,14,1.75,.4,P4),caption:F(l,12,1.66,.4),overline:F(l,12,2.66,1,P4),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ou({htmlFontSize:y,pxToRem:E,fontFamily:r,fontSize:n,fontWeightLight:s,fontWeightRegular:l,fontWeightMedium:f,fontWeightBold:a,...z},P,{clone:!1})}const fV=.2,dV=.14,pV=.12;function Go(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${fV})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${dV})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${pV})`].join(",")}const mV=["none",Go(0,2,1,-1,0,1,1,0,0,1,3,0),Go(0,3,1,-2,0,2,2,0,0,1,5,0),Go(0,3,3,-2,0,3,4,0,0,1,8,0),Go(0,2,4,-1,0,4,5,0,0,1,10,0),Go(0,3,5,-1,0,5,8,0,0,1,14,0),Go(0,3,5,-1,0,6,10,0,0,1,18,0),Go(0,4,5,-2,0,7,10,1,0,2,16,1),Go(0,5,5,-3,0,8,10,1,0,3,14,2),Go(0,5,6,-3,0,9,12,1,0,3,16,2),Go(0,6,6,-3,0,10,14,1,0,4,18,3),Go(0,6,7,-4,0,11,15,1,0,4,20,3),Go(0,7,8,-4,0,12,17,2,0,5,22,4),Go(0,7,8,-4,0,13,19,2,0,5,24,4),Go(0,7,9,-4,0,14,21,2,0,5,26,4),Go(0,8,9,-5,0,15,22,2,0,6,28,5),Go(0,8,10,-5,0,16,24,2,0,6,30,5),Go(0,8,11,-5,0,17,26,2,0,6,32,5),Go(0,9,11,-5,0,18,28,2,0,7,34,6),Go(0,9,12,-6,0,19,29,2,0,7,36,6),Go(0,10,13,-6,0,20,31,3,0,8,38,7),Go(0,10,13,-6,0,21,33,3,0,8,40,7),Go(0,10,14,-6,0,22,35,3,0,8,42,7),Go(0,11,14,-7,0,23,36,3,0,9,44,8),Go(0,11,15,-7,0,24,38,3,0,9,46,8)],gV={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yV={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function M4(e){return`${Math.round(e)}ms`}function vV(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function _V(e){const t={...gV,...e.easing},r={...yV,...e.duration};return{getAutoHeightDuration:vV,create:(s=["all"],l={})=>{const{duration:f=r.standard,easing:a=t.easeInOut,delay:y=0,...v}=l;return(Array.isArray(s)?s:[s]).map(S=>`${S} ${typeof f=="string"?f:M4(f)} ${a} ${typeof y=="string"?y:M4(y)}`).join(",")},...e,easing:t,duration:r}}const bV={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function xV(e){return xh(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function zR(e={}){const t={...e};function r(n){const s=Object.entries(n);for(let l=0;l<s.length;l++){const[f,a]=s[l];!xV(a)||f.startsWith("unstable_")?delete n[f]:xh(a)&&(n[f]={...a},r(n[f]))}}return r(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function k4(e){return typeof e=="number"?`${(e*100).toFixed(0)}%`:`calc((${e}) * 100%)`}const wV=e=>{if(!Number.isNaN(+e))return+e;const t=e.match(/\d*\.?\d+/g);if(!t)return 0;let r=0;for(let n=0;n<t.length;n+=1)r+=+t[n];return r};function SV(e){Object.assign(e,{alpha(t,r){const n=this||e;return n.colorSpace?`oklch(from ${t} l c h / ${typeof r=="string"?`calc(${r})`:r})`:n.vars?`rgba(${t.replace(/var\(--([^,\s)]+)(?:,[^)]+)?\)+/g,"var(--$1Channel)")} / ${typeof r=="string"?`calc(${r})`:r})`:F_(t,wV(r))},lighten(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #fff ${k4(r)})`:ub(t,r)},darken(t,r){const n=this||e;return n.colorSpace?`color-mix(in ${n.colorSpace}, ${t}, #000 ${k4(r)})`:lb(t,r)}})}function dS(e={},...t){const{breakpoints:r,mixins:n={},spacing:s,palette:l={},transitions:f={},typography:a={},shape:y,colorSpace:v,...S}=e;if(e.vars&&e.generateThemeVars===void 0)throw new Error(up(20));const P=DE({...l,colorSpace:v}),D=SE(e);let E=Ou(D,{mixins:cV(D.breakpoints,n),palette:P,shadows:mV.slice(),typography:BR(P,a),transitions:_V(f),zIndex:{...bV}});return E=Ou(E,S),E=t.reduce((F,z)=>Ou(F,z),E),E.unstable_sxConfig={...lv,...S==null?void 0:S.unstable_sxConfig},E.unstable_sx=function(z){return ld({sx:z,theme:this})},E.toRuntimeSource=zR,SV(E),E}function pS(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const CV=[...Array(25)].map((e,t)=>{if(t===0)return"none";const r=pS(t);return`linear-gradient(rgba(255 255 255 / ${r}), rgba(255 255 255 / ${r}))`});function $R(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function jR(e){return e==="dark"?CV:[]}function EV(e){const{palette:t={mode:"light"},opacity:r,overlays:n,colorSpace:s,...l}=e,f=DE({...t,colorSpace:s});return{palette:f,opacity:{...$R(f.mode),...r},overlays:n||jR(f.mode),...l}}function TV(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|modularCssLayers|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const AV=e=>[...[...Array(25)].map((t,r)=>`--${e?`${e}-`:""}overlays-${r}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],PV=e=>(t,r)=>{const n=e.rootSelector||":root",s=e.colorSchemeSelector;let l=s;if(s==="class"&&(l=".%s"),s==="data"&&(l="[data-%s]"),s!=null&&s.startsWith("data-")&&!s.includes("%s")&&(l=`[${s}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const f={};return AV(e.cssVarPrefix).forEach(a=>{f[a]=r[a],delete r[a]}),l==="media"?{[n]:r,"@media (prefers-color-scheme: dark)":{[n]:f}}:l?{[l.replace("%s",t)]:f,[`${n}, ${l.replace("%s",t)}`]:r}:{[n]:{...r,...f}}}if(l&&l!=="media")return`${n}, ${l.replace("%s",String(t))}`}else if(t){if(l==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[n]:r}};if(l)return l.replace("%s",String(t))}return n};function IV(e,t){t.forEach(r=>{e[r]||(e[r]={})})}function Yt(e,t,r){!e[t]&&r&&(e[t]=r)}function j0(e){return typeof e!="string"||!e.startsWith("hsl")?e:MR(e)}function Wh(e,t){`${t}Channel`in e||(e[`${t}Channel`]=$0(j0(e[t])))}function MV(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const dh=e=>{try{return e()}catch{}},kV=(e="mui")=>XU(e);function _w(e,t,r,n,s){if(!r)return;r=r===!0?{}:r;const l=s==="dark"?"dark":"light";if(!n){t[s]=EV({...r,palette:{mode:l,...r==null?void 0:r.palette},colorSpace:e});return}const{palette:f,...a}=dS({...n,palette:{mode:l,...r==null?void 0:r.palette},colorSpace:e});return t[s]={...r,palette:f,opacity:{...$R(l),...r==null?void 0:r.opacity},overlays:(r==null?void 0:r.overlays)||jR(l)},a}function LV(e={},...t){const{colorSchemes:r={light:!0},defaultColorScheme:n,disableCssColorScheme:s=!1,cssVarPrefix:l="mui",nativeColor:f=!1,shouldSkipGeneratingVar:a=TV,colorSchemeSelector:y=r.light&&r.dark?"media":void 0,rootSelector:v=":root",...S}=e,P=Object.keys(r)[0],D=n||(r.light&&P!=="light"?"light":P),E=kV(l),{[D]:F,light:z,dark:W,...$}=r,Y={...$};let Q=F;if((D==="dark"&&!("dark"in r)||D==="light"&&!("light"in r))&&(Q=!0),!Q)throw new Error(up(21,D));let K;f&&(K="oklch");const xe=_w(K,Y,Q,S,D);z&&!Y.light&&_w(K,Y,z,void 0,"light"),W&&!Y.dark&&_w(K,Y,W,void 0,"dark");let de={defaultColorScheme:D,...xe,cssVarPrefix:l,colorSchemeSelector:y,rootSelector:v,getCssVar:E,colorSchemes:Y,font:{...uV(xe.typography),...xe.font},spacing:MV(S.spacing)};Object.keys(de.colorSchemes).forEach(le=>{const G=de.colorSchemes[le].palette,Ae=lt=>{const pt=lt.split("-"),At=pt[1],Ze=pt[2];return E(lt,G[At][Ze])};G.mode==="light"&&(Yt(G.common,"background","#fff"),Yt(G.common,"onBackground","#000")),G.mode==="dark"&&(Yt(G.common,"background","#000"),Yt(G.common,"onBackground","#fff"));function we(lt,pt,At){if(K){let Ze;return lt===Bd&&(Ze=`transparent ${((1-At)*100).toFixed(0)}%`),lt===Yi&&(Ze=`#000 ${(At*100).toFixed(0)}%`),lt===Ki&&(Ze=`#fff ${(At*100).toFixed(0)}%`),`color-mix(in ${K}, ${pt}, ${Ze})`}return lt(pt,At)}if(IV(G,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),G.mode==="light"){Yt(G.Alert,"errorColor",we(Yi,G.error.light,.6)),Yt(G.Alert,"infoColor",we(Yi,G.info.light,.6)),Yt(G.Alert,"successColor",we(Yi,G.success.light,.6)),Yt(G.Alert,"warningColor",we(Yi,G.warning.light,.6)),Yt(G.Alert,"errorFilledBg",Ae("palette-error-main")),Yt(G.Alert,"infoFilledBg",Ae("palette-info-main")),Yt(G.Alert,"successFilledBg",Ae("palette-success-main")),Yt(G.Alert,"warningFilledBg",Ae("palette-warning-main")),Yt(G.Alert,"errorFilledColor",dh(()=>G.getContrastText(G.error.main))),Yt(G.Alert,"infoFilledColor",dh(()=>G.getContrastText(G.info.main))),Yt(G.Alert,"successFilledColor",dh(()=>G.getContrastText(G.success.main))),Yt(G.Alert,"warningFilledColor",dh(()=>G.getContrastText(G.warning.main))),Yt(G.Alert,"errorStandardBg",we(Ki,G.error.light,.9)),Yt(G.Alert,"infoStandardBg",we(Ki,G.info.light,.9)),Yt(G.Alert,"successStandardBg",we(Ki,G.success.light,.9)),Yt(G.Alert,"warningStandardBg",we(Ki,G.warning.light,.9)),Yt(G.Alert,"errorIconColor",Ae("palette-error-main")),Yt(G.Alert,"infoIconColor",Ae("palette-info-main")),Yt(G.Alert,"successIconColor",Ae("palette-success-main")),Yt(G.Alert,"warningIconColor",Ae("palette-warning-main")),Yt(G.AppBar,"defaultBg",Ae("palette-grey-100")),Yt(G.Avatar,"defaultBg",Ae("palette-grey-400")),Yt(G.Button,"inheritContainedBg",Ae("palette-grey-300")),Yt(G.Button,"inheritContainedHoverBg",Ae("palette-grey-A100")),Yt(G.Chip,"defaultBorder",Ae("palette-grey-400")),Yt(G.Chip,"defaultAvatarColor",Ae("palette-grey-700")),Yt(G.Chip,"defaultIconColor",Ae("palette-grey-700")),Yt(G.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Yt(G.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Yt(G.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Yt(G.LinearProgress,"primaryBg",we(Ki,G.primary.main,.62)),Yt(G.LinearProgress,"secondaryBg",we(Ki,G.secondary.main,.62)),Yt(G.LinearProgress,"errorBg",we(Ki,G.error.main,.62)),Yt(G.LinearProgress,"infoBg",we(Ki,G.info.main,.62)),Yt(G.LinearProgress,"successBg",we(Ki,G.success.main,.62)),Yt(G.LinearProgress,"warningBg",we(Ki,G.warning.main,.62)),Yt(G.Skeleton,"bg",K?we(Bd,G.text.primary,.11):`rgba(${Ae("palette-text-primaryChannel")} / 0.11)`),Yt(G.Slider,"primaryTrack",we(Ki,G.primary.main,.62)),Yt(G.Slider,"secondaryTrack",we(Ki,G.secondary.main,.62)),Yt(G.Slider,"errorTrack",we(Ki,G.error.main,.62)),Yt(G.Slider,"infoTrack",we(Ki,G.info.main,.62)),Yt(G.Slider,"successTrack",we(Ki,G.success.main,.62)),Yt(G.Slider,"warningTrack",we(Ki,G.warning.main,.62));const lt=K?we(Yi,G.background.default,.6825):h1(G.background.default,.8);Yt(G.SnackbarContent,"bg",lt),Yt(G.SnackbarContent,"color",dh(()=>K?fS.text.primary:G.getContrastText(lt))),Yt(G.SpeedDialAction,"fabHoverBg",h1(G.background.paper,.15)),Yt(G.StepConnector,"border",Ae("palette-grey-400")),Yt(G.StepContent,"border",Ae("palette-grey-400")),Yt(G.Switch,"defaultColor",Ae("palette-common-white")),Yt(G.Switch,"defaultDisabledColor",Ae("palette-grey-100")),Yt(G.Switch,"primaryDisabledColor",we(Ki,G.primary.main,.62)),Yt(G.Switch,"secondaryDisabledColor",we(Ki,G.secondary.main,.62)),Yt(G.Switch,"errorDisabledColor",we(Ki,G.error.main,.62)),Yt(G.Switch,"infoDisabledColor",we(Ki,G.info.main,.62)),Yt(G.Switch,"successDisabledColor",we(Ki,G.success.main,.62)),Yt(G.Switch,"warningDisabledColor",we(Ki,G.warning.main,.62)),Yt(G.TableCell,"border",we(Ki,we(Bd,G.divider,1),.88)),Yt(G.Tooltip,"bg",we(Bd,G.grey[700],.92))}if(G.mode==="dark"){Yt(G.Alert,"errorColor",we(Ki,G.error.light,.6)),Yt(G.Alert,"infoColor",we(Ki,G.info.light,.6)),Yt(G.Alert,"successColor",we(Ki,G.success.light,.6)),Yt(G.Alert,"warningColor",we(Ki,G.warning.light,.6)),Yt(G.Alert,"errorFilledBg",Ae("palette-error-dark")),Yt(G.Alert,"infoFilledBg",Ae("palette-info-dark")),Yt(G.Alert,"successFilledBg",Ae("palette-success-dark")),Yt(G.Alert,"warningFilledBg",Ae("palette-warning-dark")),Yt(G.Alert,"errorFilledColor",dh(()=>G.getContrastText(G.error.dark))),Yt(G.Alert,"infoFilledColor",dh(()=>G.getContrastText(G.info.dark))),Yt(G.Alert,"successFilledColor",dh(()=>G.getContrastText(G.success.dark))),Yt(G.Alert,"warningFilledColor",dh(()=>G.getContrastText(G.warning.dark))),Yt(G.Alert,"errorStandardBg",we(Yi,G.error.light,.9)),Yt(G.Alert,"infoStandardBg",we(Yi,G.info.light,.9)),Yt(G.Alert,"successStandardBg",we(Yi,G.success.light,.9)),Yt(G.Alert,"warningStandardBg",we(Yi,G.warning.light,.9)),Yt(G.Alert,"errorIconColor",Ae("palette-error-main")),Yt(G.Alert,"infoIconColor",Ae("palette-info-main")),Yt(G.Alert,"successIconColor",Ae("palette-success-main")),Yt(G.Alert,"warningIconColor",Ae("palette-warning-main")),Yt(G.AppBar,"defaultBg",Ae("palette-grey-900")),Yt(G.AppBar,"darkBg",Ae("palette-background-paper")),Yt(G.AppBar,"darkColor",Ae("palette-text-primary")),Yt(G.Avatar,"defaultBg",Ae("palette-grey-600")),Yt(G.Button,"inheritContainedBg",Ae("palette-grey-800")),Yt(G.Button,"inheritContainedHoverBg",Ae("palette-grey-700")),Yt(G.Chip,"defaultBorder",Ae("palette-grey-700")),Yt(G.Chip,"defaultAvatarColor",Ae("palette-grey-300")),Yt(G.Chip,"defaultIconColor",Ae("palette-grey-300")),Yt(G.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Yt(G.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Yt(G.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Yt(G.LinearProgress,"primaryBg",we(Yi,G.primary.main,.5)),Yt(G.LinearProgress,"secondaryBg",we(Yi,G.secondary.main,.5)),Yt(G.LinearProgress,"errorBg",we(Yi,G.error.main,.5)),Yt(G.LinearProgress,"infoBg",we(Yi,G.info.main,.5)),Yt(G.LinearProgress,"successBg",we(Yi,G.success.main,.5)),Yt(G.LinearProgress,"warningBg",we(Yi,G.warning.main,.5)),Yt(G.Skeleton,"bg",K?we(Bd,G.text.primary,.13):`rgba(${Ae("palette-text-primaryChannel")} / 0.13)`),Yt(G.Slider,"primaryTrack",we(Yi,G.primary.main,.5)),Yt(G.Slider,"secondaryTrack",we(Yi,G.secondary.main,.5)),Yt(G.Slider,"errorTrack",we(Yi,G.error.main,.5)),Yt(G.Slider,"infoTrack",we(Yi,G.info.main,.5)),Yt(G.Slider,"successTrack",we(Yi,G.success.main,.5)),Yt(G.Slider,"warningTrack",we(Yi,G.warning.main,.5));const lt=K?we(Ki,G.background.default,.985):h1(G.background.default,.98);Yt(G.SnackbarContent,"bg",lt),Yt(G.SnackbarContent,"color",dh(()=>K?OR.text.primary:G.getContrastText(lt))),Yt(G.SpeedDialAction,"fabHoverBg",h1(G.background.paper,.15)),Yt(G.StepConnector,"border",Ae("palette-grey-600")),Yt(G.StepContent,"border",Ae("palette-grey-600")),Yt(G.Switch,"defaultColor",Ae("palette-grey-300")),Yt(G.Switch,"defaultDisabledColor",Ae("palette-grey-600")),Yt(G.Switch,"primaryDisabledColor",we(Yi,G.primary.main,.55)),Yt(G.Switch,"secondaryDisabledColor",we(Yi,G.secondary.main,.55)),Yt(G.Switch,"errorDisabledColor",we(Yi,G.error.main,.55)),Yt(G.Switch,"infoDisabledColor",we(Yi,G.info.main,.55)),Yt(G.Switch,"successDisabledColor",we(Yi,G.success.main,.55)),Yt(G.Switch,"warningDisabledColor",we(Yi,G.warning.main,.55)),Yt(G.TableCell,"border",we(Yi,we(Bd,G.divider,1),.68)),Yt(G.Tooltip,"bg",we(Bd,G.grey[700],.92))}Wh(G.background,"default"),Wh(G.background,"paper"),Wh(G.common,"background"),Wh(G.common,"onBackground"),Wh(G,"divider"),Object.keys(G).forEach(lt=>{const pt=G[lt];lt!=="tonalOffset"&&pt&&typeof pt=="object"&&(pt.main&&Yt(G[lt],"mainChannel",$0(j0(pt.main))),pt.light&&Yt(G[lt],"lightChannel",$0(j0(pt.light))),pt.dark&&Yt(G[lt],"darkChannel",$0(j0(pt.dark))),pt.contrastText&&Yt(G[lt],"contrastTextChannel",$0(j0(pt.contrastText))),lt==="text"&&(Wh(G[lt],"primary"),Wh(G[lt],"secondary")),lt==="action"&&(pt.active&&Wh(G[lt],"active"),pt.selected&&Wh(G[lt],"selected")))})}),de=t.reduce((le,G)=>Ou(le,G),de);const be={prefix:l,disableCssColorScheme:s,shouldSkipGeneratingVar:a,getSelector:PV(de),enableContrastVars:f},{vars:me,generateThemeVars:ve,generateStyleSheets:Re}=JU(de,be);return de.vars=me,Object.entries(de.colorSchemes[de.defaultColorScheme]).forEach(([le,G])=>{de[le]=G}),de.generateThemeVars=ve,de.generateStyleSheets=Re,de.generateSpacing=function(){return CR(S.spacing,xE(this))},de.getColorSchemeSelector=QU(y),de.spacing=de.generateSpacing(),de.shouldSkipGeneratingVar=a,de.unstable_sxConfig={...lv,...S==null?void 0:S.unstable_sxConfig},de.unstable_sx=function(G){return ld({sx:G,theme:this})},de.toRuntimeSource=zR,de}function L4(e,t,r){e.colorSchemes&&r&&(e.colorSchemes[t]={...r!==!0&&r,palette:DE({...r===!0?{}:r.palette,mode:t})})}function kg(e={},...t){const{palette:r,cssVariables:n=!1,colorSchemes:s=r?void 0:{light:!0},defaultColorScheme:l=r==null?void 0:r.mode,...f}=e,a=l||"light",y=s==null?void 0:s[a],v={...s,...r?{[a]:{...typeof y!="boolean"&&y,palette:r}}:void 0};if(n===!1){if(!("colorSchemes"in e))return dS(e,...t);let S=r;"palette"in e||v[a]&&(v[a]!==!0?S=v[a].palette:a==="dark"&&(S={mode:"dark"}));const P=dS({...e,palette:S},...t);return P.defaultColorScheme=a,P.colorSchemes=v,P.palette.mode==="light"&&(P.colorSchemes.light={...v.light!==!0&&v.light,palette:P.palette},L4(P,"dark",v.dark)),P.palette.mode==="dark"&&(P.colorSchemes.dark={...v.dark!==!0&&v.dark,palette:P.palette},L4(P,"light",v.light)),P}return!r&&!("light"in v)&&a==="light"&&(v.light=!0),LV({...f,colorSchemes:v,defaultColorScheme:a,...typeof n!="boolean"&&n},...t)}const UR=kg();function DV(){const e=EE(UR);return e[sf]||e}function RV(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const cb=e=>RV(e)&&e!=="classes",Ln=IR({themeId:sf,defaultTheme:UR,rootShouldForwardProp:cb});function NV({theme:e,...t}){const r=sf in e?e[sf]:void 0;return Ar.jsx(DR,{...t,themeId:r?sf:void 0,theme:r||e})}const f1={colorSchemeStorageKey:"mui-color-scheme",defaultLightColorScheme:"light",defaultDarkColorScheme:"dark",modeStorageKey:"mui-mode"},{CssVarsProvider:OV}=ZU({themeId:sf,theme:()=>kg({cssVariables:!0}),colorSchemeStorageKey:f1.colorSchemeStorageKey,modeStorageKey:f1.modeStorageKey,defaultColorScheme:{light:f1.defaultLightColorScheme,dark:f1.defaultDarkColorScheme},resolveTheme:e=>{const t={...e,typography:BR(e.palette,e.typography)};return t.unstable_sx=function(n){return ld({sx:n,theme:this})},t}}),FV=OV;function BV({theme:e,...t}){const r=vt.useMemo(()=>{if(typeof e=="function")return e;const n=sf in e?e[sf]:e;return"colorSchemes"in n?null:"vars"in n?e:{...e,vars:null}},[e]);return r?Ar.jsx(NV,{theme:r,...t}):Ar.jsx(FV,{theme:e,...t})}const Os=[];for(let e=0;e<256;++e)Os.push((e+256).toString(16).slice(1));function zV(e,t=0){return(Os[e[t+0]]+Os[e[t+1]]+Os[e[t+2]]+Os[e[t+3]]+"-"+Os[e[t+4]]+Os[e[t+5]]+"-"+Os[e[t+6]]+Os[e[t+7]]+"-"+Os[e[t+8]]+Os[e[t+9]]+"-"+Os[e[t+10]]+Os[e[t+11]]+Os[e[t+12]]+Os[e[t+13]]+Os[e[t+14]]+Os[e[t+15]]).toLowerCase()}let bw;const $V=new Uint8Array(16);function jV(){if(!bw){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");bw=crypto.getRandomValues.bind(crypto)}return bw($V)}const UV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),D4={randomUUID:UV};function RE(e,t,r){var s;if(D4.randomUUID&&!e)return D4.randomUUID();e=e||{};const n=e.random??((s=e.rng)==null?void 0:s.call(e))??jV();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,zV(n)}const Ih=$U;function dc(e){return OU(e)}function VV(e){return Vu("MuiSvgIcon",e)}wl("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const qV=e=>{const{color:t,fontSize:r,classes:n}=e,s={root:["root",t!=="inherit"&&`color${Ii(t)}`,`fontSize${Ii(r)}`]};return fc(s,VV,n)},GV=Ln("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Ii(r.color)}`],t[`fontSize${Ii(r.fontSize)}`]]}})(Ih(({theme:e})=>{var t,r,n,s,l,f,a,y,v,S,P,D,E,F;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(s=(t=e.transitions)==null?void 0:t.create)==null?void 0:s.call(t,"fill",{duration:(n=(r=(e.vars??e).transitions)==null?void 0:r.duration)==null?void 0:n.shorter}),variants:[{props:z=>!z.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((f=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:f.call(l,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((y=(a=e.typography)==null?void 0:a.pxToRem)==null?void 0:y.call(a,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((S=(v=e.typography)==null?void 0:v.pxToRem)==null?void 0:S.call(v,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,z])=>z&&z.main).map(([z])=>{var W,$;return{props:{color:z},style:{color:($=(W=(e.vars??e).palette)==null?void 0:W[z])==null?void 0:$.main}}}),{props:{color:"action"},style:{color:(D=(P=(e.vars??e).palette)==null?void 0:P.action)==null?void 0:D.active}},{props:{color:"disabled"},style:{color:(F=(E=(e.vars??e).palette)==null?void 0:E.action)==null?void 0:F.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),mS=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiSvgIcon"}),{children:s,className:l,color:f="inherit",component:a="svg",fontSize:y="medium",htmlColor:v,inheritViewBox:S=!1,titleAccess:P,viewBox:D="0 0 24 24",...E}=n,F=vt.isValidElement(s)&&s.type==="svg",z={...n,color:f,component:a,fontSize:y,instanceFontSize:t.fontSize,inheritViewBox:S,viewBox:D,hasSvgAsChild:F},W={};S||(W.viewBox=D);const $=qV(z);return Ar.jsxs(GV,{as:a,className:so($.root,l),focusable:"false",color:v,"aria-hidden":P?void 0:!0,role:P?"img":void 0,ref:r,...W,...E,...F&&s.props,ownerState:z,children:[F?s.props.children:s,P?Ar.jsx("title",{children:P}):null]})});mS.muiName="SvgIcon";function kh(e,t){function r(n,s){return Ar.jsx(mS,{"data-testid":void 0,ref:s,...n,children:e})}return r.muiName=mS.muiName,vt.memo(vt.forwardRef(r))}function HV(e){const{controlled:t,default:r}=e,{current:n}=vt.useRef(t!==void 0),[s,l]=vt.useState(r),f=n?t:s,a=vt.useCallback(y=>{n||l(y)},[]);return[f,a]}function K1(e){const t=vt.useRef(e);return AE(()=>{t.current=e}),vt.useRef((...r)=>(0,t.current)(...r)).current}function B_(...e){const t=vt.useRef(void 0),r=vt.useCallback(n=>{const s=e.map(l=>{if(l==null)return null;if(typeof l=="function"){const f=l,a=f(n);return typeof a=="function"?a:()=>{f(null)}}return l.current=n,()=>{l.current=null}});return()=>{s.forEach(l=>l==null?void 0:l())}},e);return vt.useMemo(()=>e.every(n=>n==null)?null:n=>{t.current&&(t.current(),t.current=void 0),n!=null&&(t.current=r(n))},e)}function WV(e,t){const r=e.charCodeAt(2);return e[0]==="o"&&e[1]==="n"&&r>=65&&r<=90&&typeof t=="function"}function ZV(e,t){if(!e)return t;function r(f,a){const y={};return Object.keys(a).forEach(v=>{WV(v,a[v])&&typeof f[v]=="function"&&(y[v]=(...S)=>{f[v](...S),a[v](...S)})}),y}if(typeof e=="function"||typeof t=="function")return f=>{const a=typeof t=="function"?t(f):t,y=typeof e=="function"?e({...f,...a}):e,v=so(f==null?void 0:f.className,a==null?void 0:a.className,y==null?void 0:y.className),S=r(y,a);return{...a,...y,...S,...!!v&&{className:v},...(a==null?void 0:a.style)&&(y==null?void 0:y.style)&&{style:{...a.style,...y.style}},...(a==null?void 0:a.sx)&&(y==null?void 0:y.sx)&&{sx:[...Array.isArray(a.sx)?a.sx:[a.sx],...Array.isArray(y.sx)?y.sx:[y.sx]]}}};const n=t,s=r(e,n),l=so(n==null?void 0:n.className,e==null?void 0:e.className);return{...t,...e,...s,...!!l&&{className:l},...(n==null?void 0:n.style)&&(e==null?void 0:e.style)&&{style:{...n.style,...e.style}},...(n==null?void 0:n.sx)&&(e==null?void 0:e.sx)&&{sx:[...Array.isArray(n.sx)?n.sx:[n.sx],...Array.isArray(e.sx)?e.sx:[e.sx]]}}}function XV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gS(e,t){return gS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},gS(e,t)}function YV(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gS(e,t)}const R4=Oe.createContext(null);function KV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NE(e,t){var r=function(l){return t&&vt.isValidElement(l)?t(l):l},n=Object.create(null);return e&&vt.Children.map(e,function(s){return s}).forEach(function(s){n[s.key]=r(s)}),n}function JV(e,t){e=e||{},t=t||{};function r(S){return S in t?t[S]:e[S]}var n=Object.create(null),s=[];for(var l in e)l in t?s.length&&(n[l]=s,s=[]):s.push(l);var f,a={};for(var y in t){if(n[y])for(f=0;f<n[y].length;f++){var v=n[y][f];a[n[y][f]]=r(v)}a[y]=r(y)}for(f=0;f<s.length;f++)a[s[f]]=r(s[f]);return a}function Yd(e,t,r){return r[t]!=null?r[t]:e.props[t]}function QV(e,t){return NE(e.children,function(r){return vt.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:Yd(r,"appear",e),enter:Yd(r,"enter",e),exit:Yd(r,"exit",e)})})}function eq(e,t,r){var n=NE(e.children),s=JV(t,n);return Object.keys(s).forEach(function(l){var f=s[l];if(vt.isValidElement(f)){var a=l in t,y=l in n,v=t[l],S=vt.isValidElement(v)&&!v.props.in;y&&(!a||S)?s[l]=vt.cloneElement(f,{onExited:r.bind(null,f),in:!0,exit:Yd(f,"exit",e),enter:Yd(f,"enter",e)}):!y&&a&&!S?s[l]=vt.cloneElement(f,{in:!1}):y&&a&&vt.isValidElement(v)&&(s[l]=vt.cloneElement(f,{onExited:r.bind(null,f),in:v.props.in,exit:Yd(f,"exit",e),enter:Yd(f,"enter",e)}))}}),s}var tq=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},rq={component:"div",childFactory:function(t){return t}},OE=function(e){YV(t,e);function t(n,s){var l;l=e.call(this,n,s)||this;var f=l.handleExited.bind(KV(l));return l.state={contextValue:{isMounting:!0},handleExited:f,firstRender:!0},l}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(s,l){var f=l.children,a=l.handleExited,y=l.firstRender;return{children:y?QV(s,a):eq(s,f,a),firstRender:!1}},r.handleExited=function(s,l){var f=NE(this.props.children);s.key in f||(s.props.onExited&&s.props.onExited(l),this.mounted&&this.setState(function(a){var y=D_({},a.children);return delete y[s.key],{children:y}}))},r.render=function(){var s=this.props,l=s.component,f=s.childFactory,a=XV(s,["component","childFactory"]),y=this.state.contextValue,v=tq(this.state.children).map(f);return delete a.appear,delete a.enter,delete a.exit,l===null?Oe.createElement(R4.Provider,{value:y},v):Oe.createElement(R4.Provider,{value:y},Oe.createElement(l,a,v))},t}(Oe.Component);OE.propTypes={};OE.defaultProps=rq;const N4={};function VR(e,t){const r=vt.useRef(N4);return r.current===N4&&(r.current=e(t)),r}const nq=[];function iq(e){vt.useEffect(e,nq)}class FE{constructor(){Pi(this,"currentId",null);Pi(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Pi(this,"disposeEffect",()=>this.clear)}static create(){return new FE}start(t,r){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,r()},t)}}function oq(){const e=VR(FE.create).current;return iq(e.disposeEffect),e}function aq(e){return Vu("MuiPaper",e)}wl("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const sq=e=>{const{square:t,elevation:r,variant:n,classes:s}=e,l={root:["root",n,!t&&"rounded",n==="elevation"&&`elevation${r}`]};return fc(l,aq,s)},lq=Ln("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],!r.square&&t.rounded,r.variant==="elevation"&&t[`elevation${r.elevation}`]]}})(Ih(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),qR=vt.forwardRef(function(t,r){var E;const n=dc({props:t,name:"MuiPaper"}),s=DV(),{className:l,component:f="div",elevation:a=1,square:y=!1,variant:v="elevation",...S}=n,P={...n,component:f,elevation:a,square:y,variant:v},D=sq(P);return Ar.jsx(lq,{as:f,ownerState:P,className:so(D.root,l),ref:r,...S,style:{...v==="elevation"&&{"--Paper-shadow":(s.vars||s).shadows[a],...s.vars&&{"--Paper-overlay":(E=s.vars.overlays)==null?void 0:E[a]},...!s.vars&&s.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${F_("#fff",pS(a))}, ${F_("#fff",pS(a))})`}},...S.style}})});function yS(e){return typeof e=="string"}function uq(e,t,r){return e===void 0||yS(e)?t:{...t,ownerState:{...t.ownerState,...r}}}function cq(e,t,r){return typeof e=="function"?e(t,r):e}function hq(e,t=[]){if(e===void 0)return{};const r={};return Object.keys(e).filter(n=>n.match(/^on[A-Z]/)&&typeof e[n]=="function"&&!t.includes(n)).forEach(n=>{r[n]=e[n]}),r}function O4(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(r=>!(r.match(/^on[A-Z]/)&&typeof e[r]=="function")).forEach(r=>{t[r]=e[r]}),t}function fq(e){const{getSlotProps:t,additionalProps:r,externalSlotProps:n,externalForwardedProps:s,className:l}=e;if(!t){const E=so(r==null?void 0:r.className,l,s==null?void 0:s.className,n==null?void 0:n.className),F={...r==null?void 0:r.style,...s==null?void 0:s.style,...n==null?void 0:n.style},z={...r,...s,...n};return E.length>0&&(z.className=E),Object.keys(F).length>0&&(z.style=F),{props:z,internalRef:void 0}}const f=hq({...s,...n}),a=O4(n),y=O4(s),v=t(f),S=so(v==null?void 0:v.className,r==null?void 0:r.className,l,s==null?void 0:s.className,n==null?void 0:n.className),P={...v==null?void 0:v.style,...r==null?void 0:r.style,...s==null?void 0:s.style,...n==null?void 0:n.style},D={...v,...r,...y,...a};return S.length>0&&(D.className=S),Object.keys(P).length>0&&(D.style=P),{props:D,internalRef:v.ref}}function vS(e,t){const{className:r,elementType:n,ownerState:s,externalForwardedProps:l,internalForwardedProps:f,shouldForwardComponentProp:a=!1,...y}=t,{component:v,slots:S={[e]:void 0},slotProps:P={[e]:void 0},...D}=l,E=S[e]||n,F=cq(P[e],s),{props:{component:z,...W},internalRef:$}=fq({className:r,...y,externalForwardedProps:e==="root"?D:void 0,externalSlotProps:F}),Y=B_($,F==null?void 0:F.ref,t.ref),Q=e==="root"?z||v:z,K=uq(E,{...e==="root"&&!v&&!S[e]&&f,...e!=="root"&&!S[e]&&f,...W,...Q&&!a&&{as:Q},...Q&&a&&{component:Q},ref:Y},s);return[E,K]}function F4(e){try{return e.matches(":focus-visible")}catch{}return!1}class z_{constructor(){Pi(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new z_}static use(){const t=VR(z_.create).current,[r,n]=vt.useState(!1);return t.shouldMount=r,t.setShouldMount=n,vt.useEffect(t.mountEffect,[r]),t}mount(){return this.mounted||(this.mounted=pq(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.start(...t)})}stop(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.stop(...t)})}pulsate(...t){this.mount().then(()=>{var r;return(r=this.ref.current)==null?void 0:r.pulsate(...t)})}}function dq(){return z_.use()}function pq(){let e,t;const r=new Promise((n,s)=>{e=n,t=s});return r.resolve=e,r.reject=t,r}function mq(e){const{className:t,classes:r,pulsate:n=!1,rippleX:s,rippleY:l,rippleSize:f,in:a,onExited:y,timeout:v}=e,[S,P]=vt.useState(!1),D=so(t,r.ripple,r.rippleVisible,n&&r.ripplePulsate),E={width:f,height:f,top:-(f/2)+l,left:-(f/2)+s},F=so(r.child,S&&r.childLeaving,n&&r.childPulsate);return!a&&!S&&P(!0),vt.useEffect(()=>{if(!a&&y!=null){const z=setTimeout(y,v);return()=>{clearTimeout(z)}}},[y,a,v]),Ar.jsx("span",{className:D,style:E,children:Ar.jsx("span",{className:F})})}const Xu=wl("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),_S=550,gq=80,yq=ov`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,vq=ov`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,_q=ov`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,bq=Ln("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),xq=Ln(mq,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${Xu.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${yq};
    animation-duration: ${_S}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${Xu.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${Xu.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${Xu.childLeaving} {
    opacity: 0;
    animation-name: ${vq};
    animation-duration: ${_S}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${Xu.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${_q};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,wq=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiTouchRipple"}),{center:s=!1,classes:l={},className:f,...a}=n,[y,v]=vt.useState([]),S=vt.useRef(0),P=vt.useRef(null);vt.useEffect(()=>{P.current&&(P.current(),P.current=null)},[y]);const D=vt.useRef(!1),E=oq(),F=vt.useRef(null),z=vt.useRef(null),W=vt.useCallback(K=>{const{pulsate:xe,rippleX:de,rippleY:be,rippleSize:me,cb:ve}=K;v(Re=>[...Re,Ar.jsx(xq,{classes:{ripple:so(l.ripple,Xu.ripple),rippleVisible:so(l.rippleVisible,Xu.rippleVisible),ripplePulsate:so(l.ripplePulsate,Xu.ripplePulsate),child:so(l.child,Xu.child),childLeaving:so(l.childLeaving,Xu.childLeaving),childPulsate:so(l.childPulsate,Xu.childPulsate)},timeout:_S,pulsate:xe,rippleX:de,rippleY:be,rippleSize:me},S.current)]),S.current+=1,P.current=ve},[l]),$=vt.useCallback((K={},xe={},de=()=>{})=>{const{pulsate:be=!1,center:me=s||xe.pulsate,fakeElement:ve=!1}=xe;if((K==null?void 0:K.type)==="mousedown"&&D.current){D.current=!1;return}(K==null?void 0:K.type)==="touchstart"&&(D.current=!0);const Re=ve?null:z.current,le=Re?Re.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,Ae,we;if(me||K===void 0||K.clientX===0&&K.clientY===0||!K.clientX&&!K.touches)G=Math.round(le.width/2),Ae=Math.round(le.height/2);else{const{clientX:lt,clientY:pt}=K.touches&&K.touches.length>0?K.touches[0]:K;G=Math.round(lt-le.left),Ae=Math.round(pt-le.top)}if(me)we=Math.sqrt((2*le.width**2+le.height**2)/3),we%2===0&&(we+=1);else{const lt=Math.max(Math.abs((Re?Re.clientWidth:0)-G),G)*2+2,pt=Math.max(Math.abs((Re?Re.clientHeight:0)-Ae),Ae)*2+2;we=Math.sqrt(lt**2+pt**2)}K!=null&&K.touches?F.current===null&&(F.current=()=>{W({pulsate:be,rippleX:G,rippleY:Ae,rippleSize:we,cb:de})},E.start(gq,()=>{F.current&&(F.current(),F.current=null)})):W({pulsate:be,rippleX:G,rippleY:Ae,rippleSize:we,cb:de})},[s,W,E]),Y=vt.useCallback(()=>{$({},{pulsate:!0})},[$]),Q=vt.useCallback((K,xe)=>{if(E.clear(),(K==null?void 0:K.type)==="touchend"&&F.current){F.current(),F.current=null,E.start(0,()=>{Q(K,xe)});return}F.current=null,v(de=>de.length>0?de.slice(1):de),P.current=xe},[E]);return vt.useImperativeHandle(r,()=>({pulsate:Y,start:$,stop:Q}),[Y,$,Q]),Ar.jsx(bq,{className:so(Xu.root,l.root,f),ref:z,...a,children:Ar.jsx(OE,{component:null,exit:!0,children:y})})});function Sq(e){return Vu("MuiButtonBase",e)}const Cq=wl("MuiButtonBase",["root","disabled","focusVisible"]),Eq=e=>{const{disabled:t,focusVisible:r,focusVisibleClassName:n,classes:s}=e,f=fc({root:["root",t&&"disabled",r&&"focusVisible"]},Sq,s);return r&&n&&(f.root+=` ${n}`),f},Tq=Ln("button",{name:"MuiButtonBase",slot:"Root"})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Cq.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),BE=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiButtonBase"}),{action:s,centerRipple:l=!1,children:f,className:a,component:y="button",disabled:v=!1,disableRipple:S=!1,disableTouchRipple:P=!1,focusRipple:D=!1,focusVisibleClassName:E,LinkComponent:F="a",onBlur:z,onClick:W,onContextMenu:$,onDragLeave:Y,onFocus:Q,onFocusVisible:K,onKeyDown:xe,onKeyUp:de,onMouseDown:be,onMouseLeave:me,onMouseUp:ve,onTouchEnd:Re,onTouchMove:le,onTouchStart:G,tabIndex:Ae=0,TouchRippleProps:we,touchRippleRef:lt,type:pt,...At}=n,Ze=vt.useRef(null),tt=dq(),Ot=B_(tt.ref,lt),[St,ne]=vt.useState(!1);v&&St&&ne(!1),vt.useImperativeHandle(s,()=>({focusVisible:()=>{ne(!0),Ze.current.focus()}}),[]);const Ee=tt.shouldMount&&!S&&!v;vt.useEffect(()=>{St&&D&&!S&&tt.pulsate()},[S,D,St,tt]);const Ne=Zh(tt,"start",be,P),qe=Zh(tt,"stop",$,P),Je=Zh(tt,"stop",Y,P),gt=Zh(tt,"stop",ve,P),bt=Zh(tt,"stop",dr=>{St&&dr.preventDefault(),me&&me(dr)},P),ft=Zh(tt,"start",G,P),Ct=Zh(tt,"stop",Re,P),Ut=Zh(tt,"stop",le,P),gr=Zh(tt,"stop",dr=>{F4(dr.target)||ne(!1),z&&z(dr)},!1),rr=K1(dr=>{Ze.current||(Ze.current=dr.currentTarget),F4(dr.target)&&(ne(!0),K&&K(dr)),Q&&Q(dr)}),It=()=>{const dr=Ze.current;return y&&y!=="button"&&!(dr.tagName==="A"&&dr.href)},Ue=K1(dr=>{D&&!dr.repeat&&St&&dr.key===" "&&tt.stop(dr,()=>{tt.start(dr)}),dr.target===dr.currentTarget&&It()&&dr.key===" "&&dr.preventDefault(),xe&&xe(dr),dr.target===dr.currentTarget&&It()&&dr.key==="Enter"&&!v&&(dr.preventDefault(),W&&W(dr))}),Lr=K1(dr=>{D&&dr.key===" "&&St&&!dr.defaultPrevented&&tt.stop(dr,()=>{tt.pulsate(dr)}),de&&de(dr),W&&dr.target===dr.currentTarget&&It()&&dr.key===" "&&!dr.defaultPrevented&&W(dr)});let Nr=y;Nr==="button"&&(At.href||At.to)&&(Nr=F);const Pr={};Nr==="button"?(Pr.type=pt===void 0?"button":pt,Pr.disabled=v):(!At.href&&!At.to&&(Pr.role="button"),v&&(Pr["aria-disabled"]=v));const Ht=B_(r,Ze),Er={...n,centerRipple:l,component:y,disabled:v,disableRipple:S,disableTouchRipple:P,focusRipple:D,tabIndex:Ae,focusVisible:St},vr=Eq(Er);return Ar.jsxs(Tq,{as:Nr,className:so(vr.root,a),ownerState:Er,onBlur:gr,onClick:W,onContextMenu:qe,onFocus:rr,onKeyDown:Ue,onKeyUp:Lr,onMouseDown:Ne,onMouseLeave:bt,onMouseUp:gt,onDragLeave:Je,onTouchEnd:Ct,onTouchMove:Ut,onTouchStart:ft,ref:Ht,tabIndex:v?-1:Ae,type:pt,...Pr,...At,children:[f,Ee?Ar.jsx(wq,{ref:Ot,center:l,...we}):null]})});function Zh(e,t,r,n=!1){return K1(s=>(r&&r(s),n||e[t](s),!0))}function Aq(e){return typeof e.main=="string"}function Pq(e,t=[]){if(!Aq(e))return!1;for(const r of t)if(!e.hasOwnProperty(r)||typeof e[r]!="string")return!1;return!0}function vg(e=[]){return([,t])=>t&&Pq(t,e)}function Iq(e){return Vu("MuiCircularProgress",e)}wl("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const Ff=44,bS=ov`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`,xS=ov`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: -126px;
  }
`,Mq=typeof bS!="string"?gE`
        animation: ${bS} 1.4s linear infinite;
      `:null,kq=typeof xS!="string"?gE`
        animation: ${xS} 1.4s ease-in-out infinite;
      `:null,Lq=e=>{const{classes:t,variant:r,color:n,disableShrink:s}=e,l={root:["root",r,`color${Ii(n)}`],svg:["svg"],circle:["circle",`circle${Ii(r)}`,s&&"circleDisableShrink"]};return fc(l,Iq,t)},Dq=Ln("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${Ii(r.color)}`]]}})(Ih(({theme:e})=>({display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("transform")}},{props:{variant:"indeterminate"},style:Mq||{animation:`${bS} 1.4s linear infinite`}},...Object.entries(e.palette).filter(vg()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}}))]}))),Rq=Ln("svg",{name:"MuiCircularProgress",slot:"Svg"})({display:"block"}),Nq=Ln("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${Ii(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})(Ih(({theme:e})=>({stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:e.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink,style:kq||{animation:`${xS} 1.4s ease-in-out infinite`}}]}))),GR=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiCircularProgress"}),{className:s,color:l="primary",disableShrink:f=!1,size:a=40,style:y,thickness:v=3.6,value:S=0,variant:P="indeterminate",...D}=n,E={...n,color:l,disableShrink:f,size:a,thickness:v,value:S,variant:P},F=Lq(E),z={},W={},$={};if(P==="determinate"){const Y=2*Math.PI*((Ff-v)/2);z.strokeDasharray=Y.toFixed(3),$["aria-valuenow"]=Math.round(S),z.strokeDashoffset=`${((100-S)/100*Y).toFixed(3)}px`,W.transform="rotate(-90deg)"}return Ar.jsx(Dq,{className:so(F.root,s),style:{width:a,height:a,...W,...y},ownerState:E,ref:r,role:"progressbar",...$,...D,children:Ar.jsx(Rq,{className:F.svg,ownerState:E,viewBox:`${Ff/2} ${Ff/2} ${Ff} ${Ff}`,children:Ar.jsx(Nq,{className:F.circle,style:z,ownerState:E,cx:Ff,cy:Ff,r:(Ff-v)/2,fill:"none",strokeWidth:v})})})});function Oq(e){return Vu("MuiIconButton",e)}const B4=wl("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),Fq=e=>{const{classes:t,disabled:r,color:n,edge:s,size:l,loading:f}=e,a={root:["root",f&&"loading",r&&"disabled",n!=="default"&&`color${Ii(n)}`,s&&`edge${Ii(s)}`,`size${Ii(l)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return fc(a,Oq,t)},Bq=Ln(BE,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.loading&&t.loading,r.color!=="default"&&t[`color${Ii(r.color)}`],r.edge&&t[`edge${Ii(r.edge)}`],t[`size${Ii(r.size)}`]]}})(Ih(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),Ih(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(vg()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(vg()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${B4.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled},[`&.${B4.loading}`]:{color:"transparent"}}))),zq=Ln("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(e.vars||e).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]})),bd=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiIconButton"}),{edge:s=!1,children:l,className:f,color:a="default",disabled:y=!1,disableFocusRipple:v=!1,size:S="medium",id:P,loading:D=null,loadingIndicator:E,...F}=n,z=ME(P),W=E??Ar.jsx(GR,{"aria-labelledby":z,color:"inherit",size:16}),$={...n,edge:s,color:a,disabled:y,disableFocusRipple:v,loading:D,loadingIndicator:W,size:S},Y=Fq($);return Ar.jsxs(Bq,{id:D?z:P,className:so(Y.root,f),centerRipple:!0,focusRipple:!v,disabled:y||D,ref:r,...F,ownerState:$,children:[typeof D=="boolean"&&Ar.jsx("span",{className:Y.loadingWrapper,style:{display:"contents"},children:Ar.jsx(zq,{className:Y.loadingIndicator,ownerState:$,children:D&&W})}),l]})}),$q=vt.createContext(void 0);function jq(){return vt.useContext($q)}const Uq=wl("MuiBox",["root"]),Vq=kg(),wp=TR({themeId:sf,defaultTheme:Vq,defaultClassName:Uq.root,generateClassName:TE.generate});function qq(e){return Vu("MuiButton",e)}const zd=wl("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge","loading","loadingWrapper","loadingIconPlaceholder","loadingIndicator","loadingPositionCenter","loadingPositionStart","loadingPositionEnd"]),Gq=vt.createContext({}),Hq=vt.createContext(void 0),Wq=e=>{const{color:t,disableElevation:r,fullWidth:n,size:s,variant:l,loading:f,loadingPosition:a,classes:y}=e,v={root:["root",f&&"loading",l,`${l}${Ii(t)}`,`size${Ii(s)}`,`${l}Size${Ii(s)}`,`color${Ii(t)}`,r&&"disableElevation",n&&"fullWidth",f&&`loadingPosition${Ii(a)}`],startIcon:["icon","startIcon",`iconSize${Ii(s)}`],endIcon:["icon","endIcon",`iconSize${Ii(s)}`],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]},S=fc(v,qq,y);return{...y,...S}},HR=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],Zq=Ln(BE,{shouldForwardProp:e=>cb(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`${r.variant}${Ii(r.color)}`],t[`size${Ii(r.size)}`],t[`${r.variant}Size${Ii(r.size)}`],r.color==="inherit"&&t.colorInherit,r.disableElevation&&t.disableElevation,r.fullWidth&&t.fullWidth,r.loading&&t.loading]}})(Ih(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],r=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${zd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${zd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${zd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${zd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(vg()).map(([n])=>({props:{color:n},style:{"--variant-textColor":(e.vars||e).palette[n].main,"--variant-outlinedColor":(e.vars||e).palette[n].main,"--variant-outlinedBorder":e.alpha((e.vars||e).palette[n].main,.5),"--variant-containedColor":(e.vars||e).palette[n].contrastText,"--variant-containedBg":(e.vars||e).palette[n].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[n].dark,"--variant-textBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[n].main,"--variant-outlinedBg":e.alpha((e.vars||e).palette[n].main,(e.vars||e).palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:r,"--variant-textBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity),"--variant-outlinedBg":e.alpha((e.vars||e).palette.text.primary,(e.vars||e).palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${zd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${zd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{loadingPosition:"center"},style:{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${zd.loading}`]:{color:"transparent"}}}]}})),Xq=Ln("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.startIcon,r.loading&&t.startIconLoadingStart,t[`iconSize${Ii(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},{props:{loadingPosition:"start",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"start",loading:!0,fullWidth:!0},style:{marginRight:-8}},...HR]})),Yq=Ln("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.endIcon,r.loading&&t.endIconLoadingEnd,t[`iconSize${Ii(r.size)}`]]}})(({theme:e})=>({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},{props:{loadingPosition:"end",loading:!0},style:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},{props:{loadingPosition:"end",loading:!0,fullWidth:!0},style:{marginLeft:-8}},...HR]})),Kq=Ln("span",{name:"MuiButton",slot:"LoadingIndicator"})(({theme:e})=>({display:"none",position:"absolute",visibility:"visible",variants:[{props:{loading:!0},style:{display:"flex"}},{props:{loadingPosition:"start"},style:{left:14}},{props:{loadingPosition:"start",size:"small"},style:{left:10}},{props:{variant:"text",loadingPosition:"start"},style:{left:6}},{props:{loadingPosition:"center"},style:{left:"50%",transform:"translate(-50%)",color:(e.vars||e).palette.action.disabled}},{props:{loadingPosition:"end"},style:{right:14}},{props:{loadingPosition:"end",size:"small"},style:{right:10}},{props:{variant:"text",loadingPosition:"end"},style:{right:6}},{props:{loadingPosition:"start",fullWidth:!0},style:{position:"relative",left:-10}},{props:{loadingPosition:"end",fullWidth:!0},style:{position:"relative",right:-10}}]})),z4=Ln("span",{name:"MuiButton",slot:"LoadingIconPlaceholder"})({display:"inline-block",width:"1em",height:"1em"}),Jq=vt.forwardRef(function(t,r){const n=vt.useContext(Gq),s=vt.useContext(Hq),l=O_(n,t),f=dc({props:l,name:"MuiButton"}),{children:a,color:y="primary",component:v="button",className:S,disabled:P=!1,disableElevation:D=!1,disableFocusRipple:E=!1,endIcon:F,focusVisibleClassName:z,fullWidth:W=!1,id:$,loading:Y=null,loadingIndicator:Q,loadingPosition:K="center",size:xe="medium",startIcon:de,type:be,variant:me="text",...ve}=f,Re=ME($),le=Q??Ar.jsx(GR,{"aria-labelledby":Re,color:"inherit",size:16}),G={...f,color:y,component:v,disabled:P,disableElevation:D,disableFocusRipple:E,fullWidth:W,loading:Y,loadingIndicator:le,loadingPosition:K,size:xe,type:be,variant:me},Ae=Wq(G),we=(de||Y&&K==="start")&&Ar.jsx(Xq,{className:Ae.startIcon,ownerState:G,children:de||Ar.jsx(z4,{className:Ae.loadingIconPlaceholder,ownerState:G})}),lt=(F||Y&&K==="end")&&Ar.jsx(Yq,{className:Ae.endIcon,ownerState:G,children:F||Ar.jsx(z4,{className:Ae.loadingIconPlaceholder,ownerState:G})}),pt=s||"",At=typeof Y=="boolean"?Ar.jsx("span",{className:Ae.loadingWrapper,style:{display:"contents"},children:Y&&Ar.jsx(Kq,{className:Ae.loadingIndicator,ownerState:G,children:le})}):null;return Ar.jsxs(Zq,{ownerState:G,className:so(n.className,Ae.root,S,pt),component:v,disabled:P||Y,focusRipple:!E,focusVisibleClassName:so(Ae.focusVisible,z),ref:r,type:be,id:Y?Re:$,...ve,classes:Ae,children:[we,K!=="end"&&At,a,K==="end"&&At,lt]})});function Qq(e){return Vu("PrivateSwitchBase",e)}wl("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const eG=e=>{const{classes:t,checked:r,disabled:n,edge:s}=e,l={root:["root",r&&"checked",n&&"disabled",s&&`edge${Ii(s)}`],input:["input"]};return fc(l,Qq,t)},tG=Ln(BE,{name:"MuiSwitchBase"})({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),rG=Ln("input",{name:"MuiSwitchBase",shouldForwardProp:cb})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),nG=vt.forwardRef(function(t,r){const{autoFocus:n,checked:s,checkedIcon:l,defaultChecked:f,disabled:a,disableFocusRipple:y=!1,edge:v=!1,icon:S,id:P,inputProps:D,inputRef:E,name:F,onBlur:z,onChange:W,onFocus:$,readOnly:Y,required:Q=!1,tabIndex:K,type:xe,value:de,slots:be={},slotProps:me={},...ve}=t,[Re,le]=HV({controlled:s,default:!!f}),G=jq(),Ae=qe=>{$&&$(qe),G&&G.onFocus&&G.onFocus(qe)},we=qe=>{z&&z(qe),G&&G.onBlur&&G.onBlur(qe)},lt=qe=>{if(qe.nativeEvent.defaultPrevented)return;const Je=qe.target.checked;le(Je),W&&W(qe,Je)};let pt=a;G&&typeof pt>"u"&&(pt=G.disabled);const At=xe==="checkbox"||xe==="radio",Ze={...t,checked:Re,disabled:pt,disableFocusRipple:y,edge:v},tt=eG(Ze),Ot={slots:be,slotProps:{input:D,...me}},[St,ne]=vS("root",{ref:r,elementType:tG,className:tt.root,shouldForwardComponentProp:!0,externalForwardedProps:{...Ot,component:"span",...ve},getSlotProps:qe=>({...qe,onFocus:Je=>{var gt;(gt=qe.onFocus)==null||gt.call(qe,Je),Ae(Je)},onBlur:Je=>{var gt;(gt=qe.onBlur)==null||gt.call(qe,Je),we(Je)}}),ownerState:Ze,additionalProps:{centerRipple:!0,focusRipple:!y,disabled:pt,role:void 0,tabIndex:null}}),[Ee,Ne]=vS("input",{ref:E,elementType:rG,className:tt.input,externalForwardedProps:Ot,getSlotProps:qe=>({...qe,onChange:Je=>{var gt;(gt=qe.onChange)==null||gt.call(qe,Je),lt(Je)}}),ownerState:Ze,additionalProps:{autoFocus:n,checked:s,defaultChecked:f,disabled:pt,id:At?P:void 0,name:F,readOnly:Y,required:Q,tabIndex:K,type:xe,...xe==="checkbox"&&de===void 0?{}:{value:de}}});return Ar.jsxs(St,{...ne,children:[Ar.jsx(Ee,{...Ne}),Re?l:S]})}),iG=kh(Ar.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),oG=kh(Ar.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),aG=kh(Ar.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function sG(e){return Vu("MuiCheckbox",e)}const xw=wl("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),lG=e=>{const{classes:t,indeterminate:r,color:n,size:s}=e,l={root:["root",r&&"indeterminate",`color${Ii(n)}`,`size${Ii(s)}`]},f=fc(l,sG,t);return{...t,...f}},uG=Ln(nG,{shouldForwardProp:e=>cb(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t[`size${Ii(r.size)}`],r.color!=="default"&&t[`color${Ii(r.color)}`]]}})(Ih(({theme:e})=>({color:(e.vars||e).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette.action.active,(e.vars||e).palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(vg()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:e.alpha((e.vars||e).palette[t].main,(e.vars||e).palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(vg()).map(([t])=>({props:{color:t},style:{[`&.${xw.checked}, &.${xw.indeterminate}`]:{color:(e.vars||e).palette[t].main},[`&.${xw.disabled}`]:{color:(e.vars||e).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),cG=Ar.jsx(oG,{}),hG=Ar.jsx(iG,{}),fG=Ar.jsx(aG,{}),WR=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiCheckbox"}),{checkedIcon:s=cG,color:l="primary",icon:f=hG,indeterminate:a=!1,indeterminateIcon:y=fG,inputProps:v,size:S="medium",disableRipple:P=!1,className:D,slots:E={},slotProps:F={},...z}=n,W=a?y:f,$=a?y:s,Y={...n,disableRipple:P,color:l,indeterminate:a,size:S},Q=lG(Y),K=F.input??v,[xe,de]=vS("root",{ref:r,elementType:uG,className:so(Q.root,D),shouldForwardComponentProp:!0,externalForwardedProps:{slots:E,slotProps:F,...z},ownerState:Y,additionalProps:{type:"checkbox",icon:vt.cloneElement(W,{fontSize:W.props.fontSize??S}),checkedIcon:vt.cloneElement($,{fontSize:$.props.fontSize??S}),disableRipple:P,slots:E,slotProps:{input:ZV(typeof K=="function"?K(Y):K,{"data-indeterminate":a})}}});return Ar.jsx(xe,{...de,classes:Q})}),ig=vt.createContext({});function dG(e){return Vu("MuiList",e)}wl("MuiList",["root","padding","dense","subheader"]);const pG=e=>{const{classes:t,disablePadding:r,dense:n,subheader:s}=e;return fc({root:["root",!r&&"padding",n&&"dense",s&&"subheader"]},dG,t)},mG=Ln("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disablePadding&&t.padding,r.dense&&t.dense,r.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),hb=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiList"}),{children:s,className:l,component:f="ul",dense:a=!1,disablePadding:y=!1,subheader:v,...S}=n,P=vt.useMemo(()=>({dense:a}),[a]),D={...n,component:f,dense:a,disablePadding:y},E=pG(D);return Ar.jsx(ig.Provider,{value:P,children:Ar.jsxs(mG,{as:f,className:so(E.root,l),ref:r,ownerState:D,...S,children:[v,s]})})});function gG(e){return Vu("MuiListItem",e)}wl("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const yG=wl("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function vG(e){return Vu("MuiListItemSecondaryAction",e)}wl("MuiListItemSecondaryAction",["root","disableGutters"]);const _G=e=>{const{disableGutters:t,classes:r}=e;return fc({root:["root",t&&"disableGutters"]},vG,r)},bG=Ln("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),ZR=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiListItemSecondaryAction"}),{className:s,...l}=n,f=vt.useContext(ig),a={...n,disableGutters:f.disableGutters},y=_G(a);return Ar.jsx(bG,{className:so(y.root,s),ownerState:a,ref:r,...l})});ZR.muiName="ListItemSecondaryAction";const xG=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.alignItems==="flex-start"&&t.alignItemsFlexStart,r.divider&&t.divider,!r.disableGutters&&t.gutters,!r.disablePadding&&t.padding,r.hasSecondaryAction&&t.secondaryAction]},wG=e=>{const{alignItems:t,classes:r,dense:n,disableGutters:s,disablePadding:l,divider:f,hasSecondaryAction:a}=e;return fc({root:["root",n&&"dense",!s&&"gutters",!l&&"padding",f&&"divider",t==="flex-start"&&"alignItemsFlexStart",a&&"secondaryAction"],container:["container"]},gG,r)},SG=Ln("div",{name:"MuiListItem",slot:"Root",overridesResolver:xG})(Ih(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${yG.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),CG=Ln("li",{name:"MuiListItem",slot:"Container"})({position:"relative"}),zE=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiListItem"}),{alignItems:s="center",children:l,className:f,component:a,components:y={},componentsProps:v={},ContainerComponent:S="li",ContainerProps:{className:P,...D}={},dense:E=!1,disableGutters:F=!1,disablePadding:z=!1,divider:W=!1,secondaryAction:$,slotProps:Y={},slots:Q={},...K}=n,xe=vt.useContext(ig),de=vt.useMemo(()=>({dense:E||xe.dense||!1,alignItems:s,disableGutters:F}),[s,xe.dense,E,F]),be=vt.useRef(null),me=vt.Children.toArray(l),ve=me.length&&eV(me[me.length-1],["ListItemSecondaryAction"]),Re={...n,alignItems:s,dense:de.dense,disableGutters:F,disablePadding:z,divider:W,hasSecondaryAction:ve},le=wG(Re),G=B_(be,r),Ae=Q.root||y.Root||SG,we=Y.root||v.root||{},lt={className:so(le.root,we.className,f),...K};let pt=a||"li";return ve?(pt=!lt.component&&!a?"div":pt,S==="li"&&(pt==="li"?pt="div":lt.component==="li"&&(lt.component="div")),Ar.jsx(ig.Provider,{value:de,children:Ar.jsxs(CG,{as:S,className:so(le.container,P),ref:G,ownerState:Re,...D,children:[Ar.jsx(Ae,{...we,...!yS(Ae)&&{as:pt,ownerState:{...Re,...we.ownerState}},...lt,children:me}),me.pop()]})})):Ar.jsx(ig.Provider,{value:de,children:Ar.jsxs(Ae,{...we,as:pt,ref:G,...!yS(Ae)&&{ownerState:{...Re,...we.ownerState}},...lt,children:[me,$&&Ar.jsx(ZR,{children:$})]})})});function EG(e){return Vu("MuiListItemIcon",e)}wl("MuiListItemIcon",["root","alignItemsFlexStart"]);const TG=e=>{const{alignItems:t,classes:r}=e;return fc({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},EG,r)},AG=Ln("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(Ih(({theme:e})=>({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex",variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}))),$E=vt.forwardRef(function(t,r){const n=dc({props:t,name:"MuiListItemIcon"}),{className:s,...l}=n,f=vt.useContext(ig),a={...n,alignItems:f.alignItems},y=TG(a);return Ar.jsx(AG,{className:so(y.root,s),ownerState:a,ref:r,...l})}),PG="modulepreload",IG=function(e){return"/MapTelling/"+e},$4={},ww=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),a=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));s=Promise.allSettled(r.map(y=>{if(y=IG(y),y in $4)return;$4[y]=!0;const v=y.endsWith(".css"),S=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${S}`))return;const P=document.createElement("link");if(P.rel=v?"stylesheet":PG,v||(P.as="script"),P.crossOrigin="",P.href=y,a&&P.setAttribute("nonce",a),document.head.appendChild(P),v)return new Promise((D,E)=>{P.addEventListener("load",D),P.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(f){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=f,window.dispatchEvent(a),!a.defaultPrevented)throw f}return s.then(f=>{for(const a of f||[])a.status==="rejected"&&l(a.reason);return t().catch(l)})};function Ji(e){"@babel/helpers - typeof";return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ji(e)}var qc=Uint8Array,Du=Uint16Array,jE=Int32Array,UE=new qc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),VE=new qc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),j4=new qc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XR=function(e,t){for(var r=new Du(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new jE(r[30]),n=1;n<30;++n)for(var l=r[n];l<r[n+1];++l)s[l]=l-r[n]<<5|n;return{b:r,r:s}},YR=XR(UE,2),MG=YR.b,wS=YR.r;MG[28]=258,wS[258]=28;var kG=XR(VE,0),U4=kG.r,SS=new Du(32768);for(var Oo=0;Oo<32768;++Oo){var Bf=(Oo&43690)>>1|(Oo&21845)<<1;Bf=(Bf&52428)>>2|(Bf&13107)<<2,Bf=(Bf&61680)>>4|(Bf&3855)<<4,SS[Oo]=((Bf&65280)>>8|(Bf&255)<<8)>>1}var ay=function(e,t,r){for(var n=e.length,s=0,l=new Du(t);s<n;++s)e[s]&&++l[e[s]-1];var f=new Du(t);for(s=1;s<t;++s)f[s]=f[s-1]+l[s-1]<<1;var a;if(r){a=new Du(1<<t);var y=15-t;for(s=0;s<n;++s)if(e[s])for(var v=s<<4|e[s],S=t-e[s],P=f[e[s]-1]++<<S,D=P|(1<<S)-1;P<=D;++P)a[SS[P]>>y]=v}else for(a=new Du(n),s=0;s<n;++s)e[s]&&(a[s]=SS[f[e[s]-1]++]>>15-e[s]);return a},cp=new qc(288);for(var Oo=0;Oo<144;++Oo)cp[Oo]=8;for(var Oo=144;Oo<256;++Oo)cp[Oo]=9;for(var Oo=256;Oo<280;++Oo)cp[Oo]=7;for(var Oo=280;Oo<288;++Oo)cp[Oo]=8;var $_=new qc(32);for(var Oo=0;Oo<32;++Oo)$_[Oo]=5;var LG=ay(cp,9,0),DG=ay($_,5,0),KR=function(e){return(e+7)/8|0},RG=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new qc(e.subarray(t,r))},Xh=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},T0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},Sw=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,l=r.slice();if(!s)return{t:QR,l:0};if(s==1){var f=new qc(r[0].s+1);return f[r[0].s]=1,{t:f,l:1}}r.sort(function(xe,de){return xe.f-de.f}),r.push({s:-1,f:25001});var a=r[0],y=r[1],v=0,S=1,P=2;for(r[0]={s:-1,f:a.f+y.f,l:a,r:y};S!=s-1;)a=r[r[v].f<r[P].f?v++:P++],y=r[v!=S&&r[v].f<r[P].f?v++:P++],r[S++]={s:-1,f:a.f+y.f,l:a,r:y};for(var D=l[0].s,n=1;n<s;++n)l[n].s>D&&(D=l[n].s);var E=new Du(D+1),F=CS(r[S-1],E,0);if(F>t){var n=0,z=0,W=F-t,$=1<<W;for(l.sort(function(de,be){return E[be.s]-E[de.s]||de.f-be.f});n<s;++n){var Y=l[n].s;if(E[Y]>t)z+=$-(1<<F-E[Y]),E[Y]=t;else break}for(z>>=W;z>0;){var Q=l[n].s;E[Q]<t?z-=1<<t-E[Q]++-1:++n}for(;n>=0&&z;--n){var K=l[n].s;E[K]==t&&(--E[K],++z)}F=t}return{t:new qc(E),l:F}},CS=function(e,t,r){return e.s==-1?Math.max(CS(e.l,t,r+1),CS(e.r,t,r+1)):t[e.s]=r},V4=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Du(++t),n=0,s=e[0],l=1,f=function(y){r[n++]=y},a=1;a<=t;++a)if(e[a]==s&&a!=t)++l;else{if(!s&&l>2){for(;l>138;l-=138)f(32754);l>2&&(f(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(f(s),--l;l>6;l-=6)f(8304);l>2&&(f(l-3<<5|8208),l=0)}for(;l--;)f(s);l=1,s=e[a]}return{c:r.subarray(0,n),n:t}},A0=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},JR=function(e,t,r){var n=r.length,s=KR(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var l=0;l<n;++l)e[s+l+4]=r[l];return(s+4+n)*8},q4=function(e,t,r,n,s,l,f,a,y,v,S){Xh(t,S++,r),++s[256];for(var P=Sw(s,15),D=P.t,E=P.l,F=Sw(l,15),z=F.t,W=F.l,$=V4(D),Y=$.c,Q=$.n,K=V4(z),xe=K.c,de=K.n,be=new Du(19),me=0;me<Y.length;++me)++be[Y[me]&31];for(var me=0;me<xe.length;++me)++be[xe[me]&31];for(var ve=Sw(be,7),Re=ve.t,le=ve.l,G=19;G>4&&!Re[j4[G-1]];--G);var Ae=v+5<<3,we=A0(s,cp)+A0(l,$_)+f,lt=A0(s,D)+A0(l,z)+f+14+3*G+A0(be,Re)+2*be[16]+3*be[17]+7*be[18];if(y>=0&&Ae<=we&&Ae<=lt)return JR(t,S,e.subarray(y,y+v));var pt,At,Ze,tt;if(Xh(t,S,1+(lt<we)),S+=2,lt<we){pt=ay(D,E,0),At=D,Ze=ay(z,W,0),tt=z;var Ot=ay(Re,le,0);Xh(t,S,Q-257),Xh(t,S+5,de-1),Xh(t,S+10,G-4),S+=14;for(var me=0;me<G;++me)Xh(t,S+3*me,Re[j4[me]]);S+=3*G;for(var St=[Y,xe],ne=0;ne<2;++ne)for(var Ee=St[ne],me=0;me<Ee.length;++me){var Ne=Ee[me]&31;Xh(t,S,Ot[Ne]),S+=Re[Ne],Ne>15&&(Xh(t,S,Ee[me]>>5&127),S+=Ee[me]>>12)}}else pt=LG,At=cp,Ze=DG,tt=$_;for(var me=0;me<a;++me){var qe=n[me];if(qe>255){var Ne=qe>>18&31;T0(t,S,pt[Ne+257]),S+=At[Ne+257],Ne>7&&(Xh(t,S,qe>>23&31),S+=UE[Ne]);var Je=qe&31;T0(t,S,Ze[Je]),S+=tt[Je],Je>3&&(T0(t,S,qe>>5&8191),S+=VE[Je])}else T0(t,S,pt[qe]),S+=At[qe]}return T0(t,S,pt[256]),S+At[256]},NG=new jE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),QR=new qc(0),OG=function(e,t,r,n,s,l){var f=l.z||e.length,a=new qc(n+f+5*(1+Math.ceil(f/7e3))+s),y=a.subarray(n,a.length-s),v=l.l,S=(l.r||0)&7;if(t){S&&(y[0]=l.r>>3);for(var P=NG[t-1],D=P>>13,E=P&8191,F=(1<<r)-1,z=l.p||new Du(32768),W=l.h||new Du(F+1),$=Math.ceil(r/3),Y=2*$,Q=function(It){return(e[It]^e[It+1]<<$^e[It+2]<<Y)&F},K=new jE(25e3),xe=new Du(288),de=new Du(32),be=0,me=0,ve=l.i||0,Re=0,le=l.w||0,G=0;ve+2<f;++ve){var Ae=Q(ve),we=ve&32767,lt=W[Ae];if(z[we]=lt,W[Ae]=we,le<=ve){var pt=f-ve;if((be>7e3||Re>24576)&&(pt>423||!v)){S=q4(e,y,0,K,xe,de,me,Re,G,ve-G,S),Re=be=me=0,G=ve;for(var At=0;At<286;++At)xe[At]=0;for(var At=0;At<30;++At)de[At]=0}var Ze=2,tt=0,Ot=E,St=we-lt&32767;if(pt>2&&Ae==Q(ve-St))for(var ne=Math.min(D,pt)-1,Ee=Math.min(32767,ve),Ne=Math.min(258,pt);St<=Ee&&--Ot&&we!=lt;){if(e[ve+Ze]==e[ve+Ze-St]){for(var qe=0;qe<Ne&&e[ve+qe]==e[ve+qe-St];++qe);if(qe>Ze){if(Ze=qe,tt=St,qe>ne)break;for(var Je=Math.min(St,qe-2),gt=0,At=0;At<Je;++At){var bt=ve-St+At&32767,ft=z[bt],Ct=bt-ft&32767;Ct>gt&&(gt=Ct,lt=bt)}}}we=lt,lt=z[we],St+=we-lt&32767}if(tt){K[Re++]=268435456|wS[Ze]<<18|U4[tt];var Ut=wS[Ze]&31,gr=U4[tt]&31;me+=UE[Ut]+VE[gr],++xe[257+Ut],++de[gr],le=ve+Ze,++be}else K[Re++]=e[ve],++xe[e[ve]]}}for(ve=Math.max(ve,le);ve<f;++ve)K[Re++]=e[ve],++xe[e[ve]];S=q4(e,y,v,K,xe,de,me,Re,G,ve-G,S),v||(l.r=S&7|y[S/8|0]<<3,S-=7,l.h=W,l.p=z,l.i=ve,l.w=le)}else{for(var ve=l.w||0;ve<f+v;ve+=65535){var rr=ve+65535;rr>=f&&(y[S/8|0]=v,rr=f),S=JR(y,S+1,e.subarray(ve,rr))}l.i=f}return RG(a,0,n+KR(S)+s)},eN=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,l=r.length|0,f=0;f!=l;){for(var a=Math.min(f+2655,l);f<a;++f)s+=n+=r[f];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},FG=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),f=new qc(l.length+e.length);f.set(l),f.set(e,l.length),e=f,s.w=l.length}return OG(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},tN=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},BG=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=eN();s.p(t.dictionary),tN(e,2,s.d())}};function ES(e,t){t||(t={});var r=eN();r.p(e);var n=FG(e,t,t.dictionary?6:2,4);return BG(n,t),tN(n,n.length-4,r.d()),n}var zG=typeof TextDecoder<"u"&&new TextDecoder,$G=0;try{zG.decode(QR,{stream:!0}),$G=1}catch{}function jG(e){if(Array.isArray(e))return e}function UG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,l,f,a=[],y=!0,v=!1;try{if(l=(r=r.call(e)).next,t!==0)for(;!(y=(n=l.call(r)).done)&&(a.push(n.value),a.length!==t);y=!0);}catch(S){v=!0,s=S}finally{try{if(!y&&r.return!=null&&(f=r.return(),Object(f)!==f))return}finally{if(v)throw s}}return a}}function G4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function VG(e,t){if(e){if(typeof e=="string")return G4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G4(e,t):void 0}}function qG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H4(e,t){return jG(e)||UG(e,t)||VG(e,t)||qG()}function W4(e,t="utf8"){return new TextDecoder(t).decode(e)}const GG=new TextEncoder;function HG(e){return GG.encode(e)}const WG=1024*8,ZG=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Cw={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class qE{constructor(t=WG,r={}){Pi(this,"buffer");Pi(this,"byteLength");Pi(this,"byteOffset");Pi(this,"length");Pi(this,"offset");Pi(this,"lastWrittenByte");Pi(this,"littleEndian");Pi(this,"_data");Pi(this,"_mark");Pi(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const s=r.offset?r.offset>>>0:0,l=t.byteLength-s;let f=s;(ArrayBuffer.isView(t)||t instanceof qE)&&(t.byteLength!==t.buffer.byteLength&&(f=t.byteOffset+s),t=t.buffer),n?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=t,this.length=l,this.byteLength=l,this.byteOffset=f,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,f,l),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=Cw[r].BYTES_PER_ELEMENT*t,s=this.byteOffset+this.offset,l=this.buffer.slice(s,s+n);if(this.littleEndian===ZG&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(s,s+n));a.reverse();const y=new Cw[r](a.buffer);return this.offset+=n,y.reverse(),y}const f=new Cw[r](l);return this.offset+=n,f}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return W4(this.readBytes(t))}decodeText(t=1,r="utf8"){return W4(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(HG(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Lg(e){let t=e.length;for(;--t>=0;)e[t]=0}const XG=3,YG=258,rN=29,KG=256,JG=KG+1+rN,nN=30,QG=512,eH=new Array((JG+2)*2);Lg(eH);const tH=new Array(nN*2);Lg(tH);const rH=new Array(QG);Lg(rH);const nH=new Array(YG-XG+1);Lg(nH);const iH=new Array(rN);Lg(iH);const oH=new Array(nN);Lg(oH);const aH=(e,t,r,n)=>{let s=e&65535|0,l=e>>>16&65535|0,f=0;for(;r!==0;){f=r>2e3?2e3:r,r-=f;do s=s+t[n++]|0,l=l+s|0;while(--f);s%=65521,l%=65521}return s|l<<16|0};var TS=aH;const sH=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},lH=new Uint32Array(sH()),uH=(e,t,r,n)=>{const s=lH,l=n+r;e^=-1;for(let f=n;f<l;f++)e=e>>>8^s[(e^t[f])&255];return e^-1};var ph=uH,AS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},iN={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const cH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var hH=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)cH(r,n)&&(e[n]=r[n])}}return e},fH=e=>{let t=0;for(let n=0,s=e.length;n<s;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,s=0,l=e.length;n<l;n++){let f=e[n];r.set(f,s),s+=f.length}return r},oN={assign:hH,flattenChunks:fH};let aN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{aN=!1}const Ly=new Uint8Array(256);for(let e=0;e<256;e++)Ly[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ly[254]=Ly[254]=1;var dH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,s,l,f=e.length,a=0;for(s=0;s<f;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<f&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(a),l=0,s=0;l<a;s++)r=e.charCodeAt(s),(r&64512)===55296&&s+1<f&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?t[l++]=r:r<2048?(t[l++]=192|r>>>6,t[l++]=128|r&63):r<65536?(t[l++]=224|r>>>12,t[l++]=128|r>>>6&63,t[l++]=128|r&63):(t[l++]=240|r>>>18,t[l++]=128|r>>>12&63,t[l++]=128|r>>>6&63,t[l++]=128|r&63);return t};const pH=(e,t)=>{if(t<65534&&e.subarray&&aN)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var mH=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,s;const l=new Array(r*2);for(s=0,n=0;n<r;){let f=e[n++];if(f<128){l[s++]=f;continue}let a=Ly[f];if(a>4){l[s++]=65533,n+=a-1;continue}for(f&=a===2?31:a===3?15:7;a>1&&n<r;)f=f<<6|e[n++]&63,a--;if(a>1){l[s++]=65533;continue}f<65536?l[s++]=f:(f-=65536,l[s++]=55296|f>>10&1023,l[s++]=56320|f&1023)}return pH(l,s)},gH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Ly[e[r]]>t?r:t},PS={string2buf:dH,buf2string:mH,utf8border:gH};function yH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var vH=yH;const d1=16209,_H=16191;var bH=function(t,r){let n,s,l,f,a,y,v,S,P,D,E,F,z,W,$,Y,Q,K,xe,de,be,me,ve,Re;const le=t.state;n=t.next_in,ve=t.input,s=n+(t.avail_in-5),l=t.next_out,Re=t.output,f=l-(r-t.avail_out),a=l+(t.avail_out-257),y=le.dmax,v=le.wsize,S=le.whave,P=le.wnext,D=le.window,E=le.hold,F=le.bits,z=le.lencode,W=le.distcode,$=(1<<le.lenbits)-1,Y=(1<<le.distbits)-1;e:do{F<15&&(E+=ve[n++]<<F,F+=8,E+=ve[n++]<<F,F+=8),Q=z[E&$];t:for(;;){if(K=Q>>>24,E>>>=K,F-=K,K=Q>>>16&255,K===0)Re[l++]=Q&65535;else if(K&16){xe=Q&65535,K&=15,K&&(F<K&&(E+=ve[n++]<<F,F+=8),xe+=E&(1<<K)-1,E>>>=K,F-=K),F<15&&(E+=ve[n++]<<F,F+=8,E+=ve[n++]<<F,F+=8),Q=W[E&Y];r:for(;;){if(K=Q>>>24,E>>>=K,F-=K,K=Q>>>16&255,K&16){if(de=Q&65535,K&=15,F<K&&(E+=ve[n++]<<F,F+=8,F<K&&(E+=ve[n++]<<F,F+=8)),de+=E&(1<<K)-1,de>y){t.msg="invalid distance too far back",le.mode=d1;break e}if(E>>>=K,F-=K,K=l-f,de>K){if(K=de-K,K>S&&le.sane){t.msg="invalid distance too far back",le.mode=d1;break e}if(be=0,me=D,P===0){if(be+=v-K,K<xe){xe-=K;do Re[l++]=D[be++];while(--K);be=l-de,me=Re}}else if(P<K){if(be+=v+P-K,K-=P,K<xe){xe-=K;do Re[l++]=D[be++];while(--K);if(be=0,P<xe){K=P,xe-=K;do Re[l++]=D[be++];while(--K);be=l-de,me=Re}}}else if(be+=P-K,K<xe){xe-=K;do Re[l++]=D[be++];while(--K);be=l-de,me=Re}for(;xe>2;)Re[l++]=me[be++],Re[l++]=me[be++],Re[l++]=me[be++],xe-=3;xe&&(Re[l++]=me[be++],xe>1&&(Re[l++]=me[be++]))}else{be=l-de;do Re[l++]=Re[be++],Re[l++]=Re[be++],Re[l++]=Re[be++],xe-=3;while(xe>2);xe&&(Re[l++]=Re[be++],xe>1&&(Re[l++]=Re[be++]))}}else if(K&64){t.msg="invalid distance code",le.mode=d1;break e}else{Q=W[(Q&65535)+(E&(1<<K)-1)];continue r}break}}else if(K&64)if(K&32){le.mode=_H;break e}else{t.msg="invalid literal/length code",le.mode=d1;break e}else{Q=z[(Q&65535)+(E&(1<<K)-1)];continue t}break}}while(n<s&&l<a);xe=F>>3,n-=xe,F-=xe<<3,E&=(1<<F)-1,t.next_in=n,t.next_out=l,t.avail_in=n<s?5+(s-n):5-(n-s),t.avail_out=l<a?257+(a-l):257-(l-a),le.hold=E,le.bits=F};const lm=15,Z4=852,X4=592,Y4=0,Ew=1,K4=2,xH=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),wH=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),SH=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),CH=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),EH=(e,t,r,n,s,l,f,a)=>{const y=a.bits;let v=0,S=0,P=0,D=0,E=0,F=0,z=0,W=0,$=0,Y=0,Q,K,xe,de,be,me=null,ve;const Re=new Uint16Array(lm+1),le=new Uint16Array(lm+1);let G=null,Ae,we,lt;for(v=0;v<=lm;v++)Re[v]=0;for(S=0;S<n;S++)Re[t[r+S]]++;for(E=y,D=lm;D>=1&&Re[D]===0;D--);if(E>D&&(E=D),D===0)return s[l++]=1<<24|64<<16|0,s[l++]=1<<24|64<<16|0,a.bits=1,0;for(P=1;P<D&&Re[P]===0;P++);for(E<P&&(E=P),W=1,v=1;v<=lm;v++)if(W<<=1,W-=Re[v],W<0)return-1;if(W>0&&(e===Y4||D!==1))return-1;for(le[1]=0,v=1;v<lm;v++)le[v+1]=le[v]+Re[v];for(S=0;S<n;S++)t[r+S]!==0&&(f[le[t[r+S]]++]=S);if(e===Y4?(me=G=f,ve=20):e===Ew?(me=xH,G=wH,ve=257):(me=SH,G=CH,ve=0),Y=0,S=0,v=P,be=l,F=E,z=0,xe=-1,$=1<<E,de=$-1,e===Ew&&$>Z4||e===K4&&$>X4)return 1;for(;;){Ae=v-z,f[S]+1<ve?(we=0,lt=f[S]):f[S]>=ve?(we=G[f[S]-ve],lt=me[f[S]-ve]):(we=96,lt=0),Q=1<<v-z,K=1<<F,P=K;do K-=Q,s[be+(Y>>z)+K]=Ae<<24|we<<16|lt|0;while(K!==0);for(Q=1<<v-1;Y&Q;)Q>>=1;if(Q!==0?(Y&=Q-1,Y+=Q):Y=0,S++,--Re[v]===0){if(v===D)break;v=t[r+f[S]]}if(v>E&&(Y&de)!==xe){for(z===0&&(z=E),be+=P,F=v-z,W=1<<F;F+z<D&&(W-=Re[F+z],!(W<=0));)F++,W<<=1;if($+=1<<F,e===Ew&&$>Z4||e===K4&&$>X4)return 1;xe=Y&de,s[xe]=E<<24|F<<16|be-l|0}}return Y!==0&&(s[be+Y]=v-z<<24|64<<16|0),a.bits=E,0};var sy=EH;const TH=0,sN=1,lN=2,{Z_FINISH:J4,Z_BLOCK:AH,Z_TREES:p1,Z_OK:hp,Z_STREAM_END:PH,Z_NEED_DICT:IH,Z_STREAM_ERROR:sc,Z_DATA_ERROR:uN,Z_MEM_ERROR:cN,Z_BUF_ERROR:MH,Z_DEFLATED:Q4}=iN,fb=16180,eI=16181,tI=16182,rI=16183,nI=16184,iI=16185,oI=16186,aI=16187,sI=16188,lI=16189,j_=16190,Yh=16191,Tw=16192,uI=16193,Aw=16194,cI=16195,hI=16196,fI=16197,dI=16198,m1=16199,g1=16200,pI=16201,mI=16202,gI=16203,yI=16204,vI=16205,Pw=16206,_I=16207,bI=16208,Ho=16209,hN=16210,fN=16211,kH=852,LH=592,DH=15,RH=DH,xI=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function NH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Sp=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<fb||t.mode>fN?1:0},dN=e=>{if(Sp(e))return sc;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=fb,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(kH),t.distcode=t.distdyn=new Int32Array(LH),t.sane=1,t.back=-1,hp},pN=e=>{if(Sp(e))return sc;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,dN(e)},mN=(e,t)=>{let r;if(Sp(e))return sc;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?sc:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,pN(e))},gN=(e,t)=>{if(!e)return sc;const r=new NH;e.state=r,r.strm=e,r.window=null,r.mode=fb;const n=mN(e,t);return n!==hp&&(e.state=null),n},OH=e=>gN(e,RH);let wI=!0,Iw,Mw;const FH=e=>{if(wI){Iw=new Int32Array(512),Mw=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(sy(sN,e.lens,0,288,Iw,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;sy(lN,e.lens,0,32,Mw,0,e.work,{bits:5}),wI=!1}e.lencode=Iw,e.lenbits=9,e.distcode=Mw,e.distbits=5},yN=(e,t,r,n)=>{let s;const l=e.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),n>=l.wsize?(l.window.set(t.subarray(r-l.wsize,r),0),l.wnext=0,l.whave=l.wsize):(s=l.wsize-l.wnext,s>n&&(s=n),l.window.set(t.subarray(r-n,r-n+s),l.wnext),n-=s,n?(l.window.set(t.subarray(r-n,r),0),l.wnext=n,l.whave=l.wsize):(l.wnext+=s,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=s))),0},BH=(e,t)=>{let r,n,s,l,f,a,y,v,S,P,D,E,F,z,W=0,$,Y,Q,K,xe,de,be,me;const ve=new Uint8Array(4);let Re,le;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Sp(e)||!e.output||!e.input&&e.avail_in!==0)return sc;r=e.state,r.mode===Yh&&(r.mode=Tw),f=e.next_out,s=e.output,y=e.avail_out,l=e.next_in,n=e.input,a=e.avail_in,v=r.hold,S=r.bits,P=a,D=y,me=hp;e:for(;;)switch(r.mode){case fb:if(r.wrap===0){r.mode=Tw;break}for(;S<16;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(r.wrap&2&&v===35615){r.wbits===0&&(r.wbits=15),r.check=0,ve[0]=v&255,ve[1]=v>>>8&255,r.check=ph(r.check,ve,2,0),v=0,S=0,r.mode=eI;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((v&255)<<8)+(v>>8))%31){e.msg="incorrect header check",r.mode=Ho;break}if((v&15)!==Q4){e.msg="unknown compression method",r.mode=Ho;break}if(v>>>=4,S-=4,be=(v&15)+8,r.wbits===0&&(r.wbits=be),be>15||be>r.wbits){e.msg="invalid window size",r.mode=Ho;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=v&512?lI:Yh,v=0,S=0;break;case eI:for(;S<16;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(r.flags=v,(r.flags&255)!==Q4){e.msg="unknown compression method",r.mode=Ho;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ho;break}r.head&&(r.head.text=v>>8&1),r.flags&512&&r.wrap&4&&(ve[0]=v&255,ve[1]=v>>>8&255,r.check=ph(r.check,ve,2,0)),v=0,S=0,r.mode=tI;case tI:for(;S<32;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}r.head&&(r.head.time=v),r.flags&512&&r.wrap&4&&(ve[0]=v&255,ve[1]=v>>>8&255,ve[2]=v>>>16&255,ve[3]=v>>>24&255,r.check=ph(r.check,ve,4,0)),v=0,S=0,r.mode=rI;case rI:for(;S<16;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}r.head&&(r.head.xflags=v&255,r.head.os=v>>8),r.flags&512&&r.wrap&4&&(ve[0]=v&255,ve[1]=v>>>8&255,r.check=ph(r.check,ve,2,0)),v=0,S=0,r.mode=nI;case nI:if(r.flags&1024){for(;S<16;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}r.length=v,r.head&&(r.head.extra_len=v),r.flags&512&&r.wrap&4&&(ve[0]=v&255,ve[1]=v>>>8&255,r.check=ph(r.check,ve,2,0)),v=0,S=0}else r.head&&(r.head.extra=null);r.mode=iI;case iI:if(r.flags&1024&&(E=r.length,E>a&&(E=a),E&&(r.head&&(be=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(l,l+E),be)),r.flags&512&&r.wrap&4&&(r.check=ph(r.check,n,E,l)),a-=E,l+=E,r.length-=E),r.length))break e;r.length=0,r.mode=oI;case oI:if(r.flags&2048){if(a===0)break e;E=0;do be=n[l+E++],r.head&&be&&r.length<65536&&(r.head.name+=String.fromCharCode(be));while(be&&E<a);if(r.flags&512&&r.wrap&4&&(r.check=ph(r.check,n,E,l)),a-=E,l+=E,be)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=aI;case aI:if(r.flags&4096){if(a===0)break e;E=0;do be=n[l+E++],r.head&&be&&r.length<65536&&(r.head.comment+=String.fromCharCode(be));while(be&&E<a);if(r.flags&512&&r.wrap&4&&(r.check=ph(r.check,n,E,l)),a-=E,l+=E,be)break e}else r.head&&(r.head.comment=null);r.mode=sI;case sI:if(r.flags&512){for(;S<16;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(r.wrap&4&&v!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ho;break}v=0,S=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Yh;break;case lI:for(;S<32;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}e.adler=r.check=xI(v),v=0,S=0,r.mode=j_;case j_:if(r.havedict===0)return e.next_out=f,e.avail_out=y,e.next_in=l,e.avail_in=a,r.hold=v,r.bits=S,IH;e.adler=r.check=1,r.mode=Yh;case Yh:if(t===AH||t===p1)break e;case Tw:if(r.last){v>>>=S&7,S-=S&7,r.mode=Pw;break}for(;S<3;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}switch(r.last=v&1,v>>>=1,S-=1,v&3){case 0:r.mode=uI;break;case 1:if(FH(r),r.mode=m1,t===p1){v>>>=2,S-=2;break e}break;case 2:r.mode=hI;break;case 3:e.msg="invalid block type",r.mode=Ho}v>>>=2,S-=2;break;case uI:for(v>>>=S&7,S-=S&7;S<32;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if((v&65535)!==(v>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ho;break}if(r.length=v&65535,v=0,S=0,r.mode=Aw,t===p1)break e;case Aw:r.mode=cI;case cI:if(E=r.length,E){if(E>a&&(E=a),E>y&&(E=y),E===0)break e;s.set(n.subarray(l,l+E),f),a-=E,l+=E,y-=E,f+=E,r.length-=E;break}r.mode=Yh;break;case hI:for(;S<14;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(r.nlen=(v&31)+257,v>>>=5,S-=5,r.ndist=(v&31)+1,v>>>=5,S-=5,r.ncode=(v&15)+4,v>>>=4,S-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ho;break}r.have=0,r.mode=fI;case fI:for(;r.have<r.ncode;){for(;S<3;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}r.lens[G[r.have++]]=v&7,v>>>=3,S-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Re={bits:r.lenbits},me=sy(TH,r.lens,0,19,r.lencode,0,r.work,Re),r.lenbits=Re.bits,me){e.msg="invalid code lengths set",r.mode=Ho;break}r.have=0,r.mode=dI;case dI:for(;r.have<r.nlen+r.ndist;){for(;W=r.lencode[v&(1<<r.lenbits)-1],$=W>>>24,Y=W>>>16&255,Q=W&65535,!($<=S);){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(Q<16)v>>>=$,S-=$,r.lens[r.have++]=Q;else{if(Q===16){for(le=$+2;S<le;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(v>>>=$,S-=$,r.have===0){e.msg="invalid bit length repeat",r.mode=Ho;break}be=r.lens[r.have-1],E=3+(v&3),v>>>=2,S-=2}else if(Q===17){for(le=$+3;S<le;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}v>>>=$,S-=$,be=0,E=3+(v&7),v>>>=3,S-=3}else{for(le=$+7;S<le;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}v>>>=$,S-=$,be=0,E=11+(v&127),v>>>=7,S-=7}if(r.have+E>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ho;break}for(;E--;)r.lens[r.have++]=be}}if(r.mode===Ho)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ho;break}if(r.lenbits=9,Re={bits:r.lenbits},me=sy(sN,r.lens,0,r.nlen,r.lencode,0,r.work,Re),r.lenbits=Re.bits,me){e.msg="invalid literal/lengths set",r.mode=Ho;break}if(r.distbits=6,r.distcode=r.distdyn,Re={bits:r.distbits},me=sy(lN,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Re),r.distbits=Re.bits,me){e.msg="invalid distances set",r.mode=Ho;break}if(r.mode=m1,t===p1)break e;case m1:r.mode=g1;case g1:if(a>=6&&y>=258){e.next_out=f,e.avail_out=y,e.next_in=l,e.avail_in=a,r.hold=v,r.bits=S,bH(e,D),f=e.next_out,s=e.output,y=e.avail_out,l=e.next_in,n=e.input,a=e.avail_in,v=r.hold,S=r.bits,r.mode===Yh&&(r.back=-1);break}for(r.back=0;W=r.lencode[v&(1<<r.lenbits)-1],$=W>>>24,Y=W>>>16&255,Q=W&65535,!($<=S);){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(Y&&!(Y&240)){for(K=$,xe=Y,de=Q;W=r.lencode[de+((v&(1<<K+xe)-1)>>K)],$=W>>>24,Y=W>>>16&255,Q=W&65535,!(K+$<=S);){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}v>>>=K,S-=K,r.back+=K}if(v>>>=$,S-=$,r.back+=$,r.length=Q,Y===0){r.mode=vI;break}if(Y&32){r.back=-1,r.mode=Yh;break}if(Y&64){e.msg="invalid literal/length code",r.mode=Ho;break}r.extra=Y&15,r.mode=pI;case pI:if(r.extra){for(le=r.extra;S<le;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}r.length+=v&(1<<r.extra)-1,v>>>=r.extra,S-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=mI;case mI:for(;W=r.distcode[v&(1<<r.distbits)-1],$=W>>>24,Y=W>>>16&255,Q=W&65535,!($<=S);){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(!(Y&240)){for(K=$,xe=Y,de=Q;W=r.distcode[de+((v&(1<<K+xe)-1)>>K)],$=W>>>24,Y=W>>>16&255,Q=W&65535,!(K+$<=S);){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}v>>>=K,S-=K,r.back+=K}if(v>>>=$,S-=$,r.back+=$,Y&64){e.msg="invalid distance code",r.mode=Ho;break}r.offset=Q,r.extra=Y&15,r.mode=gI;case gI:if(r.extra){for(le=r.extra;S<le;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}r.offset+=v&(1<<r.extra)-1,v>>>=r.extra,S-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ho;break}r.mode=yI;case yI:if(y===0)break e;if(E=D-y,r.offset>E){if(E=r.offset-E,E>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ho;break}E>r.wnext?(E-=r.wnext,F=r.wsize-E):F=r.wnext-E,E>r.length&&(E=r.length),z=r.window}else z=s,F=f-r.offset,E=r.length;E>y&&(E=y),y-=E,r.length-=E;do s[f++]=z[F++];while(--E);r.length===0&&(r.mode=g1);break;case vI:if(y===0)break e;s[f++]=r.length,y--,r.mode=g1;break;case Pw:if(r.wrap){for(;S<32;){if(a===0)break e;a--,v|=n[l++]<<S,S+=8}if(D-=y,e.total_out+=D,r.total+=D,r.wrap&4&&D&&(e.adler=r.check=r.flags?ph(r.check,s,D,f-D):TS(r.check,s,D,f-D)),D=y,r.wrap&4&&(r.flags?v:xI(v))!==r.check){e.msg="incorrect data check",r.mode=Ho;break}v=0,S=0}r.mode=_I;case _I:if(r.wrap&&r.flags){for(;S<32;){if(a===0)break e;a--,v+=n[l++]<<S,S+=8}if(r.wrap&4&&v!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ho;break}v=0,S=0}r.mode=bI;case bI:me=PH;break e;case Ho:me=uN;break e;case hN:return cN;case fN:default:return sc}return e.next_out=f,e.avail_out=y,e.next_in=l,e.avail_in=a,r.hold=v,r.bits=S,(r.wsize||D!==e.avail_out&&r.mode<Ho&&(r.mode<Pw||t!==J4))&&yN(e,e.output,e.next_out,D-e.avail_out),P-=e.avail_in,D-=e.avail_out,e.total_in+=P,e.total_out+=D,r.total+=D,r.wrap&4&&D&&(e.adler=r.check=r.flags?ph(r.check,s,D,e.next_out-D):TS(r.check,s,D,e.next_out-D)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Yh?128:0)+(r.mode===m1||r.mode===Aw?256:0),(P===0&&D===0||t===J4)&&me===hp&&(me=MH),me},zH=e=>{if(Sp(e))return sc;let t=e.state;return t.window&&(t.window=null),e.state=null,hp},$H=(e,t)=>{if(Sp(e))return sc;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,hp):sc},jH=(e,t)=>{const r=t.length;let n,s,l;return Sp(e)||(n=e.state,n.wrap!==0&&n.mode!==j_)?sc:n.mode===j_&&(s=1,s=TS(s,t,r,0),s!==n.check)?uN:(l=yN(e,t,r,r),l?(n.mode=hN,cN):(n.havedict=1,hp))};var UH=pN,VH=mN,qH=dN,GH=OH,HH=gN,WH=BH,ZH=zH,XH=$H,YH=jH,KH="pako inflate (from Nodeca project)",tf={inflateReset:UH,inflateReset2:VH,inflateResetKeep:qH,inflateInit:GH,inflateInit2:HH,inflate:WH,inflateEnd:ZH,inflateGetHeader:XH,inflateSetDictionary:YH,inflateInfo:KH};function JH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var QH=JH;const vN=Object.prototype.toString,{Z_NO_FLUSH:eW,Z_FINISH:tW,Z_OK:Dy,Z_STREAM_END:kw,Z_NEED_DICT:Lw,Z_STREAM_ERROR:rW,Z_DATA_ERROR:SI,Z_MEM_ERROR:nW}=iN;function uv(e){this.options=oN.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vH,this.strm.avail_out=0;let r=tf.inflateInit2(this.strm,t.windowBits);if(r!==Dy)throw new Error(AS[r]);if(this.header=new QH,tf.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=PS.string2buf(t.dictionary):vN.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=tf.inflateSetDictionary(this.strm,t.dictionary),r!==Dy)))throw new Error(AS[r])}uv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let l,f,a;if(this.ended)return!1;for(t===~~t?f=t:f=t===!0?tW:eW,vN.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),l=tf.inflate(r,f),l===Lw&&s&&(l=tf.inflateSetDictionary(r,s),l===Dy?l=tf.inflate(r,f):l===SI&&(l=Lw));r.avail_in>0&&l===kw&&r.state.wrap>0&&e[r.next_in]!==0;)tf.inflateReset(r),l=tf.inflate(r,f);switch(l){case rW:case SI:case Lw:case nW:return this.onEnd(l),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||l===kw))if(this.options.to==="string"){let y=PS.utf8border(r.output,r.next_out),v=r.next_out-y,S=PS.buf2string(r.output,y);r.next_out=v,r.avail_out=n-v,v&&r.output.set(r.output.subarray(y,y+v),0),this.onData(S)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(l===Dy&&a===0)){if(l===kw)return l=tf.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};uv.prototype.onData=function(e){this.chunks.push(e)};uv.prototype.onEnd=function(e){e===Dy&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=oN.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function iW(e,t){const r=new uv(t);if(r.push(e),r.err)throw r.msg||AS[r.err];return r.result}var oW=uv,aW=iW,sW={Inflate:oW,inflate:aW};const{Inflate:lW,inflate:uW}=sW;var CI=lW,cW=uW;const _N=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;_N[e]=t}const EI=4294967295;function hW(e,t,r){let n=e;for(let s=0;s<r;s++)n=_N[(n^t[s])&255]^n>>>8;return n}function fW(e,t){return(hW(EI,e,t)^EI)>>>0}function TI(e,t,r){const n=e.readUint32(),s=fW(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function bN(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function xN(e,t,r,n){let s=0;for(;s<n;s++)t[s]=e[s];for(;s<r;s++)t[s]=e[s]+t[s-n]&255}function wN(e,t,r,n){let s=0;if(r.length===0)for(;s<n;s++)t[s]=e[s];else for(;s<n;s++)t[s]=e[s]+r[s]&255}function SN(e,t,r,n,s){let l=0;if(r.length===0){for(;l<s;l++)t[l]=e[l];for(;l<n;l++)t[l]=e[l]+(t[l-s]>>1)&255}else{for(;l<s;l++)t[l]=e[l]+(r[l]>>1)&255;for(;l<n;l++)t[l]=e[l]+(t[l-s]+r[l]>>1)&255}}function CN(e,t,r,n,s){let l=0;if(r.length===0){for(;l<s;l++)t[l]=e[l];for(;l<n;l++)t[l]=e[l]+t[l-s]&255}else{for(;l<s;l++)t[l]=e[l]+r[l]&255;for(;l<n;l++)t[l]=e[l]+dW(t[l-s],r[l],r[l-s])&255}}function dW(e,t,r){const n=e+t-r,s=Math.abs(n-e),l=Math.abs(n-t),f=Math.abs(n-r);return s<=l&&s<=f?e:l<=f?t:r}function pW(e,t,r,n,s,l){switch(e){case 0:bN(t,r,s);break;case 1:xN(t,r,s,l);break;case 2:wN(t,r,n,s);break;case 3:SN(t,r,n,s,l);break;case 4:CN(t,r,n,s,l);break;default:throw new Error(`Unsupported filter: ${e}`)}}const mW=new Uint16Array([255]),gW=new Uint8Array(mW.buffer),yW=gW[0]===255;function vW(e){const{data:t,width:r,height:n,channels:s,depth:l}=e,f=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(l/8)*s,y=new Uint8Array(n*r*a);let v=0;for(let S=0;S<7;S++){const P=f[S],D=Math.ceil((r-P.x)/P.xStep),E=Math.ceil((n-P.y)/P.yStep);if(D<=0||E<=0)continue;const F=D*a,z=new Uint8Array(F);for(let W=0;W<E;W++){const $=t[v++],Y=t.subarray(v,v+F);v+=F;const Q=new Uint8Array(F);pW($,Y,Q,z,F,a),z.set(Q);for(let K=0;K<D;K++){const xe=P.x+K*P.xStep,de=P.y+W*P.yStep;if(!(xe>=r||de>=n))for(let be=0;be<a;be++)y[(de*r+xe)*a+be]=Q[K*a+be]}}}if(l===16){const S=new Uint16Array(y.buffer);if(yW)for(let P=0;P<S.length;P++)S[P]=_W(S[P]);return S}else return y}function _W(e){return(e&255)<<8|e>>8&255}const bW=new Uint16Array([255]),xW=new Uint8Array(bW.buffer),wW=xW[0]===255,SW=new Uint8Array(0);function AI(e){const{data:t,width:r,height:n,channels:s,depth:l}=e,f=Math.ceil(l/8)*s,a=Math.ceil(l/8*s*r),y=new Uint8Array(n*a);let v=SW,S=0,P,D;for(let E=0;E<n;E++){switch(P=t.subarray(S+1,S+1+a),D=y.subarray(E*a,(E+1)*a),t[S]){case 0:bN(P,D,a);break;case 1:xN(P,D,a,f);break;case 2:wN(P,D,v,a);break;case 3:SN(P,D,v,a,f);break;case 4:CN(P,D,v,a,f);break;default:throw new Error(`Unsupported filter: ${t[S]}`)}v=D,S+=a+1}if(l===16){const E=new Uint16Array(y.buffer);if(wW)for(let F=0;F<E.length;F++)E[F]=CW(E[F]);return E}else return y}function CW(e){return(e&255)<<8|e>>8&255}const J1=Uint8Array.of(137,80,78,71,13,10,26,10);function PI(e){if(!EW(e.readBytes(J1.length)))throw new Error("wrong PNG signature")}function EW(e){if(e.length<J1.length)return!1;for(let t=0;t<J1.length;t++)if(e[t]!==J1[t])return!1;return!0}const TW="tEXt",AW=0,EN=new TextDecoder("latin1");function PW(e){if(MW(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const IW=/^[\u0000-\u00FF]*$/;function MW(e){if(!IW.test(e))throw new Error("invalid latin1 text")}function kW(e,t,r){const n=TN(t);e[n]=LW(t,r-n.length-1)}function TN(e){for(e.mark();e.readByte()!==AW;);const t=e.offset;e.reset();const r=EN.decode(e.readBytes(t-e.offset-1));return e.skip(1),PW(r),r}function LW(e,t){return EN.decode(e.readBytes(t))}const Pu={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Dw={UNKNOWN:-1,DEFLATE:0},II={UNKNOWN:-1,ADAPTIVE:0},Rw={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},y1={NONE:0,BACKGROUND:1,PREVIOUS:2},Nw={SOURCE:0,OVER:1};class DW extends qE{constructor(r,n={}){super(r);Pi(this,"_checkCrc");Pi(this,"_inflator");Pi(this,"_png");Pi(this,"_apng");Pi(this,"_end");Pi(this,"_hasPalette");Pi(this,"_palette");Pi(this,"_hasTransparency");Pi(this,"_transparency");Pi(this,"_compressionMethod");Pi(this,"_filterMethod");Pi(this,"_interlaceMethod");Pi(this,"_colorType");Pi(this,"_isAnimated");Pi(this,"_numberOfFrames");Pi(this,"_numberOfPlays");Pi(this,"_frames");Pi(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new CI,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Dw.UNKNOWN,this._filterMethod=II.UNKNOWN,this._interlaceMethod=Rw.UNKNOWN,this._colorType=Pu.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(PI(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(PI(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case TW:kW(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?TI(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?TI(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=RW(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case Pu.GREYSCALE:s=1;break;case Pu.TRUECOLOUR:s=3;break;case Pu.INDEXED_COLOUR:s=1;break;case Pu.GREYSCALE_ALPHA:s=2;break;case Pu.TRUECOLOUR_ALPHA:s=4;break;case Pu.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==Dw.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let l=0;l<n;l++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case Pu.GREYSCALE:case Pu.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case Pu.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Pu.UNKNOWN:case Pu.GREYSCALE_ALPHA:case Pu.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=TN(this),s=this.readUint8();if(s!==Dw.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const l=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:cW(l)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=AI({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const l=this._apng.frames.at(r-1);this.disposeFrame(s,l,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case y1.NONE:break;case y1.BACKGROUND:for(let l=0;l<this._png.height;l++)for(let f=0;f<this._png.width;f++){const a=(l*r.width+f)*this._png.channels;for(let y=0;y<this._png.channels;y++)s.data[a+y]=0}break;case y1.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,l=(f,a)=>{const y=((f+n.yOffset)*this._png.width+n.xOffset+a)*this._png.channels,v=(f*n.width+a)*this._png.channels;return{index:y,frameIndex:v}};switch(n.blendOp){case Nw.SOURCE:for(let f=0;f<n.height;f++)for(let a=0;a<n.width;a++){const{index:y,frameIndex:v}=l(f,a);for(let S=0;S<this._png.channels;S++)r.data[y+S]=n.data[v+S]}break;case Nw.OVER:for(let f=0;f<n.height;f++)for(let a=0;a<n.width;a++){const{index:y,frameIndex:v}=l(f,a);for(let S=0;S<this._png.channels;S++){const P=n.data[v+this._png.channels-1]/s,D=S%(this._png.channels-1)===0?1:n.data[v+S],E=Math.floor(P*D+(1-P)*r.data[y+S]);r.data[y+S]+=E}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==II.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===Rw.NO_INTERLACE)this._png.data=AI({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===Rw.ADAM7)this._png.data=vW({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:y1.NONE,blendOp:Nw.SOURCE,data:r}),this._inflator=new CI,this._writingDataChunks=!1}}function RW(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var MI;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(MI||(MI={}));function NW(e,t){return new DW(e,t).decode()}var $n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ow(){$n.console&&typeof $n.console.log=="function"&&$n.console.log.apply($n.console,arguments)}var mo={log:Ow,warn:function(e){$n.console&&(typeof $n.console.warn=="function"?$n.console.warn.apply($n.console,arguments):Ow.call(null,arguments))},error:function(e){$n.console&&(typeof $n.console.error=="function"?$n.console.error.apply($n.console,arguments):Ow(e))}};function Fw(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Ud(n.response,t,r)},n.onerror=function(){mo.error("could not download file")},n.send()}function kI(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function v1(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ud=$n.saveAs||((typeof window>"u"?"undefined":Ji(window))!=="object"||window!==$n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=$n.URL||$n.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?kI(s.href)?Fw(e,t,r):v1(s,s.target="_blank"):v1(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){v1(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(kI(e))Fw(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){v1(n)})}else navigator.msSaveOrOpenBlob(function(s,l){return l===void 0?l={autoBom:!1}:Ji(l)!=="object"&&(mo.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return Fw(e,t,r);var s=e.type==="application/octet-stream",l=/constructor/i.test($n.HTMLElement)||$n.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||s&&l)&&(typeof FileReader>"u"?"undefined":Ji(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var S=a.result;S=f?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=S:location=S,n=null},a.readAsDataURL(e)}else{var y=$n.URL||$n.webkitURL,v=y.createObjectURL(e);n?n.location=v:location.href=v,n=null,setTimeout(function(){y.revokeObjectURL(v)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function AN(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,l=r[n].process,f=s.exec(e);f&&(t=l(f),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),y=this.g.toString(16),v=this.b.toString(16);return a.length==1&&(a="0"+a),y.length==1&&(y="0"+y),v.length==1&&(v="0"+v),"#"+a+y+v}}var Q1=$n.atob.bind($n),LI=$n.btoa.bind($n);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Bw(e,t){var r=e[0],n=e[1],s=e[2],l=e[3];r=ml(r,n,s,l,t[0],7,-680876936),l=ml(l,r,n,s,t[1],12,-389564586),s=ml(s,l,r,n,t[2],17,606105819),n=ml(n,s,l,r,t[3],22,-1044525330),r=ml(r,n,s,l,t[4],7,-176418897),l=ml(l,r,n,s,t[5],12,1200080426),s=ml(s,l,r,n,t[6],17,-1473231341),n=ml(n,s,l,r,t[7],22,-45705983),r=ml(r,n,s,l,t[8],7,1770035416),l=ml(l,r,n,s,t[9],12,-1958414417),s=ml(s,l,r,n,t[10],17,-42063),n=ml(n,s,l,r,t[11],22,-1990404162),r=ml(r,n,s,l,t[12],7,1804603682),l=ml(l,r,n,s,t[13],12,-40341101),s=ml(s,l,r,n,t[14],17,-1502002290),r=gl(r,n=ml(n,s,l,r,t[15],22,1236535329),s,l,t[1],5,-165796510),l=gl(l,r,n,s,t[6],9,-1069501632),s=gl(s,l,r,n,t[11],14,643717713),n=gl(n,s,l,r,t[0],20,-373897302),r=gl(r,n,s,l,t[5],5,-701558691),l=gl(l,r,n,s,t[10],9,38016083),s=gl(s,l,r,n,t[15],14,-660478335),n=gl(n,s,l,r,t[4],20,-405537848),r=gl(r,n,s,l,t[9],5,568446438),l=gl(l,r,n,s,t[14],9,-1019803690),s=gl(s,l,r,n,t[3],14,-187363961),n=gl(n,s,l,r,t[8],20,1163531501),r=gl(r,n,s,l,t[13],5,-1444681467),l=gl(l,r,n,s,t[2],9,-51403784),s=gl(s,l,r,n,t[7],14,1735328473),r=yl(r,n=gl(n,s,l,r,t[12],20,-1926607734),s,l,t[5],4,-378558),l=yl(l,r,n,s,t[8],11,-2022574463),s=yl(s,l,r,n,t[11],16,1839030562),n=yl(n,s,l,r,t[14],23,-35309556),r=yl(r,n,s,l,t[1],4,-1530992060),l=yl(l,r,n,s,t[4],11,1272893353),s=yl(s,l,r,n,t[7],16,-155497632),n=yl(n,s,l,r,t[10],23,-1094730640),r=yl(r,n,s,l,t[13],4,681279174),l=yl(l,r,n,s,t[0],11,-358537222),s=yl(s,l,r,n,t[3],16,-722521979),n=yl(n,s,l,r,t[6],23,76029189),r=yl(r,n,s,l,t[9],4,-640364487),l=yl(l,r,n,s,t[12],11,-421815835),s=yl(s,l,r,n,t[15],16,530742520),r=vl(r,n=yl(n,s,l,r,t[2],23,-995338651),s,l,t[0],6,-198630844),l=vl(l,r,n,s,t[7],10,1126891415),s=vl(s,l,r,n,t[14],15,-1416354905),n=vl(n,s,l,r,t[5],21,-57434055),r=vl(r,n,s,l,t[12],6,1700485571),l=vl(l,r,n,s,t[3],10,-1894986606),s=vl(s,l,r,n,t[10],15,-1051523),n=vl(n,s,l,r,t[1],21,-2054922799),r=vl(r,n,s,l,t[8],6,1873313359),l=vl(l,r,n,s,t[15],10,-30611744),s=vl(s,l,r,n,t[6],15,-1560198380),n=vl(n,s,l,r,t[13],21,1309151649),r=vl(r,n,s,l,t[4],6,-145523070),l=vl(l,r,n,s,t[11],10,-1120210379),s=vl(s,l,r,n,t[2],15,718787259),n=vl(n,s,l,r,t[9],21,-343485551),e[0]=Xf(r,e[0]),e[1]=Xf(n,e[1]),e[2]=Xf(s,e[2]),e[3]=Xf(l,e[3])}function db(e,t,r,n,s,l){return t=Xf(Xf(t,e),Xf(n,l)),Xf(t<<s|t>>>32-s,r)}function ml(e,t,r,n,s,l,f){return db(t&r|~t&n,e,t,s,l,f)}function gl(e,t,r,n,s,l,f){return db(t&n|r&~n,e,t,s,l,f)}function yl(e,t,r,n,s,l,f){return db(t^r^n,e,t,s,l,f)}function vl(e,t,r,n,s,l,f){return db(r^(t|~n),e,t,s,l,f)}function PN(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Bw(n,OW(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Bw(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,Bw(n,s),n}function OW(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var DI="0123456789abcdef".split("");function FW(e){for(var t="",r=0;r<4;r++)t+=DI[e>>8*r+4&15]+DI[e>>8*r&15];return t}function BW(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function IS(e){return PN(e).map(BW).join("")}var zW=function(e){for(var t=0;t<e.length;t++)e[t]=FW(e[t]);return e.join("")}(PN("hello"))!="5d41402abc4b2a76b9719d911017c592";function Xf(e,t){if(zW){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function MS(e,t){var r,n,s,l;if(e!==r){for(var f=(s=e,l=1+(256/e.length|0),new Array(l+1).join(s)),a=[],y=0;y<256;y++)a[y]=y;var v=0;for(y=0;y<256;y++){var S=a[y];v=(v+S+f.charCodeAt(y))%256,a[y]=a[v],a[v]=S}r=e,n=a}else a=n;var P=t.length,D=0,E=0,F="";for(y=0;y<P;y++)E=(E+(S=a[D=(D+1)%256]))%256,a[D]=a[E],a[E]=S,f=a[(a[D]+a[E])%256],F+=String.fromCharCode(t.charCodeAt(y)^f);return F}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var RI={print:4,modify:8,copy:16,"annot-forms":32};function mm(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(a){if(RI.perm!==void 0)throw new Error("Invalid permission: "+a);s+=RI[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var l=(t+this.padding).substr(0,32),f=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,f),this.P=-(1+(255^s)),this.encryptionKey=IS(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=MS(this.encryptionKey,this.padding)}function gm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);t+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):e[n]}return t}function NI(e){if(Ji(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var l=Math.random().toString(35);return t[r][l]=[n,!!s],l},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var l in t[r]){var f=t[r][l];try{f[0].apply(e,n)}catch(a){$n.console&&mo.error("jsPDF PubSub Error",a.message,a)}f[1]&&s.push(l)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function U_(e){if(!(this instanceof U_))return new U_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function IN(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Gd(e,t,r,n,s){if(!(this instanceof Gd))return new Gd(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,IN.call(this,n,s)}function Hm(e,t,r,n,s){if(!(this instanceof Hm))return new Hm(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,IN.call(this,n,s)}function bn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],l=arguments[3],f=[],a=1,y=16,v="S",S=null;Ji(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,l=e.compress||e.compressPdf||l,(S=e.encryption||null)!==null&&(S.userPassword=S.userPassword||"",S.ownerPassword=S.ownerPassword||"",S.userPermissions=S.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(y=e.floatPrecision),v=e.defaultPathOperation||"S"),f=e.filters||(l===!0?["FlateEncode"]:f),n=n||"mm",r=(""+(r||"P")).toLowerCase();var P=e.putOnlyUsedFonts||!1,D={},E={internal:{},__private__:{}};E.__private__.PubSub=NI;var F="1.3",z=E.__private__.getPdfVersion=function(){return F};E.__private__.setPdfVersion=function(O){F=O};var W={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};E.__private__.getPageFormats=function(){return W};var $=E.__private__.getPageFormat=function(O){return W[O]};s=s||"a4";var Y="compat",Q="advanced",K=Y;function xe(){this.saveGraphicsState(),Ue(new er(Br,0,0,-Br,0,gi()*Br).toString()+" cm"),this.setFontSize(this.getFontSize()/Br),v="n",K=Q}function de(){this.restoreGraphicsState(),v="S",K=Y}var be=E.__private__.combineFontStyleAndFontWeight=function(O,ue){if(O=="bold"&&ue=="normal"||O=="bold"&&ue==400||O=="normal"&&ue=="italic"||O=="bold"&&ue=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ue&&(O=ue==400||ue==="normal"?O==="italic"?"italic":"normal":ue!=700&&ue!=="bold"||O!=="normal"?(ue==700?"bold":ue)+""+O:"bold"),O};E.advancedAPI=function(O){var ue=K===Y;return ue&&xe.call(this),typeof O!="function"||(O(this),ue&&de.call(this)),this},E.compatAPI=function(O){var ue=K===Q;return ue&&de.call(this),typeof O!="function"||(O(this),ue&&xe.call(this)),this},E.isAdvancedAPI=function(){return K===Q};var me,ve=function(O){if(K!==Q)throw new Error(O+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Re=E.roundToPrecision=E.__private__.roundToPrecision=function(O,ue){var Le=t||ue;if(isNaN(O)||isNaN(Le))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return O.toFixed(Le).replace(/0+$/,"")};me=E.hpf=E.__private__.hpf=typeof y=="number"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return Re(O,y)}:y==="smart"?function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return Re(O,O>-1&&O<1?16:5)}:function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.hpf");return Re(O,16)};var le=E.f2=E.__private__.f2=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f2");return Re(O,2)},G=E.__private__.f3=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.f3");return Re(O,3)},Ae=E.scale=E.__private__.scale=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.scale");return K===Y?O*Br:K===Q?O:void 0},we=function(O){return Ae(function(ue){return K===Y?gi()-ue:K===Q?ue:void 0}(O))};E.__private__.setPrecision=E.setPrecision=function(O){typeof parseInt(O,10)=="number"&&(t=parseInt(O,10))};var lt,pt="00000000000000000000000000000000",At=E.__private__.getFileId=function(){return pt},Ze=E.__private__.setFileId=function(O){return pt=O!==void 0&&/^[a-fA-F0-9]{32}$/.test(O)?O.toUpperCase():pt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),S!==null&&(uo=new mm(S.userPermissions,S.userPassword,S.ownerPassword,pt)),pt};E.setFileId=function(O){return Ze(O),this},E.getFileId=function(){return At()};var tt=E.__private__.convertDateToPDFDate=function(O){var ue=O.getTimezoneOffset(),Le=ue<0?"+":"-",ut=Math.floor(Math.abs(ue/60)),Et=Math.abs(ue%60),Wt=[Le,Ne(ut),"'",Ne(Et),"'"].join("");return["D:",O.getFullYear(),Ne(O.getMonth()+1),Ne(O.getDate()),Ne(O.getHours()),Ne(O.getMinutes()),Ne(O.getSeconds()),Wt].join("")},Ot=E.__private__.convertPDFDateToDate=function(O){var ue=parseInt(O.substr(2,4),10),Le=parseInt(O.substr(6,2),10)-1,ut=parseInt(O.substr(8,2),10),Et=parseInt(O.substr(10,2),10),Wt=parseInt(O.substr(12,2),10),or=parseInt(O.substr(14,2),10);return new Date(ue,Le,ut,Et,Wt,or,0)},St=E.__private__.setCreationDate=function(O){var ue;if(O===void 0&&(O=new Date),O instanceof Date)ue=tt(O);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(O))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ue=O}return lt=ue},ne=E.__private__.getCreationDate=function(O){var ue=lt;return O==="jsDate"&&(ue=Ot(lt)),ue};E.setCreationDate=function(O){return St(O),this},E.getCreationDate=function(O){return ne(O)};var Ee,Ne=E.__private__.padd2=function(O){return("0"+parseInt(O)).slice(-2)},qe=E.__private__.padd2Hex=function(O){return("00"+(O=O.toString())).substr(O.length)},Je=0,gt=[],bt=[],ft=0,Ct=[],Ut=[],gr=!1,rr=bt;E.__private__.setCustomOutputDestination=function(O){gr=!0,rr=O};var It=function(O){gr||(rr=O)};E.__private__.resetCustomOutputDestination=function(){gr=!1,rr=bt};var Ue=E.__private__.out=function(O){return O=O.toString(),ft+=O.length+1,rr.push(O),rr},Lr=E.__private__.write=function(O){return Ue(arguments.length===1?O.toString():Array.prototype.join.call(arguments," "))},Nr=E.__private__.getArrayBuffer=function(O){for(var ue=O.length,Le=new ArrayBuffer(ue),ut=new Uint8Array(Le);ue--;)ut[ue]=O.charCodeAt(ue);return Le},Pr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];E.__private__.getStandardFonts=function(){return Pr};var Ht=e.fontSize||16;E.__private__.setFontSize=E.setFontSize=function(O){return Ht=K===Q?O/Br:O,this};var Er,vr=E.__private__.getFontSize=E.getFontSize=function(){return K===Y?Ht:Ht*Br},dr=e.R2L||!1;E.__private__.setR2L=E.setR2L=function(O){return dr=O,this},E.__private__.getR2L=E.getR2L=function(){return dr};var qr,En=E.__private__.setZoomMode=function(O){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(O))Er=O;else if(isNaN(O)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(O)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+O+'" is not recognized.');Er=O}else Er=parseInt(O,10)};E.__private__.getZoomMode=function(){return Er};var cn,Jr=E.__private__.setPageMode=function(O){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(O)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+O+'" is not recognized.');qr=O};E.__private__.getPageMode=function(){return qr};var An=E.__private__.setLayoutMode=function(O){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(O)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+O+'" is not recognized.');cn=O};E.__private__.getLayoutMode=function(){return cn},E.__private__.setDisplayMode=E.setDisplayMode=function(O,ue,Le){return En(O),An(ue),Jr(Le),this};var en={title:"",subject:"",author:"",keywords:"",creator:""};E.__private__.getDocumentProperty=function(O){if(Object.keys(en).indexOf(O)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return en[O]},E.__private__.getDocumentProperties=function(){return en},E.__private__.setDocumentProperties=E.setProperties=E.setDocumentProperties=function(O){for(var ue in en)en.hasOwnProperty(ue)&&O[ue]&&(en[ue]=O[ue]);return this},E.__private__.setDocumentProperty=function(O,ue){if(Object.keys(en).indexOf(O)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return en[O]=ue};var Ur,Br,_r,ot,ae,oe={},ye={},De=[],Ve={},rt={},ht={},ct={},Lt=null,wt=0,st=[],Ft=new NI(E),it=e.hotfixes||[],hr={},Xr={},wr=[],er=function O(ue,Le,ut,Et,Wt,or){if(!(this instanceof O))return new O(ue,Le,ut,Et,Wt,or);isNaN(ue)&&(ue=1),isNaN(Le)&&(Le=0),isNaN(ut)&&(ut=0),isNaN(Et)&&(Et=1),isNaN(Wt)&&(Wt=0),isNaN(or)&&(or=0),this._matrix=[ue,Le,ut,Et,Wt,or]};Object.defineProperty(er.prototype,"sx",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(er.prototype,"shy",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(er.prototype,"shx",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(er.prototype,"sy",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(er.prototype,"tx",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(er.prototype,"ty",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(er.prototype,"a",{get:function(){return this._matrix[0]},set:function(O){this._matrix[0]=O}}),Object.defineProperty(er.prototype,"b",{get:function(){return this._matrix[1]},set:function(O){this._matrix[1]=O}}),Object.defineProperty(er.prototype,"c",{get:function(){return this._matrix[2]},set:function(O){this._matrix[2]=O}}),Object.defineProperty(er.prototype,"d",{get:function(){return this._matrix[3]},set:function(O){this._matrix[3]=O}}),Object.defineProperty(er.prototype,"e",{get:function(){return this._matrix[4]},set:function(O){this._matrix[4]=O}}),Object.defineProperty(er.prototype,"f",{get:function(){return this._matrix[5]},set:function(O){this._matrix[5]=O}}),Object.defineProperty(er.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(er.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(er.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(er.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),er.prototype.join=function(O){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(me).join(O)},er.prototype.multiply=function(O){var ue=O.sx*this.sx+O.shy*this.shx,Le=O.sx*this.shy+O.shy*this.sy,ut=O.shx*this.sx+O.sy*this.shx,Et=O.shx*this.shy+O.sy*this.sy,Wt=O.tx*this.sx+O.ty*this.shx+this.tx,or=O.tx*this.shy+O.ty*this.sy+this.ty;return new er(ue,Le,ut,Et,Wt,or)},er.prototype.decompose=function(){var O=this.sx,ue=this.shy,Le=this.shx,ut=this.sy,Et=this.tx,Wt=this.ty,or=Math.sqrt(O*O+ue*ue),Or=(O/=or)*Le+(ue/=or)*ut;Le-=O*Or,ut-=ue*Or;var Zr=Math.sqrt(Le*Le+ut*ut);return Or/=Zr,O*(ut/=Zr)<ue*(Le/=Zr)&&(O=-O,ue=-ue,Or=-Or,or=-or),{scale:new er(or,0,0,Zr,0,0),translate:new er(1,0,0,1,Et,Wt),rotate:new er(O,ue,-ue,O,0,0),skew:new er(1,0,Or,1,0,0)}},er.prototype.toString=function(O){return this.join(" ")},er.prototype.inversed=function(){var O=this.sx,ue=this.shy,Le=this.shx,ut=this.sy,Et=this.tx,Wt=this.ty,or=1/(O*ut-ue*Le),Or=ut*or,Zr=-ue*or,wn=-Le*or,Rn=O*or;return new er(Or,Zr,wn,Rn,-Or*Et-wn*Wt,-Zr*Et-Rn*Wt)},er.prototype.applyToPoint=function(O){var ue=O.x*this.sx+O.y*this.shx+this.tx,Le=O.x*this.shy+O.y*this.sy+this.ty;return new Cl(ue,Le)},er.prototype.applyToRectangle=function(O){var ue=this.applyToPoint(O),Le=this.applyToPoint(new Cl(O.x+O.w,O.y+O.h));return new Ra(ue.x,ue.y,Le.x-ue.x,Le.y-ue.y)},er.prototype.clone=function(){var O=this.sx,ue=this.shy,Le=this.shx,ut=this.sy,Et=this.tx,Wt=this.ty;return new er(O,ue,Le,ut,Et,Wt)},E.Matrix=er;var nn=E.matrixMult=function(O,ue){return ue.multiply(O)},Hn=new er(1,0,0,1,0,0);E.unitMatrix=E.identityMatrix=Hn;var Dn=function(O,ue){if(!rt[O]){var Le=(ue instanceof Gd?"Sh":"P")+(Object.keys(Ve).length+1).toString(10);ue.id=Le,rt[O]=Le,Ve[Le]=ue,Ft.publish("addPattern",ue)}};E.ShadingPattern=Gd,E.TilingPattern=Hm,E.addShadingPattern=function(O,ue){return ve("addShadingPattern()"),Dn(O,ue),this},E.beginTilingPattern=function(O){ve("beginTilingPattern()"),mu(O.boundingBox[0],O.boundingBox[1],O.boundingBox[2]-O.boundingBox[0],O.boundingBox[3]-O.boundingBox[1],O.matrix)},E.endTilingPattern=function(O,ue){ve("endTilingPattern()"),ue.stream=Ut[Ee].join(`
`),Dn(O,ue),Ft.publish("endTilingPattern",ue),wr.pop().restore()};var hn,Dr=E.__private__.newObject=function(){var O=fn();return qn(O,!0),O},fn=E.__private__.newObjectDeferred=function(){return Je++,gt[Je]=function(){return ft},Je},qn=function(O,ue){return ue=typeof ue=="boolean"&&ue,gt[O]=ft,ue&&Ue(O+" 0 obj"),O},nr=E.__private__.newAdditionalObject=function(){var O={objId:fn(),content:""};return Ct.push(O),O},Bi=fn(),Gn=fn(),yo=E.__private__.decodeColorString=function(O){var ue=O.split(" ");if(ue.length!==2||ue[1]!=="g"&&ue[1]!=="G")ue.length!==5||ue[4]!=="k"&&ue[4]!=="K"||(ue=[(1-ue[0])*(1-ue[3]),(1-ue[1])*(1-ue[3]),(1-ue[2])*(1-ue[3]),"r"]);else{var Le=parseFloat(ue[0]);ue=[Le,Le,Le,"r"]}for(var ut="#",Et=0;Et<3;Et++)ut+=("0"+Math.floor(255*parseFloat(ue[Et])).toString(16)).slice(-2);return ut},Xo=E.__private__.encodeColorString=function(O){var ue;typeof O=="string"&&(O={ch1:O});var Le=O.ch1,ut=O.ch2,Et=O.ch3,Wt=O.ch4,or=O.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Le=="string"&&Le.charAt(0)!=="#"){var Or=new AN(Le);if(Or.ok)Le=Or.toHex();else if(!/^\d*\.?\d*$/.test(Le))throw new Error('Invalid color "'+Le+'" passed to jsPDF.encodeColorString.')}if(typeof Le=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Le)&&(Le="#"+Le[1]+Le[1]+Le[2]+Le[2]+Le[3]+Le[3]),typeof Le=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Le)){var Zr=parseInt(Le.substr(1),16);Le=Zr>>16&255,ut=Zr>>8&255,Et=255&Zr}if(ut===void 0||Wt===void 0&&Le===ut&&ut===Et)ue=typeof Le=="string"?Le+" "+or[0]:O.precision===2?le(Le/255)+" "+or[0]:G(Le/255)+" "+or[0];else if(Wt===void 0||Ji(Wt)==="object"){if(Wt&&!isNaN(Wt.a)&&Wt.a===0)return["1.","1.","1.",or[1]].join(" ");ue=typeof Le=="string"?[Le,ut,Et,or[1]].join(" "):O.precision===2?[le(Le/255),le(ut/255),le(Et/255),or[1]].join(" "):[G(Le/255),G(ut/255),G(Et/255),or[1]].join(" ")}else ue=typeof Le=="string"?[Le,ut,Et,Wt,or[2]].join(" "):O.precision===2?[le(Le),le(ut),le(Et),le(Wt),or[2]].join(" "):[G(Le),G(ut),G(Et),G(Wt),or[2]].join(" ");return ue},lr=E.__private__.getFilters=function(){return f},$r=E.__private__.putStream=function(O){var ue=(O=O||{}).data||"",Le=O.filters||lr(),ut=O.alreadyAppliedFilters||[],Et=O.addLength1||!1,Wt=ue.length,or=O.objectId,Or=function(qi){return qi};if(S!==null&&or===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");S!==null&&(Or=uo.encryptor(or,0));var Zr={};Le===!0&&(Le=["FlateEncode"]);var wn=O.additionalKeyValues||[],Rn=(Zr=bn.API.processDataByFilters!==void 0?bn.API.processDataByFilters(ue,Le):{data:ue,reverseChain:[]}).reverseChain+(Array.isArray(ut)?ut.join(" "):ut.toString());if(Zr.data.length!==0&&(wn.push({key:"Length",value:Zr.data.length}),Et===!0&&wn.push({key:"Length1",value:Wt})),Rn.length!=0)if(Rn.split("/").length-1==1)wn.push({key:"Filter",value:Rn});else{wn.push({key:"Filter",value:"["+Rn+"]"});for(var _n=0;_n<wn.length;_n+=1)if(wn[_n].key==="DecodeParms"){for(var _i=[],fi=0;fi<Zr.reverseChain.split("/").length-1;fi+=1)_i.push("null");_i.push(wn[_n].value),wn[_n].value="["+_i.join(" ")+"]"}}Ue("<<");for(var Fn=0;Fn<wn.length;Fn++)Ue("/"+wn[Fn].key+" "+wn[Fn].value);Ue(">>"),Zr.data.length!==0&&(Ue("stream"),Ue(Or(Zr.data)),Ue("endstream"))},Sn=E.__private__.putPage=function(O){var ue=O.number,Le=O.data,ut=O.objId,Et=O.contentsObjId;qn(ut,!0),Ue("<</Type /Page"),Ue("/Parent "+O.rootDictionaryObjId+" 0 R"),Ue("/Resources "+O.resourceDictionaryObjId+" 0 R"),Ue("/MediaBox ["+parseFloat(me(O.mediaBox.bottomLeftX))+" "+parseFloat(me(O.mediaBox.bottomLeftY))+" "+me(O.mediaBox.topRightX)+" "+me(O.mediaBox.topRightY)+"]"),O.cropBox!==null&&Ue("/CropBox ["+me(O.cropBox.bottomLeftX)+" "+me(O.cropBox.bottomLeftY)+" "+me(O.cropBox.topRightX)+" "+me(O.cropBox.topRightY)+"]"),O.bleedBox!==null&&Ue("/BleedBox ["+me(O.bleedBox.bottomLeftX)+" "+me(O.bleedBox.bottomLeftY)+" "+me(O.bleedBox.topRightX)+" "+me(O.bleedBox.topRightY)+"]"),O.trimBox!==null&&Ue("/TrimBox ["+me(O.trimBox.bottomLeftX)+" "+me(O.trimBox.bottomLeftY)+" "+me(O.trimBox.topRightX)+" "+me(O.trimBox.topRightY)+"]"),O.artBox!==null&&Ue("/ArtBox ["+me(O.artBox.bottomLeftX)+" "+me(O.artBox.bottomLeftY)+" "+me(O.artBox.topRightX)+" "+me(O.artBox.topRightY)+"]"),typeof O.userUnit=="number"&&O.userUnit!==1&&Ue("/UserUnit "+O.userUnit),Ft.publish("putPage",{objId:ut,pageContext:st[ue],pageNumber:ue,page:Le}),Ue("/Contents "+Et+" 0 R"),Ue(">>"),Ue("endobj");var Wt=Le.join(`
`);return K===Q&&(Wt+=`
Q`),qn(Et,!0),$r({data:Wt,filters:lr(),objectId:Et}),Ue("endobj"),ut},ro=E.__private__.putPages=function(){var O,ue,Le=[];for(O=1;O<=wt;O++)st[O].objId=fn(),st[O].contentsObjId=fn();for(O=1;O<=wt;O++)Le.push(Sn({number:O,data:Ut[O],objId:st[O].objId,contentsObjId:st[O].contentsObjId,mediaBox:st[O].mediaBox,cropBox:st[O].cropBox,bleedBox:st[O].bleedBox,trimBox:st[O].trimBox,artBox:st[O].artBox,userUnit:st[O].userUnit,rootDictionaryObjId:Bi,resourceDictionaryObjId:Gn}));qn(Bi,!0),Ue("<</Type /Pages");var ut="/Kids [";for(ue=0;ue<wt;ue++)ut+=Le[ue]+" 0 R ";Ue(ut+"]"),Ue("/Count "+wt),Ue(">>"),Ue("endobj"),Ft.publish("postPutPages")},Hs=function(O){Ft.publish("putFont",{font:O,out:Ue,newObject:Dr,putStream:$r}),O.isAlreadyPutted!==!0&&(O.objectNumber=Dr(),Ue("<<"),Ue("/Type /Font"),Ue("/BaseFont /"+gm(O.postScriptName)),Ue("/Subtype /Type1"),typeof O.encoding=="string"&&Ue("/Encoding /"+O.encoding),Ue("/FirstChar 32"),Ue("/LastChar 255"),Ue(">>"),Ue("endobj"))},ca=function(O){O.objectNumber=Dr();var ue=[];ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Form"}),ue.push({key:"BBox",value:"["+[me(O.x),me(O.y),me(O.x+O.width),me(O.y+O.height)].join(" ")+"]"}),ue.push({key:"Matrix",value:"["+O.matrix.toString()+"]"});var Le=O.pages[1].join(`
`);$r({data:Le,additionalKeyValues:ue,objectId:O.objectNumber}),Ue("endobj")},Tn=function(O,ue){ue||(ue=21);var Le=Dr(),ut=function(or,Or){var Zr,wn=[],Rn=1/(Or-1);for(Zr=0;Zr<1;Zr+=Rn)wn.push(Zr);if(wn.push(1),or[0].offset!=0){var _n={offset:0,color:or[0].color};or.unshift(_n)}if(or[or.length-1].offset!=1){var _i={offset:1,color:or[or.length-1].color};or.push(_i)}for(var fi="",Fn=0,qi=0;qi<wn.length;qi++){for(Zr=wn[qi];Zr>or[Fn+1].offset;)Fn++;var Ci=or[Fn].offset,Ui=(Zr-Ci)/(or[Fn+1].offset-Ci),Ja=or[Fn].color,Qs=or[Fn+1].color;fi+=qe(Math.round((1-Ui)*Ja[0]+Ui*Qs[0]).toString(16))+qe(Math.round((1-Ui)*Ja[1]+Ui*Qs[1]).toString(16))+qe(Math.round((1-Ui)*Ja[2]+Ui*Qs[2]).toString(16))}return fi.trim()}(O.colors,ue),Et=[];Et.push({key:"FunctionType",value:"0"}),Et.push({key:"Domain",value:"[0.0 1.0]"}),Et.push({key:"Size",value:"["+ue+"]"}),Et.push({key:"BitsPerSample",value:"8"}),Et.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Et.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$r({data:ut,additionalKeyValues:Et,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Le}),Ue("endobj"),O.objectNumber=Dr(),Ue("<< /ShadingType "+O.type),Ue("/ColorSpace /DeviceRGB");var Wt="/Coords ["+me(parseFloat(O.coords[0]))+" "+me(parseFloat(O.coords[1]))+" ";O.type===2?Wt+=me(parseFloat(O.coords[2]))+" "+me(parseFloat(O.coords[3])):Wt+=me(parseFloat(O.coords[2]))+" "+me(parseFloat(O.coords[3]))+" "+me(parseFloat(O.coords[4]))+" "+me(parseFloat(O.coords[5])),Ue(Wt+="]"),O.matrix&&Ue("/Matrix ["+O.matrix.toString()+"]"),Ue("/Function "+Le+" 0 R"),Ue("/Extend [true true]"),Ue(">>"),Ue("endobj")},ha=function(O,ue){var Le=fn(),ut=Dr();ue.push({resourcesOid:Le,objectOid:ut}),O.objectNumber=ut;var Et=[];Et.push({key:"Type",value:"/Pattern"}),Et.push({key:"PatternType",value:"1"}),Et.push({key:"PaintType",value:"1"}),Et.push({key:"TilingType",value:"1"}),Et.push({key:"BBox",value:"["+O.boundingBox.map(me).join(" ")+"]"}),Et.push({key:"XStep",value:me(O.xStep)}),Et.push({key:"YStep",value:me(O.yStep)}),Et.push({key:"Resources",value:Le+" 0 R"}),O.matrix&&Et.push({key:"Matrix",value:"["+O.matrix.toString()+"]"}),$r({data:O.stream,additionalKeyValues:Et,objectId:O.objectNumber}),Ue("endobj")},Sl=function(O){for(var ue in O.objectNumber=Dr(),Ue("<<"),O)switch(ue){case"opacity":Ue("/ca "+le(O[ue]));break;case"stroke-opacity":Ue("/CA "+le(O[ue]))}Ue(">>"),Ue("endobj")},Si=function(O){qn(O.resourcesOid,!0),Ue("<<"),Ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var ue in Ue("/Font <<"),oe)oe.hasOwnProperty(ue)&&(P===!1||P===!0&&D.hasOwnProperty(ue))&&Ue("/"+ue+" "+oe[ue].objectNumber+" 0 R");Ue(">>")}(),function(){if(Object.keys(Ve).length>0){for(var ue in Ue("/Shading <<"),Ve)Ve.hasOwnProperty(ue)&&Ve[ue]instanceof Gd&&Ve[ue].objectNumber>=0&&Ue("/"+ue+" "+Ve[ue].objectNumber+" 0 R");Ft.publish("putShadingPatternDict"),Ue(">>")}}(),function(ue){if(Object.keys(Ve).length>0){for(var Le in Ue("/Pattern <<"),Ve)Ve.hasOwnProperty(Le)&&Ve[Le]instanceof E.TilingPattern&&Ve[Le].objectNumber>=0&&Ve[Le].objectNumber<ue&&Ue("/"+Le+" "+Ve[Le].objectNumber+" 0 R");Ft.publish("putTilingPatternDict"),Ue(">>")}}(O.objectOid),function(){if(Object.keys(ht).length>0){var ue;for(ue in Ue("/ExtGState <<"),ht)ht.hasOwnProperty(ue)&&ht[ue].objectNumber>=0&&Ue("/"+ue+" "+ht[ue].objectNumber+" 0 R");Ft.publish("putGStateDict"),Ue(">>")}}(),function(){for(var ue in Ue("/XObject <<"),hr)hr.hasOwnProperty(ue)&&hr[ue].objectNumber>=0&&Ue("/"+ue+" "+hr[ue].objectNumber+" 0 R");Ft.publish("putXobjectDict"),Ue(">>")}(),Ue(">>"),Ue("endobj")},Ws=function(O){ye[O.fontName]=ye[O.fontName]||{},ye[O.fontName][O.fontStyle]=O.id},Zs=function(O,ue,Le,ut,Et){var Wt={id:"F"+(Object.keys(oe).length+1).toString(10),postScriptName:O,fontName:ue,fontStyle:Le,encoding:ut,isStandardFont:Et||!1,metadata:{}};return Ft.publish("addFont",{font:Wt,instance:this}),oe[Wt.id]=Wt,Ws(Wt),Wt.id},Un=E.__private__.pdfEscape=E.pdfEscape=function(O,ue){return function(Le,ut){var Et,Wt,or,Or,Zr,wn,Rn,_n,_i;if(or=(ut=ut||{}).sourceEncoding||"Unicode",Zr=ut.outputEncoding,(ut.autoencode||Zr)&&oe[Ur].metadata&&oe[Ur].metadata[or]&&oe[Ur].metadata[or].encoding&&(Or=oe[Ur].metadata[or].encoding,!Zr&&oe[Ur].encoding&&(Zr=oe[Ur].encoding),!Zr&&Or.codePages&&(Zr=Or.codePages[0]),typeof Zr=="string"&&(Zr=Or[Zr]),Zr)){for(Rn=!1,wn=[],Et=0,Wt=Le.length;Et<Wt;Et++)(_n=Zr[Le.charCodeAt(Et)])?wn.push(String.fromCharCode(_n)):wn.push(Le[Et]),wn[Et].charCodeAt(0)>>8&&(Rn=!0);Le=wn.join("")}for(Et=Le.length;Rn===void 0&&Et!==0;)Le.charCodeAt(Et-1)>>8&&(Rn=!0),Et--;if(!Rn)return Le;for(wn=ut.noBOM?[]:[254,255],Et=0,Wt=Le.length;Et<Wt;Et++){if((_i=(_n=Le.charCodeAt(Et))>>8)>>8)throw new Error("Character at position "+Et+" of string '"+Le+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wn.push(_i),wn.push(_n-(_i<<8))}return String.fromCharCode.apply(void 0,wn)}(O,ue).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xs=E.__private__.beginPage=function(O){Ut[++wt]=[],st[wt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(O[0]),topRightY:Number(O[1])}},Da(wt),It(Ut[Ee])},Yo=function(O,ue){var Le,ut,Et;switch(r=ue||r,typeof O=="string"&&(Le=$(O.toLowerCase()),Array.isArray(Le)&&(ut=Le[0],Et=Le[1])),Array.isArray(O)&&(ut=O[0]*Br,Et=O[1]*Br),isNaN(ut)&&(ut=s[0],Et=s[1]),(ut>14400||Et>14400)&&(mo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ut=Math.min(14400,ut),Et=Math.min(14400,Et)),s=[ut,Et],r.substr(0,1)){case"l":Et>ut&&(s=[Et,ut]);break;case"p":ut>Et&&(s=[Et,ut])}Xs(s),Zt(yn),Ue(vo),co!==0&&Ue(co+" J"),Is!==0&&Ue(Is+" j"),Ft.publish("addPage",{pageNumber:wt})},Kn=function(O){O>0&&O<=wt&&(Ut.splice(O,1),st.splice(O,1),wt--,Ee>wt&&(Ee=wt),this.setPage(Ee))},Da=function(O){O>0&&O<=wt&&(Ee=O)},As=E.__private__.getNumberOfPages=E.getNumberOfPages=function(){return Ut.length-1},Xa=function(O,ue,Le){var ut,Et=void 0;return Le=Le||{},O=O!==void 0?O:oe[Ur].fontName,ue=ue!==void 0?ue:oe[Ur].fontStyle,ut=O.toLowerCase(),ye[ut]!==void 0&&ye[ut][ue]!==void 0?Et=ye[ut][ue]:ye[O]!==void 0&&ye[O][ue]!==void 0?Et=ye[O][ue]:Le.disableWarning===!1&&mo.warn("Unable to look up font label for font '"+O+"', '"+ue+"'. Refer to getFontList() for available fonts."),Et||Le.noFallback||(Et=ye.times[ue])==null&&(Et=ye.times.normal),Et},Bo=E.__private__.putInfo=function(){var O=Dr(),ue=function(ut){return ut};for(var Le in S!==null&&(ue=uo.encryptor(O,0)),Ue("<<"),Ue("/Producer ("+Un(ue("jsPDF "+bn.version))+")"),en)en.hasOwnProperty(Le)&&en[Le]&&Ue("/"+Le.substr(0,1).toUpperCase()+Le.substr(1)+" ("+Un(ue(en[Le]))+")");Ue("/CreationDate ("+Un(ue(lt))+")"),Ue(">>"),Ue("endobj")},Ps=E.__private__.putCatalog=function(O){var ue=(O=O||{}).rootDictionaryObjId||Bi;switch(Dr(),Ue("<<"),Ue("/Type /Catalog"),Ue("/Pages "+ue+" 0 R"),Er||(Er="fullwidth"),Er){case"fullwidth":Ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ue("/OpenAction [3 0 R /Fit]");break;case"original":Ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Le=""+Er;Le.substr(Le.length-1)==="%"&&(Er=parseInt(Er)/100),typeof Er=="number"&&Ue("/OpenAction [3 0 R /XYZ null null "+le(Er)+"]")}switch(cn||(cn="continuous"),cn){case"continuous":Ue("/PageLayout /OneColumn");break;case"single":Ue("/PageLayout /SinglePage");break;case"two":case"twoleft":Ue("/PageLayout /TwoColumnLeft");break;case"tworight":Ue("/PageLayout /TwoColumnRight")}qr&&Ue("/PageMode /"+qr),Ft.publish("putCatalog"),Ue(">>"),Ue("endobj")},lo=E.__private__.putTrailer=function(){Ue("trailer"),Ue("<<"),Ue("/Size "+(Je+1)),Ue("/Root "+Je+" 0 R"),Ue("/Info "+(Je-1)+" 0 R"),S!==null&&Ue("/Encrypt "+uo.oid+" 0 R"),Ue("/ID [ <"+pt+"> <"+pt+"> ]"),Ue(">>")},pc=E.__private__.putHeader=function(){Ue("%PDF-"+F),Ue("%ºß¬à")},mc=E.__private__.putXRef=function(){var O="0000000000";Ue("xref"),Ue("0 "+(Je+1)),Ue("0000000000 65535 f ");for(var ue=1;ue<=Je;ue++)typeof gt[ue]=="function"?Ue((O+gt[ue]()).slice(-10)+" 00000 n "):gt[ue]!==void 0?Ue((O+gt[ue]).slice(-10)+" 00000 n "):Ue("0000000000 00000 n ")},wa=E.__private__.buildDocument=function(){var O;Je=0,ft=0,bt=[],gt=[],Ct=[],Bi=fn(),Gn=fn(),It(bt),Ft.publish("buildDocument"),pc(),ro(),function(){Ft.publish("putAdditionalObjects");for(var Le=0;Le<Ct.length;Le++){var ut=Ct[Le];qn(ut.objId,!0),Ue(ut.content),Ue("endobj")}Ft.publish("postPutAdditionalObjects")}(),O=[],function(){for(var Le in oe)oe.hasOwnProperty(Le)&&(P===!1||P===!0&&D.hasOwnProperty(Le))&&Hs(oe[Le])}(),function(){var Le;for(Le in ht)ht.hasOwnProperty(Le)&&Sl(ht[Le])}(),function(){for(var Le in hr)hr.hasOwnProperty(Le)&&ca(hr[Le])}(),function(Le){var ut;for(ut in Ve)Ve.hasOwnProperty(ut)&&(Ve[ut]instanceof Gd?Tn(Ve[ut]):Ve[ut]instanceof Hm&&ha(Ve[ut],Le))}(O),Ft.publish("putResources"),O.forEach(Si),Si({resourcesOid:Gn,objectOid:Number.MAX_SAFE_INTEGER}),Ft.publish("postPutResources"),S!==null&&(uo.oid=Dr(),Ue("<<"),Ue("/Filter /Standard"),Ue("/V "+uo.v),Ue("/R "+uo.r),Ue("/U <"+uo.toHexString(uo.U)+">"),Ue("/O <"+uo.toHexString(uo.O)+">"),Ue("/P "+uo.P),Ue(">>"),Ue("endobj")),Bo(),Ps();var ue=ft;return mc(),lo(),Ue("startxref"),Ue(""+ue),Ue("%%EOF"),It(Ut[Ee]),bt.join(`
`)},Ys=E.__private__.getBlob=function(O){return new Blob([Nr(O)],{type:"application/pdf"})},Ya=E.output=E.__private__.output=(hn=function(O,ue){switch(typeof(ue=ue||{})=="string"?ue={filename:ue}:ue.filename=ue.filename||"generated.pdf",O){case void 0:return wa();case"save":E.save(ue.filename);break;case"arraybuffer":return Nr(wa());case"blob":return Ys(wa());case"bloburi":case"bloburl":if($n.URL!==void 0&&typeof $n.URL.createObjectURL=="function")return $n.URL&&$n.URL.createObjectURL(Ys(wa()))||void 0;mo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Le="",ut=wa();try{Le=LI(ut)}catch{Le=LI(unescape(encodeURIComponent(ut)))}return"data:application/pdf;filename="+ue.filename+";base64,"+Le;case"pdfobjectnewwindow":if(Object.prototype.toString.call($n)==="[object Window]"){var Et="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Wt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ue.pdfObjectUrl&&(Et=ue.pdfObjectUrl,Wt="");var or='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Et+'"'+Wt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ue)+");<\/script></body></html>",Or=$n.open();return Or!==null&&Or.document.write(or),Or}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call($n)==="[object Window]"){var Zr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ue.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ue.filename+'" width="500px" height="400px" /></body></html>',wn=$n.open();if(wn!==null){wn.document.write(Zr);var Rn=this;wn.document.documentElement.querySelector("#pdfViewer").onload=function(){wn.document.title=ue.filename,wn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Rn.output("bloburl"))}}return wn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call($n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ue)+'"></iframe></body></html>',_i=$n.open();if(_i!==null&&(_i.document.write(_n),_i.document.title=ue.filename),_i||typeof safari>"u")return _i;break;case"datauri":case"dataurl":return $n.document.location.href=this.output("datauristring",ue);default:return null}},hn.foo=function(){try{return hn.apply(this,arguments)}catch(Le){var O=Le.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var ue="Error in function "+O.split(`
`)[0].split("<")[0]+": "+Le.message;if(!$n.console)throw new Error(ue);$n.console.error(ue,Le),$n.alert&&alert(ue)}},hn.foo.bar=hn,hn.foo),fs=function(O){return Array.isArray(it)===!0&&it.indexOf(O)>-1};switch(n){case"pt":Br=1;break;case"mm":Br=72/25.4;break;case"cm":Br=72/2.54;break;case"in":Br=72;break;case"px":Br=fs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Br=12;break;case"ex":Br=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Br=n}var uo=null;St(),Ze();var qu=E.__private__.getPageInfo=E.getPageInfo=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:st[O].objId,pageNumber:O,pageContext:st[O]}},$l=E.__private__.getPageInfoByObjId=function(O){if(isNaN(O)||O%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ue in st)if(st[ue].objId===O)break;return qu(ue)},jl=E.__private__.getCurrentPageInfo=E.getCurrentPageInfo=function(){return{objId:st[Ee].objId,pageNumber:Ee,pageContext:st[Ee]}};E.addPage=function(){return Yo.apply(this,arguments),this},E.setPage=function(){return Da.apply(this,arguments),It.call(this,Ut[Ee]),this},E.insertPage=function(O){return this.addPage(),this.movePage(Ee,O),this},E.movePage=function(O,ue){var Le,ut;if(O>ue){Le=Ut[O],ut=st[O];for(var Et=O;Et>ue;Et--)Ut[Et]=Ut[Et-1],st[Et]=st[Et-1];Ut[ue]=Le,st[ue]=ut,this.setPage(ue)}else if(O<ue){Le=Ut[O],ut=st[O];for(var Wt=O;Wt<ue;Wt++)Ut[Wt]=Ut[Wt+1],st[Wt]=st[Wt+1];Ut[ue]=Le,st[ue]=ut,this.setPage(ue)}return this},E.deletePage=function(){return Kn.apply(this,arguments),this},E.__private__.text=E.text=function(O,ue,Le,ut,Et){var Wt,or,Or,Zr,wn,Rn,_n,_i,fi,Fn=(ut=ut||{}).scope||this;if(typeof O=="number"&&typeof ue=="number"&&(typeof Le=="string"||Array.isArray(Le))){var qi=Le;Le=ue,ue=O,O=qi}if(arguments[3]instanceof er==0?(Or=arguments[4],Zr=arguments[5],Ji(_n=arguments[3])==="object"&&_n!==null||(typeof Or=="string"&&(Zr=Or,Or=null),typeof _n=="string"&&(Zr=_n,_n=null),typeof _n=="number"&&(Or=_n,_n=null),ut={flags:_n,angle:Or,align:Zr})):(ve("The transform parameter of text() with a Matrix value"),fi=Et),isNaN(ue)||isNaN(Le)||O==null)throw new Error("Invalid arguments passed to jsPDF.text");if(O.length===0)return Fn;var Ci,Ui="",Ja=typeof ut.lineHeightFactor=="number"?ut.lineHeightFactor:jr,Qs=Fn.internal.scaleFactor;function gu(Yr){return Yr=Yr.split("	").join(Array(ut.TabLen||9).join(" ")),Un(Yr,_n)}function Kc(Yr){for(var Cn,Bn=Yr.concat(),ui=[],ci=Bn.length;ci--;)typeof(Cn=Bn.shift())=="string"?ui.push(Cn):Array.isArray(Yr)&&(Cn.length===1||Cn[1]===void 0&&Cn[2]===void 0)?ui.push(Cn[0]):ui.push([Cn[0],Cn[1],Cn[2]]);return ui}function yu(Yr,Cn){var Bn;if(typeof Yr=="string")Bn=Cn(Yr)[0];else if(Array.isArray(Yr)){for(var ui,ci,Di=Yr.concat(),Io=[],es=Di.length;es--;)typeof(ui=Di.shift())=="string"?Io.push(Cn(ui)[0]):Array.isArray(ui)&&typeof ui[0]=="string"&&(ci=Cn(ui[0],ui[1],ui[2]),Io.push([ci[0],ci[1],ci[2]]));Bn=Io}return Bn}var Na=!1,Ul=!0;if(typeof O=="string")Na=!0;else if(Array.isArray(O)){var El=O.concat();or=[];for(var Qa,no=El.length;no--;)(typeof(Qa=El.shift())!="string"||Array.isArray(Qa)&&typeof Qa[0]!="string")&&(Ul=!1);Na=Ul}if(Na===!1)throw new Error('Type of text must be string or Array. "'+O+'" is not recognized.');typeof O=="string"&&(O=O.match(/[\r?\n]/)?O.split(/\r\n|\r|\n/g):[O]);var $o=Ht/Fn.internal.scaleFactor,ki=$o*(Ja-1);switch(ut.baseline){case"bottom":Le-=ki;break;case"top":Le+=$o-ki;break;case"hanging":Le+=$o-2*ki;break;case"middle":Le+=$o/2-ki}if((Rn=ut.maxWidth||0)>0&&(typeof O=="string"?O=Fn.splitTextToSize(O,Rn):Object.prototype.toString.call(O)==="[object Array]"&&(O=O.reduce(function(Yr,Cn){return Yr.concat(Fn.splitTextToSize(Cn,Rn))},[]))),Wt={text:O,x:ue,y:Le,options:ut,mutex:{pdfEscape:Un,activeFontKey:Ur,fonts:oe,activeFontSize:Ht}},Ft.publish("preProcessText",Wt),O=Wt.text,Or=(ut=Wt.options).angle,fi instanceof er==0&&Or&&typeof Or=="number"){Or*=Math.PI/180,ut.rotationDirection===0&&(Or=-Or),K===Q&&(Or=-Or);var ps=Math.cos(Or),el=Math.sin(Or);fi=new er(ps,el,-el,ps,0,0)}else Or&&Or instanceof er&&(fi=Or);K!==Q||fi||(fi=Hn),(wn=ut.charSpace||tn)!==void 0&&(Ui+=me(Ae(wn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_i=ut.horizontalScale)!==void 0&&(Ui+=me(100*_i)+` Tz
`),ut.lang;var Li=-1,Vl=ut.renderingMode!==void 0?ut.renderingMode:ut.stroke,tl=Fn.internal.getCurrentPageInfo().pageContext;switch(Vl){case 0:case!1:case"fill":Li=0;break;case 1:case!0:case"stroke":Li=1;break;case 2:case"fillThenStroke":Li=2;break;case 3:case"invisible":Li=3;break;case 4:case"fillAndAddForClipping":Li=4;break;case 5:case"strokeAndAddPathForClipping":Li=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Li=6;break;case 7:case"addToPathForClipping":Li=7}var ms=tl.usedRenderingMode!==void 0?tl.usedRenderingMode:-1;Li!==-1?Ui+=Li+` Tr
`:ms!==-1&&(Ui+=`0 Tr
`),Li!==-1&&(tl.usedRenderingMode=Li),Zr=ut.align||"left";var ho,jo=Ht*Ja,gc=Fn.internal.pageSize.getWidth(),Hu=oe[Ur];wn=ut.charSpace||tn,Rn=ut.maxWidth||0,_n=Object.assign({autoencode:!0,noBOM:!0},ut.flags);var Tl=[],rl=function(Yr){return Fn.getStringUnitWidth(Yr,{font:Hu,charSpace:wn,fontSize:Ht,doKerning:!1})*Ht/Qs};if(Object.prototype.toString.call(O)==="[object Array]"){var Ao;or=Kc(O),Zr!=="left"&&(ho=or.map(rl));var _o,ql=0;if(Zr==="right"){ue-=ho[0],O=[],no=or.length;for(var Po=0;Po<no;Po++)Po===0?(_o=Pn(ue),Ao=ii(Le)):(_o=Ae(ql-ho[Po]),Ao=-jo),O.push([or[Po],_o,Ao]),ql=ho[Po]}else if(Zr==="center"){ue-=ho[0]/2,O=[],no=or.length;for(var nl=0;nl<no;nl++)nl===0?(_o=Pn(ue),Ao=ii(Le)):(_o=Ae((ql-ho[nl])/2),Ao=-jo),O.push([or[nl],_o,Ao]),ql=ho[nl]}else if(Zr==="left"){O=[],no=or.length;for(var Ko=0;Ko<no;Ko++)O.push(or[Ko])}else if(Zr==="justify"&&Hu.encoding==="Identity-H"){O=[],no=or.length,Rn=Rn!==0?Rn:gc;for(var il=0,Gi=0;Gi<no;Gi++)if(Ao=Gi===0?ii(Le):-jo,_o=Gi===0?Pn(ue):il,Gi<no-1){var Ms=Ae((Rn-ho[Gi])/(or[Gi].split(" ").length-1)),gs=or[Gi].split(" ");O.push([gs[0]+" ",_o,Ao]),il=0;for(var Oa=1;Oa<gs.length;Oa++){var vu=(rl(gs[Oa-1]+" "+gs[Oa])-rl(gs[Oa]))*Qs+Ms;Oa==gs.length-1?O.push([gs[Oa],vu,0]):O.push([gs[Oa]+" ",vu,0]),il-=vu}}else O.push([or[Gi],_o,Ao]);O.push(["",il,0])}else{if(Zr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(O=[],no=or.length,Rn=Rn!==0?Rn:gc,Gi=0;Gi<no;Gi++)Ao=Gi===0?ii(Le):-jo,_o=Gi===0?Pn(ue):0,Gi<no-1?Tl.push(me(Ae((Rn-ho[Gi])/(or[Gi].split(" ").length-1)))):Tl.push(0),O.push([or[Gi],_o,Ao])}}(typeof ut.R2L=="boolean"?ut.R2L:dr)===!0&&(O=yu(O,function(Yr,Cn,Bn){return[Yr.split("").reverse().join(""),Cn,Bn]})),Wt={text:O,x:ue,y:Le,options:ut,mutex:{pdfEscape:Un,activeFontKey:Ur,fonts:oe,activeFontSize:Ht}},Ft.publish("postProcessText",Wt),O=Wt.text,Ci=Wt.mutex.isHex||!1;var _u=oe[Ur].encoding;_u!=="WinAnsiEncoding"&&_u!=="StandardEncoding"||(O=yu(O,function(Yr,Cn,Bn){return[gu(Yr),Cn,Bn]})),or=Kc(O),O=[];for(var ks,Gl,Hl,_t=Array.isArray(or[0])?1:0,Tt="",br=function(Yr,Cn,Bn){var ui="";return Bn instanceof er?(Bn=typeof ut.angle=="number"?nn(Bn,new er(1,0,0,1,Yr,Cn)):nn(new er(1,0,0,1,Yr,Cn),Bn),K===Q&&(Bn=nn(new er(1,0,0,-1,0,0),Bn)),ui=Bn.join(" ")+` Tm
`):ui=me(Yr)+" "+me(Cn)+` Td
`,ui},kr=0;kr<or.length;kr++){switch(Tt="",_t){case 1:Hl=(Ci?"<":"(")+or[kr][0]+(Ci?">":")"),ks=parseFloat(or[kr][1]),Gl=parseFloat(or[kr][2]);break;case 0:Hl=(Ci?"<":"(")+or[kr]+(Ci?">":")"),ks=Pn(ue),Gl=ii(Le)}Tl!==void 0&&Tl[kr]!==void 0&&(Tt=Tl[kr]+` Tw
`),kr===0?O.push(Tt+br(ks,Gl,fi)+Hl):_t===0?O.push(Tt+Hl):_t===1&&O.push(Tt+br(ks,Gl,fi)+Hl)}O=_t===0?O.join(` Tj
T* `):O.join(` Tj
`),O+=` Tj
`;var Wn=`BT
/`;return Wn+=Ur+" "+Ht+` Tf
`,Wn+=me(Ht*Ja)+` TL
`,Wn+=sn+`
`,Wn+=Ui,Wn+=O,Ue(Wn+="ET"),D[Ur]=!0,Fn};var k=E.__private__.clip=E.clip=function(O){return Ue(O==="evenodd"?"W*":"W"),this};E.clipEvenOdd=function(){return k("evenodd")},E.__private__.discardPath=E.discardPath=function(){return Ue("n"),this};var V=E.__private__.isValidStyle=function(O){var ue=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(O)!==-1&&(ue=!0),ue};E.__private__.setDefaultPathOperation=E.setDefaultPathOperation=function(O){return V(O)&&(v=O),this};var pe=E.__private__.getStyle=E.getStyle=function(O){var ue=v;switch(O){case"D":case"S":ue="S";break;case"F":ue="f";break;case"FD":case"DF":ue="B";break;case"f":case"f*":case"B":case"B*":ue=O}return ue},We=E.close=function(){return Ue("h"),this};E.stroke=function(){return Ue("S"),this},E.fill=function(O){return nt("f",O),this},E.fillEvenOdd=function(O){return nt("f*",O),this},E.fillStroke=function(O){return nt("B",O),this},E.fillStrokeEvenOdd=function(O){return nt("B*",O),this};var nt=function(O,ue){Ji(ue)==="object"?Jt(ue,O):Ue(O)},Ye=function(O){O===null||K===Q&&O===void 0||(O=pe(O),Ue(O))};function yt(O,ue,Le,ut,Et){var Wt=new Hm(ue||this.boundingBox,Le||this.xStep,ut||this.yStep,this.gState,Et||this.matrix);Wt.stream=this.stream;var or=O+"$$"+this.cloneIndex+++"$$";return Dn(or,Wt),Wt}var Jt=function(O,ue){var Le=rt[O.key],ut=Ve[Le];if(ut instanceof Gd)Ue("q"),Ue(ur(ue)),ut.gState&&E.setGState(ut.gState),Ue(O.matrix.toString()+" cm"),Ue("/"+Le+" sh"),Ue("Q");else if(ut instanceof Hm){var Et=new er(1,0,0,-1,0,gi());O.matrix&&(Et=Et.multiply(O.matrix||Hn),Le=yt.call(ut,O.key,O.boundingBox,O.xStep,O.yStep,Et).id),Ue("q"),Ue("/Pattern cs"),Ue("/"+Le+" scn"),ut.gState&&E.setGState(ut.gState),Ue(ue),Ue("Q")}},ur=function(O){switch(O){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Cr=E.moveTo=function(O,ue){return Ue(me(Ae(O))+" "+me(we(ue))+" m"),this},xr=E.lineTo=function(O,ue){return Ue(me(Ae(O))+" "+me(we(ue))+" l"),this},ar=E.curveTo=function(O,ue,Le,ut,Et,Wt){return Ue([me(Ae(O)),me(we(ue)),me(Ae(Le)),me(we(ut)),me(Ae(Et)),me(we(Wt)),"c"].join(" ")),this};E.__private__.line=E.line=function(O,ue,Le,ut,Et){if(isNaN(O)||isNaN(ue)||isNaN(Le)||isNaN(ut)||!V(Et))throw new Error("Invalid arguments passed to jsPDF.line");return K===Y?this.lines([[Le-O,ut-ue]],O,ue,[1,1],Et||"S"):this.lines([[Le-O,ut-ue]],O,ue,[1,1]).stroke()},E.__private__.lines=E.lines=function(O,ue,Le,ut,Et,Wt){var or,Or,Zr,wn,Rn,_n,_i,fi,Fn,qi,Ci,Ui;if(typeof O=="number"&&(Ui=Le,Le=ue,ue=O,O=Ui),ut=ut||[1,1],Wt=Wt||!1,isNaN(ue)||isNaN(Le)||!Array.isArray(O)||!Array.isArray(ut)||!V(Et)||typeof Wt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Cr(ue,Le),or=ut[0],Or=ut[1],wn=O.length,qi=ue,Ci=Le,Zr=0;Zr<wn;Zr++)(Rn=O[Zr]).length===2?(qi=Rn[0]*or+qi,Ci=Rn[1]*Or+Ci,xr(qi,Ci)):(_n=Rn[0]*or+qi,_i=Rn[1]*Or+Ci,fi=Rn[2]*or+qi,Fn=Rn[3]*Or+Ci,qi=Rn[4]*or+qi,Ci=Rn[5]*Or+Ci,ar(_n,_i,fi,Fn,qi,Ci));return Wt&&We(),Ye(Et),this},E.path=function(O){for(var ue=0;ue<O.length;ue++){var Le=O[ue],ut=Le.c;switch(Le.op){case"m":Cr(ut[0],ut[1]);break;case"l":xr(ut[0],ut[1]);break;case"c":ar.apply(this,ut);break;case"h":We()}}return this},E.__private__.rect=E.rect=function(O,ue,Le,ut,Et){if(isNaN(O)||isNaN(ue)||isNaN(Le)||isNaN(ut)||!V(Et))throw new Error("Invalid arguments passed to jsPDF.rect");return K===Y&&(ut=-ut),Ue([me(Ae(O)),me(we(ue)),me(Ae(Le)),me(Ae(ut)),"re"].join(" ")),Ye(Et),this},E.__private__.triangle=E.triangle=function(O,ue,Le,ut,Et,Wt,or){if(isNaN(O)||isNaN(ue)||isNaN(Le)||isNaN(ut)||isNaN(Et)||isNaN(Wt)||!V(or))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Le-O,ut-ue],[Et-Le,Wt-ut],[O-Et,ue-Wt]],O,ue,[1,1],or,!0),this},E.__private__.roundedRect=E.roundedRect=function(O,ue,Le,ut,Et,Wt,or){if(isNaN(O)||isNaN(ue)||isNaN(Le)||isNaN(ut)||isNaN(Et)||isNaN(Wt)||!V(or))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Or=4/3*(Math.SQRT2-1);return Et=Math.min(Et,.5*Le),Wt=Math.min(Wt,.5*ut),this.lines([[Le-2*Et,0],[Et*Or,0,Et,Wt-Wt*Or,Et,Wt],[0,ut-2*Wt],[0,Wt*Or,-Et*Or,Wt,-Et,Wt],[2*Et-Le,0],[-Et*Or,0,-Et,-Wt*Or,-Et,-Wt],[0,2*Wt-ut],[0,-Wt*Or,Et*Or,-Wt,Et,-Wt]],O+Et,ue,[1,1],or,!0),this},E.__private__.ellipse=E.ellipse=function(O,ue,Le,ut,Et){if(isNaN(O)||isNaN(ue)||isNaN(Le)||isNaN(ut)||!V(Et))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Wt=4/3*(Math.SQRT2-1)*Le,or=4/3*(Math.SQRT2-1)*ut;return Cr(O+Le,ue),ar(O+Le,ue-or,O+Wt,ue-ut,O,ue-ut),ar(O-Wt,ue-ut,O-Le,ue-or,O-Le,ue),ar(O-Le,ue+or,O-Wt,ue+ut,O,ue+ut),ar(O+Wt,ue+ut,O+Le,ue+or,O+Le,ue),Ye(Et),this},E.__private__.circle=E.circle=function(O,ue,Le,ut){if(isNaN(O)||isNaN(ue)||isNaN(Le)||!V(ut))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(O,ue,Le,Le,ut)},E.setFont=function(O,ue,Le){return Le&&(ue=be(ue,Le)),Ur=Xa(O,ue,{disableWarning:!1}),this};var an=E.__private__.getFont=E.getFont=function(){return oe[Xa.apply(E,arguments)]};E.__private__.getFontList=E.getFontList=function(){var O,ue,Le={};for(O in ye)if(ye.hasOwnProperty(O))for(ue in Le[O]=[],ye[O])ye[O].hasOwnProperty(ue)&&Le[O].push(ue);return Le},E.addFont=function(O,ue,Le,ut,Et){var Wt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Wt.indexOf(arguments[3])!==-1?Et=arguments[3]:arguments[3]&&Wt.indexOf(arguments[3])==-1&&(Le=be(Le,ut)),Zs.call(this,O,ue,Le,Et=Et||"Identity-H")};var jr,yn=e.lineWidth||.200025,Vr=E.__private__.getLineWidth=E.getLineWidth=function(){return yn},Zt=E.__private__.setLineWidth=E.setLineWidth=function(O){return yn=O,Ue(me(Ae(O))+" w"),this};E.__private__.setLineDash=bn.API.setLineDash=bn.API.setLineDashPattern=function(O,ue){if(O=O||[],ue=ue||0,isNaN(ue)||!Array.isArray(O))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return O=O.map(function(Le){return me(Ae(Le))}).join(" "),ue=me(Ae(ue)),Ue("["+O+"] "+ue+" d"),this};var Ir=E.__private__.getLineHeight=E.getLineHeight=function(){return Ht*jr};E.__private__.getLineHeight=E.getLineHeight=function(){return Ht*jr};var xn=E.__private__.setLineHeightFactor=E.setLineHeightFactor=function(O){return typeof(O=O||1.15)=="number"&&(jr=O),this},Jn=E.__private__.getLineHeightFactor=E.getLineHeightFactor=function(){return jr};xn(e.lineHeight);var Pn=E.__private__.getHorizontalCoordinate=function(O){return Ae(O)},ii=E.__private__.getVerticalCoordinate=function(O){return K===Q?O:st[Ee].mediaBox.topRightY-st[Ee].mediaBox.bottomLeftY-Ae(O)},Gu=E.__private__.getHorizontalCoordinateString=E.getHorizontalCoordinateString=function(O){return me(Pn(O))},Wr=E.__private__.getVerticalCoordinateString=E.getVerticalCoordinateString=function(O){return me(ii(O))},vo=e.strokeColor||"0 G";E.__private__.getStrokeColor=E.getDrawColor=function(){return yo(vo)},E.__private__.setStrokeColor=E.setDrawColor=function(O,ue,Le,ut){return vo=Xo({ch1:O,ch2:ue,ch3:Le,ch4:ut,pdfColorType:"draw",precision:2}),Ue(vo),this};var vn=e.fillColor||"0 g";E.__private__.getFillColor=E.getFillColor=function(){return yo(vn)},E.__private__.setFillColor=E.setFillColor=function(O,ue,Le,ut){return vn=Xo({ch1:O,ch2:ue,ch3:Le,ch4:ut,pdfColorType:"fill",precision:2}),Ue(vn),this};var sn=e.textColor||"0 g",Ka=E.__private__.getTextColor=E.getTextColor=function(){return yo(sn)};E.__private__.setTextColor=E.setTextColor=function(O,ue,Le,ut){return sn=Xo({ch1:O,ch2:ue,ch3:Le,ch4:ut,pdfColorType:"text",precision:3}),this};var tn=e.charSpace,Ks=E.__private__.getCharSpace=E.getCharSpace=function(){return parseFloat(tn||0)};E.__private__.setCharSpace=E.setCharSpace=function(O){if(isNaN(O))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return tn=O,this};var co=0;E.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},E.__private__.setLineCap=E.setLineCap=function(O){var ue=E.CapJoinStyles[O];if(ue===void 0)throw new Error("Line cap style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return co=ue,Ue(ue+" J"),this};var Is=0;E.__private__.setLineJoin=E.setLineJoin=function(O){var ue=E.CapJoinStyles[O];if(ue===void 0)throw new Error("Line join style of '"+O+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Is=ue,Ue(ue+" j"),this},E.__private__.setLineMiterLimit=E.__private__.setMiterLimit=E.setLineMiterLimit=E.setMiterLimit=function(O){if(O=O||0,isNaN(O))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ue(me(Ae(O))+" M"),this},E.GState=U_,E.setGState=function(O){(O=typeof O=="string"?ht[ct[O]]:To(null,O)).equals(Lt)||(Ue("/"+O.id+" gs"),Lt=O)};var To=function(O,ue){if(!O||!ct[O]){var Le=!1;for(var ut in ht)if(ht.hasOwnProperty(ut)&&ht[ut].equals(ue)){Le=!0;break}if(Le)ue=ht[ut];else{var Et="GS"+(Object.keys(ht).length+1).toString(10);ht[Et]=ue,ue.id=Et}return O&&(ct[O]=ue.id),Ft.publish("addGState",ue),ue}};E.addGState=function(O,ue){return To(O,ue),this},E.saveGraphicsState=function(){return Ue("q"),De.push({key:Ur,size:Ht,color:sn}),this},E.restoreGraphicsState=function(){Ue("Q");var O=De.pop();return Ur=O.key,Ht=O.size,sn=O.color,Lt=null,this},E.setCurrentTransformationMatrix=function(O){return Ue(O.toString()+" cm"),this},E.comment=function(O){return Ue("#"+O),this};var Cl=function(O,ue){var Le=O||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Le},set:function(Wt){isNaN(Wt)||(Le=parseFloat(Wt))}});var ut=ue||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ut},set:function(Wt){isNaN(Wt)||(ut=parseFloat(Wt))}});var Et="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Et},set:function(Wt){Et=Wt.toString()}}),this},Ra=function(O,ue,Le,ut){Cl.call(this,O,ue),this.type="rect";var Et=Le||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Et},set:function(or){isNaN(or)||(Et=parseFloat(or))}});var Wt=ut||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Wt},set:function(or){isNaN(or)||(Wt=parseFloat(or))}}),this},pu=function(){this.page=wt,this.currentPage=Ee,this.pages=Ut.slice(0),this.pagesContext=st.slice(0),this.x=_r,this.y=ot,this.matrix=ae,this.width=Js(Ee),this.height=gi(Ee),this.outputDestination=rr,this.id="",this.objectNumber=-1};pu.prototype.restore=function(){wt=this.page,Ee=this.currentPage,st=this.pagesContext,Ut=this.pages,_r=this.x,ot=this.y,ae=this.matrix,Sa(Ee,this.width),zo(Ee,this.height),rr=this.outputDestination};var mu=function(O,ue,Le,ut,Et){wr.push(new pu),wt=Ee=0,Ut=[],_r=O,ot=ue,ae=Et,Xs([Le,ut])};for(var ds in E.beginFormObject=function(O,ue,Le,ut,Et){return mu(O,ue,Le,ut,Et),this},E.endFormObject=function(O){return function(ue){if(Xr[ue])wr.pop().restore();else{var Le=new pu,ut="Xo"+(Object.keys(hr).length+1).toString(10);Le.id=ut,Xr[ue]=ut,hr[ut]=Le,Ft.publish("addFormObject",Le),wr.pop().restore()}}(O),this},E.doFormObject=function(O,ue){var Le=hr[Xr[O]];return Ue("q"),Ue(ue.toString()+" cm"),Ue("/"+Le.id+" Do"),Ue("Q"),this},E.getFormObject=function(O){var ue=hr[Xr[O]];return{x:ue.x,y:ue.y,width:ue.width,height:ue.height,matrix:ue.matrix}},E.save=function(O,ue){return O=O||"generated.pdf",(ue=ue||{}).returnPromise=ue.returnPromise||!1,ue.returnPromise===!1?(Ud(Ys(wa()),O),typeof Ud.unload=="function"&&$n.setTimeout&&setTimeout(Ud.unload,911),this):new Promise(function(Le,ut){try{var Et=Ud(Ys(wa()),O);typeof Ud.unload=="function"&&$n.setTimeout&&setTimeout(Ud.unload,911),Le(Et)}catch(Wt){ut(Wt.message)}})},bn.API)bn.API.hasOwnProperty(ds)&&(ds==="events"&&bn.API.events.length?function(O,ue){var Le,ut,Et;for(Et=ue.length-1;Et!==-1;Et--)Le=ue[Et][0],ut=ue[Et][1],O.subscribe.apply(O,[Le].concat(typeof ut=="function"?[ut]:ut))}(Ft,bn.API.events):E[ds]=bn.API[ds]);var Js=E.getPageWidth=function(O){return(st[O=O||Ee].mediaBox.topRightX-st[O].mediaBox.bottomLeftX)/Br},Sa=E.setPageWidth=function(O,ue){st[O].mediaBox.topRightX=ue*Br+st[O].mediaBox.bottomLeftX},gi=E.getPageHeight=function(O){return(st[O=O||Ee].mediaBox.topRightY-st[O].mediaBox.bottomLeftY)/Br},zo=E.setPageHeight=function(O,ue){st[O].mediaBox.topRightY=ue*Br+st[O].mediaBox.bottomLeftY};return E.internal={pdfEscape:Un,getStyle:pe,getFont:an,getFontSize:vr,getCharSpace:Ks,getTextColor:Ka,getLineHeight:Ir,getLineHeightFactor:Jn,getLineWidth:Vr,write:Lr,getHorizontalCoordinate:Pn,getVerticalCoordinate:ii,getCoordinateString:Gu,getVerticalCoordinateString:Wr,collections:{},newObject:Dr,newAdditionalObject:nr,newObjectDeferred:fn,newObjectDeferredBegin:qn,getFilters:lr,putStream:$r,events:Ft,scaleFactor:Br,pageSize:{getWidth:function(){return Js(Ee)},setWidth:function(O){Sa(Ee,O)},getHeight:function(){return gi(Ee)},setHeight:function(O){zo(Ee,O)}},encryptionOptions:S,encryption:uo,getEncryptor:function(O){return S!==null?uo.encryptor(O,0):function(ue){return ue}},output:Ya,getNumberOfPages:As,pages:Ut,out:Ue,f2:le,f3:G,getPageInfo:qu,getPageInfoByObjId:$l,getCurrentPageInfo:jl,getPDFVersion:z,Point:Cl,Rectangle:Ra,Matrix:er,hasHotfix:fs},Object.defineProperty(E.internal.pageSize,"width",{get:function(){return Js(Ee)},set:function(O){Sa(Ee,O)},enumerable:!0,configurable:!0}),Object.defineProperty(E.internal.pageSize,"height",{get:function(){return gi(Ee)},set:function(O){zo(Ee,O)},enumerable:!0,configurable:!0}),(function(O){for(var ue=0,Le=Pr.length;ue<Le;ue++){var ut=Zs.call(this,O[ue][0],O[ue][1],O[ue][2],Pr[ue][3],!0);P===!1&&(D[ut]=!0);var Et=O[ue][0].split("-");Ws({id:ut,fontName:Et[0],fontStyle:Et[1]||""})}Ft.publish("addFonts",{fonts:oe,dictionary:ye})}).call(E,Pr),Ur="F1",Yo(s,r),Ft.publish("initialized"),E}mm.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},mm.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},mm.prototype.processOwnerPassword=function(e,t){return MS(IS(t).substr(0,5),e)},mm.prototype.encryptor=function(e,t){var r=IS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return MS(r,n)}},U_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ji(e)!==Ji(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},bn.API={events:[]},bn.version="3.0.2";var va=bn.API,GE=1,Cp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},um=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vn=function(e){return e.toFixed(2)},zf=function(e){return e.toFixed(5)};va.__acroform__={};var lu=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},OI=function(e){return e*GE},mh=function(e){var t=new kN,r=ln.internal.getHeight(e)||0,n=ln.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Vn(n)),Number(Vn(r))],t},$W=va.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},jW=va.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},UW=va.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ia=va.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return UW(e,t-1)},Ma=va.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return $W(e,t-1)},ka=va.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return jW(e,t-1)},VW=va.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],l=e[1],f=e[2],a=e[3],y={};return y.lowerLeft_X=r(s)||0,y.lowerLeft_Y=n(l+a)||0,y.upperRight_X=r(s+f)||0,y.upperRight_Y=n(l)||0,[Number(Vn(y.lowerLeft_X)),Number(Vn(y.lowerLeft_Y)),Number(Vn(y.upperRight_X)),Number(Vn(y.upperRight_Y))]},qW=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=kS(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Vn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=mh(e);return l.scope=e.scope,l.stream=t.join(`
`),l}},kS=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(le){return le.split(`
`)}):s.map(function(le){return[le]});var l=r,f=ln.internal.getHeight(e)||0;f=f<0?-f:f;var a=ln.internal.getWidth(e)||0;a=a<0?-a:a;var y=function(le,G,Ae){if(le+1<s.length){var we=G+" "+s[le+1][0];return _1(we,e,Ae).width<=a-4}return!1};l++;e:for(;l>0;){t="",l--;var v,S,P=_1("3",e,l).height,D=e.multiline?f-l:(f-P)/2,E=D+=2,F=0,z=0,W=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+_1(t,e,l=12).width+", FieldWidth:"+a+`
`;break}for(var $="",Y=0,Q=0;Q<s.length;Q++)if(s.hasOwnProperty(Q)){var K=!1;if(s[Q].length!==1&&W!==s[Q].length-1){if((P+2)*(Y+2)+2>f)continue e;$+=s[Q][W],K=!0,z=Q,Q--}else{$=($+=s[Q][W]+" ").substr($.length-1)==" "?$.substr(0,$.length-1):$;var xe=parseInt(Q),de=y(xe,$,l),be=Q>=s.length-1;if(de&&!be){$+=" ",W=0;continue}if(de||be){if(be)z=xe;else if(e.multiline&&(P+2)*(Y+2)+2>f)continue e}else{if(!e.multiline||(P+2)*(Y+2)+2>f)continue e;z=xe}}for(var me="",ve=F;ve<=z;ve++){var Re=s[ve];if(e.multiline){if(ve===z){me+=Re[W]+" ",W=(W+1)%Re.length;continue}if(ve===F){me+=Re[Re.length-1]+" ";continue}}me+=Re[0]+" "}switch(me=me.substr(me.length-1)==" "?me.substr(0,me.length-1):me,S=_1(me,e,l).width,e.textAlign){case"right":v=a-S-2;break;case"center":v=(a-S)/2;break;default:v=2}t+=Vn(v)+" "+Vn(E)+` Td
`,t+="("+Cp(me)+`) Tj
`,t+=-Vn(v)+` 0 Td
`,E=-(l+2),S=0,F=K?z:z+1,Y++,$=""}break}return n.text=t,n.fontSize=l,n},_1=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},GW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},HW=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},WW=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Hc.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(GW)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");GE=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new LN,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var l=n[s];l.objId=void 0,l.hasAnnotation&&HW(l,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var l=!n;for(var f in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(f)){var a=n[f],y=[],v=a.Rect;if(a.Rect&&(a.Rect=VW(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=ln.createDefaultAppearanceStream(a),Ji(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(y=a.getKeyValueListForStream()),a.Rect=v,a.hasAppearanceStream&&!a.appearanceStreamContent){var S=qW(a);y.push({key:"AP",value:"<</N "+S+">>"}),s.internal.acroformPlugin.xForms.push(S)}if(a.appearanceStreamContent){var P="";for(var D in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(D)){var E=a.appearanceStreamContent[D];if(P+="/"+D+" ",P+="<<",Object.keys(E).length>=1||Array.isArray(E)){for(var f in E)if(E.hasOwnProperty(f)){var F=E[f];typeof F=="function"&&(F=F.call(s,a)),P+="/"+f+" "+F+" ",s.internal.acroformPlugin.xForms.indexOf(F)>=0||s.internal.acroformPlugin.xForms.push(F)}}else typeof(F=E)=="function"&&(F=F.call(s,a)),P+="/"+f+" "+F,s.internal.acroformPlugin.xForms.indexOf(F)>=0||s.internal.acroformPlugin.xForms.push(F);P+=">>"}y.push({key:"AP",value:`<<
`+P+">>"})}s.internal.putStream({additionalKeyValues:y,objectId:a.objId}),s.internal.out("endobj")}l&&function(z,W){for(var $ in z)if(z.hasOwnProperty($)){var Y=$,Q=z[$];W.internal.newObjectDeferredBegin(Q.objId,!0),Ji(Q)==="object"&&typeof Q.putStream=="function"&&Q.putStream(),delete z[Y]}}(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},MN=va.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(f){return f};if(Array.isArray(e)){for(var s="[",l=0;l<e.length;l++)switch(l!==0&&(s+=" "),Ji(e[l])){case"boolean":case"number":case"object":s+=e[l].toString();break;case"string":e[l].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+Cp(n(e[l].toString()))+")"):s+=e[l].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zw=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+Cp(n(e))+")"},wh=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};wh.prototype.toString=function(){return this.objId+" 0 R"},wh.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},wh.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:MN(s,this.objId,this.scope)}):s instanceof wh?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var kN=function(){wh.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};lu(kN,wh);var LN=function(){wh.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Cp(r(e))+")"}},set:function(r){e=r}})};lu(LN,wh);var Hc=function e(){wh.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function($){if(isNaN($))throw new Error('Invalid value "'+$+'" for attribute F supplied.');t=$}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ia(t,3)},set:function($){$?this.F=Ma(t,3):this.F=ka(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function($){if(isNaN($))throw new Error('Invalid value "'+$+'" for attribute Ff supplied.');r=$}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function($){n=$!==void 0?$:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function($){n[0]=$}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function($){n[1]=$}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function($){n[2]=$}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function($){n[3]=$}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function($){switch($){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=$;break;default:throw new Error('Invalid value "'+$+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof V_)return;l="FieldObject"+e.FieldNum++}var $=function(Y){return Y};return this.scope&&($=this.scope.internal.getEncryptor(this.objId)),"("+Cp($(l))+")"},set:function($){l=$.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function($){l=$}});var f="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return f},set:function($){f=$}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function($){a=$}});var y=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return y},set:function($){y=$}});var v=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return v===void 0?50/GE:v},set:function($){v=$}});var S="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return S},set:function($){S=$}});var P="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!P||this instanceof V_||this instanceof ep))return zw(P,this.objId,this.scope)},set:function($){$=$.toString(),P=$}});var D=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(D)return this instanceof Cs==0?zw(D,this.objId,this.scope):D},set:function($){$=$.toString(),D=this instanceof Cs==0?$.substr(0,1)==="("?um($.substr(1,$.length-2)):um($):$}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cs==1?um(D.substr(1,D.length-1)):D},set:function($){$=$.toString(),D=this instanceof Cs==1?"/"+$:$}});var E=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(E)return E},set:function($){this.V=$}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof Cs==0?zw(E,this.objId,this.scope):E},set:function($){$=$.toString(),E=this instanceof Cs==0?$.substr(0,1)==="("?um($.substr(1,$.length-2)):um($):$}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cs==1?um(E.substr(1,E.length-1)):E},set:function($){$=$.toString(),E=this instanceof Cs==1?"/"+$:$}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var F,z=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return z},set:function($){$=!!$,z=$}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(F)return F},set:function($){F=$}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,1)},set:function($){$?this.Ff=Ma(this.Ff,1):this.Ff=ka(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,2)},set:function($){$?this.Ff=Ma(this.Ff,2):this.Ff=ka(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,3)},set:function($){$?this.Ff=Ma(this.Ff,3):this.Ff=ka(this.Ff,3)}});var W=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(W!==null)return W},set:function($){if([0,1,2].indexOf($)===-1)throw new Error('Invalid value "'+$+'" for attribute Q supplied.');W=$}}),Object.defineProperty(this,"textAlign",{get:function(){var $;switch(W){case 0:default:$="left";break;case 1:$="center";break;case 2:$="right"}return $},configurable:!0,enumerable:!0,set:function($){switch($){case"right":case 2:W=2;break;case"center":case 1:W=1;break;default:W=0}}})};lu(Hc,wh);var og=function(){Hc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return MN(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(l,f,a){a||(a=1);for(var y,v=[];y=f.exec(l);)v.push(y[a]);return v}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,18)},set:function(r){r?this.Ff=Ma(this.Ff,18):this.Ff=ka(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ma(this.Ff,19):this.Ff=ka(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,20)},set:function(r){r?(this.Ff=Ma(this.Ff,20),t.sort()):this.Ff=ka(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,22)},set:function(r){r?this.Ff=Ma(this.Ff,22):this.Ff=ka(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,23)},set:function(r){r?this.Ff=Ma(this.Ff,23):this.Ff=ka(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,27)},set:function(r){r?this.Ff=Ma(this.Ff,27):this.Ff=ka(this.Ff,27)}}),this.hasAppearanceStream=!1};lu(og,Hc);var ag=function(){og.call(this),this.fontName="helvetica",this.combo=!1};lu(ag,og);var sg=function(){ag.call(this),this.combo=!0};lu(sg,ag);var e_=function(){sg.call(this),this.edit=!0};lu(e_,sg);var Cs=function(){Hc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,15)},set:function(r){r?this.Ff=Ma(this.Ff,15):this.Ff=ka(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,16)},set:function(r){r?this.Ff=Ma(this.Ff,16):this.Ff=ka(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,17)},set:function(r){r?this.Ff=Ma(this.Ff,17):this.Ff=ka(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,26)},set:function(r){r?this.Ff=Ma(this.Ff,26):this.Ff=ka(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+Cp(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ji(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};lu(Cs,Hc);var t_=function(){Cs.call(this),this.pushButton=!0};lu(t_,Cs);var lg=function(){Cs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};lu(lg,Cs);var V_=function(){var e,t;Hc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var l,f=[];for(l in f.push("<<"),n)f.push("/"+l+" ("+Cp(s(n[l]))+")");return f.push(">>"),f.join(`
`)},set:function(s){Ji(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=ln.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};lu(V_,Hc),lg.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},lg.prototype.createOption=function(e){var t=new V_;return t.Parent=this,t.optionName=e,this.Kids.push(t),ZW.call(this.scope,t),t};var r_=function(){Cs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=ln.CheckBox.createAppearanceStream()};lu(r_,Cs);var ep=function(){Hc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,13)},set:function(t){t?this.Ff=Ma(this.Ff,13):this.Ff=ka(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,21)},set:function(t){t?this.Ff=Ma(this.Ff,21):this.Ff=ka(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,23)},set:function(t){t?this.Ff=Ma(this.Ff,23):this.Ff=ka(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,24)},set:function(t){t?this.Ff=Ma(this.Ff,24):this.Ff=ka(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,25)},set:function(t){t?this.Ff=Ma(this.Ff,25):this.Ff=ka(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,26)},set:function(t){t?this.Ff=Ma(this.Ff,26):this.Ff=ka(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};lu(ep,Hc);var n_=function(){ep.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ia(this.Ff,14)},set:function(e){e?this.Ff=Ma(this.Ff,14):this.Ff=ka(this.Ff,14)}}),this.password=!0};lu(n_,ep);var ln={CheckBox:{createAppearanceStream:function(){return{N:{On:ln.CheckBox.YesNormal},D:{On:ln.CheckBox.YesPushDown,Off:ln.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=mh(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),l=kS(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Vn(ln.internal.getWidth(e))+" "+Vn(ln.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Vn(l.fontSize)+" Tf "+s),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=mh(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],l=ln.internal.getHeight(e),f=ln.internal.getWidth(e),a=kS(e,e.caption);return s.push("1 g"),s.push("0 0 "+Vn(f)+" "+Vn(l)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Vn(f-1)+" "+Vn(l-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Vn(a.fontSize)+" Tf "+n),s.push(a.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=mh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(ln.internal.getWidth(e))+" "+Vn(ln.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:ln.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=ln.RadioButton.Circle.YesNormal,t.D[e]=ln.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=mh(e);t.scope=e.scope;var r=[],n=ln.internal.getWidth(e)<=ln.internal.getHeight(e)?ln.internal.getWidth(e)/4:ln.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=ln.internal.Bezier_C,l=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+zf(ln.internal.getWidth(e)/2)+" "+zf(ln.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=mh(e);t.scope=e.scope;var r=[],n=ln.internal.getWidth(e)<=ln.internal.getHeight(e)?ln.internal.getWidth(e)/4:ln.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),l=Number((s*ln.internal.Bezier_C).toFixed(5)),f=Number((n*ln.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+zf(ln.internal.getWidth(e)/2)+" "+zf(ln.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),r.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),r.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),r.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+zf(ln.internal.getWidth(e)/2)+" "+zf(ln.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+f+" "+f+" "+n+" 0 "+n+" c"),r.push("-"+f+" "+n+" -"+n+" "+f+" -"+n+" 0 c"),r.push("-"+n+" -"+f+" -"+f+" -"+n+" 0 -"+n+" c"),r.push(f+" -"+n+" "+n+" -"+f+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=mh(e);t.scope=e.scope;var r=[],n=ln.internal.getWidth(e)<=ln.internal.getHeight(e)?ln.internal.getWidth(e)/4:ln.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),l=Number((s*ln.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+zf(ln.internal.getWidth(e)/2)+" "+zf(ln.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+l+" "+l+" "+s+" 0 "+s+" c"),r.push("-"+l+" "+s+" -"+s+" "+l+" -"+s+" 0 c"),r.push("-"+s+" -"+l+" -"+l+" -"+s+" 0 -"+s+" c"),r.push(l+" -"+s+" "+s+" -"+l+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:ln.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=ln.RadioButton.Cross.YesNormal,t.D[e]=ln.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=mh(e);t.scope=e.scope;var r=[],n=ln.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Vn(ln.internal.getWidth(e)-2)+" "+Vn(ln.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Vn(n.x1.x)+" "+Vn(n.x1.y)+" m"),r.push(Vn(n.x2.x)+" "+Vn(n.x2.y)+" l"),r.push(Vn(n.x4.x)+" "+Vn(n.x4.y)+" m"),r.push(Vn(n.x3.x)+" "+Vn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=mh(e);t.scope=e.scope;var r=ln.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Vn(ln.internal.getWidth(e))+" "+Vn(ln.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Vn(ln.internal.getWidth(e)-2)+" "+Vn(ln.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Vn(r.x1.x)+" "+Vn(r.x1.y)+" m"),n.push(Vn(r.x2.x)+" "+Vn(r.x2.y)+" l"),n.push(Vn(r.x4.x)+" "+Vn(r.x4.y)+" m"),n.push(Vn(r.x3.x)+" "+Vn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=mh(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(ln.internal.getWidth(e))+" "+Vn(ln.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};ln.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=ln.internal.getWidth(e),r=ln.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},ln.internal.getWidth=function(e){var t=0;return Ji(e)==="object"&&(t=OI(e.Rect[2])),t},ln.internal.getHeight=function(e){var t=0;return Ji(e)==="object"&&(t=OI(e.Rect[3])),t};var ZW=va.addField=function(e){if(WW(this,e),!(e instanceof Hc))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};va.AcroFormChoiceField=og,va.AcroFormListBox=ag,va.AcroFormComboBox=sg,va.AcroFormEditBox=e_,va.AcroFormButton=Cs,va.AcroFormPushButton=t_,va.AcroFormRadioButton=lg,va.AcroFormCheckBox=r_,va.AcroFormTextField=ep,va.AcroFormPasswordField=n_,va.AcroFormAppearance=ln,va.AcroForm={ChoiceField:og,ListBox:ag,ComboBox:sg,EditBox:e_,Button:Cs,PushButton:t_,RadioButton:lg,CheckBox:r_,TextField:ep,PasswordField:n_,Appearance:ln},bn.AcroForm={ChoiceField:og,ListBox:ag,ComboBox:sg,EditBox:e_,Button:Cs,PushButton:t_,RadioButton:lg,CheckBox:r_,TextField:ep,PasswordField:n_,Appearance:ln};bn.AcroForm;function DN(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(le,G){var Ae,we,lt,pt,At,Ze=r;if((G=G||r)==="RGBA"||le.data!==void 0&&le.data instanceof Uint8ClampedArray&&"height"in le&&"width"in le)return"RGBA";if(de(le))for(At in n)for(lt=n[At],Ae=0;Ae<lt.length;Ae+=1){for(pt=!0,we=0;we<lt[Ae].length;we+=1)if(lt[Ae][we]!==void 0&&lt[Ae][we]!==le[we]){pt=!1;break}if(pt===!0){Ze=At;break}}else for(At in n)for(lt=n[At],Ae=0;Ae<lt.length;Ae+=1){for(pt=!0,we=0;we<lt[Ae].length;we+=1)if(lt[Ae][we]!==void 0&&lt[Ae][we]!==le.charCodeAt(we)){pt=!1;break}if(pt===!0){Ze=At;break}}return Ze===r&&G!==r&&(Ze=G),Ze},l=function le(G){for(var Ae=this.internal.write,we=this.internal.putStream,lt=(0,this.internal.getFilters)();lt.indexOf("FlateEncode")!==-1;)lt.splice(lt.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var pt=[];if(pt.push({key:"Type",value:"/XObject"}),pt.push({key:"Subtype",value:"/Image"}),pt.push({key:"Width",value:G.width}),pt.push({key:"Height",value:G.height}),G.colorSpace===$.INDEXED?pt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(pt.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===$.DEVICE_CMYK&&pt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),pt.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&pt.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)){for(var At="",Ze=0,tt=G.transparency.length;Ze<tt;Ze++)At+=G.transparency[Ze]+" "+G.transparency[Ze]+" ";pt.push({key:"Mask",value:"["+At+"]"})}G.sMask!==void 0&&pt.push({key:"SMask",value:G.objectId+1+" 0 R"});var Ot=G.filter!==void 0?["/"+G.filter]:void 0;if(we({data:G.data,additionalKeyValues:pt,alreadyAppliedFilters:Ot,objectId:G.objectId}),Ae("endobj"),"sMask"in G&&G.sMask!==void 0){var St=(G.predictor!=null?"/Predictor "+G.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+G.width,ne={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:G.bitsPerComponent,decodeParameters:St,data:G.sMask};"filter"in G&&(ne.filter=G.filter),le.call(this,ne)}if(G.colorSpace===$.INDEXED){var Ee=this.internal.newObject();we({data:me(new Uint8Array(G.palette)),objectId:Ee}),Ae("endobj")}},f=function(){var le=this.internal.collections[t+"images"];for(var G in le)l.call(this,le[G])},a=function(){var le,G=this.internal.collections[t+"images"],Ae=this.internal.write;for(var we in G)Ae("/I"+(le=G[we]).index,le.objectId,"0","R")},y=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",f),this.internal.events.subscribe("putXobjectDict",a))},v=function(){var le=this.internal.collections[t+"images"];return y.call(this),le},S=function(){return Object.keys(this.internal.collections[t+"images"]).length},P=function(le){return typeof e["process"+le.toUpperCase()]=="function"},D=function(le){return Ji(le)==="object"&&le.nodeType===1},E=function(le,G){if(le.nodeName==="IMG"&&le.hasAttribute("src")){var Ae=""+le.getAttribute("src");if(Ae.indexOf("data:image/")===0)return Q1(unescape(Ae).split("base64,").pop());var we=e.loadFile(Ae,!0);if(we!==void 0)return we}if(le.nodeName==="CANVAS"){if(le.width===0||le.height===0)throw new Error("Given canvas must have data. Canvas width: "+le.width+", height: "+le.height);var lt;switch(G){case"PNG":lt="image/png";break;case"WEBP":lt="image/webp";break;default:lt="image/jpeg"}return Q1(le.toDataURL(lt,1).split("base64,").pop())}},F=function(le){var G=this.internal.collections[t+"images"];if(G){for(var Ae in G)if(le===G[Ae].alias)return G[Ae]}},z=function(le,G,Ae){return le||G||(le=-96,G=-96),le<0&&(le=-1*Ae.width*72/le/this.internal.scaleFactor),G<0&&(G=-1*Ae.height*72/G/this.internal.scaleFactor),le===0&&(le=G*Ae.width/Ae.height),G===0&&(G=le*Ae.height/Ae.width),[le,G]},W=function(le,G,Ae,we,lt,pt){var At=z.call(this,Ae,we,lt),Ze=this.internal.getCoordinateString,tt=this.internal.getVerticalCoordinateString,Ot=v.call(this);if(Ae=At[0],we=At[1],Ot[lt.index]=lt,pt){pt*=Math.PI/180;var St=Math.cos(pt),ne=Math.sin(pt),Ee=function(qe){return qe.toFixed(4)},Ne=[Ee(St),Ee(ne),Ee(-1*ne),Ee(St),0,0,"cm"]}this.internal.write("q"),pt?(this.internal.write([1,"0","0",1,Ze(le),tt(G+we),"cm"].join(" ")),this.internal.write(Ne.join(" ")),this.internal.write([Ze(Ae),"0","0",Ze(we),"0","0","cm"].join(" "))):this.internal.write([Ze(Ae),"0","0",Ze(we),Ze(le),tt(G+we),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+lt.index+" Do"),this.internal.write("Q")},$=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Q=e.__addimage__.sHashCode=function(le){var G,Ae,we=0;if(typeof le=="string")for(Ae=le.length,G=0;G<Ae;G++)we=(we<<5)-we+le.charCodeAt(G),we|=0;else if(de(le))for(Ae=le.byteLength/2,G=0;G<Ae;G++)we=(we<<5)-we+le[G],we|=0;return we},K=e.__addimage__.validateStringAsBase64=function(le){(le=le||"").toString().trim();var G=!0;return le.length===0&&(G=!1),le.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(le.substr(0,le.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(le.substr(-2))===!1&&(G=!1),G},xe=e.__addimage__.extractImageFromDataUrl=function(le){if(le==null||!(le=le.trim()).startsWith("data:"))return null;var G=le.indexOf(",");return G<0?null:le.substring(0,G).trim().endsWith("base64")?le.substring(G+1):null};e.__addimage__.isArrayBuffer=function(le){return le instanceof ArrayBuffer};var de=e.__addimage__.isArrayBufferView=function(le){return le instanceof Int8Array||le instanceof Uint8Array||le instanceof Uint8ClampedArray||le instanceof Int16Array||le instanceof Uint16Array||le instanceof Int32Array||le instanceof Uint32Array||le instanceof Float32Array||le instanceof Float64Array},be=e.__addimage__.binaryStringToUint8Array=function(le){for(var G=le.length,Ae=new Uint8Array(G),we=0;we<G;we++)Ae[we]=le.charCodeAt(we);return Ae},me=e.__addimage__.arrayBufferToBinaryString=function(le){for(var G="",Ae=de(le)?le:new Uint8Array(le),we=0;we<Ae.length;we+=8192)G+=String.fromCharCode.apply(null,Ae.subarray(we,we+8192));return G};e.addImage=function(){var le,G,Ae,we,lt,pt,At,Ze,tt;if(typeof arguments[1]=="number"?(G=r,Ae=arguments[1],we=arguments[2],lt=arguments[3],pt=arguments[4],At=arguments[5],Ze=arguments[6],tt=arguments[7]):(G=arguments[1],Ae=arguments[2],we=arguments[3],lt=arguments[4],pt=arguments[5],At=arguments[6],Ze=arguments[7],tt=arguments[8]),Ji(le=arguments[0])==="object"&&!D(le)&&"imageData"in le){var Ot=le;le=Ot.imageData,G=Ot.format||G||r,Ae=Ot.x||Ae||0,we=Ot.y||we||0,lt=Ot.w||Ot.width||lt,pt=Ot.h||Ot.height||pt,At=Ot.alias||At,Ze=Ot.compression||Ze,tt=Ot.rotation||Ot.angle||tt}var St=this.internal.getFilters();if(Ze===void 0&&St.indexOf("FlateEncode")!==-1&&(Ze="SLOW"),isNaN(Ae)||isNaN(we))throw new Error("Invalid coordinates passed to jsPDF.addImage");y.call(this);var ne=ve.call(this,le,G,At,Ze);return W.call(this,Ae,we,lt,pt,ne,tt),this};var ve=function(le,G,Ae,we){var lt,pt,At;if(typeof le=="string"&&s(le)===r){le=unescape(le);var Ze=Re(le,!1);(Ze!==""||(Ze=e.loadFile(le,!0))!==void 0)&&(le=Ze)}if(D(le)&&(le=E(le,G)),G=s(le,G),!P(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((At=Ae)==null||At.length===0)&&(Ae=function(tt){return typeof tt=="string"||de(tt)?Q(tt):de(tt.data)?Q(tt.data):null}(le)),(lt=F.call(this,Ae))||(le instanceof Uint8Array||G==="RGBA"||(pt=le,le=be(le)),lt=this["process"+G.toUpperCase()](le,S.call(this),Ae,function(tt){return tt&&typeof tt=="string"&&(tt=tt.toUpperCase()),tt in e.image_compression?tt:Y.NONE}(we),pt)),!lt)throw new Error("An unknown error occurred whilst processing the image.");return lt},Re=e.__addimage__.convertBase64ToBinaryString=function(le,G){G=typeof G!="boolean"||G;var Ae,we="";if(typeof le=="string"){var lt;Ae=(lt=xe(le))!==null&&lt!==void 0?lt:le;try{we=Q1(Ae)}catch(pt){if(G)throw K(Ae)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+pt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return we};e.getImageProperties=function(le){var G,Ae,we="";if(D(le)&&(le=E(le)),typeof le=="string"&&s(le)===r&&((we=Re(le,!1))===""&&(we=e.loadFile(le)||""),le=we),Ae=s(le),!P(Ae))throw new Error("addImage does not support files of type '"+Ae+"', please ensure that a plugin for '"+Ae+"' support is added.");if(le instanceof Uint8Array||(le=be(le)),!(G=this["process"+Ae.toUpperCase()](le)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=Ae,G}})(bn.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};bn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,l,f=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,y=this.internal.getPageInfoByObjId(r.objId),v=r.pageContext.annotations,S=!1,P=0;P<v.length&&!S;P++)switch((n=v[P]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(S=!0);break;case"reference":case"text":case"freetext":S=!0}if(S!=0){this.internal.write("/Annots [");for(var D=0;D<v.length;D++){n=v[D];var E=this.internal.pdfEscape,F=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var z=this.internal.newAdditionalObject(),W=this.internal.newAdditionalObject(),$=this.internal.getEncryptor(z.objId),Y=n.title||"Note";l="<</Type /Annot /Subtype /Text "+(s="/Rect ["+f(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+f(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+E($(n.contents))+")",l+=" /Popup "+W.objId+" 0 R",l+=" /P "+y.objId+" 0 R",l+=" /T ("+E($(Y))+") >>",z.content=l;var Q=z.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+f(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+f(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+Q,n.open&&(l+=" /Open true"),l+=" >>",W.content=l,this.internal.write(z.objId,"0 R",W.objId,"0 R");break;case"freetext":s="/Rect ["+f(n.bounds.x)+" "+a(n.bounds.y)+" "+f(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var K=n.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+E(F(n.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(n.options.name){var xe=this.annotations._nameMap[n.options.name];n.options.pageNumber=xe.page,n.options.top=xe.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",l="",n.options.url)l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+E(F(n.options.url))+") >>";else if(n.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,l+=" /FitV "+n.options.left+"]";break;default:var de=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),l+=" /XYZ "+n.options.left+" "+de+" "+n.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,l,f){var a=this.internal.getCurrentPageInfo(),y=this.internal.getCoordinateString,v=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:y(r),y:v(n),w:y(r+s),h:v(n+l)},options:f,type:"link"})},e.textWithLink=function(r,n,s,l){var f,a,y=this.getTextWidth(r),v=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){a=l.maxWidth;var S=this.splitTextToSize(r,a).length;f=Math.ceil(v*S)}else a=y,f=v;return this.text(r,n,s,l),s+=.2*v,l.align==="center"&&(n-=y/2),l.align==="right"&&(n-=y),this.link(n,s-v,a,f,l),y},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(bn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var l=e.__arabicParser__.isInArabicSubstitutionA=function(z){return t[z.charCodeAt(0)]!==void 0},f=e.__arabicParser__.isArabicLetter=function(z){return typeof z=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(z)},a=e.__arabicParser__.isArabicEndLetter=function(z){return f(z)&&l(z)&&t[z.charCodeAt(0)].length<=2},y=e.__arabicParser__.isArabicAlfLetter=function(z){return f(z)&&s.indexOf(z.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(z){return f(z)&&l(z)&&t[z.charCodeAt(0)].length>=1};var v=e.__arabicParser__.arabicLetterHasFinalForm=function(z){return f(z)&&l(z)&&t[z.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(z){return f(z)&&l(z)&&t[z.charCodeAt(0)].length>=3};var S=e.__arabicParser__.arabicLetterHasMedialForm=function(z){return f(z)&&l(z)&&t[z.charCodeAt(0)].length==4},P=e.__arabicParser__.resolveLigatures=function(z){var W=0,$=r,Y="",Q=0;for(W=0;W<z.length;W+=1)$[z.charCodeAt(W)]!==void 0?(Q++,typeof($=$[z.charCodeAt(W)])=="number"&&(Y+=String.fromCharCode($),$=r,Q=0),W===z.length-1&&($=r,Y+=z.charAt(W-(Q-1)),W-=Q-1,Q=0)):($=r,Y+=z.charAt(W-Q),W-=Q,Q=0);return Y};e.__arabicParser__.isArabicDiacritic=function(z){return z!==void 0&&n[z.charCodeAt(0)]!==void 0};var D=e.__arabicParser__.getCorrectForm=function(z,W,$){return f(z)?l(z)===!1?-1:!v(z)||!f(W)&&!f($)||!f($)&&a(W)||a(z)&&!f(W)||a(z)&&y(W)||a(z)&&a(W)?0:S(z)&&f(W)&&!a(W)&&f($)&&v($)?3:a(z)||!f($)?1:2:-1},E=function(z){var W=0,$=0,Y=0,Q="",K="",xe="",de=(z=z||"").split("\\s+"),be=[];for(W=0;W<de.length;W+=1){for(be.push(""),$=0;$<de[W].length;$+=1)Q=de[W][$],K=de[W][$-1],xe=de[W][$+1],f(Q)?(Y=D(Q,K,xe),be[W]+=Y!==-1?String.fromCharCode(t[Q.charCodeAt(0)][Y]):Q):be[W]+=Q;be[W]=P(be[W])}return be.join(" ")},F=e.__arabicParser__.processArabic=e.processArabic=function(){var z,W=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,$=[];if(Array.isArray(W)){var Y=0;for($=[],Y=0;Y<W.length;Y+=1)Array.isArray(W[Y])?$.push([E(W[Y][0]),W[Y][1],W[Y][2]]):$.push([E(W[Y])]);z=$}else z=E(W);return typeof arguments[0]=="string"?z:(arguments[0].text=z,arguments[0])};e.events.push(["preProcessText",F])}(bn.API),bn.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(a){l=a}});var f={};Object.defineProperty(this,"style",{get:function(){return f},set:function(a){f=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(bn.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var y=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return y},set:function(z){y=z}});var v=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return v},set:function(z){v=z}});var S=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return S},set:function(z){S=z}});var P=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return P},set:function(z){P=z}});var D=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return D},set:function(z){D=z}});var E=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return E},set:function(z){E=z}});var F=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return F},set:function(z){F=z}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(y){return n.call(this),this.internal.__cell__.headerFunction=typeof y=="function"?y:void 0,this},e.getTextDimensions=function(y,v){n.call(this);var S=(v=v||{}).fontSize||this.getFontSize(),P=v.font||this.getFont(),D=v.scaleFactor||this.internal.scaleFactor,E=0,F=0,z=0,W=this;if(!Array.isArray(y)&&typeof y!="string"){if(typeof y!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");y=String(y)}var $=v.maxWidth;$>0?typeof y=="string"?y=this.splitTextToSize(y,$):Object.prototype.toString.call(y)==="[object Array]"&&(y=y.reduce(function(Q,K){return Q.concat(W.splitTextToSize(K,$))},[])):y=Array.isArray(y)?y:[y];for(var Y=0;Y<y.length;Y++)E<(z=this.getStringUnitWidth(y[Y],{font:P})*S)&&(E=z);return E!==0&&(F=y.length),{w:E/=D,h:Math.max((F*S*this.getLineHeightFactor()-S*(this.getLineHeightFactor()-1))/D,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var y=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(y.left,y.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var f=e.cell=function(){var y;y=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var v=this.internal.__cell__.lastCell,S=this.internal.__cell__.padding,P=this.internal.__cell__.margins||t,D=this.internal.__cell__.tableHeaderRow,E=this.internal.__cell__.printHeaders;return v.lineNumber!==void 0&&(v.lineNumber===y.lineNumber?(y.x=(v.x||0)+(v.width||0),y.y=v.y||0):v.y+v.height+y.height+P.bottom>this.getPageHeight()?(this.cellAddPage(),y.y=P.top,E&&D&&(this.printHeaderRow(y.lineNumber,!0),y.y+=D[0].height)):y.y=v.y+v.height||y.y),y.text[0]!==void 0&&(this.rect(y.x,y.y,y.width,y.height,r===!0?"FD":void 0),y.align==="right"?this.text(y.text,y.x+y.width-S,y.y+S,{align:"right",baseline:"top"}):y.align==="center"?this.text(y.text,y.x+y.width/2,y.y+S,{align:"center",baseline:"top",maxWidth:y.width-S-S}):this.text(y.text,y.x+S,y.y+S,{align:"left",baseline:"top",maxWidth:y.width-S-S})),this.internal.__cell__.lastCell=y,this};e.table=function(y,v,S,P,D){if(n.call(this),!S)throw new Error("No data for PDF table.");var E,F,z,W,$=[],Y=[],Q=[],K={},xe={},de=[],be=[],me=(D=D||{}).autoSize||!1,ve=D.printHeaders!==!1,Re=D.css&&D.css["font-size"]!==void 0?16*D.css["font-size"]:D.fontSize||12,le=D.margins||Object.assign({width:this.getPageWidth()},t),G=typeof D.padding=="number"?D.padding:3,Ae=D.headerBackgroundColor||"#c8c8c8",we=D.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=ve,this.internal.__cell__.margins=le,this.internal.__cell__.table_font_size=Re,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=Ae,this.internal.__cell__.headerTextColor=we,this.setFontSize(Re),P==null)Y=$=Object.keys(S[0]),Q=$.map(function(){return"left"});else if(Array.isArray(P)&&Ji(P[0])==="object")for($=P.map(function(Ot){return Ot.name}),Y=P.map(function(Ot){return Ot.prompt||Ot.name||""}),Q=P.map(function(Ot){return Ot.align||"left"}),E=0;E<P.length;E+=1)xe[P[E].name]=.7499990551181103*P[E].width;else Array.isArray(P)&&typeof P[0]=="string"&&(Y=$=P,Q=$.map(function(){return"left"}));if(me||Array.isArray(P)&&typeof P[0]=="string")for(E=0;E<$.length;E+=1){for(K[W=$[E]]=S.map(function(Ot){return Ot[W]}),this.setFont(void 0,"bold"),de.push(this.getTextDimensions(Y[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),F=K[W],this.setFont(void 0,"normal"),z=0;z<F.length;z+=1)de.push(this.getTextDimensions(F[z],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);xe[W]=Math.max.apply(null,de)+G+G,de=[]}if(ve){var lt={};for(E=0;E<$.length;E+=1)lt[$[E]]={},lt[$[E]].text=Y[E],lt[$[E]].align=Q[E];var pt=a.call(this,lt,xe);be=$.map(function(Ot){return new l(y,v,xe[Ot],pt,lt[Ot].text,void 0,lt[Ot].align)}),this.setTableHeaderRow(be),this.printHeaderRow(1,!1)}var At=P.reduce(function(Ot,St){return Ot[St.name]=St.align,Ot},{});for(E=0;E<S.length;E+=1){"rowStart"in D&&D.rowStart instanceof Function&&D.rowStart({row:E,data:S[E]},this);var Ze=a.call(this,S[E],xe);for(z=0;z<$.length;z+=1){var tt=S[E][$[z]];"cellStart"in D&&D.cellStart instanceof Function&&D.cellStart({row:E,col:z,data:tt},this),f.call(this,new l(y,v,xe[$[z]],Ze,tt,E+2,At[$[z]]))}}return this.internal.__cell__.table_x=y,this.internal.__cell__.table_y=v,this};var a=function(y,v){var S=this.internal.__cell__.padding,P=this.internal.__cell__.table_font_size,D=this.internal.scaleFactor;return Object.keys(y).map(function(E){var F=y[E];return this.splitTextToSize(F.hasOwnProperty("text")?F.text:F,v[E]-S-S)},this).map(function(E){return this.getLineHeightFactor()*E.length*P/D+S+S},this).reduce(function(E,F){return Math.max(E,F)},0)};e.setTableHeaderRow=function(y){n.call(this),this.internal.__cell__.tableHeaderRow=y},e.printHeaderRow=function(y,v){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var S;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var P=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(P[0],P[1],P[2],P[3],void 0,-1)}this.setFont(void 0,"bold");for(var D=[],E=0;E<this.internal.__cell__.tableHeaderRow.length;E+=1){S=this.internal.__cell__.tableHeaderRow[E].clone(),v&&(S.y=this.internal.__cell__.margins.top||0,D.push(S)),S.lineNumber=y;var F=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),f.call(this,S),this.setTextColor(F)}D.length>0&&this.setTableHeaderRow(D),this.setFont(void 0,"normal"),r=!1}}(bn.API);var RN={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},NN=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],LS=DN(NN),ON=[100,200,300,400,500,600,700,800,900],XW=DN(ON);function $w(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(l){return RN[l=l||"normal"]?l:"normal"}(e.style),n=function(l){return l?typeof l=="number"?l>=100&&l<=900&&l%100==0?l:400:/^\d00$/.test(l)?parseInt(l):l==="bold"?700:400:400}(e.weight),s=function(l){return typeof LS[l=l||"normal"]=="number"?l:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function FI(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var YW={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},BI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function zI(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function $I(e){return e.trimLeft()}function KW(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function JW(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var b1,jI,UI,cm,x1,VI,qI,GI,jw=["times"];function HI(e,t,r,n){var s=4,l=ZI;switch(n){case bn.API.image_compression.FAST:s=1,l=WI;break;case bn.API.image_compression.MEDIUM:s=6,l=XI;break;case bn.API.image_compression.SLOW:s=9,l=YI}e=function(a,y,v,S){for(var P,D=a.length/y,E=new Uint8Array(a.length+D),F=[QW,WI,ZI,XI,YI],z=0;z<D;z+=1){var W=z*y,$=a.subarray(W,W+y);if(S)E.set(S($,v,P),W+z);else{for(var Y=F.length,Q=[],K=0;K<Y;K+=1)Q[K]=F[K]($,v,P);var xe=tZ(Q.concat());E.set(Q[xe],W+z)}P=$}return E}(e,t,r,l);var f=ES(e,{level:s});return bn.API.__addimage__.arrayBufferToBinaryString(f)}function QW(e){var t=Array.apply([],e);return t.unshift(0),t}function WI(e,t){var r=e.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var l=e[s-t]||0;n[s+1]=e[s]-l+256&255}return n}function ZI(e,t,r){var n=e.length,s=[];s[0]=2;for(var l=0;l<n;l+=1){var f=r&&r[l]||0;s[l+1]=e[l]-f+256&255}return s}function XI(e,t,r){var n=e.length,s=[];s[0]=3;for(var l=0;l<n;l+=1){var f=e[l-t]||0,a=r&&r[l]||0;s[l+1]=e[l]+256-(f+a>>>1)&255}return s}function YI(e,t,r){var n=e.length,s=[];s[0]=4;for(var l=0;l<n;l+=1){var f=eZ(e[l-t]||0,r&&r[l]||0,r&&r[l-t]||0);s[l+1]=e[l]-f+256&255}return s}function eZ(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),s=Math.abs(e-r),l=Math.abs(e+t-r-r);return n<=s&&n<=l?e:s<=l?t:r}function tZ(e){var t=e.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return t.indexOf(Math.min.apply(null,t))}function Uw(e,t,r){var n=t*r,s=Math.floor(n/8),l=16-(n-8*s+r),f=(1<<r)-1;return FN(e,s)>>l&f}function KI(e,t,r,n){var s=r*n,l=Math.floor(s/8),f=16-(s-8*l+n),a=(1<<n)-1,y=(t&a)<<f;(function(v,S,P){if(S+1<v.byteLength)v.setUint16(S,P,!1);else{var D=P>>8&255;v.setUint8(S,D)}})(e,l,FN(e,l)&~(a<<f)&65535|y)}function FN(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function rZ(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],l=s>>7,f=1<<1+(7&s);e[t++],e[t++];var a=null,y=null;l&&(a=t,y=f,t+=3*f);var v=!0,S=[],P=0,D=null,E=0,F=null;for(this.width=r,this.height=n;v&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,F=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((le=e[t++])>=0))throw Error("Invalid block size");if(le===0)break;t+=le}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var z=e[t++];P=e[t++]|e[t++]<<8,D=e[t++],1&z||(D=null),E=z>>2&7,t++;break;case 254:for(;;){if(!((le=e[t++])>=0))throw Error("Invalid block size");if(le===0)break;t+=le}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var W=e[t++]|e[t++]<<8,$=e[t++]|e[t++]<<8,Y=e[t++]|e[t++]<<8,Q=e[t++]|e[t++]<<8,K=e[t++],xe=K>>6&1,de=1<<1+(7&K),be=a,me=y,ve=!1;K>>7&&(ve=!0,be=t,me=de,t+=3*de);var Re=t;for(t++;;){var le;if(!((le=e[t++])>=0))throw Error("Invalid block size");if(le===0)break;t+=le}S.push({x:W,y:$,width:Y,height:Q,has_local_palette:ve,palette_offset:be,palette_size:me,data_offset:Re,data_length:t-Re,transparent_index:D,interlaced:!!xe,delay:P,disposal:E});break;case 59:v=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return S.length},this.loopCount=function(){return F},this.frameInfo=function(G){if(G<0||G>=S.length)throw new Error("Frame index out of range.");return S[G]},this.decodeAndBlitFrameBGRA=function(G,Ae){var we=this.frameInfo(G),lt=we.width*we.height,pt=new Uint8Array(lt);JI(e,we.data_offset,pt,lt);var At=we.palette_offset,Ze=we.transparent_index;Ze===null&&(Ze=256);var tt=we.width,Ot=r-tt,St=tt,ne=4*(we.y*r+we.x),Ee=4*((we.y+we.height)*r+we.x),Ne=ne,qe=4*Ot;we.interlaced===!0&&(qe+=4*r*7);for(var Je=8,gt=0,bt=pt.length;gt<bt;++gt){var ft=pt[gt];if(St===0&&(St=tt,(Ne+=qe)>=Ee&&(qe=4*Ot+4*r*(Je-1),Ne=ne+(tt+Ot)*(Je<<1),Je>>=1)),ft===Ze)Ne+=4;else{var Ct=e[At+3*ft],Ut=e[At+3*ft+1],gr=e[At+3*ft+2];Ae[Ne++]=gr,Ae[Ne++]=Ut,Ae[Ne++]=Ct,Ae[Ne++]=255}--St}},this.decodeAndBlitFrameRGBA=function(G,Ae){var we=this.frameInfo(G),lt=we.width*we.height,pt=new Uint8Array(lt);JI(e,we.data_offset,pt,lt);var At=we.palette_offset,Ze=we.transparent_index;Ze===null&&(Ze=256);var tt=we.width,Ot=r-tt,St=tt,ne=4*(we.y*r+we.x),Ee=4*((we.y+we.height)*r+we.x),Ne=ne,qe=4*Ot;we.interlaced===!0&&(qe+=4*r*7);for(var Je=8,gt=0,bt=pt.length;gt<bt;++gt){var ft=pt[gt];if(St===0&&(St=tt,(Ne+=qe)>=Ee&&(qe=4*Ot+4*r*(Je-1),Ne=ne+(tt+Ot)*(Je<<1),Je>>=1)),ft===Ze)Ne+=4;else{var Ct=e[At+3*ft],Ut=e[At+3*ft+1],gr=e[At+3*ft+2];Ae[Ne++]=Ct,Ae[Ne++]=Ut,Ae[Ne++]=gr,Ae[Ne++]=255}--St}}}function JI(e,t,r,n){for(var s=e[t++],l=1<<s,f=l+1,a=f+1,y=s+1,v=(1<<y)-1,S=0,P=0,D=0,E=e[t++],F=new Int32Array(4096),z=null;;){for(;S<16&&E!==0;)P|=e[t++]<<S,S+=8,E===1?E=e[t++]:--E;if(S<y)break;var W=P&v;if(P>>=y,S-=y,W!==l){if(W===f)break;for(var $=W<a?W:z,Y=0,Q=$;Q>l;)Q=F[Q]>>8,++Y;var K=Q;if(D+Y+($!==W?1:0)>n)return void mo.log("Warning, gif stream longer than expected.");r[D++]=K;var xe=D+=Y;for($!==W&&(r[D++]=K),Q=$;Y--;)Q=F[Q],r[--xe]=255&Q,Q>>=8;z!==null&&a<4096&&(F[a++]=z<<8|K,a>=v+1&&y<12&&(++y,v=v<<1|1)),z=W}else a=f+1,v=(1<<(y=s+1))-1,z=null}return D!==n&&mo.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Vw(e){var t,r,n,s,l,f=Math.floor,a=new Array(64),y=new Array(64),v=new Array(64),S=new Array(64),P=new Array(65535),D=new Array(65535),E=new Array(64),F=new Array(64),z=[],W=0,$=7,Y=new Array(64),Q=new Array(64),K=new Array(64),xe=new Array(256),de=new Array(2048),be=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],me=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ve=[0,1,2,3,4,5,6,7,8,9,10,11],Re=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],le=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ae=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],lt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function pt(ne,Ee){for(var Ne=0,qe=0,Je=new Array,gt=1;gt<=16;gt++){for(var bt=1;bt<=ne[gt];bt++)Je[Ee[qe]]=[],Je[Ee[qe]][0]=Ne,Je[Ee[qe]][1]=gt,qe++,Ne++;Ne*=2}return Je}function At(ne){for(var Ee=ne[0],Ne=ne[1]-1;Ne>=0;)Ee&1<<Ne&&(W|=1<<$),Ne--,--$<0&&(W==255?(Ze(255),Ze(0)):Ze(W),$=7,W=0)}function Ze(ne){z.push(ne)}function tt(ne){Ze(ne>>8&255),Ze(255&ne)}function Ot(ne,Ee,Ne,qe,Je){for(var gt,bt=Je[0],ft=Je[240],Ct=function(Ht,Er){var vr,dr,qr,En,cn,Jr,An,en,Ur,Br,_r=0;for(Ur=0;Ur<8;++Ur){vr=Ht[_r],dr=Ht[_r+1],qr=Ht[_r+2],En=Ht[_r+3],cn=Ht[_r+4],Jr=Ht[_r+5],An=Ht[_r+6];var ot=vr+(en=Ht[_r+7]),ae=vr-en,oe=dr+An,ye=dr-An,De=qr+Jr,Ve=qr-Jr,rt=En+cn,ht=En-cn,ct=ot+rt,Lt=ot-rt,wt=oe+De,st=oe-De;Ht[_r]=ct+wt,Ht[_r+4]=ct-wt;var Ft=.707106781*(st+Lt);Ht[_r+2]=Lt+Ft,Ht[_r+6]=Lt-Ft;var it=.382683433*((ct=ht+Ve)-(st=ye+ae)),hr=.5411961*ct+it,Xr=1.306562965*st+it,wr=.707106781*(wt=Ve+ye),er=ae+wr,nn=ae-wr;Ht[_r+5]=nn+hr,Ht[_r+3]=nn-hr,Ht[_r+1]=er+Xr,Ht[_r+7]=er-Xr,_r+=8}for(_r=0,Ur=0;Ur<8;++Ur){vr=Ht[_r],dr=Ht[_r+8],qr=Ht[_r+16],En=Ht[_r+24],cn=Ht[_r+32],Jr=Ht[_r+40],An=Ht[_r+48];var Hn=vr+(en=Ht[_r+56]),Dn=vr-en,hn=dr+An,Dr=dr-An,fn=qr+Jr,qn=qr-Jr,nr=En+cn,Bi=En-cn,Gn=Hn+nr,yo=Hn-nr,Xo=hn+fn,lr=hn-fn;Ht[_r]=Gn+Xo,Ht[_r+32]=Gn-Xo;var $r=.707106781*(lr+yo);Ht[_r+16]=yo+$r,Ht[_r+48]=yo-$r;var Sn=.382683433*((Gn=Bi+qn)-(lr=Dr+Dn)),ro=.5411961*Gn+Sn,Hs=1.306562965*lr+Sn,ca=.707106781*(Xo=qn+Dr),Tn=Dn+ca,ha=Dn-ca;Ht[_r+40]=ha+ro,Ht[_r+24]=ha-ro,Ht[_r+8]=Tn+Hs,Ht[_r+56]=Tn-Hs,_r++}for(Ur=0;Ur<64;++Ur)Br=Ht[Ur]*Er[Ur],E[Ur]=Br>0?Br+.5|0:Br-.5|0;return E}(ne,Ee),Ut=0;Ut<64;++Ut)F[be[Ut]]=Ct[Ut];var gr=F[0]-Ne;Ne=F[0],gr==0?At(qe[0]):(At(qe[D[gt=32767+gr]]),At(P[gt]));for(var rr=63;rr>0&&F[rr]==0;)rr--;if(rr==0)return At(bt),Ne;for(var It,Ue=1;Ue<=rr;){for(var Lr=Ue;F[Ue]==0&&Ue<=rr;)++Ue;var Nr=Ue-Lr;if(Nr>=16){It=Nr>>4;for(var Pr=1;Pr<=It;++Pr)At(ft);Nr&=15}gt=32767+F[Ue],At(Je[(Nr<<4)+D[gt]]),At(P[gt]),Ue++}return rr!=63&&At(bt),Ne}function St(ne){ne=Math.min(Math.max(ne,1),100),l!=ne&&(function(Ee){for(var Ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],qe=0;qe<64;qe++){var Je=f((Ne[qe]*Ee+50)/100);Je=Math.min(Math.max(Je,1),255),a[be[qe]]=Je}for(var gt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],bt=0;bt<64;bt++){var ft=f((gt[bt]*Ee+50)/100);ft=Math.min(Math.max(ft,1),255),y[be[bt]]=ft}for(var Ct=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ut=0,gr=0;gr<8;gr++)for(var rr=0;rr<8;rr++)v[Ut]=1/(a[be[Ut]]*Ct[gr]*Ct[rr]*8),S[Ut]=1/(y[be[Ut]]*Ct[gr]*Ct[rr]*8),Ut++}(ne<50?Math.floor(5e3/ne):Math.floor(200-2*ne)),l=ne)}this.encode=function(ne,Ee){Ee&&St(Ee),z=new Array,W=0,$=7,tt(65496),tt(65504),tt(16),Ze(74),Ze(70),Ze(73),Ze(70),Ze(0),Ze(1),Ze(1),Ze(0),tt(1),tt(1),Ze(0),Ze(0),function(){tt(65499),tt(132),Ze(0);for(var dr=0;dr<64;dr++)Ze(a[dr]);Ze(1);for(var qr=0;qr<64;qr++)Ze(y[qr])}(),function(dr,qr){tt(65472),tt(17),Ze(8),tt(qr),tt(dr),Ze(3),Ze(1),Ze(17),Ze(0),Ze(2),Ze(17),Ze(1),Ze(3),Ze(17),Ze(1)}(ne.width,ne.height),function(){tt(65476),tt(418),Ze(0);for(var dr=0;dr<16;dr++)Ze(me[dr+1]);for(var qr=0;qr<=11;qr++)Ze(ve[qr]);Ze(16);for(var En=0;En<16;En++)Ze(Re[En+1]);for(var cn=0;cn<=161;cn++)Ze(le[cn]);Ze(1);for(var Jr=0;Jr<16;Jr++)Ze(G[Jr+1]);for(var An=0;An<=11;An++)Ze(Ae[An]);Ze(17);for(var en=0;en<16;en++)Ze(we[en+1]);for(var Ur=0;Ur<=161;Ur++)Ze(lt[Ur])}(),tt(65498),tt(12),Ze(3),Ze(1),Ze(0),Ze(2),Ze(17),Ze(3),Ze(17),Ze(0),Ze(63),Ze(0);var Ne=0,qe=0,Je=0;W=0,$=7,this.encode.displayName="_encode_";for(var gt,bt,ft,Ct,Ut,gr,rr,It,Ue,Lr=ne.data,Nr=ne.width,Pr=ne.height,Ht=4*Nr,Er=0;Er<Pr;){for(gt=0;gt<Ht;){for(Ut=Ht*Er+gt,rr=-1,It=0,Ue=0;Ue<64;Ue++)gr=Ut+(It=Ue>>3)*Ht+(rr=4*(7&Ue)),Er+It>=Pr&&(gr-=Ht*(Er+1+It-Pr)),gt+rr>=Ht&&(gr-=gt+rr-Ht+4),bt=Lr[gr++],ft=Lr[gr++],Ct=Lr[gr++],Y[Ue]=(de[bt]+de[ft+256|0]+de[Ct+512|0]>>16)-128,Q[Ue]=(de[bt+768|0]+de[ft+1024|0]+de[Ct+1280|0]>>16)-128,K[Ue]=(de[bt+1280|0]+de[ft+1536|0]+de[Ct+1792|0]>>16)-128;Ne=Ot(Y,v,Ne,t,n),qe=Ot(Q,S,qe,r,s),Je=Ot(K,S,Je,r,s),gt+=32}Er+=8}if($>=0){var vr=[];vr[1]=$+1,vr[0]=(1<<$+1)-1,At(vr)}return tt(65497),new Uint8Array(z)},e=e||50,function(){for(var ne=String.fromCharCode,Ee=0;Ee<256;Ee++)xe[Ee]=ne(Ee)}(),t=pt(me,ve),r=pt(G,Ae),n=pt(Re,le),s=pt(we,lt),function(){for(var ne=1,Ee=2,Ne=1;Ne<=15;Ne++){for(var qe=ne;qe<Ee;qe++)D[32767+qe]=Ne,P[32767+qe]=[],P[32767+qe][1]=Ne,P[32767+qe][0]=qe;for(var Je=-(Ee-1);Je<=-ne;Je++)D[32767+Je]=Ne,P[32767+Je]=[],P[32767+Je][1]=Ne,P[32767+Je][0]=Ee-1+Je;ne<<=1,Ee<<=1}}(),function(){for(var ne=0;ne<256;ne++)de[ne]=19595*ne,de[ne+256|0]=38470*ne,de[ne+512|0]=7471*ne+32768,de[ne+768|0]=-11059*ne,de[ne+1024|0]=-21709*ne,de[ne+1280|0]=32768*ne+8421375,de[ne+1536|0]=-27439*ne,de[ne+1792|0]=-5329*ne}(),St(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Lc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function QI(e){function t(ve){if(!ve)throw Error("assert :P")}function r(ve,Re,le){for(var G=0;4>G;G++)if(ve[Re+G]!=le.charCodeAt(G))return!0;return!1}function n(ve,Re,le,G,Ae){for(var we=0;we<Ae;we++)ve[Re+we]=le[G+we]}function s(ve,Re,le,G){for(var Ae=0;Ae<G;Ae++)ve[Re+Ae]=le}function l(ve){return new Int32Array(ve)}function f(ve,Re){for(var le=[],G=0;G<ve;G++)le.push(new Re);return le}function a(ve,Re){var le=[];return function G(Ae,we,lt){for(var pt=lt[we],At=0;At<pt&&(Ae.push(lt.length>we+1?[]:new Re),!(lt.length<we+1));At++)G(Ae[At],we+1,lt)}(le,0,ve),le}var y=function(){var ve=this;function Re(T,M){for(var U=1<<M-1>>>0;T&U;)U>>>=1;return U?(T&U-1)+U:T}function le(T,M,U,J,ce){t(!(J%U));do T[M+(J-=U)]=ce;while(0<J)}function G(T,M,U,J,ce){if(t(2328>=ce),512>=ce)var ge=l(512);else if((ge=l(ce))==null)return 0;return function(_e,Ce,ke,ze,$e,$t){var je,xt,Pt=Ce,Gt=1<<ke,Bt=l(16),Dt=l(16);for(t($e!=0),t(ze!=null),t(_e!=null),t(0<ke),xt=0;xt<$e;++xt){if(15<ze[xt])return 0;++Bt[ze[xt]]}if(Bt[0]==$e)return 0;for(Dt[1]=0,je=1;15>je;++je){if(Bt[je]>1<<je)return 0;Dt[je+1]=Dt[je]+Bt[je]}for(xt=0;xt<$e;++xt)je=ze[xt],0<ze[xt]&&($t[Dt[je]++]=xt);if(Dt[15]==1)return(ze=new Ae).g=0,ze.value=$t[0],le(_e,Pt,1,Gt,ze),Gt;var Xt,pr=-1,ir=Gt-1,dn=0,Kr=1,zn=1,Qr=1<<ke;for(xt=0,je=1,$e=2;je<=ke;++je,$e<<=1){if(Kr+=zn<<=1,0>(zn-=Bt[je]))return 0;for(;0<Bt[je];--Bt[je])(ze=new Ae).g=je,ze.value=$t[xt++],le(_e,Pt+dn,$e,Qr,ze),dn=Re(dn,je)}for(je=ke+1,$e=2;15>=je;++je,$e<<=1){if(Kr+=zn<<=1,0>(zn-=Bt[je]))return 0;for(;0<Bt[je];--Bt[je]){if(ze=new Ae,(dn&ir)!=pr){for(Pt+=Qr,Xt=1<<(pr=je)-ke;15>pr&&!(0>=(Xt-=Bt[pr]));)++pr,Xt<<=1;Gt+=Qr=1<<(Xt=pr-ke),_e[Ce+(pr=dn&ir)].g=Xt+ke,_e[Ce+pr].value=Pt-Ce-pr}ze.g=je-ke,ze.value=$t[xt++],le(_e,Pt+(dn>>ke),$e,Qr,ze),dn=Re(dn,je)}}return Kr!=2*Dt[15]-1?0:Gt}(T,M,U,J,ce,ge)}function Ae(){this.value=this.g=0}function we(){this.value=this.g=0}function lt(){this.G=f(5,Ae),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=f(Po,we)}function pt(T,M,U,J){t(T!=null),t(M!=null),t(2147483648>J),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=M,T.pa=U,T.Jd=M,T.Yc=U+J,T.Zc=4<=J?U+J-4+1:U,bt(T)}function At(T,M){for(var U=0;0<M--;)U|=Ct(T,128)<<M;return U}function Ze(T,M){var U=At(T,M);return ft(T)?-U:U}function tt(T,M,U,J){var ce,ge=0;for(t(T!=null),t(M!=null),t(4294967288>J),T.Sb=J,T.Ra=0,T.u=0,T.h=0,4<J&&(J=4),ce=0;ce<J;++ce)ge+=M[U+ce]<<8*ce;T.Ra=ge,T.bb=J,T.oa=M,T.pa=U}function Ot(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<il-8>>>0,++T.bb,T.u-=8;qe(T)&&(T.h=1,T.u=0)}function St(T,M){if(t(0<=M),!T.h&&M<=Ko){var U=Ne(T)&nl[M];return T.u+=M,Ot(T),U}return T.h=1,T.u=0}function ne(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ne(T){return T.Ra>>>(T.u&il-1)>>>0}function qe(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>il}function Je(T,M){T.u=M,T.h=qe(T)}function gt(T){T.u>=Gi&&(t(T.u>=Gi),Ot(T))}function bt(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function ft(T){return At(T,1)}function Ct(T,M){var U=T.Ca;0>T.b&&bt(T);var J=T.b,ce=U*M>>>8,ge=(T.I>>>J>ce)+0;for(ge?(U-=ce,T.I-=ce+1<<J>>>0):U=ce+1,J=U,ce=0;256<=J;)ce+=8,J>>=8;return J=7^ce+Ms[J],T.b-=J,T.Ca=(U<<J)-1,ge}function Ut(T,M,U){T[M+0]=U>>24&255,T[M+1]=U>>16&255,T[M+2]=U>>8&255,T[M+3]=255&U}function gr(T,M){return T[M+0]|T[M+1]<<8}function rr(T,M){return gr(T,M)|T[M+2]<<16}function It(T,M){return gr(T,M)|gr(T,M+2)<<16}function Ue(T,M){var U=1<<M;return t(T!=null),t(0<M),T.X=l(U),T.X==null?0:(T.Mb=32-M,T.Xa=M,1)}function Lr(T,M){t(T!=null),t(M!=null),t(T.Xa==M.Xa),n(M.X,0,T.X,0,1<<M.Xa)}function Nr(){this.X=[],this.Xa=this.Mb=0}function Pr(T,M,U,J){t(U!=null),t(J!=null);var ce=U[0],ge=J[0];return ce==0&&(ce=(T*ge+M/2)/M),ge==0&&(ge=(M*ce+T/2)/T),0>=ce||0>=ge?0:(U[0]=ce,J[0]=ge,1)}function Ht(T,M){return T+(1<<M)-1>>>M}function Er(T,M){return((4278255360&T)+(4278255360&M)>>>0&4278255360)+((16711935&T)+(16711935&M)>>>0&16711935)>>>0}function vr(T,M){ve[M]=function(U,J,ce,ge,_e,Ce,ke){var ze;for(ze=0;ze<_e;++ze){var $e=ve[T](Ce[ke+ze-1],ce,ge+ze);Ce[ke+ze]=Er(U[J+ze],$e)}}}function dr(){this.ud=this.hd=this.jd=0}function qr(T,M){return((4278124286&(T^M))>>>1)+(T&M)>>>0}function En(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function cn(T,M){return En(T+(T-M+.5>>1))}function Jr(T,M,U){return Math.abs(M-U)-Math.abs(T-U)}function An(T,M,U,J,ce,ge,_e){for(J=ge[_e-1],U=0;U<ce;++U)ge[_e+U]=J=Er(T[M+U],J)}function en(T,M,U,J,ce){var ge;for(ge=0;ge<U;++ge){var _e=T[M+ge],Ce=_e>>8&255,ke=16711935&(ke=(ke=16711935&_e)+((Ce<<16)+Ce));J[ce+ge]=(4278255360&_e)+ke>>>0}}function Ur(T,M){M.jd=255&T,M.hd=T>>8&255,M.ud=T>>16&255}function Br(T,M,U,J,ce,ge){var _e;for(_e=0;_e<J;++_e){var Ce=M[U+_e],ke=Ce>>>8,ze=Ce,$e=255&($e=($e=Ce>>>16)+((T.jd<<24>>24)*(ke<<24>>24)>>>5));ze=255&(ze=(ze+=(T.hd<<24>>24)*(ke<<24>>24)>>>5)+((T.ud<<24>>24)*($e<<24>>24)>>>5)),ce[ge+_e]=(4278255360&Ce)+($e<<16)+ze}}function _r(T,M,U,J,ce){ve[M]=function(ge,_e,Ce,ke,ze,$e,$t,je,xt){for(ke=$t;ke<je;++ke)for($t=0;$t<xt;++$t)ze[$e++]=ce(Ce[J(ge[_e++])])},ve[T]=function(ge,_e,Ce,ke,ze,$e,$t){var je=8>>ge.b,xt=ge.Ea,Pt=ge.K[0],Gt=ge.w;if(8>je)for(ge=(1<<ge.b)-1,Gt=(1<<je)-1;_e<Ce;++_e){var Bt,Dt=0;for(Bt=0;Bt<xt;++Bt)Bt&ge||(Dt=J(ke[ze++])),$e[$t++]=ce(Pt[Dt&Gt]),Dt>>=je}else ve["VP8LMapColor"+U](ke,ze,Pt,Gt,$e,$t,_e,Ce,xt)}}function ot(T,M,U,J,ce){for(U=M+U;M<U;){var ge=T[M++];J[ce++]=ge>>16&255,J[ce++]=ge>>8&255,J[ce++]=255&ge}}function ae(T,M,U,J,ce){for(U=M+U;M<U;){var ge=T[M++];J[ce++]=ge>>16&255,J[ce++]=ge>>8&255,J[ce++]=255&ge,J[ce++]=ge>>24&255}}function oe(T,M,U,J,ce){for(U=M+U;M<U;){var ge=(_e=T[M++])>>16&240|_e>>12&15,_e=240&_e|_e>>28&15;J[ce++]=ge,J[ce++]=_e}}function ye(T,M,U,J,ce){for(U=M+U;M<U;){var ge=(_e=T[M++])>>16&248|_e>>13&7,_e=_e>>5&224|_e>>3&31;J[ce++]=ge,J[ce++]=_e}}function De(T,M,U,J,ce){for(U=M+U;M<U;){var ge=T[M++];J[ce++]=255&ge,J[ce++]=ge>>8&255,J[ce++]=ge>>16&255}}function Ve(T,M,U,J,ce,ge){if(ge==0)for(U=M+U;M<U;)Ut(J,((ge=T[M++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),ce+=32;else n(J,ce,T,M,U)}function rt(T,M){ve[M][0]=ve[T+"0"],ve[M][1]=ve[T+"1"],ve[M][2]=ve[T+"2"],ve[M][3]=ve[T+"3"],ve[M][4]=ve[T+"4"],ve[M][5]=ve[T+"5"],ve[M][6]=ve[T+"6"],ve[M][7]=ve[T+"7"],ve[M][8]=ve[T+"8"],ve[M][9]=ve[T+"9"],ve[M][10]=ve[T+"10"],ve[M][11]=ve[T+"11"],ve[M][12]=ve[T+"12"],ve[M][13]=ve[T+"13"],ve[M][14]=ve[T+"0"],ve[M][15]=ve[T+"0"]}function ht(T){return T==wd||T==wf||T==Oh||T==Qc}function ct(){this.eb=[],this.size=this.A=this.fb=0}function Lt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ct,this.f.kb=new Lt,this.sd=null}function st(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ft(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function it(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function hr(T,M){var U=T.T,J=M.ba.f.RGBA,ce=J.eb,ge=J.fb+T.ka*J.A,_e=rs[M.ba.S],Ce=T.y,ke=T.O,ze=T.f,$e=T.N,$t=T.ea,je=T.W,xt=M.cc,Pt=M.dc,Gt=M.Mc,Bt=M.Nc,Dt=T.ka,Xt=T.ka+T.T,pr=T.U,ir=pr+1>>1;for(Dt==0?_e(Ce,ke,null,null,ze,$e,$t,je,ze,$e,$t,je,ce,ge,null,null,pr):(_e(M.ec,M.fc,Ce,ke,xt,Pt,Gt,Bt,ze,$e,$t,je,ce,ge-J.A,ce,ge,pr),++U);Dt+2<Xt;Dt+=2)xt=ze,Pt=$e,Gt=$t,Bt=je,$e+=T.Rc,je+=T.Rc,ge+=2*J.A,_e(Ce,(ke+=2*T.fa)-T.fa,Ce,ke,xt,Pt,Gt,Bt,ze,$e,$t,je,ce,ge-J.A,ce,ge,pr);return ke+=T.fa,T.j+Xt<T.o?(n(M.ec,M.fc,Ce,ke,pr),n(M.cc,M.dc,ze,$e,ir),n(M.Mc,M.Nc,$t,je,ir),U--):1&Xt||_e(Ce,ke,null,null,ze,$e,$t,je,ze,$e,$t,je,ce,ge+J.A,null,null,pr),U}function Xr(T,M,U){var J=T.F,ce=[T.J];if(J!=null){var ge=T.U,_e=M.ba.S,Ce=_e==Nh||_e==Oh;M=M.ba.f.RGBA;var ke=[0],ze=T.ka;ke[0]=T.T,T.Kb&&(ze==0?--ke[0]:(--ze,ce[0]-=T.width),T.j+T.ka+T.T==T.o&&(ke[0]=T.o-T.j-ze));var $e=M.eb;ze=M.fb+ze*M.A,T=Fa(J,ce[0],T.width,ge,ke,$e,ze+(Ce?0:3),M.A),t(U==ke),T&&ht(_e)&&Hi($e,ze,Ce,ge,ke,M.A)}return 0}function wr(T){var M=T.ma,U=M.ba.S,J=11>U,ce=U==Mn||U==Yl||U==Nh||U==xc||U==12||ht(U);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Ao(M.Oa,T,ce?11:12))return 0;if(ce&&ht(U)&&Ul(),T.da)alert("todo:use_scaling");else{if(J){if(M.Ib=it,T.Kb){if(U=T.U+1>>1,M.memory=l(T.U+2*U),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+T.U,M.Mc=M.cc,M.Nc=M.dc+U,M.Ib=hr,Ul()}}else alert("todo:EmitYUV");ce&&(M.Jb=Xr,J&&yu())}if(J&&!Pf){for(T=0;256>T;++T)$p[T]=89858*(T-128)+xu>>Uh,Ed[T]=-22014*(T-128)+xu,oh[T]=-45773*(T-128),jp[T]=113618*(T-128)+xu>>Uh;for(T=Jl;T<Ba;++T)M=76283*(T-16)+xu>>Uh,If[T-Jl]=ho(M,255),Up[T-Jl]=ho(M+8>>4,15);Pf=1}return 1}function er(T){var M=T.ma,U=T.U,J=T.T;return t(!(1&T.ka)),0>=U||0>=J?0:(U=M.Ib(T,M),M.Jb!=null&&M.Jb(T,M,U),M.Dc+=U,1)}function nn(T){T.ma.memory=null}function Hn(T,M,U,J){return St(T,8)!=47?0:(M[0]=St(T,14)+1,U[0]=St(T,14)+1,J[0]=St(T,1),St(T,3)!=0?0:!T.h)}function Dn(T,M){if(4>T)return T+1;var U=T-2>>1;return(2+(1&T)<<U)+St(M,U)+1}function hn(T,M){return 120<M?M-120:1<=(U=((U=Fh[M-1])>>4)*T+(8-(15&U)))?U:1;var U}function Dr(T,M,U){var J=Ne(U),ce=T[M+=255&J].g-8;return 0<ce&&(Je(U,U.u+8),J=Ne(U),M+=T[M].value,M+=J&(1<<ce)-1),Je(U,U.u+T[M].g),T[M].value}function fn(T,M,U){return U.g+=T.g,U.value+=T.value<<M>>>0,t(8>=U.g),T.g}function qn(T,M,U){var J=T.xc;return t((M=J==0?0:T.vc[T.md*(U>>J)+(M>>J)])<T.Wb),T.Ya[M]}function nr(T,M,U,J){var ce=T.ab,ge=T.c*M,_e=T.C;M=_e+M;var Ce=U,ke=J;for(J=T.Ta,U=T.Ua;0<ce--;){var ze=T.gc[ce],$e=_e,$t=M,je=Ce,xt=ke,Pt=(ke=J,Ce=U,ze.Ea);switch(t($e<$t),t($t<=ze.nc),ze.hc){case 2:vu(je,xt,($t-$e)*Pt,ke,Ce);break;case 0:var Gt=$e,Bt=$t,Dt=ke,Xt=Ce,pr=(Qr=ze).Ea;Gt==0&&(gs(je,xt,null,null,1,Dt,Xt),An(je,xt+1,0,0,pr-1,Dt,Xt+1),xt+=pr,Xt+=pr,++Gt);for(var ir=1<<Qr.b,dn=ir-1,Kr=Ht(pr,Qr.b),zn=Qr.K,Qr=Qr.w+(Gt>>Qr.b)*Kr;Gt<Bt;){var Qn=zn,Uo=Qr,kn=1;for(Oa(je,xt,Dt,Xt-pr,1,Dt,Xt);kn<pr;){var on=(kn&~dn)+ir;on>pr&&(on=pr),(0,_t[Qn[Uo++]>>8&15])(je,xt+ +kn,Dt,Xt+kn-pr,on-kn,Dt,Xt+kn),kn=on}xt+=pr,Xt+=pr,++Gt&dn||(Qr+=Kr)}$t!=ze.nc&&n(ke,Ce-Pt,ke,Ce+($t-$e-1)*Pt,Pt);break;case 1:for(Pt=je,Bt=xt,pr=(je=ze.Ea)-(Xt=je&~(Dt=(xt=1<<ze.b)-1)),Gt=Ht(je,ze.b),ir=ze.K,ze=ze.w+($e>>ze.b)*Gt;$e<$t;){for(dn=ir,Kr=ze,zn=new dr,Qr=Bt+Xt,Qn=Bt+je;Bt<Qr;)Ur(dn[Kr++],zn),Tt(zn,Pt,Bt,xt,ke,Ce),Bt+=xt,Ce+=xt;Bt<Qn&&(Ur(dn[Kr++],zn),Tt(zn,Pt,Bt,pr,ke,Ce),Bt+=pr,Ce+=pr),++$e&Dt||(ze+=Gt)}break;case 3:if(je==ke&&xt==Ce&&0<ze.b){for(Bt=ke,je=Pt=Ce+($t-$e)*Pt-(Xt=($t-$e)*Ht(ze.Ea,ze.b)),xt=ke,Dt=Ce,Gt=[],Xt=(pr=Xt)-1;0<=Xt;--Xt)Gt[Xt]=xt[Dt+Xt];for(Xt=pr-1;0<=Xt;--Xt)Bt[je+Xt]=Gt[Xt];_u(ze,$e,$t,ke,Pt,ke,Ce)}else _u(ze,$e,$t,je,xt,ke,Ce)}Ce=J,ke=U}ke!=U&&n(J,U,Ce,ke,ge)}function Bi(T,M){var U=T.V,J=T.Ba+T.c*T.C,ce=M-T.C;if(t(M<=T.l.o),t(16>=ce),0<ce){var ge=T.l,_e=T.Ta,Ce=T.Ua,ke=ge.width;if(nr(T,ce,U,J),ce=Ce=[Ce],t((U=T.C)<(J=M)),t(ge.v<ge.va),J>ge.o&&(J=ge.o),U<ge.j){var ze=ge.j-U;U=ge.j,ce[0]+=ze*ke}if(U>=J?U=0:(ce[0]+=4*ge.v,ge.ka=U-ge.j,ge.U=ge.va-ge.v,ge.T=J-U,U=1),U){if(Ce=Ce[0],11>(U=T.ca).S){var $e=U.f.RGBA,$t=(J=U.S,ce=ge.U,ge=ge.T,ze=$e.eb,$e.A),je=ge;for($e=$e.fb+T.Ma*$e.A;0<je--;){var xt=_e,Pt=Ce,Gt=ce,Bt=ze,Dt=$e;switch(J){case Il:br(xt,Pt,Gt,Bt,Dt);break;case Mn:kr(xt,Pt,Gt,Bt,Dt);break;case wd:kr(xt,Pt,Gt,Bt,Dt),Hi(Bt,Dt,0,Gt,1,0);break;case Ds:Cn(xt,Pt,Gt,Bt,Dt);break;case Yl:Ve(xt,Pt,Gt,Bt,Dt,1);break;case wf:Ve(xt,Pt,Gt,Bt,Dt,1),Hi(Bt,Dt,0,Gt,1,0);break;case Nh:Ve(xt,Pt,Gt,Bt,Dt,0);break;case Oh:Ve(xt,Pt,Gt,Bt,Dt,0),Hi(Bt,Dt,1,Gt,1,0);break;case xc:Wn(xt,Pt,Gt,Bt,Dt);break;case Qc:Wn(xt,Pt,Gt,Bt,Dt),_c(Bt,Dt,Gt,1,0);break;case Np:Yr(xt,Pt,Gt,Bt,Dt);break;default:t(0)}Ce+=ke,$e+=$t}T.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=U.height)}}T.C=M,t(T.C<=T.i)}function Gn(T){var M;if(0<T.ua)return 0;for(M=0;M<T.Wb;++M){var U=T.Ya[M].G,J=T.Ya[M].H;if(0<U[1][J[1]+0].g||0<U[2][J[2]+0].g||0<U[3][J[3]+0].g)return 0}return 1}function yo(T,M,U,J,ce,ge){if(T.Z!=0){var _e=T.qd,Ce=T.rd;for(t(Qo[T.Z]!=null);M<U;++M)Qo[T.Z](_e,Ce,J,ce,J,ce,ge),_e=J,Ce=ce,ce+=ge;T.qd=_e,T.rd=Ce}}function Xo(T,M){var U=T.l.ma,J=U.Z==0||U.Z==1?T.l.j:T.C;if(J=T.C<J?J:T.C,t(M<=T.l.o),M>J){var ce=T.l.width,ge=U.ca,_e=U.tb+ce*J,Ce=T.V,ke=T.Ba+T.c*J,ze=T.gc;t(T.ab==1),t(ze[0].hc==3),Gl(ze[0],J,M,Ce,ke,ge,_e),yo(U,J,M,ge,_e,ce)}T.C=T.Ma=M}function lr(T,M,U,J,ce,ge,_e){var Ce=T.$/J,ke=T.$%J,ze=T.m,$e=T.s,$t=U+T.$,je=$t;ce=U+J*ce;var xt=U+J*ge,Pt=280+$e.ua,Gt=T.Pb?Ce:16777216,Bt=0<$e.ua?$e.Wa:null,Dt=$e.wc,Xt=$t<xt?qn($e,ke,Ce):null;t(T.C<ge),t(xt<=ce);var pr=!1;e:for(;;){for(;pr||$t<xt;){var ir=0;if(Ce>=Gt){var dn=$t-U;t((Gt=T).Pb),Gt.wd=Gt.m,Gt.xd=dn,0<Gt.s.ua&&Lr(Gt.s.Wa,Gt.s.vb),Gt=Ce+rh}if(ke&Dt||(Xt=qn($e,ke,Ce)),t(Xt!=null),Xt.Qb&&(M[$t]=Xt.qb,pr=!0),!pr)if(gt(ze),Xt.jc){ir=ze,dn=M;var Kr=$t,zn=Xt.pd[Ne(ir)&Po-1];t(Xt.jc),256>zn.g?(Je(ir,ir.u+zn.g),dn[Kr]=zn.value,ir=0):(Je(ir,ir.u+zn.g-256),t(256<=zn.value),ir=zn.value),ir==0&&(pr=!0)}else ir=Dr(Xt.G[0],Xt.H[0],ze);if(ze.h)break;if(pr||256>ir){if(!pr)if(Xt.nd)M[$t]=(Xt.qb|ir<<8)>>>0;else{if(gt(ze),pr=Dr(Xt.G[1],Xt.H[1],ze),gt(ze),dn=Dr(Xt.G[2],Xt.H[2],ze),Kr=Dr(Xt.G[3],Xt.H[3],ze),ze.h)break;M[$t]=(Kr<<24|pr<<16|ir<<8|dn)>>>0}if(pr=!1,++$t,++ke>=J&&(ke=0,++Ce,_e!=null&&Ce<=ge&&!(Ce%16)&&_e(T,Ce),Bt!=null))for(;je<$t;)ir=M[je++],Bt.X[(506832829*ir&4294967295)>>>Bt.Mb]=ir}else if(280>ir){if(ir=Dn(ir-256,ze),dn=Dr(Xt.G[4],Xt.H[4],ze),gt(ze),dn=hn(J,dn=Dn(dn,ze)),ze.h)break;if($t-U<dn||ce-$t<ir)break e;for(Kr=0;Kr<ir;++Kr)M[$t+Kr]=M[$t+Kr-dn];for($t+=ir,ke+=ir;ke>=J;)ke-=J,++Ce,_e!=null&&Ce<=ge&&!(Ce%16)&&_e(T,Ce);if(t($t<=ce),ke&Dt&&(Xt=qn($e,ke,Ce)),Bt!=null)for(;je<$t;)ir=M[je++],Bt.X[(506832829*ir&4294967295)>>>Bt.Mb]=ir}else{if(!(ir<Pt))break e;for(pr=ir-280,t(Bt!=null);je<$t;)ir=M[je++],Bt.X[(506832829*ir&4294967295)>>>Bt.Mb]=ir;ir=$t,t(!(pr>>>(dn=Bt).Xa)),M[ir]=dn.X[pr],pr=!0}pr||t(ze.h==qe(ze))}if(T.Pb&&ze.h&&$t<ce)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Lr(T.s.vb,T.s.Wa);else{if(ze.h)break e;_e!=null&&_e(T,Ce>ge?ge:Ce),T.a=0,T.$=$t-U}return 1}return T.a=3,0}function $r(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var M=T.Wa;M!=null&&(M.X=null),T.vb=null,t(T!=null)}function Sn(){var T=new _i;return T==null?null:(T.a=0,T.xb=bu,rt("Predictor","VP8LPredictors"),rt("Predictor","VP8LPredictors_C"),rt("PredictorAdd","VP8LPredictorsAdd"),rt("PredictorAdd","VP8LPredictorsAdd_C"),vu=en,Tt=Br,br=ot,kr=ae,Wn=oe,Yr=ye,Cn=De,ve.VP8LMapColor32b=ks,ve.VP8LMapColor8b=Hl,T)}function ro(T,M,U,J,ce){var ge=1,_e=[T],Ce=[M],ke=J.m,ze=J.s,$e=null,$t=0;e:for(;;){if(U)for(;ge&&St(ke,1);){var je=_e,xt=Ce,Pt=J,Gt=1,Bt=Pt.m,Dt=Pt.gc[Pt.ab],Xt=St(Bt,2);if(Pt.Oc&1<<Xt)ge=0;else{switch(Pt.Oc|=1<<Xt,Dt.hc=Xt,Dt.Ea=je[0],Dt.nc=xt[0],Dt.K=[null],++Pt.ab,t(4>=Pt.ab),Xt){case 0:case 1:Dt.b=St(Bt,3)+2,Gt=ro(Ht(Dt.Ea,Dt.b),Ht(Dt.nc,Dt.b),0,Pt,Dt.K),Dt.K=Dt.K[0];break;case 3:var pr,ir=St(Bt,8)+1,dn=16<ir?0:4<ir?1:2<ir?2:3;if(je[0]=Ht(Dt.Ea,dn),Dt.b=dn,pr=Gt=ro(ir,1,0,Pt,Dt.K)){var Kr,zn=ir,Qr=Dt,Qn=1<<(8>>Qr.b),Uo=l(Qn);if(Uo==null)pr=0;else{var kn=Qr.K[0],on=Qr.w;for(Uo[0]=Qr.K[0][0],Kr=1;Kr<1*zn;++Kr)Uo[Kr]=Er(kn[on+Kr],Uo[Kr-1]);for(;Kr<4*Qn;++Kr)Uo[Kr]=0;Qr.K[0]=null,Qr.K[0]=Uo,pr=1}}Gt=pr;break;case 2:break;default:t(0)}ge=Gt}}if(_e=_e[0],Ce=Ce[0],ge&&St(ke,1)&&!(ge=1<=($t=St(ke,4))&&11>=$t)){J.a=3;break e}var Mr;if(Mr=ge)t:{var Ri,Gr,Zn,Ni=J,ea=_e,za=Ce,po=$t,$a=U,io=Ni.m,xo=Ni.s,sr=[null],Tr=1,Wi=0,bi=th[po];r:for(;;){if($a&&St(io,1)){var Mo=St(io,3)+2,Zi=Ht(ea,Mo),wo=Ht(za,Mo),Ei=Zi*wo;if(!ro(Zi,wo,0,Ni,sr))break r;for(sr=sr[0],xo.xc=Mo,Ri=0;Ri<Ei;++Ri){var Oi=sr[Ri]>>8&65535;sr[Ri]=Oi,Oi>=Tr&&(Tr=Oi+1)}}if(io.h)break r;for(Gr=0;5>Gr;++Gr){var Xi=eh[Gr];!Gr&&0<po&&(Xi+=1<<po),Wi<Xi&&(Wi=Xi)}var si=f(Tr*bi,Ae),ei=Tr,bs=f(ei,lt);if(bs==null)var Vo=null;else t(65536>=ei),Vo=bs;var ko=l(Wi);if(Vo==null||ko==null||si==null){Ni.a=1;break r}var ns=si;for(Ri=Zn=0;Ri<Tr;++Ri){var Ai=Vo[Ri],ta=Ai.G,is=Ai.H,wu=0,cl=1,ra=0;for(Gr=0;5>Gr;++Gr){Xi=eh[Gr],ta[Gr]=ns,is[Gr]=Zn,!Gr&&0<po&&(Xi+=1<<po);i:{var _,i=Xi,u=Ni,p=ko,m=ns,b=Zn,C=0,I=u.m,R=St(I,1);if(s(p,0,0,i),R){var B=St(I,1)+1,q=St(I,1),X=St(I,q==0?1:8);p[X]=1,B==2&&(p[X=St(I,8)]=1);var Z=1}else{var ee=l(19),he=St(I,4)+4;if(19<he){u.a=3;var Ie=0;break i}for(_=0;_<he;++_)ee[Sd[_]]=St(I,3);var Pe=void 0,Me=void 0,Be=u,Ke=ee,He=i,et=p,at=0,Ge=Be.m,mt=8,Nt=f(128,Ae);n:for(;G(Nt,0,7,Ke,19);){if(St(Ge,1)){var Mt=2+2*St(Ge,3);if((Pe=2+St(Ge,Mt))>He)break n}else Pe=He;for(Me=0;Me<He&&Pe--;){gt(Ge);var kt=Nt[0+(127&Ne(Ge))];Je(Ge,Ge.u+kt.g);var zt=kt.value;if(16>zt)et[Me++]=zt,zt!=0&&(mt=zt);else{var yr=zt==16,mr=zt-16,Kt=Cf[mr],Fr=St(Ge,Sf[mr])+Kt;if(Me+Fr>He)break n;for(var Nn=yr?mt:0;0<Fr--;)et[Me++]=Nn}}at=1;break n}at||(Be.a=3),Z=at}(Z=Z&&!I.h)&&(C=G(m,b,8,p,i)),Z&&C!=0?Ie=C:(u.a=3,Ie=0)}if(Ie==0)break r;if(cl&&Ef[Gr]==1&&(cl=ns[Zn].g==0),wu+=ns[Zn].g,Zn+=Ie,3>=Gr){var ti,Vi=ko[0];for(ti=1;ti<Xi;++ti)ko[ti]>Vi&&(Vi=ko[ti]);ra+=Vi}}if(Ai.nd=cl,Ai.Qb=0,cl&&(Ai.qb=(ta[3][is[3]+0].value<<24|ta[1][is[1]+0].value<<16|ta[2][is[2]+0].value)>>>0,wu==0&&256>ta[0][is[0]+0].value&&(Ai.Qb=1,Ai.qb+=ta[0][is[0]+0].value<<8)),Ai.jc=!Ai.Qb&&6>ra,Ai.jc){var yi,vi=Ai;for(yi=0;yi<Po;++yi){var hi=yi,li=vi.pd[hi],xi=vi.G[0][vi.H[0]+hi];256<=xi.value?(li.g=xi.g+256,li.value=xi.value):(li.g=0,li.value=0,hi>>=fn(xi,8,li),hi>>=fn(vi.G[1][vi.H[1]+hi],16,li),hi>>=fn(vi.G[2][vi.H[2]+hi],0,li),fn(vi.G[3][vi.H[3]+hi],24,li))}}}xo.vc=sr,xo.Wb=Tr,xo.Ya=Vo,xo.yc=si,Mr=1;break t}Mr=0}if(!(ge=Mr)){J.a=3;break e}if(0<$t){if(ze.ua=1<<$t,!Ue(ze.Wa,$t)){J.a=1,ge=0;break e}}else ze.ua=0;var na=J,Xn=_e,da=Ce,ia=na.s,Ql=ia.xc;if(na.c=Xn,na.i=da,ia.md=Ht(Xn,Ql),ia.wc=Ql==0?-1:(1<<Ql)-1,U){J.xb=fo;break e}if(($e=l(_e*Ce))==null){J.a=1,ge=0;break e}ge=(ge=lr(J,$e,0,_e,Ce,Ce,null))&&!ke.h;break e}return ge?(ce!=null?ce[0]=$e:(t($e==null),t(U)),J.$=0,U||$r(ze)):$r(ze),ge}function Hs(T,M){var U=T.c*T.i,J=U+M+16*M;return t(T.c<=M),T.V=l(J),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+U+M,1)}function ca(T,M){var U=T.C,J=M-U,ce=T.V,ge=T.Ba+T.c*U;for(t(M<=T.l.o);0<J;){var _e=16<J?16:J,Ce=T.l.ma,ke=T.l.width,ze=ke*_e,$e=Ce.ca,$t=Ce.tb+ke*U,je=T.Ta,xt=T.Ua;nr(T,_e,ce,ge),ys(je,xt,$e,$t,ze),yo(Ce,U,U+_e,$e,$t,ke),J-=_e,ce+=_e*T.c,U+=_e}t(U==M),T.C=T.Ma=M}function Tn(){this.ub=this.yd=this.td=this.Rb=0}function ha(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sl(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function Si(){this.Yb=function(){var T=[];return function M(U,J,ce){for(var ge=ce[J],_e=0;_e<ge&&(U.push(ce.length>J+1?[]:0),!(ce.length<J+1));_e++)M(U[_e],J+1,ce)}(T,0,[3,11]),T}()}function Ws(){this.jb=l(3),this.Wc=a([4,8],Si),this.Xc=a([4,17],Si)}function Zs(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Un(){this.ld=this.La=this.dd=this.tc=0}function Xs(){this.Na=this.la=0}function Yo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Kn(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Da(){this.uc=this.M=this.Nb=0,this.wa=Array(new Un),this.Y=0,this.ya=Array(new Kn),this.aa=0,this.l=new Bo}function As(){this.y=l(16),this.f=l(8),this.ea=l(8)}function Xa(){this.cb=this.a=0,this.sc="",this.m=new ne,this.Od=new Tn,this.Kc=new ha,this.ed=new Zs,this.Qa=new Sl,this.Ic=this.$c=this.Aa=0,this.D=new Da,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=f(8,ne),this.ia=0,this.pb=f(4,Yo),this.Pa=new Ws,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new As),this.Hd=0,this.rb=Array(new Xs),this.sb=0,this.wa=Array(new Un),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Kn),this.L=this.aa=0,this.gd=a([4,2],Un),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Bo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ps(){var T=new Xa;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,sl||(sl=wa)),T}function lo(T,M,U){return T.a==0&&(T.a=M,T.sc=U,T.cb=0),0}function pc(T,M,U){return 3<=U&&T[M+0]==157&&T[M+1]==1&&T[M+2]==42}function mc(T,M){if(T==null)return 0;if(T.a=0,T.sc="OK",M==null)return lo(T,2,"null VP8Io passed to VP8GetHeaders()");var U=M.data,J=M.w,ce=M.ha;if(4>ce)return lo(T,7,"Truncated header.");var ge=U[J+0]|U[J+1]<<8|U[J+2]<<16,_e=T.Od;if(_e.Rb=!(1&ge),_e.td=ge>>1&7,_e.yd=ge>>4&1,_e.ub=ge>>5,3<_e.td)return lo(T,3,"Incorrect keyframe parameters.");if(!_e.yd)return lo(T,4,"Frame not displayable.");J+=3,ce-=3;var Ce=T.Kc;if(_e.Rb){if(7>ce)return lo(T,7,"cannot parse picture header");if(!pc(U,J,ce))return lo(T,3,"Bad code word");Ce.c=16383&(U[J+4]<<8|U[J+3]),Ce.Td=U[J+4]>>6,Ce.i=16383&(U[J+6]<<8|U[J+5]),Ce.Ud=U[J+6]>>6,J+=7,ce-=7,T.za=Ce.c+15>>4,T.Ub=Ce.i+15>>4,M.width=Ce.c,M.height=Ce.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,s((ge=T.Pa).jb,0,255,ge.jb.length),t((ge=T.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,s(ge.Zb,0,0,ge.Zb.length),s(ge.Lb,0,0,ge.Lb)}if(_e.ub>ce)return lo(T,7,"bad partition length");pt(ge=T.m,U,J,_e.ub),J+=_e.ub,ce-=_e.ub,_e.Rb&&(Ce.Ld=ft(ge),Ce.Kd=ft(ge)),Ce=T.Qa;var ke,ze=T.Pa;if(t(ge!=null),t(Ce!=null),Ce.Cb=ft(ge),Ce.Cb){if(Ce.Bb=ft(ge),ft(ge)){for(Ce.Fb=ft(ge),ke=0;4>ke;++ke)Ce.Zb[ke]=ft(ge)?Ze(ge,7):0;for(ke=0;4>ke;++ke)Ce.Lb[ke]=ft(ge)?Ze(ge,6):0}if(Ce.Bb)for(ke=0;3>ke;++ke)ze.jb[ke]=ft(ge)?At(ge,8):255}else Ce.Bb=0;if(ge.Ka)return lo(T,3,"cannot parse segment header");if((Ce=T.ed).zd=ft(ge),Ce.Tb=At(ge,6),Ce.wb=At(ge,3),Ce.Pc=ft(ge),Ce.Pc&&ft(ge)){for(ze=0;4>ze;++ze)ft(ge)&&(Ce.vd[ze]=Ze(ge,6));for(ze=0;4>ze;++ze)ft(ge)&&(Ce.od[ze]=Ze(ge,6))}if(T.L=Ce.Tb==0?0:Ce.zd?1:2,ge.Ka)return lo(T,3,"cannot parse filter header");var $e=ce;if(ce=ke=J,J=ke+$e,Ce=$e,T.Xb=(1<<At(T.m,2))-1,$e<3*(ze=T.Xb))U=7;else{for(ke+=3*ze,Ce-=3*ze,$e=0;$e<ze;++$e){var $t=U[ce+0]|U[ce+1]<<8|U[ce+2]<<16;$t>Ce&&($t=Ce),pt(T.Jc[+$e],U,ke,$t),ke+=$t,Ce-=$t,ce+=3}pt(T.Jc[+ze],U,ke,Ce),U=ke<J?0:5}if(U!=0)return lo(T,U,"cannot parse partitions");for(U=At(ke=T.m,7),ce=ft(ke)?Ze(ke,4):0,J=ft(ke)?Ze(ke,4):0,Ce=ft(ke)?Ze(ke,4):0,ze=ft(ke)?Ze(ke,4):0,ke=ft(ke)?Ze(ke,4):0,$e=T.Qa,$t=0;4>$t;++$t){if($e.Cb){var je=$e.Zb[$t];$e.Fb||(je+=U)}else{if(0<$t){T.pb[$t]=T.pb[0];continue}je=U}var xt=T.pb[$t];xt.Sc[0]=wc[ho(je+ce,127)],xt.Sc[1]=Bh[ho(je+0,127)],xt.Eb[0]=2*wc[ho(je+J,127)],xt.Eb[1]=101581*Bh[ho(je+Ce,127)]>>16,8>xt.Eb[1]&&(xt.Eb[1]=8),xt.Qc[0]=wc[ho(je+ze,117)],xt.Qc[1]=Bh[ho(je+ke,127)],xt.lc=je+ke}if(!_e.Rb)return lo(T,4,"Not a key frame.");for(ft(ge),_e=T.Pa,U=0;4>U;++U){for(ce=0;8>ce;++ce)for(J=0;3>J;++J)for(Ce=0;11>Ce;++Ce)ze=Ct(ge,Bp[U][ce][J][Ce])?At(ge,8):Cd[U][ce][J][Ce],_e.Wc[U][ce].Yb[J][Ce]=ze;for(ce=0;17>ce;++ce)_e.Xc[U][ce]=_e.Wc[U][$h[ce]]}return T.kc=ft(ge),T.kc&&(T.Bd=At(ge,8)),T.cb=1}function wa(T,M,U,J,ce,ge,_e){var Ce=M[ce].Yb[U];for(U=0;16>ce;++ce){if(!Ct(T,Ce[U+0]))return ce;for(;!Ct(T,Ce[U+1]);)if(Ce=M[++ce].Yb[0],U=0,ce==16)return 16;var ke=M[ce+1].Yb;if(Ct(T,Ce[U+2])){var ze=T,$e=0;if(Ct(ze,(je=Ce)[($t=U)+3]))if(Ct(ze,je[$t+6])){for(Ce=0,$t=2*($e=Ct(ze,je[$t+8]))+(je=Ct(ze,je[$t+9+$e])),$e=0,je=Xg[$t];je[Ce];++Ce)$e+=$e+Ct(ze,je[Ce]);$e+=3+(8<<$t)}else Ct(ze,je[$t+7])?($e=7+2*Ct(ze,165),$e+=Ct(ze,145)):$e=5+Ct(ze,159);else $e=Ct(ze,je[$t+4])?3+Ct(ze,je[$t+5]):2;Ce=ke[2]}else $e=1,Ce=ke[1];ke=_e+Op[ce],0>(ze=T).b&&bt(ze);var $t,je=ze.b,xt=($t=ze.Ca>>1)-(ze.I>>je)>>31;--ze.b,ze.Ca+=xt,ze.Ca|=1,ze.I-=($t+1&xt)<<je,ge[ke]=(($e^xt)-xt)*J[(0<ce)+0]}return 16}function Ys(T){var M=T.rb[T.sb-1];M.la=0,M.Na=0,s(T.zc,0,0,T.zc.length),T.ja=0}function Ya(T,M,U,J,ce){ce=T[M+U+32*J]+(ce>>3),T[M+U+32*J]=-256&ce?0>ce?0:255:ce}function fs(T,M,U,J,ce,ge){Ya(T,M,0,U,J+ce),Ya(T,M,1,U,J+ge),Ya(T,M,2,U,J-ge),Ya(T,M,3,U,J-ce)}function uo(T){return(20091*T>>16)+T}function qu(T,M,U,J){var ce,ge=0,_e=l(16);for(ce=0;4>ce;++ce){var Ce=T[M+0]+T[M+8],ke=T[M+0]-T[M+8],ze=(35468*T[M+4]>>16)-uo(T[M+12]),$e=uo(T[M+4])+(35468*T[M+12]>>16);_e[ge+0]=Ce+$e,_e[ge+1]=ke+ze,_e[ge+2]=ke-ze,_e[ge+3]=Ce-$e,ge+=4,M++}for(ce=ge=0;4>ce;++ce)Ce=(T=_e[ge+0]+4)+_e[ge+8],ke=T-_e[ge+8],ze=(35468*_e[ge+4]>>16)-uo(_e[ge+12]),Ya(U,J,0,0,Ce+($e=uo(_e[ge+4])+(35468*_e[ge+12]>>16))),Ya(U,J,1,0,ke+ze),Ya(U,J,2,0,ke-ze),Ya(U,J,3,0,Ce-$e),ge++,J+=32}function $l(T,M,U,J){var ce=T[M+0]+4,ge=35468*T[M+4]>>16,_e=uo(T[M+4]),Ce=35468*T[M+1]>>16;fs(U,J,0,ce+_e,T=uo(T[M+1]),Ce),fs(U,J,1,ce+ge,T,Ce),fs(U,J,2,ce-ge,T,Ce),fs(U,J,3,ce-_e,T,Ce)}function jl(T,M,U,J,ce){qu(T,M,U,J),ce&&qu(T,M+16,U,J+4)}function k(T,M,U,J){ui(T,M+0,U,J,1),ui(T,M+32,U,J+128,1)}function V(T,M,U,J){var ce;for(T=T[M+0]+4,ce=0;4>ce;++ce)for(M=0;4>M;++M)Ya(U,J,M,ce,T)}function pe(T,M,U,J){T[M+0]&&Io(T,M+0,U,J),T[M+16]&&Io(T,M+16,U,J+4),T[M+32]&&Io(T,M+32,U,J+128),T[M+48]&&Io(T,M+48,U,J+128+4)}function We(T,M,U,J){var ce,ge=l(16);for(ce=0;4>ce;++ce){var _e=T[M+0+ce]+T[M+12+ce],Ce=T[M+4+ce]+T[M+8+ce],ke=T[M+4+ce]-T[M+8+ce],ze=T[M+0+ce]-T[M+12+ce];ge[0+ce]=_e+Ce,ge[8+ce]=_e-Ce,ge[4+ce]=ze+ke,ge[12+ce]=ze-ke}for(ce=0;4>ce;++ce)_e=(T=ge[0+4*ce]+3)+ge[3+4*ce],Ce=ge[1+4*ce]+ge[2+4*ce],ke=ge[1+4*ce]-ge[2+4*ce],ze=T-ge[3+4*ce],U[J+0]=_e+Ce>>3,U[J+16]=ze+ke>>3,U[J+32]=_e-Ce>>3,U[J+48]=ze-ke>>3,J+=64}function nt(T,M,U){var J,ce=M-32,ge=bo,_e=255-T[ce-1];for(J=0;J<U;++J){var Ce,ke=ge,ze=_e+T[M-1];for(Ce=0;Ce<U;++Ce)T[M+Ce]=ke[ze+T[ce+Ce]];M+=32}}function Ye(T,M){nt(T,M,4)}function yt(T,M){nt(T,M,8)}function Jt(T,M){nt(T,M,16)}function ur(T,M){var U;for(U=0;16>U;++U)n(T,M+32*U,T,M-32,16)}function Cr(T,M){var U;for(U=16;0<U;--U)s(T,M,T[M-1],16),M+=32}function xr(T,M,U){var J;for(J=0;16>J;++J)s(M,U+32*J,T,16)}function ar(T,M){var U,J=16;for(U=0;16>U;++U)J+=T[M-1+32*U]+T[M+U-32];xr(J>>5,T,M)}function an(T,M){var U,J=8;for(U=0;16>U;++U)J+=T[M-1+32*U];xr(J>>4,T,M)}function jr(T,M){var U,J=8;for(U=0;16>U;++U)J+=T[M+U-32];xr(J>>4,T,M)}function yn(T,M){xr(128,T,M)}function Vr(T,M,U){return T+2*M+U+2>>2}function Zt(T,M){var U,J=M-32;for(J=new Uint8Array([Vr(T[J-1],T[J+0],T[J+1]),Vr(T[J+0],T[J+1],T[J+2]),Vr(T[J+1],T[J+2],T[J+3]),Vr(T[J+2],T[J+3],T[J+4])]),U=0;4>U;++U)n(T,M+32*U,J,0,J.length)}function Ir(T,M){var U=T[M-1],J=T[M-1+32],ce=T[M-1+64],ge=T[M-1+96];Ut(T,M+0,16843009*Vr(T[M-1-32],U,J)),Ut(T,M+32,16843009*Vr(U,J,ce)),Ut(T,M+64,16843009*Vr(J,ce,ge)),Ut(T,M+96,16843009*Vr(ce,ge,ge))}function xn(T,M){var U,J=4;for(U=0;4>U;++U)J+=T[M+U-32]+T[M-1+32*U];for(J>>=3,U=0;4>U;++U)s(T,M+32*U,J,4)}function Jn(T,M){var U=T[M-1+0],J=T[M-1+32],ce=T[M-1+64],ge=T[M-1-32],_e=T[M+0-32],Ce=T[M+1-32],ke=T[M+2-32],ze=T[M+3-32];T[M+0+96]=Vr(J,ce,T[M-1+96]),T[M+1+96]=T[M+0+64]=Vr(U,J,ce),T[M+2+96]=T[M+1+64]=T[M+0+32]=Vr(ge,U,J),T[M+3+96]=T[M+2+64]=T[M+1+32]=T[M+0+0]=Vr(_e,ge,U),T[M+3+64]=T[M+2+32]=T[M+1+0]=Vr(Ce,_e,ge),T[M+3+32]=T[M+2+0]=Vr(ke,Ce,_e),T[M+3+0]=Vr(ze,ke,Ce)}function Pn(T,M){var U=T[M+1-32],J=T[M+2-32],ce=T[M+3-32],ge=T[M+4-32],_e=T[M+5-32],Ce=T[M+6-32],ke=T[M+7-32];T[M+0+0]=Vr(T[M+0-32],U,J),T[M+1+0]=T[M+0+32]=Vr(U,J,ce),T[M+2+0]=T[M+1+32]=T[M+0+64]=Vr(J,ce,ge),T[M+3+0]=T[M+2+32]=T[M+1+64]=T[M+0+96]=Vr(ce,ge,_e),T[M+3+32]=T[M+2+64]=T[M+1+96]=Vr(ge,_e,Ce),T[M+3+64]=T[M+2+96]=Vr(_e,Ce,ke),T[M+3+96]=Vr(Ce,ke,ke)}function ii(T,M){var U=T[M-1+0],J=T[M-1+32],ce=T[M-1+64],ge=T[M-1-32],_e=T[M+0-32],Ce=T[M+1-32],ke=T[M+2-32],ze=T[M+3-32];T[M+0+0]=T[M+1+64]=ge+_e+1>>1,T[M+1+0]=T[M+2+64]=_e+Ce+1>>1,T[M+2+0]=T[M+3+64]=Ce+ke+1>>1,T[M+3+0]=ke+ze+1>>1,T[M+0+96]=Vr(ce,J,U),T[M+0+64]=Vr(J,U,ge),T[M+0+32]=T[M+1+96]=Vr(U,ge,_e),T[M+1+32]=T[M+2+96]=Vr(ge,_e,Ce),T[M+2+32]=T[M+3+96]=Vr(_e,Ce,ke),T[M+3+32]=Vr(Ce,ke,ze)}function Gu(T,M){var U=T[M+0-32],J=T[M+1-32],ce=T[M+2-32],ge=T[M+3-32],_e=T[M+4-32],Ce=T[M+5-32],ke=T[M+6-32],ze=T[M+7-32];T[M+0+0]=U+J+1>>1,T[M+1+0]=T[M+0+64]=J+ce+1>>1,T[M+2+0]=T[M+1+64]=ce+ge+1>>1,T[M+3+0]=T[M+2+64]=ge+_e+1>>1,T[M+0+32]=Vr(U,J,ce),T[M+1+32]=T[M+0+96]=Vr(J,ce,ge),T[M+2+32]=T[M+1+96]=Vr(ce,ge,_e),T[M+3+32]=T[M+2+96]=Vr(ge,_e,Ce),T[M+3+64]=Vr(_e,Ce,ke),T[M+3+96]=Vr(Ce,ke,ze)}function Wr(T,M){var U=T[M-1+0],J=T[M-1+32],ce=T[M-1+64],ge=T[M-1+96];T[M+0+0]=U+J+1>>1,T[M+2+0]=T[M+0+32]=J+ce+1>>1,T[M+2+32]=T[M+0+64]=ce+ge+1>>1,T[M+1+0]=Vr(U,J,ce),T[M+3+0]=T[M+1+32]=Vr(J,ce,ge),T[M+3+32]=T[M+1+64]=Vr(ce,ge,ge),T[M+3+64]=T[M+2+64]=T[M+0+96]=T[M+1+96]=T[M+2+96]=T[M+3+96]=ge}function vo(T,M){var U=T[M-1+0],J=T[M-1+32],ce=T[M-1+64],ge=T[M-1+96],_e=T[M-1-32],Ce=T[M+0-32],ke=T[M+1-32],ze=T[M+2-32];T[M+0+0]=T[M+2+32]=U+_e+1>>1,T[M+0+32]=T[M+2+64]=J+U+1>>1,T[M+0+64]=T[M+2+96]=ce+J+1>>1,T[M+0+96]=ge+ce+1>>1,T[M+3+0]=Vr(Ce,ke,ze),T[M+2+0]=Vr(_e,Ce,ke),T[M+1+0]=T[M+3+32]=Vr(U,_e,Ce),T[M+1+32]=T[M+3+64]=Vr(J,U,_e),T[M+1+64]=T[M+3+96]=Vr(ce,J,U),T[M+1+96]=Vr(ge,ce,J)}function vn(T,M){var U;for(U=0;8>U;++U)n(T,M+32*U,T,M-32,8)}function sn(T,M){var U;for(U=0;8>U;++U)s(T,M,T[M-1],8),M+=32}function Ka(T,M,U){var J;for(J=0;8>J;++J)s(M,U+32*J,T,8)}function tn(T,M){var U,J=8;for(U=0;8>U;++U)J+=T[M+U-32]+T[M-1+32*U];Ka(J>>4,T,M)}function Ks(T,M){var U,J=4;for(U=0;8>U;++U)J+=T[M+U-32];Ka(J>>3,T,M)}function co(T,M){var U,J=4;for(U=0;8>U;++U)J+=T[M-1+32*U];Ka(J>>3,T,M)}function Is(T,M){Ka(128,T,M)}function To(T,M,U){var J=T[M-U],ce=T[M+0],ge=3*(ce-J)+bc[1020+T[M-2*U]-T[M+U]],_e=vs[112+(ge+4>>3)];T[M-U]=bo[255+J+vs[112+(ge+3>>3)]],T[M+0]=bo[255+ce-_e]}function Cl(T,M,U,J){var ce=T[M+0],ge=T[M+U];return Jo[255+T[M-2*U]-T[M-U]]>J||Jo[255+ge-ce]>J}function Ra(T,M,U,J){return 4*Jo[255+T[M-U]-T[M+0]]+Jo[255+T[M-2*U]-T[M+U]]<=J}function pu(T,M,U,J,ce){var ge=T[M-3*U],_e=T[M-2*U],Ce=T[M-U],ke=T[M+0],ze=T[M+U],$e=T[M+2*U],$t=T[M+3*U];return 4*Jo[255+Ce-ke]+Jo[255+_e-ze]>J?0:Jo[255+T[M-4*U]-ge]<=ce&&Jo[255+ge-_e]<=ce&&Jo[255+_e-Ce]<=ce&&Jo[255+$t-$e]<=ce&&Jo[255+$e-ze]<=ce&&Jo[255+ze-ke]<=ce}function mu(T,M,U,J){var ce=2*J+1;for(J=0;16>J;++J)Ra(T,M+J,U,ce)&&To(T,M+J,U)}function ds(T,M,U,J){var ce=2*J+1;for(J=0;16>J;++J)Ra(T,M+J*U,1,ce)&&To(T,M+J*U,1)}function Js(T,M,U,J){var ce;for(ce=3;0<ce;--ce)mu(T,M+=4*U,U,J)}function Sa(T,M,U,J){var ce;for(ce=3;0<ce;--ce)ds(T,M+=4,U,J)}function gi(T,M,U,J,ce,ge,_e,Ce){for(ge=2*ge+1;0<ce--;){if(pu(T,M,U,ge,_e))if(Cl(T,M,U,Ce))To(T,M,U);else{var ke=T,ze=M,$e=U,$t=ke[ze-2*$e],je=ke[ze-$e],xt=ke[ze+0],Pt=ke[ze+$e],Gt=ke[ze+2*$e],Bt=27*(Xt=bc[1020+3*(xt-je)+bc[1020+$t-Pt]])+63>>7,Dt=18*Xt+63>>7,Xt=9*Xt+63>>7;ke[ze-3*$e]=bo[255+ke[ze-3*$e]+Xt],ke[ze-2*$e]=bo[255+$t+Dt],ke[ze-$e]=bo[255+je+Bt],ke[ze+0]=bo[255+xt-Bt],ke[ze+$e]=bo[255+Pt-Dt],ke[ze+2*$e]=bo[255+Gt-Xt]}M+=J}}function zo(T,M,U,J,ce,ge,_e,Ce){for(ge=2*ge+1;0<ce--;){if(pu(T,M,U,ge,_e))if(Cl(T,M,U,Ce))To(T,M,U);else{var ke=T,ze=M,$e=U,$t=ke[ze-$e],je=ke[ze+0],xt=ke[ze+$e],Pt=vs[112+(4+(Gt=3*(je-$t))>>3)],Gt=vs[112+(Gt+3>>3)],Bt=Pt+1>>1;ke[ze-2*$e]=bo[255+ke[ze-2*$e]+Bt],ke[ze-$e]=bo[255+$t+Gt],ke[ze+0]=bo[255+je-Pt],ke[ze+$e]=bo[255+xt-Bt]}M+=J}}function O(T,M,U,J,ce,ge){gi(T,M,U,1,16,J,ce,ge)}function ue(T,M,U,J,ce,ge){gi(T,M,1,U,16,J,ce,ge)}function Le(T,M,U,J,ce,ge){var _e;for(_e=3;0<_e;--_e)zo(T,M+=4*U,U,1,16,J,ce,ge)}function ut(T,M,U,J,ce,ge){var _e;for(_e=3;0<_e;--_e)zo(T,M+=4,1,U,16,J,ce,ge)}function Et(T,M,U,J,ce,ge,_e,Ce){gi(T,M,ce,1,8,ge,_e,Ce),gi(U,J,ce,1,8,ge,_e,Ce)}function Wt(T,M,U,J,ce,ge,_e,Ce){gi(T,M,1,ce,8,ge,_e,Ce),gi(U,J,1,ce,8,ge,_e,Ce)}function or(T,M,U,J,ce,ge,_e,Ce){zo(T,M+4*ce,ce,1,8,ge,_e,Ce),zo(U,J+4*ce,ce,1,8,ge,_e,Ce)}function Or(T,M,U,J,ce,ge,_e,Ce){zo(T,M+4,1,ce,8,ge,_e,Ce),zo(U,J+4,1,ce,8,ge,_e,Ce)}function Zr(){this.ba=new wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ft,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function _n(){this.ua=0,this.Wa=new Nr,this.vb=new Nr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new lt,this.yc=new Ae}function _i(){this.xb=this.a=0,this.l=new Bo,this.ca=new wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new _n,this.ab=0,this.gc=f(4,Rn),this.Oc=0}function fi(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Bo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Fn(T,M,U,J,ce,ge,_e){for(T=T==null?0:T[M+0],M=0;M<_e;++M)ce[ge+M]=T+U[J+M]&255,T=ce[ge+M]}function qi(T,M,U,J,ce,ge,_e){var Ce;if(T==null)Fn(null,null,U,J,ce,ge,_e);else for(Ce=0;Ce<_e;++Ce)ce[ge+Ce]=T[M+Ce]+U[J+Ce]&255}function Ci(T,M,U,J,ce,ge,_e){if(T==null)Fn(null,null,U,J,ce,ge,_e);else{var Ce,ke=T[M+0],ze=ke,$e=ke;for(Ce=0;Ce<_e;++Ce)ze=$e+(ke=T[M+Ce])-ze,$e=U[J+Ce]+(-256&ze?0>ze?0:255:ze)&255,ze=ke,ce[ge+Ce]=$e}}function Ui(T,M,U,J){var ce=M.width,ge=M.o;if(t(T!=null&&M!=null),0>U||0>=J||U+J>ge)return null;if(!T.Cc){if(T.ga==null){var _e;if(T.ga=new fi,(_e=T.ga==null)||(_e=M.width*M.o,t(T.Gb.length==0),T.Gb=l(_e),T.Uc=0,T.Gb==null?_e=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,_e=1),_e=!_e),!_e){_e=T.ga;var Ce=T.Fa,ke=T.P,ze=T.qc,$e=T.mb,$t=T.nb,je=ke+1,xt=ze-1,Pt=_e.l;if(t(Ce!=null&&$e!=null&&M!=null),Qo[0]=null,Qo[1]=Fn,Qo[2]=qi,Qo[3]=Ci,_e.ca=$e,_e.tb=$t,_e.c=M.width,_e.i=M.height,t(0<_e.c&&0<_e.i),1>=ze)M=0;else if(_e.$a=3&Ce[ke+0],_e.Z=Ce[ke+0]>>2&3,_e.Lc=Ce[ke+0]>>4&3,ke=Ce[ke+0]>>6&3,0>_e.$a||1<_e.$a||4<=_e.Z||1<_e.Lc||ke)M=0;else if(Pt.put=er,Pt.ac=wr,Pt.bc=nn,Pt.ma=_e,Pt.width=M.width,Pt.height=M.height,Pt.Da=M.Da,Pt.v=M.v,Pt.va=M.va,Pt.j=M.j,Pt.o=M.o,_e.$a)e:{t(_e.$a==1),M=Sn();t:for(;;){if(M==null){M=0;break e}if(t(_e!=null),_e.mc=M,M.c=_e.c,M.i=_e.i,M.l=_e.l,M.l.ma=_e,M.l.width=_e.c,M.l.height=_e.i,M.a=0,tt(M.m,Ce,je,xt),!ro(_e.c,_e.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Gn(M.s)?(_e.ic=1,Ce=M.c*M.i,M.Ta=null,M.Ua=0,M.V=l(Ce),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(_e.ic=0,M=Hs(M,_e.c)),!M))break t;M=1;break e}_e.mc=null,M=0}else M=xt>=_e.c*_e.i;_e=!M}if(_e)return null;T.ga.Lc!=1?T.Ga=0:J=ge-U}t(T.ga!=null),t(U+J<=ge);e:{if(M=(Ce=T.ga).c,ge=Ce.l.o,Ce.$a==0){if(je=T.rc,xt=T.Vc,Pt=T.Fa,ke=T.P+1+U*M,ze=T.mb,$e=T.nb+U*M,t(ke<=T.P+T.qc),Ce.Z!=0)for(t(Qo[Ce.Z]!=null),_e=0;_e<J;++_e)Qo[Ce.Z](je,xt,Pt,ke,ze,$e,M),je=ze,xt=$e,$e+=M,ke+=M;else for(_e=0;_e<J;++_e)n(ze,$e,Pt,ke,M),je=ze,xt=$e,$e+=M,ke+=M;T.rc=je,T.Vc=xt}else{if(t(Ce.mc!=null),M=U+J,t((_e=Ce.mc)!=null),t(M<=_e.i),_e.C>=M)M=1;else if(Ce.ic||yu(),Ce.ic){Ce=_e.V,je=_e.Ba,xt=_e.c;var Gt=_e.i,Bt=(Pt=1,ke=_e.$/xt,ze=_e.$%xt,$e=_e.m,$t=_e.s,_e.$),Dt=xt*Gt,Xt=xt*M,pr=$t.wc,ir=Bt<Xt?qn($t,ze,ke):null;t(Bt<=Dt),t(M<=Gt),t(Gn($t));t:for(;;){for(;!$e.h&&Bt<Xt;){if(ze&pr||(ir=qn($t,ze,ke)),t(ir!=null),gt($e),256>(Gt=Dr(ir.G[0],ir.H[0],$e)))Ce[je+Bt]=Gt,++Bt,++ze>=xt&&(ze=0,++ke<=M&&!(ke%16)&&Xo(_e,ke));else{if(!(280>Gt)){Pt=0;break t}Gt=Dn(Gt-256,$e);var dn,Kr=Dr(ir.G[4],ir.H[4],$e);if(gt($e),!(Bt>=(Kr=hn(xt,Kr=Dn(Kr,$e)))&&Dt-Bt>=Gt)){Pt=0;break t}for(dn=0;dn<Gt;++dn)Ce[je+Bt+dn]=Ce[je+Bt+dn-Kr];for(Bt+=Gt,ze+=Gt;ze>=xt;)ze-=xt,++ke<=M&&!(ke%16)&&Xo(_e,ke);Bt<Xt&&ze&pr&&(ir=qn($t,ze,ke))}t($e.h==qe($e))}Xo(_e,ke>M?M:ke);break t}!Pt||$e.h&&Bt<Dt?(Pt=0,_e.a=$e.h?5:3):_e.$=Bt,M=Pt}else M=lr(_e,_e.V,_e.Ba,_e.c,_e.i,M,ca);if(!M){J=0;break e}}U+J>=ge&&(T.Cc=1),J=1}if(!J)return null;if(T.Cc&&((J=T.ga)!=null&&(J.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+U*ce}function Ja(T,M,U,J,ce,ge){for(;0<ce--;){var _e,Ce=T,ke=M+(U?1:0),ze=T,$e=M+(U?0:3);for(_e=0;_e<J;++_e){var $t=ze[$e+4*_e];$t!=255&&($t*=32897,Ce[ke+4*_e+0]=Ce[ke+4*_e+0]*$t>>23,Ce[ke+4*_e+1]=Ce[ke+4*_e+1]*$t>>23,Ce[ke+4*_e+2]=Ce[ke+4*_e+2]*$t>>23)}M+=ge}}function Qs(T,M,U,J,ce){for(;0<J--;){var ge;for(ge=0;ge<U;++ge){var _e=T[M+2*ge+0],Ce=15&(ze=T[M+2*ge+1]),ke=4369*Ce,ze=(240&ze|ze>>4)*ke>>16;T[M+2*ge+0]=(240&_e|_e>>4)*ke>>16&240|(15&_e|_e<<4)*ke>>16>>4&15,T[M+2*ge+1]=240&ze|Ce}M+=ce}}function gu(T,M,U,J,ce,ge,_e,Ce){var ke,ze,$e=255;for(ze=0;ze<ce;++ze){for(ke=0;ke<J;++ke){var $t=T[M+ke];ge[_e+4*ke]=$t,$e&=$t}M+=U,_e+=Ce}return $e!=255}function Kc(T,M,U,J,ce){var ge;for(ge=0;ge<ce;++ge)U[J+ge]=T[M+ge]>>8}function yu(){Hi=Ja,_c=Qs,Fa=gu,ys=Kc}function Na(T,M,U){ve[T]=function(J,ce,ge,_e,Ce,ke,ze,$e,$t,je,xt,Pt,Gt,Bt,Dt,Xt,pr){var ir,dn=pr-1>>1,Kr=Ce[ke+0]|ze[$e+0]<<16,zn=$t[je+0]|xt[Pt+0]<<16;t(J!=null);var Qr=3*Kr+zn+131074>>2;for(M(J[ce+0],255&Qr,Qr>>16,Gt,Bt),ge!=null&&(Qr=3*zn+Kr+131074>>2,M(ge[_e+0],255&Qr,Qr>>16,Dt,Xt)),ir=1;ir<=dn;++ir){var Qn=Ce[ke+ir]|ze[$e+ir]<<16,Uo=$t[je+ir]|xt[Pt+ir]<<16,kn=Kr+Qn+zn+Uo+524296,on=kn+2*(Qn+zn)>>3;Qr=on+Kr>>1,Kr=(kn=kn+2*(Kr+Uo)>>3)+Qn>>1,M(J[ce+2*ir-1],255&Qr,Qr>>16,Gt,Bt+(2*ir-1)*U),M(J[ce+2*ir-0],255&Kr,Kr>>16,Gt,Bt+(2*ir-0)*U),ge!=null&&(Qr=kn+zn>>1,Kr=on+Uo>>1,M(ge[_e+2*ir-1],255&Qr,Qr>>16,Dt,Xt+(2*ir-1)*U),M(ge[_e+2*ir+0],255&Kr,Kr>>16,Dt,Xt+(2*ir+0)*U)),Kr=Qn,zn=Uo}1&pr||(Qr=3*Kr+zn+131074>>2,M(J[ce+pr-1],255&Qr,Qr>>16,Gt,Bt+(pr-1)*U),ge!=null&&(Qr=3*zn+Kr+131074>>2,M(ge[_e+pr-1],255&Qr,Qr>>16,Dt,Xt+(pr-1)*U)))}}function Ul(){rs[Il]=jh,rs[Mn]=Sc,rs[Ds]=nh,rs[Yl]=Tf,rs[Nh]=ih,rs[xc]=Af,rs[Np]=zp,rs[wd]=Sc,rs[wf]=Tf,rs[Oh]=ih,rs[Qc]=Af}function El(T){return T&-16384?0>T?0:255:T>>kl}function Qa(T,M){return El((19077*T>>8)+(26149*M>>8)-14234)}function no(T,M,U){return El((19077*T>>8)-(6419*M>>8)-(13320*U>>8)+8708)}function $o(T,M){return El((19077*T>>8)+(33050*M>>8)-17685)}function ki(T,M,U,J,ce){J[ce+0]=Qa(T,U),J[ce+1]=no(T,M,U),J[ce+2]=$o(T,M)}function ps(T,M,U,J,ce){J[ce+0]=$o(T,M),J[ce+1]=no(T,M,U),J[ce+2]=Qa(T,U)}function el(T,M,U,J,ce){var ge=no(T,M,U);M=ge<<3&224|$o(T,M)>>3,J[ce+0]=248&Qa(T,U)|ge>>5,J[ce+1]=M}function Li(T,M,U,J,ce){var ge=240&$o(T,M)|15;J[ce+0]=240&Qa(T,U)|no(T,M,U)>>4,J[ce+1]=ge}function Vl(T,M,U,J,ce){J[ce+0]=255,ki(T,M,U,J,ce+1)}function tl(T,M,U,J,ce){ps(T,M,U,J,ce),J[ce+3]=255}function ms(T,M,U,J,ce){ki(T,M,U,J,ce),J[ce+3]=255}function ho(T,M){return 0>T?0:T>M?M:T}function jo(T,M,U){ve[T]=function(J,ce,ge,_e,Ce,ke,ze,$e,$t){for(var je=$e+(-2&$t)*U;$e!=je;)M(J[ce+0],ge[_e+0],Ce[ke+0],ze,$e),M(J[ce+1],ge[_e+0],Ce[ke+0],ze,$e+U),ce+=2,++_e,++ke,$e+=2*U;1&$t&&M(J[ce+0],ge[_e+0],Ce[ke+0],ze,$e)}}function gc(T,M,U){return U==0?T==0?M==0?6:5:M==0?4:0:U}function Hu(T,M,U,J,ce){switch(T>>>30){case 3:ui(M,U,J,ce,0);break;case 2:ci(M,U,J,ce);break;case 1:Io(M,U,J,ce)}}function Tl(T,M){var U,J,ce=M.M,ge=M.Nb,_e=T.oc,Ce=T.pc+40,ke=T.oc,ze=T.pc+584,$e=T.oc,$t=T.pc+600;for(U=0;16>U;++U)_e[Ce+32*U-1]=129;for(U=0;8>U;++U)ke[ze+32*U-1]=129,$e[$t+32*U-1]=129;for(0<ce?_e[Ce-1-32]=ke[ze-1-32]=$e[$t-1-32]=129:(s(_e,Ce-32-1,127,21),s(ke,ze-32-1,127,9),s($e,$t-32-1,127,9)),J=0;J<T.za;++J){var je=M.ya[M.aa+J];if(0<J){for(U=-1;16>U;++U)n(_e,Ce+32*U-4,_e,Ce+32*U+12,4);for(U=-1;8>U;++U)n(ke,ze+32*U-4,ke,ze+32*U+4,4),n($e,$t+32*U-4,$e,$t+32*U+4,4)}var xt=T.Gd,Pt=T.Hd+J,Gt=je.ad,Bt=je.Hc;if(0<ce&&(n(_e,Ce-32,xt[Pt].y,0,16),n(ke,ze-32,xt[Pt].f,0,8),n($e,$t-32,xt[Pt].ea,0,8)),je.Za){var Dt=_e,Xt=Ce-32+16;for(0<ce&&(J>=T.za-1?s(Dt,Xt,xt[Pt].y[15],4):n(Dt,Xt,xt[Pt+1].y,0,4)),U=0;4>U;U++)Dt[Xt+128+U]=Dt[Xt+256+U]=Dt[Xt+384+U]=Dt[Xt+0+U];for(U=0;16>U;++U,Bt<<=2)Dt=_e,Xt=Ce+Vh[U],_s[je.Ob[U]](Dt,Xt),Hu(Bt,Gt,16*+U,Dt,Xt)}else if(Dt=gc(J,ce,je.Ob[0]),Ml[Dt](_e,Ce),Bt!=0)for(U=0;16>U;++U,Bt<<=2)Hu(Bt,Gt,16*+U,_e,Ce+Vh[U]);for(U=je.Gc,Dt=gc(J,ce,je.Dd),Kl[Dt](ke,ze),Kl[Dt]($e,$t),Bt=Gt,Dt=ke,Xt=ze,255&(je=0|U)&&(170&je?Di(Bt,256,Dt,Xt):es(Bt,256,Dt,Xt)),je=$e,Bt=$t,255&(U>>=8)&&(170&U?Di(Gt,320,je,Bt):es(Gt,320,je,Bt)),ce<T.Ub-1&&(n(xt[Pt].y,0,_e,Ce+480,16),n(xt[Pt].f,0,ke,ze+224,8),n(xt[Pt].ea,0,$e,$t+224,8)),U=8*ge*T.B,xt=T.sa,Pt=T.ta+16*J+16*ge*T.R,Gt=T.qa,je=T.ra+8*J+U,Bt=T.Ha,Dt=T.Ia+8*J+U,U=0;16>U;++U)n(xt,Pt+U*T.R,_e,Ce+32*U,16);for(U=0;8>U;++U)n(Gt,je+U*T.B,ke,ze+32*U,8),n(Bt,Dt+U*T.B,$e,$t+32*U,8)}}function rl(T,M,U,J,ce,ge,_e,Ce,ke){var ze=[0],$e=[0],$t=0,je=ke!=null?ke.kd:0,xt=ke??new wn;if(T==null||12>U)return 7;xt.data=T,xt.w=M,xt.ha=U,M=[M],U=[U],xt.gb=[xt.gb];e:{var Pt=M,Gt=U,Bt=xt.gb;if(t(T!=null),t(Gt!=null),t(Bt!=null),Bt[0]=0,12<=Gt[0]&&!r(T,Pt[0],"RIFF")){if(r(T,Pt[0]+8,"WEBP")){Bt=3;break e}var Dt=It(T,Pt[0]+4);if(12>Dt||4294967286<Dt){Bt=3;break e}if(je&&Dt>Gt[0]-8){Bt=7;break e}Bt[0]=Dt,Pt[0]+=12,Gt[0]-=12}Bt=0}if(Bt!=0)return Bt;for(Dt=0<xt.gb[0],U=U[0];;){e:{var Xt=T;Gt=M,Bt=U;var pr=ze,ir=$e,dn=Pt=[0];if((Qr=$t=[$t])[0]=0,8>Bt[0])Bt=7;else{if(!r(Xt,Gt[0],"VP8X")){if(It(Xt,Gt[0]+4)!=10){Bt=3;break e}if(18>Bt[0]){Bt=7;break e}var Kr=It(Xt,Gt[0]+8),zn=1+rr(Xt,Gt[0]+12);if(2147483648<=zn*(Xt=1+rr(Xt,Gt[0]+15))){Bt=3;break e}dn!=null&&(dn[0]=Kr),pr!=null&&(pr[0]=zn),ir!=null&&(ir[0]=Xt),Gt[0]+=18,Bt[0]-=18,Qr[0]=1}Bt=0}}if($t=$t[0],Pt=Pt[0],Bt!=0)return Bt;if(Gt=!!(2&Pt),!Dt&&$t)return 3;if(ge!=null&&(ge[0]=!!(16&Pt)),_e!=null&&(_e[0]=Gt),Ce!=null&&(Ce[0]=0),_e=ze[0],Pt=$e[0],$t&&Gt&&ke==null){Bt=0;break}if(4>U){Bt=7;break}if(Dt&&$t||!Dt&&!$t&&!r(T,M[0],"ALPH")){U=[U],xt.na=[xt.na],xt.P=[xt.P],xt.Sa=[xt.Sa];e:{Kr=T,Bt=M,Dt=U;var Qr=xt.gb;pr=xt.na,ir=xt.P,dn=xt.Sa,zn=22,t(Kr!=null),t(Dt!=null),Xt=Bt[0];var Qn=Dt[0];for(t(pr!=null),t(dn!=null),pr[0]=null,ir[0]=null,dn[0]=0;;){if(Bt[0]=Xt,Dt[0]=Qn,8>Qn){Bt=7;break e}var Uo=It(Kr,Xt+4);if(4294967286<Uo){Bt=3;break e}var kn=8+Uo+1&-2;if(zn+=kn,0<Qr&&zn>Qr){Bt=3;break e}if(!r(Kr,Xt,"VP8 ")||!r(Kr,Xt,"VP8L")){Bt=0;break e}if(Qn[0]<kn){Bt=7;break e}r(Kr,Xt,"ALPH")||(pr[0]=Kr,ir[0]=Xt+8,dn[0]=Uo),Xt+=kn,Qn-=kn}}if(U=U[0],xt.na=xt.na[0],xt.P=xt.P[0],xt.Sa=xt.Sa[0],Bt!=0)break}U=[U],xt.Ja=[xt.Ja],xt.xa=[xt.xa];e:if(Qr=T,Bt=M,Dt=U,pr=xt.gb[0],ir=xt.Ja,dn=xt.xa,Kr=Bt[0],Xt=!r(Qr,Kr,"VP8 "),zn=!r(Qr,Kr,"VP8L"),t(Qr!=null),t(Dt!=null),t(ir!=null),t(dn!=null),8>Dt[0])Bt=7;else{if(Xt||zn){if(Qr=It(Qr,Kr+4),12<=pr&&Qr>pr-12){Bt=3;break e}if(je&&Qr>Dt[0]-8){Bt=7;break e}ir[0]=Qr,Bt[0]+=8,Dt[0]-=8,dn[0]=zn}else dn[0]=5<=Dt[0]&&Qr[Kr+0]==47&&!(Qr[Kr+4]>>5),ir[0]=Dt[0];Bt=0}if(U=U[0],xt.Ja=xt.Ja[0],xt.xa=xt.xa[0],M=M[0],Bt!=0)break;if(4294967286<xt.Ja)return 3;if(Ce==null||Gt||(Ce[0]=xt.xa?2:1),_e=[_e],Pt=[Pt],xt.xa){if(5>U){Bt=7;break}Ce=_e,je=Pt,Gt=ge,T==null||5>U?T=0:5<=U&&T[M+0]==47&&!(T[M+4]>>5)?(Dt=[0],Qr=[0],pr=[0],tt(ir=new Ee,T,M,U),Hn(ir,Dt,Qr,pr)?(Ce!=null&&(Ce[0]=Dt[0]),je!=null&&(je[0]=Qr[0]),Gt!=null&&(Gt[0]=pr[0]),T=1):T=0):T=0}else{if(10>U){Bt=7;break}Ce=Pt,T==null||10>U||!pc(T,M+3,U-3)?T=0:(je=T[M+0]|T[M+1]<<8|T[M+2]<<16,Gt=16383&(T[M+7]<<8|T[M+6]),T=16383&(T[M+9]<<8|T[M+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=xt.Ja||!Gt||!T?T=0:(_e&&(_e[0]=Gt),Ce&&(Ce[0]=T),T=1))}if(!T||(_e=_e[0],Pt=Pt[0],$t&&(ze[0]!=_e||$e[0]!=Pt)))return 3;ke!=null&&(ke[0]=xt,ke.offset=M-ke.w,t(4294967286>M-ke.w),t(ke.offset==ke.ha-U));break}return Bt==0||Bt==7&&$t&&ke==null?(ge!=null&&(ge[0]|=xt.na!=null&&0<xt.na.length),J!=null&&(J[0]=_e),ce!=null&&(ce[0]=Pt),0):Bt}function Ao(T,M,U){var J=M.width,ce=M.height,ge=0,_e=0,Ce=J,ke=ce;if(M.Da=T!=null&&0<T.Da,M.Da&&(Ce=T.cd,ke=T.bd,ge=T.v,_e=T.j,11>U||(ge&=-2,_e&=-2),0>ge||0>_e||0>=Ce||0>=ke||ge+Ce>J||_e+ke>ce))return 0;if(M.v=ge,M.j=_e,M.va=ge+Ce,M.o=_e+ke,M.U=Ce,M.T=ke,M.da=T!=null&&0<T.da,M.da){if(!Pr(Ce,ke,U=[T.ib],ge=[T.hb]))return 0;M.ib=U[0],M.hb=ge[0]}return M.ob=T!=null&&T.ob,M.Kb=T==null||!T.Sd,M.da&&(M.ob=M.ib<3*J/4&&M.hb<3*ce/4,M.Kb=0),1}function _o(T){if(T==null)return 2;if(11>T.S){var M=T.f.RGBA;M.fb+=(T.height-1)*M.A,M.A=-M.A}else M=T.f.kb,T=T.height,M.O+=(T-1)*M.fa,M.fa=-M.fa,M.N+=(T-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(T-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(T-1)*M.lb,M.lb=-M.lb);return 0}function ql(T,M,U,J){if(J==null||0>=T||0>=M)return 2;if(U!=null){if(U.Da){var ce=U.cd,ge=U.bd,_e=-2&U.v,Ce=-2&U.j;if(0>_e||0>Ce||0>=ce||0>=ge||_e+ce>T||Ce+ge>M)return 2;T=ce,M=ge}if(U.da){if(!Pr(T,M,ce=[U.ib],ge=[U.hb]))return 2;T=ce[0],M=ge[0]}}J.width=T,J.height=M;e:{var ke=J.width,ze=J.height;if(T=J.S,0>=ke||0>=ze||!(T>=Il&&13>T))T=2;else{if(0>=J.Rd&&J.sd==null){_e=ge=ce=M=0;var $e=(Ce=ke*ul[T])*ze;if(11>T||(ge=(ze+1)/2*(M=(ke+1)/2),T==12&&(_e=(ce=ke)*ze)),(ze=l($e+2*ge+_e))==null){T=1;break e}J.sd=ze,11>T?((ke=J.f.RGBA).eb=ze,ke.fb=0,ke.A=Ce,ke.size=$e):((ke=J.f.kb).y=ze,ke.O=0,ke.fa=Ce,ke.Fd=$e,ke.f=ze,ke.N=0+$e,ke.Ab=M,ke.Cd=ge,ke.ea=ze,ke.W=0+$e+ge,ke.Db=M,ke.Ed=ge,T==12&&(ke.F=ze,ke.J=0+$e+2*ge),ke.Tc=_e,ke.lb=ce)}if(M=1,ce=J.S,ge=J.width,_e=J.height,ce>=Il&&13>ce)if(11>ce)T=J.f.RGBA,M&=(Ce=Math.abs(T.A))*(_e-1)+ge<=T.size,M&=Ce>=ge*ul[ce],M&=T.eb!=null;else{T=J.f.kb,Ce=(ge+1)/2,$e=(_e+1)/2,ke=Math.abs(T.fa),ze=Math.abs(T.Ab);var $t=Math.abs(T.Db),je=Math.abs(T.lb),xt=je*(_e-1)+ge;M&=ke*(_e-1)+ge<=T.Fd,M&=ze*($e-1)+Ce<=T.Cd,M=(M&=$t*($e-1)+Ce<=T.Ed)&ke>=ge&ze>=Ce&$t>=Ce,M&=T.y!=null,M&=T.f!=null,M&=T.ea!=null,ce==12&&(M&=je>=ge,M&=xt<=T.Tc,M&=T.F!=null)}else M=0;T=M?0:2}}return T!=0||U!=null&&U.fd&&(T=_o(J)),T}var Po=64,nl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ko=24,il=32,Gi=8,Ms=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];vr("Predictor0","PredictorAdd0"),ve.Predictor0=function(){return 4278190080},ve.Predictor1=function(T){return T},ve.Predictor2=function(T,M,U){return M[U+0]},ve.Predictor3=function(T,M,U){return M[U+1]},ve.Predictor4=function(T,M,U){return M[U-1]},ve.Predictor5=function(T,M,U){return qr(qr(T,M[U+1]),M[U+0])},ve.Predictor6=function(T,M,U){return qr(T,M[U-1])},ve.Predictor7=function(T,M,U){return qr(T,M[U+0])},ve.Predictor8=function(T,M,U){return qr(M[U-1],M[U+0])},ve.Predictor9=function(T,M,U){return qr(M[U+0],M[U+1])},ve.Predictor10=function(T,M,U){return qr(qr(T,M[U-1]),qr(M[U+0],M[U+1]))},ve.Predictor11=function(T,M,U){var J=M[U+0];return 0>=Jr(J>>24&255,T>>24&255,(M=M[U-1])>>24&255)+Jr(J>>16&255,T>>16&255,M>>16&255)+Jr(J>>8&255,T>>8&255,M>>8&255)+Jr(255&J,255&T,255&M)?J:T},ve.Predictor12=function(T,M,U){var J=M[U+0];return(En((T>>24&255)+(J>>24&255)-((M=M[U-1])>>24&255))<<24|En((T>>16&255)+(J>>16&255)-(M>>16&255))<<16|En((T>>8&255)+(J>>8&255)-(M>>8&255))<<8|En((255&T)+(255&J)-(255&M)))>>>0},ve.Predictor13=function(T,M,U){var J=M[U-1];return(cn((T=qr(T,M[U+0]))>>24&255,J>>24&255)<<24|cn(T>>16&255,J>>16&255)<<16|cn(T>>8&255,J>>8&255)<<8|cn(255&T,255&J))>>>0};var gs=ve.PredictorAdd0;ve.PredictorAdd1=An,vr("Predictor2","PredictorAdd2"),vr("Predictor3","PredictorAdd3"),vr("Predictor4","PredictorAdd4"),vr("Predictor5","PredictorAdd5"),vr("Predictor6","PredictorAdd6"),vr("Predictor7","PredictorAdd7"),vr("Predictor8","PredictorAdd8"),vr("Predictor9","PredictorAdd9"),vr("Predictor10","PredictorAdd10"),vr("Predictor11","PredictorAdd11"),vr("Predictor12","PredictorAdd12"),vr("Predictor13","PredictorAdd13");var Oa=ve.PredictorAdd2;_r("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),_r("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var vu,_u=ve.ColorIndexInverseTransform,ks=ve.MapARGB,Gl=ve.VP8LColorIndexInverseTransformAlpha,Hl=ve.MapAlpha,_t=ve.VP8LPredictorsAdd=[];_t.length=16,(ve.VP8LPredictors=[]).length=16,(ve.VP8LPredictorsAdd_C=[]).length=16,(ve.VP8LPredictors_C=[]).length=16;var Tt,br,kr,Wn,Yr,Cn,Bn,ui,ci,Di,Io,es,fa,ol,Wl,yc,Zl,Al,Wu,vc,Jc,oi,ai,al,Hi,_c,Fa,ys,Ca=l(511),Pl=l(2041),Xl=l(225),Ls=l(767),ts=0,bc=Pl,vs=Xl,bo=Ls,Jo=Ca,Il=0,Mn=1,Ds=2,Yl=3,Nh=4,xc=5,Np=6,wd=7,wf=8,Oh=9,Qc=10,Sf=[2,3,7],Cf=[3,3,11],eh=[280,256,256,256,40],Ef=[0,1,1,1,0],Sd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],th=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rh=8,wc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Bh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sl=null,Xg=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Op=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],zh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Cd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Fp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],$h=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ml=[],_s=[],Kl=[],fo=1,bu=2,Qo=[],rs=[];Na("UpsampleRgbLinePair",ki,3),Na("UpsampleBgrLinePair",ps,3),Na("UpsampleRgbaLinePair",ms,4),Na("UpsampleBgraLinePair",tl,4),Na("UpsampleArgbLinePair",Vl,4),Na("UpsampleRgba4444LinePair",Li,2),Na("UpsampleRgb565LinePair",el,2);var jh=ve.UpsampleRgbLinePair,nh=ve.UpsampleBgrLinePair,Sc=ve.UpsampleRgbaLinePair,Tf=ve.UpsampleBgraLinePair,ih=ve.UpsampleArgbLinePair,Af=ve.UpsampleRgba4444LinePair,zp=ve.UpsampleRgb565LinePair,Uh=16,xu=1<<Uh-1,Jl=-227,Ba=482,kl=6,Pf=0,$p=l(256),jp=l(256),oh=l(256),Ed=l(256),If=l(Ba-Jl),Up=l(Ba-Jl);jo("YuvToRgbRow",ki,3),jo("YuvToBgrRow",ps,3),jo("YuvToRgbaRow",ms,4),jo("YuvToBgraRow",tl,4),jo("YuvToArgbRow",Vl,4),jo("YuvToRgba4444Row",Li,2),jo("YuvToRgb565Row",el,2);var Vh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cc=[0,2,8],ah=[8,7,6,4,4,2,2,2,1,1,1,1],ll=1;this.WebPDecodeRGBA=function(T,M,U,J,ce){var ge=Mn,_e=new Zr,Ce=new wt;_e.ba=Ce,Ce.S=ge,Ce.width=[Ce.width],Ce.height=[Ce.height];var ke=Ce.width,ze=Ce.height,$e=new st;if($e==null||T==null)var $t=2;else t($e!=null),$t=rl(T,M,U,$e.width,$e.height,$e.Pd,$e.Qd,$e.format,null);if($t!=0?ke=0:(ke!=null&&(ke[0]=$e.width[0]),ze!=null&&(ze[0]=$e.height[0]),ke=1),ke){Ce.width=Ce.width[0],Ce.height=Ce.height[0],J!=null&&(J[0]=Ce.width),ce!=null&&(ce[0]=Ce.height);e:{if(J=new Bo,(ce=new wn).data=T,ce.w=M,ce.ha=U,ce.kd=1,M=[0],t(ce!=null),((T=rl(ce.data,ce.w,ce.ha,null,null,null,M,null,ce))==0||T==7)&&M[0]&&(T=4),(M=T)==0){if(t(_e!=null),J.data=ce.data,J.w=ce.w+ce.offset,J.ha=ce.ha-ce.offset,J.put=er,J.ac=wr,J.bc=nn,J.ma=_e,ce.xa){if((T=Sn())==null){_e=1;break e}if(function(je,xt){var Pt=[0],Gt=[0],Bt=[0];t:for(;;){if(je==null)return 0;if(xt==null)return je.a=2,0;if(je.l=xt,je.a=0,tt(je.m,xt.data,xt.w,xt.ha),!Hn(je.m,Pt,Gt,Bt)){je.a=3;break t}if(je.xb=bu,xt.width=Pt[0],xt.height=Gt[0],!ro(Pt[0],Gt[0],1,je,null))break t;return 1}return t(je.a!=0),0}(T,J)){if(J=(M=ql(J.width,J.height,_e.Oa,_e.ba))==0){t:{J=T;r:for(;;){if(J==null){J=0;break t}if(t(J.s.yc!=null),t(J.s.Ya!=null),t(0<J.s.Wb),t((U=J.l)!=null),t((ce=U.ma)!=null),J.xb!=0){if(J.ca=ce.ba,J.tb=ce.tb,t(J.ca!=null),!Ao(ce.Oa,U,Yl)){J.a=2;break r}if(!Hs(J,U.width)||U.da)break r;if((U.da||ht(J.ca.S))&&yu(),11>J.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),J.ca.f.kb.F!=null&&yu()),J.Pb&&0<J.s.ua&&J.s.vb.X==null&&!Ue(J.s.vb,J.s.Wa.Xa)){J.a=1;break r}J.xb=0}if(!lr(J,J.V,J.Ba,J.c,J.i,U.o,Bi))break r;ce.Dc=J.Ma,J=1;break t}t(J.a!=0),J=0}J=!J}J&&(M=T.a)}else M=T.a}else{if((T=new Ps)==null){_e=1;break e}if(T.Fa=ce.na,T.P=ce.P,T.qc=ce.Sa,mc(T,J)){if((M=ql(J.width,J.height,_e.Oa,_e.ba))==0){if(T.Aa=0,U=_e.Oa,t((ce=T)!=null),U!=null){if(0<(ke=0>(ke=U.Md)?0:100<ke?255:255*ke/100)){for(ze=$e=0;4>ze;++ze)12>($t=ce.pb[ze]).lc&&($t.ia=ke*ah[0>$t.lc?0:$t.lc]>>3),$e|=$t.ia;$e&&(alert("todo:VP8InitRandom"),ce.ia=1)}ce.Ga=U.Id,100<ce.Ga?ce.Ga=100:0>ce.Ga&&(ce.Ga=0)}(function(je,xt){if(je==null)return 0;if(xt==null)return lo(je,2,"NULL VP8Io parameter in VP8Decode().");if(!je.cb&&!mc(je,xt))return 0;if(t(je.cb),xt.ac==null||xt.ac(xt)){xt.ob&&(je.L=0);var Pt=Cc[je.L];if(je.L==2?(je.yb=0,je.zb=0):(je.yb=xt.v-Pt>>4,je.zb=xt.j-Pt>>4,0>je.yb&&(je.yb=0),0>je.zb&&(je.zb=0)),je.Va=xt.o+15+Pt>>4,je.Hb=xt.va+15+Pt>>4,je.Hb>je.za&&(je.Hb=je.za),je.Va>je.Ub&&(je.Va=je.Ub),0<je.L){var Gt=je.ed;for(Pt=0;4>Pt;++Pt){var Bt;if(je.Qa.Cb){var Dt=je.Qa.Lb[Pt];je.Qa.Fb||(Dt+=Gt.Tb)}else Dt=Gt.Tb;for(Bt=0;1>=Bt;++Bt){var Xt=je.gd[Pt][Bt],pr=Dt;if(Gt.Pc&&(pr+=Gt.vd[0],Bt&&(pr+=Gt.od[0])),0<(pr=0>pr?0:63<pr?63:pr)){var ir=pr;0<Gt.wb&&(ir=4<Gt.wb?ir>>2:ir>>1)>9-Gt.wb&&(ir=9-Gt.wb),1>ir&&(ir=1),Xt.dd=ir,Xt.tc=2*pr+ir,Xt.ld=40<=pr?2:15<=pr?1:0}else Xt.tc=0;Xt.La=Bt}}}Pt=0}else lo(je,6,"Frame setup failed"),Pt=je.a;if(Pt=Pt==0){if(Pt){je.$c=0,0<je.Aa||(je.Ic=ll);t:{Pt=je.Ic,Gt=4*(ir=je.za);var dn=32*ir,Kr=ir+1,zn=0<je.L?ir*(0<je.Aa?2:1):0,Qr=(je.Aa==2?2:1)*ir;if((Xt=Gt+832+(Bt=3*(16*Pt+Cc[je.L])/2*dn)+(Dt=je.Fa!=null&&0<je.Fa.length?je.Kc.c*je.Kc.i:0))!=Xt)Pt=0;else{if(Xt>je.Vb){if(je.Vb=0,je.Ec=l(Xt),je.Fc=0,je.Ec==null){Pt=lo(je,1,"no memory during frame initialization.");break t}je.Vb=Xt}Xt=je.Ec,pr=je.Fc,je.Ac=Xt,je.Bc=pr,pr+=Gt,je.Gd=f(dn,As),je.Hd=0,je.rb=f(Kr+1,Xs),je.sb=1,je.wa=zn?f(zn,Un):null,je.Y=0,je.D.Nb=0,je.D.wa=je.wa,je.D.Y=je.Y,0<je.Aa&&(je.D.Y+=ir),t(!0),je.oc=Xt,je.pc=pr,pr+=832,je.ya=f(Qr,Kn),je.aa=0,je.D.ya=je.ya,je.D.aa=je.aa,je.Aa==2&&(je.D.aa+=ir),je.R=16*ir,je.B=8*ir,ir=(dn=Cc[je.L])*je.R,dn=dn/2*je.B,je.sa=Xt,je.ta=pr+ir,je.qa=je.sa,je.ra=je.ta+16*Pt*je.R+dn,je.Ha=je.qa,je.Ia=je.ra+8*Pt*je.B+dn,je.$c=0,pr+=Bt,je.mb=Dt?Xt:null,je.nb=Dt?pr:null,t(pr+Dt<=je.Fc+je.Vb),Ys(je),s(je.Ac,je.Bc,0,Gt),Pt=1}}if(Pt){if(xt.ka=0,xt.y=je.sa,xt.O=je.ta,xt.f=je.qa,xt.N=je.ra,xt.ea=je.Ha,xt.Vd=je.Ia,xt.fa=je.R,xt.Rc=je.B,xt.F=null,xt.J=0,!ts){for(Pt=-255;255>=Pt;++Pt)Ca[255+Pt]=0>Pt?-Pt:Pt;for(Pt=-1020;1020>=Pt;++Pt)Pl[1020+Pt]=-128>Pt?-128:127<Pt?127:Pt;for(Pt=-112;112>=Pt;++Pt)Xl[112+Pt]=-16>Pt?-16:15<Pt?15:Pt;for(Pt=-255;510>=Pt;++Pt)Ls[255+Pt]=0>Pt?0:255<Pt?255:Pt;ts=1}Bn=We,ui=jl,Di=k,Io=V,es=pe,ci=$l,fa=O,ol=ue,Wl=Et,yc=Wt,Zl=Le,Al=ut,Wu=or,vc=Or,Jc=mu,oi=ds,ai=Js,al=Sa,_s[0]=xn,_s[1]=Ye,_s[2]=Zt,_s[3]=Ir,_s[4]=Jn,_s[5]=ii,_s[6]=Pn,_s[7]=Gu,_s[8]=vo,_s[9]=Wr,Ml[0]=ar,Ml[1]=Jt,Ml[2]=ur,Ml[3]=Cr,Ml[4]=an,Ml[5]=jr,Ml[6]=yn,Kl[0]=tn,Kl[1]=yt,Kl[2]=vn,Kl[3]=sn,Kl[4]=co,Kl[5]=Ks,Kl[6]=Is,Pt=1}else Pt=0}Pt&&(Pt=function(Qn,Uo){for(Qn.M=0;Qn.M<Qn.Va;++Qn.M){var kn,on=Qn.Jc[Qn.M&Qn.Xb],Mr=Qn.m,Ri=Qn;for(kn=0;kn<Ri.za;++kn){var Gr=Mr,Zn=Ri,Ni=Zn.Ac,ea=Zn.Bc+4*kn,za=Zn.zc,po=Zn.ya[Zn.aa+kn];if(Zn.Qa.Bb?po.$b=Ct(Gr,Zn.Pa.jb[0])?2+Ct(Gr,Zn.Pa.jb[2]):Ct(Gr,Zn.Pa.jb[1]):po.$b=0,Zn.kc&&(po.Ad=Ct(Gr,Zn.Bd)),po.Za=!Ct(Gr,145)+0,po.Za){var $a=po.Ob,io=0;for(Zn=0;4>Zn;++Zn){var xo,sr=za[0+Zn];for(xo=0;4>xo;++xo){sr=Fp[Ni[ea+xo]][sr];for(var Tr=zh[Ct(Gr,sr[0])];0<Tr;)Tr=zh[2*Tr+Ct(Gr,sr[Tr])];sr=-Tr,Ni[ea+xo]=sr}n($a,io,Ni,ea,4),io+=4,za[0+Zn]=sr}}else sr=Ct(Gr,156)?Ct(Gr,128)?1:3:Ct(Gr,163)?2:0,po.Ob[0]=sr,s(Ni,ea,sr,4),s(za,0,sr,4);po.Dd=Ct(Gr,142)?Ct(Gr,114)?Ct(Gr,183)?1:3:2:0}if(Ri.m.Ka)return lo(Qn,7,"Premature end-of-partition0 encountered.");for(;Qn.ja<Qn.za;++Qn.ja){if(Ri=on,Gr=(Mr=Qn).rb[Mr.sb-1],Ni=Mr.rb[Mr.sb+Mr.ja],kn=Mr.ya[Mr.aa+Mr.ja],ea=Mr.kc?kn.Ad:0)Gr.la=Ni.la=0,kn.Za||(Gr.Na=Ni.Na=0),kn.Hc=0,kn.Gc=0,kn.ia=0;else{var Wi,bi;if(Gr=Ni,Ni=Ri,ea=Mr.Pa.Xc,za=Mr.ya[Mr.aa+Mr.ja],po=Mr.pb[za.$b],Zn=za.ad,$a=0,io=Mr.rb[Mr.sb-1],sr=xo=0,s(Zn,$a,0,384),za.Za)var Mo=0,Zi=ea[3];else{Tr=l(16);var wo=Gr.Na+io.Na;if(wo=sl(Ni,ea[1],wo,po.Eb,0,Tr,0),Gr.Na=io.Na=(0<wo)+0,1<wo)Bn(Tr,0,Zn,$a);else{var Ei=Tr[0]+3>>3;for(Tr=0;256>Tr;Tr+=16)Zn[$a+Tr]=Ei}Mo=1,Zi=ea[0]}var Oi=15&Gr.la,Xi=15&io.la;for(Tr=0;4>Tr;++Tr){var si=1&Xi;for(Ei=bi=0;4>Ei;++Ei)Oi=Oi>>1|(si=(wo=sl(Ni,Zi,wo=si+(1&Oi),po.Sc,Mo,Zn,$a))>Mo)<<7,bi=bi<<2|(3<wo?3:1<wo?2:Zn[$a+0]!=0),$a+=16;Oi>>=4,Xi=Xi>>1|si<<7,xo=(xo<<8|bi)>>>0}for(Zi=Oi,Mo=Xi>>4,Wi=0;4>Wi;Wi+=2){for(bi=0,Oi=Gr.la>>4+Wi,Xi=io.la>>4+Wi,Tr=0;2>Tr;++Tr){for(si=1&Xi,Ei=0;2>Ei;++Ei)wo=si+(1&Oi),Oi=Oi>>1|(si=0<(wo=sl(Ni,ea[2],wo,po.Qc,0,Zn,$a)))<<3,bi=bi<<2|(3<wo?3:1<wo?2:Zn[$a+0]!=0),$a+=16;Oi>>=2,Xi=Xi>>1|si<<5}sr|=bi<<4*Wi,Zi|=Oi<<4<<Wi,Mo|=(240&Xi)<<Wi}Gr.la=Zi,io.la=Mo,za.Hc=xo,za.Gc=sr,za.ia=43690&sr?0:po.ia,ea=!(xo|sr)}if(0<Mr.L&&(Mr.wa[Mr.Y+Mr.ja]=Mr.gd[kn.$b][kn.Za],Mr.wa[Mr.Y+Mr.ja].La|=!ea),Ri.Ka)return lo(Qn,7,"Premature end-of-file encountered.")}if(Ys(Qn),Mr=Uo,Ri=1,kn=(on=Qn).D,Gr=0<on.L&&on.M>=on.zb&&on.M<=on.Va,on.Aa==0)t:{if(kn.M=on.M,kn.uc=Gr,Tl(on,kn),Ri=1,kn=(bi=on.D).Nb,Gr=(sr=Cc[on.L])*on.R,Ni=sr/2*on.B,Tr=16*kn*on.R,Ei=8*kn*on.B,ea=on.sa,za=on.ta-Gr+Tr,po=on.qa,Zn=on.ra-Ni+Ei,$a=on.Ha,io=on.Ia-Ni+Ei,Xi=(Oi=bi.M)==0,xo=Oi>=on.Va-1,on.Aa==2&&Tl(on,bi),bi.uc)for(si=(wo=on).D.M,t(wo.D.uc),bi=wo.yb;bi<wo.Hb;++bi){Mo=bi,Zi=si;var ei=(bs=(ra=wo).D).Nb;Wi=ra.R;var bs=bs.wa[bs.Y+Mo],Vo=ra.sa,ko=ra.ta+16*ei*Wi+16*Mo,ns=bs.dd,Ai=bs.tc;if(Ai!=0)if(t(3<=Ai),ra.L==1)0<Mo&&oi(Vo,ko,Wi,Ai+4),bs.La&&al(Vo,ko,Wi,Ai),0<Zi&&Jc(Vo,ko,Wi,Ai+4),bs.La&&ai(Vo,ko,Wi,Ai);else{var ta=ra.B,is=ra.qa,wu=ra.ra+8*ei*ta+8*Mo,cl=ra.Ha,ra=ra.Ia+8*ei*ta+8*Mo;ei=bs.ld,0<Mo&&(ol(Vo,ko,Wi,Ai+4,ns,ei),yc(is,wu,cl,ra,ta,Ai+4,ns,ei)),bs.La&&(Al(Vo,ko,Wi,Ai,ns,ei),vc(is,wu,cl,ra,ta,Ai,ns,ei)),0<Zi&&(fa(Vo,ko,Wi,Ai+4,ns,ei),Wl(is,wu,cl,ra,ta,Ai+4,ns,ei)),bs.La&&(Zl(Vo,ko,Wi,Ai,ns,ei),Wu(is,wu,cl,ra,ta,Ai,ns,ei))}}if(on.ia&&alert("todo:DitherRow"),Mr.put!=null){if(bi=16*Oi,Oi=16*(Oi+1),Xi?(Mr.y=on.sa,Mr.O=on.ta+Tr,Mr.f=on.qa,Mr.N=on.ra+Ei,Mr.ea=on.Ha,Mr.W=on.Ia+Ei):(bi-=sr,Mr.y=ea,Mr.O=za,Mr.f=po,Mr.N=Zn,Mr.ea=$a,Mr.W=io),xo||(Oi-=sr),Oi>Mr.o&&(Oi=Mr.o),Mr.F=null,Mr.J=null,on.Fa!=null&&0<on.Fa.length&&bi<Oi&&(Mr.J=Ui(on,Mr,bi,Oi-bi),Mr.F=on.mb,Mr.F==null&&Mr.F.length==0)){Ri=lo(on,3,"Could not decode alpha data.");break t}bi<Mr.j&&(sr=Mr.j-bi,bi=Mr.j,t(!(1&sr)),Mr.O+=on.R*sr,Mr.N+=on.B*(sr>>1),Mr.W+=on.B*(sr>>1),Mr.F!=null&&(Mr.J+=Mr.width*sr)),bi<Oi&&(Mr.O+=Mr.v,Mr.N+=Mr.v>>1,Mr.W+=Mr.v>>1,Mr.F!=null&&(Mr.J+=Mr.v),Mr.ka=bi-Mr.j,Mr.U=Mr.va-Mr.v,Mr.T=Oi-bi,Ri=Mr.put(Mr))}kn+1!=on.Ic||xo||(n(on.sa,on.ta-Gr,ea,za+16*on.R,Gr),n(on.qa,on.ra-Ni,po,Zn+8*on.B,Ni),n(on.Ha,on.Ia-Ni,$a,io+8*on.B,Ni))}if(!Ri)return lo(Qn,6,"Output aborted.")}return 1}(je,xt)),xt.bc!=null&&xt.bc(xt),Pt&=1}return Pt?(je.cb=0,Pt):0})(T,J)||(M=T.a)}}else M=T.a}M==0&&_e.Oa!=null&&_e.Oa.fd&&(M=_o(_e.ba))}_e=M}ge=_e!=0?null:11>ge?Ce.f.RGBA.eb:Ce.f.kb.y}else ge=null;return ge};var ul=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function v(ve,Re){for(var le="",G=0;G<4;G++)le+=String.fromCharCode(ve[Re++]);return le}function S(ve,Re){return ve[Re+0]|ve[Re+1]<<8}function P(ve,Re){return(ve[Re+0]|ve[Re+1]<<8|ve[Re+2]<<16)>>>0}function D(ve,Re){return(ve[Re+0]|ve[Re+1]<<8|ve[Re+2]<<16|ve[Re+3]<<24)>>>0}new y;var E=[0],F=[0],z=[],W=new y,$=e,Y=function(ve,Re){var le={},G=0,Ae=!1,we=0,lt=0;if(le.frames=[],!function(ne,Ee){for(var Ne=0;Ne<4;Ne++)if(ne[Ee+Ne]!="RIFF".charCodeAt(Ne))return!0;return!1}(ve,Re)){for(D(ve,Re+=4),Re+=8;Re<ve.length;){var pt=v(ve,Re),At=D(ve,Re+=4);Re+=4;var Ze=At+(1&At);switch(pt){case"VP8 ":case"VP8L":le.frames[G]===void 0&&(le.frames[G]={}),(St=le.frames[G]).src_off=Ae?lt:Re-8,St.src_size=we+At+8,G++,Ae&&(Ae=!1,we=0,lt=0);break;case"VP8X":(St=le.header={}).feature_flags=ve[Re];var tt=Re+4;St.canvas_width=1+P(ve,tt),tt+=3,St.canvas_height=1+P(ve,tt),tt+=3;break;case"ALPH":Ae=!0,we=Ze+8,lt=Re-8;break;case"ANIM":(St=le.header).bgcolor=D(ve,Re),tt=Re+4,St.loop_count=S(ve,tt),tt+=2;break;case"ANMF":var Ot,St;(St=le.frames[G]={}).offset_x=2*P(ve,Re),Re+=3,St.offset_y=2*P(ve,Re),Re+=3,St.width=1+P(ve,Re),Re+=3,St.height=1+P(ve,Re),Re+=3,St.duration=P(ve,Re),Re+=3,Ot=ve[Re++],St.dispose=1&Ot,St.blend=Ot>>1&1}pt!="ANMF"&&(Re+=Ze)}return le}}($,0);Y.response=$,Y.rgbaoutput=!0,Y.dataurl=!1;var Q=Y.header?Y.header:null,K=Y.frames?Y.frames:null;if(Q){Q.loop_counter=Q.loop_count,E=[Q.canvas_height],F=[Q.canvas_width];for(var xe=0;xe<K.length&&K[xe].blend!=0;xe++);}var de=K[0],be=W.WebPDecodeRGBA($,de.src_off,de.src_size,F,E);de.rgba=be,de.imgwidth=F[0],de.imgheight=E[0];for(var me=0;me<F[0]*E[0]*4;me++)z[me]=be[me];return this.width=F,this.height=E,this.data=z,this}(function(e){var t,r,n,s,l,f,a,y,v,S=function(ne){return ne=ne||{},this.isStrokeTransparent=ne.isStrokeTransparent||!1,this.strokeOpacity=ne.strokeOpacity||1,this.strokeStyle=ne.strokeStyle||"#000000",this.fillStyle=ne.fillStyle||"#000000",this.isFillTransparent=ne.isFillTransparent||!1,this.fillOpacity=ne.fillOpacity||1,this.font=ne.font||"10px sans-serif",this.textBaseline=ne.textBaseline||"alphabetic",this.textAlign=ne.textAlign||"left",this.lineWidth=ne.lineWidth||1,this.lineJoin=ne.lineJoin||"miter",this.lineCap=ne.lineCap||"butt",this.path=ne.path||[],this.transform=ne.transform!==void 0?ne.transform.clone():new y,this.globalCompositeOperation=ne.globalCompositeOperation||"normal",this.globalAlpha=ne.globalAlpha||1,this.clip_path=ne.clip_path||[],this.currentPoint=ne.currentPoint||new f,this.miterLimit=ne.miterLimit||10,this.lastPoint=ne.lastPoint||new f,this.lineDashOffset=ne.lineDashOffset||0,this.lineDash=ne.lineDash||[],this.margin=ne.margin||[0,0,0,0],this.prevPageLastElemOffset=ne.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ne.ignoreClearRect!="boolean"||ne.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new P(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,f=this.internal.Point,a=this.internal.Rectangle,y=this.internal.Matrix,v=new S}]);var P=function(ne){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=ne;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var Ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ne},set:function(It){Ne=!!It}});var qe=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return qe},set:function(It){qe=!!It}});var Je=0;Object.defineProperty(this,"posX",{get:function(){return Je},set:function(It){isNaN(It)||(Je=It)}});var gt=0;Object.defineProperty(this,"posY",{get:function(){return gt},set:function(It){isNaN(It)||(gt=It)}}),Object.defineProperty(this,"margin",{get:function(){return v.margin},set:function(It){var Ue;typeof It=="number"?Ue=[It,It,It,It]:((Ue=new Array(4))[0]=It[0],Ue[1]=It.length>=2?It[1]:Ue[0],Ue[2]=It.length>=3?It[2]:Ue[0],Ue[3]=It.length>=4?It[3]:Ue[1]),v.margin=Ue}});var bt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return bt},set:function(It){bt=It}});var ft=0;Object.defineProperty(this,"lastBreak",{get:function(){return ft},set:function(It){ft=It}});var Ct=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ct},set:function(It){Ct=It}}),Object.defineProperty(this,"ctx",{get:function(){return v},set:function(It){It instanceof S&&(v=It)}}),Object.defineProperty(this,"path",{get:function(){return v.path},set:function(It){v.path=It}});var Ut=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ut},set:function(It){Ut=It}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(It){var Ue;Ue=D(It),this.ctx.fillStyle=Ue.style,this.ctx.isFillTransparent=Ue.a===0,this.ctx.fillOpacity=Ue.a,this.pdf.setFillColor(Ue.r,Ue.g,Ue.b,{a:Ue.a}),this.pdf.setTextColor(Ue.r,Ue.g,Ue.b,{a:Ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(It){var Ue=D(It);this.ctx.strokeStyle=Ue.style,this.ctx.isStrokeTransparent=Ue.a===0,this.ctx.strokeOpacity=Ue.a,Ue.a===0?this.pdf.setDrawColor(255,255,255):(Ue.a,this.pdf.setDrawColor(Ue.r,Ue.g,Ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(It){["butt","round","square"].indexOf(It)!==-1&&(this.ctx.lineCap=It,this.pdf.setLineCap(It))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(It){isNaN(It)||(this.ctx.lineWidth=It,this.pdf.setLineWidth(It))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(It){["bevel","round","miter"].indexOf(It)!==-1&&(this.ctx.lineJoin=It,this.pdf.setLineJoin(It))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(It){isNaN(It)||(this.ctx.miterLimit=It,this.pdf.setMiterLimit(It))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(It){this.ctx.textBaseline=It}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(It){["right","end","center","left","start"].indexOf(It)!==-1&&(this.ctx.textAlign=It)}});var gr=null,rr=null;Object.defineProperty(this,"fontFaces",{get:function(){return rr},set:function(It){gr=null,rr=It}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(It){var Ue;if(this.ctx.font=It,(Ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(It))!==null){var Lr=Ue[1];Ue[2];var Nr=Ue[3],Pr=Ue[4];Ue[5];var Ht=Ue[6],Er=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pr)[2];Pr=Math.floor(Er==="px"?parseFloat(Pr)*this.pdf.internal.scaleFactor:Er==="em"?parseFloat(Pr)*this.pdf.getFontSize():parseFloat(Pr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pr);var vr=function(Br){var _r,ot,ae=[],oe=Br.trim();if(oe==="")return jw;if(oe in BI)return[BI[oe]];for(;oe!=="";){switch(ot=null,_r=(oe=$I(oe)).charAt(0)){case'"':case"'":ot=KW(oe.substring(1),_r);break;default:ot=JW(oe)}if(ot===null||(ae.push(ot[0]),(oe=$I(ot[1]))!==""&&oe.charAt(0)!==","))return jw;oe=oe.replace(/^,/,"")}return ae}(Ht);if(this.fontFaces){var dr=function(Br,_r){if(gr===null){var ot=function(ae){var oe=[];return Object.keys(ae).forEach(function(ye){ae[ye].forEach(function(De){var Ve=null;switch(De){case"bold":Ve={family:ye,weight:"bold"};break;case"italic":Ve={family:ye,style:"italic"};break;case"bolditalic":Ve={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Ve={family:ye}}Ve!==null&&(Ve.ref={name:ye,style:De},oe.push(Ve))})}),oe}(Br.getFontList());gr=function(ae){for(var oe={},ye=0;ye<ae.length;++ye){var De=$w(ae[ye]),Ve=De.family,rt=De.stretch,ht=De.style,ct=De.weight;oe[Ve]=oe[Ve]||{},oe[Ve][rt]=oe[Ve][rt]||{},oe[Ve][rt][ht]=oe[Ve][rt][ht]||{},oe[Ve][rt][ht][ct]=De}return oe}(ot.concat(_r))}return gr}(this.pdf,this.fontFaces),qr=vr.map(function(Br){return{family:Br,stretch:"normal",weight:Nr,style:Lr}}),En=function(Br,_r,ot){for(var ae=(ot=ot||{}).defaultFontFamily||"times",oe=Object.assign({},YW,ot.genericFontFamilies||{}),ye=null,De=null,Ve=0;Ve<_r.length;++Ve)if(oe[(ye=$w(_r[Ve])).family]&&(ye.family=oe[ye.family]),Br.hasOwnProperty(ye.family)){De=Br[ye.family];break}if(!(De=De||Br[ae]))throw new Error("Could not find a font-family for the rule '"+zI(ye)+"' and default family '"+ae+"'.");if(De=function(rt,ht){if(ht[rt])return ht[rt];var ct=LS[rt],Lt=ct<=LS.normal?-1:1,wt=FI(ht,NN,ct,Lt);if(!wt)throw new Error("Could not find a matching font-stretch value for "+rt);return wt}(ye.stretch,De),De=function(rt,ht){if(ht[rt])return ht[rt];for(var ct=RN[rt],Lt=0;Lt<ct.length;++Lt)if(ht[ct[Lt]])return ht[ct[Lt]];throw new Error("Could not find a matching font-style for "+rt)}(ye.style,De),!(De=function(rt,ht){if(ht[rt])return ht[rt];if(rt===400&&ht[500])return ht[500];if(rt===500&&ht[400])return ht[400];var ct=XW[rt],Lt=FI(ht,ON,ct,rt<400?-1:1);if(!Lt)throw new Error("Could not find a matching font-weight for value "+rt);return Lt}(ye.weight,De)))throw new Error("Failed to resolve a font for the rule '"+zI(ye)+"'.");return De}(dr,qr);this.pdf.setFont(En.ref.name,En.ref.style)}else{var cn="";(Nr==="bold"||parseInt(Nr,10)>=700||Lr==="bold")&&(cn="bold"),Lr==="italic"&&(cn+="italic"),cn.length===0&&(cn="normal");for(var Jr="",An={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},en=0;en<vr.length;en++){if(this.pdf.internal.getFont(vr[en],cn,{noFallback:!0,disableWarning:!0})!==void 0){Jr=vr[en];break}if(cn==="bolditalic"&&this.pdf.internal.getFont(vr[en],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Jr=vr[en],cn="bold";else if(this.pdf.internal.getFont(vr[en],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Jr=vr[en],cn="normal";break}}if(Jr===""){for(var Ur=0;Ur<vr.length;Ur++)if(An[vr[Ur]]){Jr=An[vr[Ur]];break}}Jr=Jr===""?"Times":Jr,this.pdf.setFont(Jr,cn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(It){this.ctx.globalCompositeOperation=It}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(It){this.ctx.globalAlpha=It}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(It){this.ctx.lineDashOffset=It,St.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(It){this.ctx.lineDash=It,St.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(It){this.ctx.ignoreClearRect=!!It}})};P.prototype.setLineDash=function(ne){this.lineDash=ne},P.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},P.prototype.fill=function(){K.call(this,"fill",!1)},P.prototype.stroke=function(){K.call(this,"stroke",!1)},P.prototype.beginPath=function(){this.path=[{type:"begin"}]},P.prototype.moveTo=function(ne,Ee){if(isNaN(ne)||isNaN(Ee))throw mo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ne=this.ctx.transform.applyToPoint(new f(ne,Ee));this.path.push({type:"mt",x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new f(ne,Ee)},P.prototype.closePath=function(){var ne=new f(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&Ji(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){ne=new f(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new f(ne.x,ne.y)},P.prototype.lineTo=function(ne,Ee){if(isNaN(ne)||isNaN(Ee))throw mo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ne=this.ctx.transform.applyToPoint(new f(ne,Ee));this.path.push({type:"lt",x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new f(Ne.x,Ne.y)},P.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},P.prototype.quadraticCurveTo=function(ne,Ee,Ne,qe){if(isNaN(Ne)||isNaN(qe)||isNaN(ne)||isNaN(Ee))throw mo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Je=this.ctx.transform.applyToPoint(new f(Ne,qe)),gt=this.ctx.transform.applyToPoint(new f(ne,Ee));this.path.push({type:"qct",x1:gt.x,y1:gt.y,x:Je.x,y:Je.y}),this.ctx.lastPoint=new f(Je.x,Je.y)},P.prototype.bezierCurveTo=function(ne,Ee,Ne,qe,Je,gt){if(isNaN(Je)||isNaN(gt)||isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe))throw mo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var bt=this.ctx.transform.applyToPoint(new f(Je,gt)),ft=this.ctx.transform.applyToPoint(new f(ne,Ee)),Ct=this.ctx.transform.applyToPoint(new f(Ne,qe));this.path.push({type:"bct",x1:ft.x,y1:ft.y,x2:Ct.x,y2:Ct.y,x:bt.x,y:bt.y}),this.ctx.lastPoint=new f(bt.x,bt.y)},P.prototype.arc=function(ne,Ee,Ne,qe,Je,gt){if(isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe)||isNaN(Je))throw mo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(gt=!!gt,!this.ctx.transform.isIdentity){var bt=this.ctx.transform.applyToPoint(new f(ne,Ee));ne=bt.x,Ee=bt.y;var ft=this.ctx.transform.applyToPoint(new f(0,Ne)),Ct=this.ctx.transform.applyToPoint(new f(0,0));Ne=Math.sqrt(Math.pow(ft.x-Ct.x,2)+Math.pow(ft.y-Ct.y,2))}Math.abs(Je-qe)>=2*Math.PI&&(qe=0,Je=2*Math.PI),this.path.push({type:"arc",x:ne,y:Ee,radius:Ne,startAngle:qe,endAngle:Je,counterclockwise:gt})},P.prototype.arcTo=function(ne,Ee,Ne,qe,Je){throw new Error("arcTo not implemented.")},P.prototype.rect=function(ne,Ee,Ne,qe){if(isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe))throw mo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ne,Ee),this.lineTo(ne+Ne,Ee),this.lineTo(ne+Ne,Ee+qe),this.lineTo(ne,Ee+qe),this.lineTo(ne,Ee),this.lineTo(ne+Ne,Ee),this.lineTo(ne,Ee)},P.prototype.fillRect=function(ne,Ee,Ne,qe){if(isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe))throw mo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!E.call(this)){var Je={};this.lineCap!=="butt"&&(Je.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Je.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ne,Ee,Ne,qe),this.fill(),Je.hasOwnProperty("lineCap")&&(this.lineCap=Je.lineCap),Je.hasOwnProperty("lineJoin")&&(this.lineJoin=Je.lineJoin)}},P.prototype.strokeRect=function(ne,Ee,Ne,qe){if(isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe))throw mo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");F.call(this)||(this.beginPath(),this.rect(ne,Ee,Ne,qe),this.stroke())},P.prototype.clearRect=function(ne,Ee,Ne,qe){if(isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe))throw mo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ne,Ee,Ne,qe))},P.prototype.save=function(ne){ne=typeof ne!="boolean"||ne;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Ne=0;Ne<this.pdf.internal.getNumberOfPages();Ne++)this.pdf.setPage(Ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),ne){this.ctx.fontSize=this.pdf.internal.getFontSize();var qe=new S(this.ctx);this.ctxStack.push(this.ctx),this.ctx=qe}},P.prototype.restore=function(ne){ne=typeof ne!="boolean"||ne;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Ne=0;Ne<this.pdf.internal.getNumberOfPages();Ne++)this.pdf.setPage(Ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),ne&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},P.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var D=function(ne){var Ee,Ne,qe,Je;if(ne.isCanvasGradient===!0&&(ne=ne.getColor()),!ne)return{r:0,g:0,b:0,a:0,style:ne};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ne))Ee=0,Ne=0,qe=0,Je=0;else{var gt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ne);if(gt!==null)Ee=parseInt(gt[1]),Ne=parseInt(gt[2]),qe=parseInt(gt[3]),Je=1;else if((gt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ne))!==null)Ee=parseInt(gt[1]),Ne=parseInt(gt[2]),qe=parseInt(gt[3]),Je=parseFloat(gt[4]);else{if(Je=1,typeof ne=="string"&&ne.charAt(0)!=="#"){var bt=new AN(ne);ne=bt.ok?bt.toHex():"#000000"}ne.length===4?(Ee=ne.substring(1,2),Ee+=Ee,Ne=ne.substring(2,3),Ne+=Ne,qe=ne.substring(3,4),qe+=qe):(Ee=ne.substring(1,3),Ne=ne.substring(3,5),qe=ne.substring(5,7)),Ee=parseInt(Ee,16),Ne=parseInt(Ne,16),qe=parseInt(qe,16)}}return{r:Ee,g:Ne,b:qe,a:Je,style:ne}},E=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},F=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};P.prototype.fillText=function(ne,Ee,Ne,qe){if(isNaN(Ee)||isNaN(Ne)||typeof ne!="string")throw mo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(qe=isNaN(qe)?void 0:qe,!E.call(this)){var Je=Ze(this.ctx.transform.rotation),gt=this.ctx.transform.scaleX;G.call(this,{text:ne,x:Ee,y:Ne,scale:gt,angle:Je,align:this.textAlign,maxWidth:qe})}},P.prototype.strokeText=function(ne,Ee,Ne,qe){if(isNaN(Ee)||isNaN(Ne)||typeof ne!="string")throw mo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!F.call(this)){qe=isNaN(qe)?void 0:qe;var Je=Ze(this.ctx.transform.rotation),gt=this.ctx.transform.scaleX;G.call(this,{text:ne,x:Ee,y:Ne,scale:gt,renderingMode:"stroke",angle:Je,align:this.textAlign,maxWidth:qe})}},P.prototype.measureText=function(ne){if(typeof ne!="string")throw mo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,Ne=this.pdf.internal.scaleFactor,qe=Ee.internal.getFontSize(),Je=Ee.getStringUnitWidth(ne)*qe/Ee.internal.scaleFactor;return new function(gt){var bt=(gt=gt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return bt}}),this}({width:Je*=Math.round(96*Ne/72*1e4)/1e4})},P.prototype.scale=function(ne,Ee){if(isNaN(ne)||isNaN(Ee))throw mo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ne=new y(ne,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(Ne)},P.prototype.rotate=function(ne){if(isNaN(ne))throw mo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new y(Math.cos(ne),Math.sin(ne),-Math.sin(ne),Math.cos(ne),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},P.prototype.translate=function(ne,Ee){if(isNaN(ne)||isNaN(Ee))throw mo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ne=new y(1,0,0,1,ne,Ee);this.ctx.transform=this.ctx.transform.multiply(Ne)},P.prototype.transform=function(ne,Ee,Ne,qe,Je,gt){if(isNaN(ne)||isNaN(Ee)||isNaN(Ne)||isNaN(qe)||isNaN(Je)||isNaN(gt))throw mo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var bt=new y(ne,Ee,Ne,qe,Je,gt);this.ctx.transform=this.ctx.transform.multiply(bt)},P.prototype.setTransform=function(ne,Ee,Ne,qe,Je,gt){ne=isNaN(ne)?1:ne,Ee=isNaN(Ee)?0:Ee,Ne=isNaN(Ne)?0:Ne,qe=isNaN(qe)?1:qe,Je=isNaN(Je)?0:Je,gt=isNaN(gt)?0:gt,this.ctx.transform=new y(ne,Ee,Ne,qe,Je,gt)};var z=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};P.prototype.drawImage=function(ne,Ee,Ne,qe,Je,gt,bt,ft,Ct){var Ut=this.pdf.getImageProperties(ne),gr=1,rr=1,It=1,Ue=1;qe!==void 0&&ft!==void 0&&(It=ft/qe,Ue=Ct/Je,gr=Ut.width/qe*ft/qe,rr=Ut.height/Je*Ct/Je),gt===void 0&&(gt=Ee,bt=Ne,Ee=0,Ne=0),qe!==void 0&&ft===void 0&&(ft=qe,Ct=Je),qe===void 0&&ft===void 0&&(ft=Ut.width,Ct=Ut.height);for(var Lr,Nr=this.ctx.transform.decompose(),Pr=Ze(Nr.rotate.shx),Ht=new y,Er=(Ht=(Ht=(Ht=Ht.multiply(Nr.translate)).multiply(Nr.skew)).multiply(Nr.scale)).applyToRectangle(new a(gt-Ee*It,bt-Ne*Ue,qe*gr,Je*rr)),vr=W.call(this,Er),dr=[],qr=0;qr<vr.length;qr+=1)dr.indexOf(vr[qr])===-1&&dr.push(vr[qr]);if(Q(dr),this.autoPaging)for(var En=dr[0],cn=dr[dr.length-1],Jr=En;Jr<cn+1;Jr++){this.pdf.setPage(Jr);var An=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],en=Jr===1?this.posY+this.margin[0]:this.margin[0],Ur=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Br=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_r=Jr===1?0:Ur+(Jr-2)*Br;if(this.ctx.clip_path.length!==0){var ot=this.path;Lr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Lr,this.posX+this.margin[3],-_r+en+this.ctx.prevPageLastElemOffset),xe.call(this,"fill",!0),this.path=ot}var ae=JSON.parse(JSON.stringify(Er));ae=Y([ae],this.posX+this.margin[3],-_r+en+this.ctx.prevPageLastElemOffset)[0];var oe=(Jr>En||Jr<cn)&&z.call(this);oe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],An,Br,null).clip().discardPath()),this.pdf.addImage(ne,"JPEG",ae.x,ae.y,ae.w,ae.h,null,null,Pr),oe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ne,"JPEG",Er.x,Er.y,Er.w,Er.h,null,null,Pr)};var W=function(ne,Ee,Ne){var qe=[];Ee=Ee||this.pdf.internal.pageSize.width,Ne=Ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Je=this.posY+this.ctx.prevPageLastElemOffset;switch(ne.type){default:case"mt":case"lt":qe.push(Math.floor((ne.y+Je)/Ne)+1);break;case"arc":qe.push(Math.floor((ne.y+Je-ne.radius)/Ne)+1),qe.push(Math.floor((ne.y+Je+ne.radius)/Ne)+1);break;case"qct":var gt=tt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ne.x1,ne.y1,ne.x,ne.y);qe.push(Math.floor((gt.y+Je)/Ne)+1),qe.push(Math.floor((gt.y+gt.h+Je)/Ne)+1);break;case"bct":var bt=Ot(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ne.x1,ne.y1,ne.x2,ne.y2,ne.x,ne.y);qe.push(Math.floor((bt.y+Je)/Ne)+1),qe.push(Math.floor((bt.y+bt.h+Je)/Ne)+1);break;case"rect":qe.push(Math.floor((ne.y+Je)/Ne)+1),qe.push(Math.floor((ne.y+ne.h+Je)/Ne)+1)}for(var ft=0;ft<qe.length;ft+=1)for(;this.pdf.internal.getNumberOfPages()<qe[ft];)$.call(this);return qe},$=function(){var ne=this.fillStyle,Ee=this.strokeStyle,Ne=this.font,qe=this.lineCap,Je=this.lineWidth,gt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ne,this.strokeStyle=Ee,this.font=Ne,this.lineCap=qe,this.lineWidth=Je,this.lineJoin=gt},Y=function(ne,Ee,Ne){for(var qe=0;qe<ne.length;qe++)switch(ne[qe].type){case"bct":ne[qe].x2+=Ee,ne[qe].y2+=Ne;case"qct":ne[qe].x1+=Ee,ne[qe].y1+=Ne;default:ne[qe].x+=Ee,ne[qe].y+=Ne}return ne},Q=function(ne){return ne.sort(function(Ee,Ne){return Ee-Ne})},K=function(ne,Ee){for(var Ne,qe,Je=this.fillStyle,gt=this.strokeStyle,bt=this.lineCap,ft=this.lineWidth,Ct=Math.abs(ft*this.ctx.transform.scaleX),Ut=this.lineJoin,gr=JSON.parse(JSON.stringify(this.path)),rr=JSON.parse(JSON.stringify(this.path)),It=[],Ue=0;Ue<rr.length;Ue++)if(rr[Ue].x!==void 0)for(var Lr=W.call(this,rr[Ue]),Nr=0;Nr<Lr.length;Nr+=1)It.indexOf(Lr[Nr])===-1&&It.push(Lr[Nr]);for(var Pr=0;Pr<It.length;Pr++)for(;this.pdf.internal.getNumberOfPages()<It[Pr];)$.call(this);if(Q(It),this.autoPaging)for(var Ht=It[0],Er=It[It.length-1],vr=Ht;vr<Er+1;vr++){this.pdf.setPage(vr),this.fillStyle=Je,this.strokeStyle=gt,this.lineCap=bt,this.lineWidth=Ct,this.lineJoin=Ut;var dr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qr=vr===1?this.posY+this.margin[0]:this.margin[0],En=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],cn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jr=vr===1?0:En+(vr-2)*cn;if(this.ctx.clip_path.length!==0){var An=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Ne,this.posX+this.margin[3],-Jr+qr+this.ctx.prevPageLastElemOffset),xe.call(this,ne,!0),this.path=An}if(qe=JSON.parse(JSON.stringify(gr)),this.path=Y(qe,this.posX+this.margin[3],-Jr+qr+this.ctx.prevPageLastElemOffset),Ee===!1||vr===0){var en=(vr>Ht||vr<Er)&&z.call(this);en&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],dr,cn,null).clip().discardPath()),xe.call(this,ne,Ee),en&&this.pdf.restoreGraphicsState()}this.lineWidth=ft}else this.lineWidth=Ct,xe.call(this,ne,Ee),this.lineWidth=ft;this.path=gr},xe=function(ne,Ee){if((ne!=="stroke"||Ee||!F.call(this))&&(ne==="stroke"||Ee||!E.call(this))){for(var Ne,qe,Je=[],gt=this.path,bt=0;bt<gt.length;bt++){var ft=gt[bt];switch(ft.type){case"begin":Je.push({begin:!0});break;case"close":Je.push({close:!0});break;case"mt":Je.push({start:ft,deltas:[],abs:[]});break;case"lt":var Ct=Je.length;if(gt[bt-1]&&!isNaN(gt[bt-1].x)&&(Ne=[ft.x-gt[bt-1].x,ft.y-gt[bt-1].y],Ct>0)){for(;Ct>=0;Ct--)if(Je[Ct-1].close!==!0&&Je[Ct-1].begin!==!0){Je[Ct-1].deltas.push(Ne),Je[Ct-1].abs.push(ft);break}}break;case"bct":Ne=[ft.x1-gt[bt-1].x,ft.y1-gt[bt-1].y,ft.x2-gt[bt-1].x,ft.y2-gt[bt-1].y,ft.x-gt[bt-1].x,ft.y-gt[bt-1].y],Je[Je.length-1].deltas.push(Ne);break;case"qct":var Ut=gt[bt-1].x+2/3*(ft.x1-gt[bt-1].x),gr=gt[bt-1].y+2/3*(ft.y1-gt[bt-1].y),rr=ft.x+2/3*(ft.x1-ft.x),It=ft.y+2/3*(ft.y1-ft.y),Ue=ft.x,Lr=ft.y;Ne=[Ut-gt[bt-1].x,gr-gt[bt-1].y,rr-gt[bt-1].x,It-gt[bt-1].y,Ue-gt[bt-1].x,Lr-gt[bt-1].y],Je[Je.length-1].deltas.push(Ne);break;case"arc":Je.push({deltas:[],abs:[],arc:!0}),Array.isArray(Je[Je.length-1].abs)&&Je[Je.length-1].abs.push(ft)}}qe=Ee?null:ne==="stroke"?"stroke":"fill";for(var Nr=!1,Pr=0;Pr<Je.length;Pr++)if(Je[Pr].arc)for(var Ht=Je[Pr].abs,Er=0;Er<Ht.length;Er++){var vr=Ht[Er];vr.type==="arc"?me.call(this,vr.x,vr.y,vr.radius,vr.startAngle,vr.endAngle,vr.counterclockwise,void 0,Ee,!Nr):Ae.call(this,vr.x,vr.y),Nr=!0}else if(Je[Pr].close===!0)this.pdf.internal.out("h"),Nr=!1;else if(Je[Pr].begin!==!0){var dr=Je[Pr].start.x,qr=Je[Pr].start.y;we.call(this,Je[Pr].deltas,dr,qr),Nr=!0}qe&&ve.call(this,qe),Ee&&Re.call(this)}},de=function(ne){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ne=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ne-Ne;case"top":return ne+Ee-Ne;case"hanging":return ne+Ee-2*Ne;case"middle":return ne+Ee/2-Ne;default:return ne}},be=function(ne){return ne+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};P.prototype.createLinearGradient=function(){var ne=function(){};return ne.colorStops=[],ne.addColorStop=function(Ee,Ne){this.colorStops.push([Ee,Ne])},ne.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ne.isCanvasGradient=!0,ne},P.prototype.createPattern=function(){return this.createLinearGradient()},P.prototype.createRadialGradient=function(){return this.createLinearGradient()};var me=function(ne,Ee,Ne,qe,Je,gt,bt,ft,Ct){for(var Ut=pt.call(this,Ne,qe,Je,gt),gr=0;gr<Ut.length;gr++){var rr=Ut[gr];gr===0&&(Ct?le.call(this,rr.x1+ne,rr.y1+Ee):Ae.call(this,rr.x1+ne,rr.y1+Ee)),lt.call(this,ne,Ee,rr.x2,rr.y2,rr.x3,rr.y3,rr.x4,rr.y4)}ft?Re.call(this):ve.call(this,bt)},ve=function(ne){switch(ne){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Re=function(){this.pdf.clip(),this.pdf.discardPath()},le=function(ne,Ee){this.pdf.internal.out(r(ne)+" "+n(Ee)+" m")},G=function(ne){var Ee;switch(ne.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;default:Ee="left"}var Ne=this.pdf.getTextDimensions(ne.text),qe=de.call(this,ne.y),Je=be.call(this,qe)-Ne.h,gt=this.ctx.transform.applyToPoint(new f(ne.x,qe)),bt=this.ctx.transform.decompose(),ft=new y;ft=(ft=(ft=ft.multiply(bt.translate)).multiply(bt.skew)).multiply(bt.scale);for(var Ct,Ut,gr,rr=this.ctx.transform.applyToRectangle(new a(ne.x,qe,Ne.w,Ne.h)),It=ft.applyToRectangle(new a(ne.x,Je,Ne.w,Ne.h)),Ue=W.call(this,It),Lr=[],Nr=0;Nr<Ue.length;Nr+=1)Lr.indexOf(Ue[Nr])===-1&&Lr.push(Ue[Nr]);if(Q(Lr),this.autoPaging)for(var Pr=Lr[0],Ht=Lr[Lr.length-1],Er=Pr;Er<Ht+1;Er++){this.pdf.setPage(Er);var vr=Er===1?this.posY+this.margin[0]:this.margin[0],dr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qr=this.pdf.internal.pageSize.height-this.margin[2],En=qr-this.margin[0],cn=this.pdf.internal.pageSize.width-this.margin[1],Jr=cn-this.margin[3],An=Er===1?0:dr+(Er-2)*En;if(this.ctx.clip_path.length!==0){var en=this.path;Ct=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Ct,this.posX+this.margin[3],-1*An+vr),xe.call(this,"fill",!0),this.path=en}var Ur=Y([JSON.parse(JSON.stringify(It))],this.posX+this.margin[3],-An+vr+this.ctx.prevPageLastElemOffset)[0];ne.scale>=.01&&(Ut=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ut*ne.scale),gr=this.lineWidth,this.lineWidth=gr*ne.scale);var Br=this.autoPaging!=="text";if(Br||Ur.y+Ur.h<=qr){if(Br||Ur.y>=vr&&Ur.x<=cn){var _r=Br?ne.text:this.pdf.splitTextToSize(ne.text,ne.maxWidth||cn-Ur.x)[0],ot=Y([JSON.parse(JSON.stringify(rr))],this.posX+this.margin[3],-An+vr+this.ctx.prevPageLastElemOffset)[0],ae=Br&&(Er>Pr||Er<Ht)&&z.call(this);ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jr,En,null).clip().discardPath()),this.pdf.text(_r,ot.x,ot.y,{angle:ne.angle,align:Ee,renderingMode:ne.renderingMode}),ae&&this.pdf.restoreGraphicsState()}}else Ur.y<qr&&(this.ctx.prevPageLastElemOffset+=qr-Ur.y);ne.scale>=.01&&(this.pdf.setFontSize(Ut),this.lineWidth=gr)}else ne.scale>=.01&&(Ut=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ut*ne.scale),gr=this.lineWidth,this.lineWidth=gr*ne.scale),this.pdf.text(ne.text,gt.x+this.posX,gt.y+this.posY,{angle:ne.angle,align:Ee,renderingMode:ne.renderingMode,maxWidth:ne.maxWidth}),ne.scale>=.01&&(this.pdf.setFontSize(Ut),this.lineWidth=gr)},Ae=function(ne,Ee,Ne,qe){Ne=Ne||0,qe=qe||0,this.pdf.internal.out(r(ne+Ne)+" "+n(Ee+qe)+" l")},we=function(ne,Ee,Ne){return this.pdf.lines(ne,Ee,Ne,null,null)},lt=function(ne,Ee,Ne,qe,Je,gt,bt,ft){this.pdf.internal.out([t(s(Ne+ne)),t(l(qe+Ee)),t(s(Je+ne)),t(l(gt+Ee)),t(s(bt+ne)),t(l(ft+Ee)),"c"].join(" "))},pt=function(ne,Ee,Ne,qe){for(var Je=2*Math.PI,gt=Math.PI/2;Ee>Ne;)Ee-=Je;var bt=Math.abs(Ne-Ee);bt<Je&&qe&&(bt=Je-bt);for(var ft=[],Ct=qe?-1:1,Ut=Ee;bt>1e-5;){var gr=Ut+Ct*Math.min(bt,gt);ft.push(At.call(this,ne,Ut,gr)),bt-=Math.abs(gr-Ut),Ut=gr}return ft},At=function(ne,Ee,Ne){var qe=(Ne-Ee)/2,Je=ne*Math.cos(qe),gt=ne*Math.sin(qe),bt=Je,ft=-gt,Ct=bt*bt+ft*ft,Ut=Ct+bt*Je+ft*gt,gr=4/3*(Math.sqrt(2*Ct*Ut)-Ut)/(bt*gt-ft*Je),rr=bt-gr*ft,It=ft+gr*bt,Ue=rr,Lr=-It,Nr=qe+Ee,Pr=Math.cos(Nr),Ht=Math.sin(Nr);return{x1:ne*Math.cos(Ee),y1:ne*Math.sin(Ee),x2:rr*Pr-It*Ht,y2:rr*Ht+It*Pr,x3:Ue*Pr-Lr*Ht,y3:Ue*Ht+Lr*Pr,x4:ne*Math.cos(Ne),y4:ne*Math.sin(Ne)}},Ze=function(ne){return 180*ne/Math.PI},tt=function(ne,Ee,Ne,qe,Je,gt){var bt=ne+.5*(Ne-ne),ft=Ee+.5*(qe-Ee),Ct=Je+.5*(Ne-Je),Ut=gt+.5*(qe-gt),gr=Math.min(ne,Je,bt,Ct),rr=Math.max(ne,Je,bt,Ct),It=Math.min(Ee,gt,ft,Ut),Ue=Math.max(Ee,gt,ft,Ut);return new a(gr,It,rr-gr,Ue-It)},Ot=function(ne,Ee,Ne,qe,Je,gt,bt,ft){var Ct,Ut,gr,rr,It,Ue,Lr,Nr,Pr,Ht,Er,vr,dr,qr,En=Ne-ne,cn=qe-Ee,Jr=Je-Ne,An=gt-qe,en=bt-Je,Ur=ft-gt;for(Ut=0;Ut<41;Ut++)Pr=(Lr=(gr=ne+(Ct=Ut/40)*En)+Ct*((It=Ne+Ct*Jr)-gr))+Ct*(It+Ct*(Je+Ct*en-It)-Lr),Ht=(Nr=(rr=Ee+Ct*cn)+Ct*((Ue=qe+Ct*An)-rr))+Ct*(Ue+Ct*(gt+Ct*Ur-Ue)-Nr),Ut==0?(Er=Pr,vr=Ht,dr=Pr,qr=Ht):(Er=Math.min(Er,Pr),vr=Math.min(vr,Ht),dr=Math.max(dr,Pr),qr=Math.max(qr,Ht));return new a(Math.round(Er),Math.round(vr),Math.round(dr-Er),Math.round(qr-vr))},St=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ne,Ee,Ne=(ne=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:ne,lineDashOffset:Ee}));this.prevLineDash!==Ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ne)}}})(bn.API),function(e){var t=function(f){var a,y,v,S,P,D,E,F,z,W;for(y=[],v=0,S=(f+=a="\0\0\0\0".slice(f.length%4||4)).length;S>v;v+=4)(P=(f.charCodeAt(v)<<24)+(f.charCodeAt(v+1)<<16)+(f.charCodeAt(v+2)<<8)+f.charCodeAt(v+3))!==0?(D=(P=((P=((P=((P=(P-(W=P%85))/85)-(z=P%85))/85)-(F=P%85))/85)-(E=P%85))/85)%85,y.push(D+33,E+33,F+33,z+33,W+33)):y.push(122);return function($,Y){for(var Q=Y;Q>0;Q--)$.pop()}(y,a.length),String.fromCharCode.apply(String,y)+"~>"},r=function(f){var a,y,v,S,P,D=String,E="length",F=255,z="charCodeAt",W="slice",$="replace";for(f[W](-2),f=f[W](0,-2)[$](/\s/g,"")[$]("z","!!!!!"),v=[],S=0,P=(f+=a="uuuuu"[W](f[E]%5||5))[E];P>S;S+=5)y=52200625*(f[z](S)-33)+614125*(f[z](S+1)-33)+7225*(f[z](S+2)-33)+85*(f[z](S+3)-33)+(f[z](S+4)-33),v.push(F&y>>24,F&y>>16,F&y>>8,F&y);return function(Y,Q){for(var K=Q;K>0;K--)Y.pop()}(v,a[E]),D.fromCharCode.apply(D,v)},n=function(f){return f.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(f){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((f=f.replace(/\s/g,"")).indexOf(">")!==-1&&(f=f.substr(0,f.indexOf(">"))),f.length%2&&(f+="0"),a.test(f)===!1)return"";for(var y="",v=0;v<f.length;v+=2)y+=String.fromCharCode("0x"+(f[v]+f[v+1]));return y},l=function(f){for(var a=new Uint8Array(f.length),y=f.length;y--;)a[y]=f.charCodeAt(y);return(a=ES(a)).reduce(function(v,S){return v+String.fromCharCode(S)},"")};e.processDataByFilters=function(f,a){var y=0,v=f||"",S=[];for(typeof(a=a||[])=="string"&&(a=[a]),y=0;y<a.length;y+=1)switch(a[y]){case"ASCII85Decode":case"/ASCII85Decode":v=r(v),S.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":v=t(v),S.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":v=s(v),S.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":v=n(v),S.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":v=l(v),S.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[y]+'" is not implemented')}return{data:v,reverseChain:S.reverse().join(" ")}}}(bn.API),function(e){e.loadFile=function(t,r,n){return function(s,l,f){l=l!==!1,f=typeof f=="function"?f:function(){};var a=void 0;try{a=function(y,v,S){var P=new XMLHttpRequest,D=0,E=function(F){var z=F.length,W=[],$=String.fromCharCode;for(D=0;D<z;D+=1)W.push($(255&F.charCodeAt(D)));return W.join("")};if(P.open("GET",y,!v),P.overrideMimeType("text/plain; charset=x-user-defined"),v===!1&&(P.onload=function(){P.status===200?S(E(this.responseText)):S(void 0)}),P.send(null),v&&P.status===200)return E(P.responseText)}(s,l,f)}catch{}return a}(t,r,n)},e.loadImageFile=e.loadFile}(bn.API),function(e){function t(){return($n.html2canvas?Promise.resolve($n.html2canvas):ww(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return($n.DOMPurify?Promise.resolve($n.DOMPurify):ww(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var y=Ji(a);return y==="undefined"?"undefined":y==="string"||a instanceof String?"string":y==="number"||a instanceof Number?"number":y==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":y==="object"?"object":"unknown"},s=function(a,y){var v=document.createElement(a);for(var S in y.className&&(v.className=y.className),y.innerHTML&&y.dompurify&&(v.innerHTML=y.dompurify.sanitize(y.innerHTML)),y.style)v.style[S]=y.style[S];return v},l=function a(y,v){for(var S=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),P=y.firstChild;P;P=P.nextSibling)v!==!0&&P.nodeType===1&&P.nodeName==="SCRIPT"||S.appendChild(a(P,v));return y.nodeType===1&&(y.nodeName==="CANVAS"?(S.width=y.width,S.height=y.height,S.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(S.value=y.value),S.addEventListener("load",function(){S.scrollTop=y.scrollTop,S.scrollLeft=y.scrollLeft},!0)),S},f=function a(y){var v=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),S=a.convert(Promise.resolve(),v);return(S=S.setProgress(1,a,1,[a])).set(y)};(f.prototype=Object.create(Promise.prototype)).constructor=f,f.convert=function(a,y){return a.__proto__=y||f.prototype,a},f.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},f.prototype.from=function(a,y){return this.then(function(){switch(y=y||function(v){switch(n(v)){case"string":return"string";case"element":return v.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),y){case"string":return this.then(r).then(function(v){return this.set({src:s("div",{innerHTML:a,dompurify:v})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},f.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},f.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},y=l(this.prop.src,this.opt.html2canvas.javascriptEnabled);y.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(y),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},f.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(y){var v=Object.assign({},this.opt.html2canvas);return delete v.onrendered,y(this.prop.container,v)}).then(function(y){(this.opt.html2canvas.onrendered||function(){})(y),this.prop.canvas=y,document.body.removeChild(this.prop.overlay)})},f.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(y){var v=this.opt.jsPDF,S=this.opt.fontFaces,P=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,D=Object.assign({async:!0,allowTaint:!0,scale:P,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete D.onrendered,v.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,v.context2d.posX=this.opt.x,v.context2d.posY=this.opt.y,v.context2d.margin=this.opt.margin,v.context2d.fontFaces=S,S)for(var E=0;E<S.length;++E){var F=S[E],z=F.src.find(function(W){return W.format==="truetype"});z&&v.addFont(z.url,F.ref.name,F.ref.style)}return D.windowHeight=D.windowHeight||0,D.windowHeight=D.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):D.windowHeight,v.context2d.save(!0),y(this.prop.container,D)}).then(function(y){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(y),this.prop.canvas=y,document.body.removeChild(this.prop.overlay)})},f.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},f.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},f.prototype.output=function(a,y,v){return(v=v||"pdf").toLowerCase()==="img"||v.toLowerCase()==="image"?this.outputImg(a,y):this.outputPdf(a,y)},f.prototype.outputPdf=function(a,y){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,y)})},f.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},f.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},f.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},f.prototype.set=function(a){if(n(a)!=="object")return this;var y=Object.keys(a||{}).map(function(v){if(v in f.template.prop)return function(){this.prop[v]=a[v]};switch(v){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[v]=a[v]}}},this);return this.then(function(){return this.thenList(y)})},f.prototype.get=function(a,y){return this.then(function(){var v=a in f.template.prop?this.prop[a]:this.opt[a];return y?y(v):v})},f.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},f.prototype.setPageSize=function(a){function y(v,S){return Math.floor(v*S/72*96)}return this.then(function(){(a=a||bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:y(a.inner.width,a.k),height:y(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},f.prototype.setProgress=function(a,y,v,S){return a!=null&&(this.progress.val=a),y!=null&&(this.progress.state=y),v!=null&&(this.progress.n=v),S!=null&&(this.progress.stack=S),this.progress.ratio=this.progress.val/this.progress.state,this},f.prototype.updateProgress=function(a,y,v,S){return this.setProgress(a?this.progress.val+a:null,y||null,v?this.progress.n+v:null,S?this.progress.stack.concat(S):null)},f.prototype.then=function(a,y){var v=this;return this.thenCore(a,y,function(S,P){return v.updateProgress(null,null,1,[S]),Promise.prototype.then.call(this,function(D){return v.updateProgress(null,S),D}).then(S,P).then(function(D){return v.updateProgress(1),D})})},f.prototype.thenCore=function(a,y,v){v=v||Promise.prototype.then;var S=this;a&&(a=a.bind(S)),y&&(y=y.bind(S));var P=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?S:f.convert(Object.assign({},S),Promise.prototype),D=v.call(P,a,y);return f.convert(D,S.__proto__)},f.prototype.thenExternal=function(a,y){return Promise.prototype.then.call(this,a,y)},f.prototype.thenList=function(a){var y=this;return a.forEach(function(v){y=y.thenCore(v)}),y},f.prototype.catch=function(a){a&&(a=a.bind(this));var y=Promise.prototype.catch.call(this,a);return f.convert(y,this)},f.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},f.prototype.error=function(a){return this.then(function(){throw new Error(a)})},f.prototype.using=f.prototype.set,f.prototype.saveAs=f.prototype.save,f.prototype.export=f.prototype.output,f.prototype.run=f.prototype.then,bn.getPageSize=function(a,y,v){if(Ji(a)==="object"){var S=a;a=S.orientation,y=S.unit||y,v=S.format||v}y=y||"mm",v=v||"a4",a=(""+(a||"P")).toLowerCase();var P,D=(""+v).toLowerCase(),E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(y){case"pt":P=1;break;case"mm":P=72/25.4;break;case"cm":P=72/2.54;break;case"in":P=72;break;case"px":P=.75;break;case"pc":case"em":P=12;break;case"ex":P=6;break;default:throw"Invalid unit: "+y}var F,z=0,W=0;if(E.hasOwnProperty(D))z=E[D][1]/P,W=E[D][0]/P;else try{z=v[1],W=v[0]}catch{throw new Error("Invalid format: "+v)}if(a==="p"||a==="portrait")a="p",W>z&&(F=W,W=z,z=F);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",z>W&&(F=W,W=z,z=F)}return{width:W,height:z,unit:y,k:P,orientation:a}},e.html=function(a,y){(y=y||{}).callback=y.callback||function(){},y.html2canvas=y.html2canvas||{},y.html2canvas.canvas=y.html2canvas.canvas||this.canvas,y.jsPDF=y.jsPDF||this,y.fontFaces=y.fontFaces?y.fontFaces.map($w):null;var v=new f(y);return y.worker?v:v.from(a).doCallback()}}(bn.API),bn.API.addJS=function(e){return UI=e,this.internal.events.subscribe("postPutResources",function(){b1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(b1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+UI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){b1!==void 0&&jI!==void 0&&this.internal.out("/Names <</JavaScript "+b1+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),l=0;l<s.length;l++){var f=s[l],a=n.exec(f);if(a!=null){var y=a[1];r.internal.newObjectDeferredBegin(y,!1)}r.internal.write(f)}if(this.outline.createNamedDestinations){var v=this.internal.pages.length,S=[];for(l=0;l<v;l++){var P=r.internal.newObject();S.push(P);var D=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+D.objId+" 0 R /XYZ null null null]>> endobj")}var E=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<S.length;l++)r.internal.write("(page_"+(l+1)+")"+S[l]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+E+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,l){var f={title:s,options:l,children:[]};return n==null&&(n=this.root),n.children.push(f),f},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<n.children.length;l++){var f=n.children[l];this.objStart(f),this.line("/Title "+this.makeString(f.title)),this.line("/Parent "+this.makeRef(n)),l>0&&this.line("/Prev "+this.makeRef(n.children[l-1])),l<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[l+1])),f.children.length>0&&(this.line("/First "+this.makeRef(f.children[0])),this.line("/Last "+this.makeRef(f.children[f.children.length-1])));var a=this.count=this.count_r({count:0},f);if(a>0&&this.line("/Count "+a),f.options&&f.options.pageNumber){var y=r.internal.getPageInfo(f.options.pageNumber);this.line("/Dest ["+y.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var v=0;v<n.children.length;v++)this.renderItems(n.children[v])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var l=0;l<s.children.length;l++)n.count++,this.count_r(n,s.children[l]);return n.count}}])}(bn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,l,f,a){var y,v=this.decode.DCT_DECODE,S=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=f||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,y=function(P){for(var D,E=256*P.charCodeAt(4)+P.charCodeAt(5),F=P.length,z={width:0,height:0,numcomponents:1},W=4;W<F;W+=2){if(W+=E,t.indexOf(P.charCodeAt(W+1))!==-1){D=256*P.charCodeAt(W+5)+P.charCodeAt(W+6),z={width:256*P.charCodeAt(W+7)+P.charCodeAt(W+8),height:D,numcomponents:P.charCodeAt(W+9)};break}E=256*P.charCodeAt(W+2)+P.charCodeAt(W+3)}return z}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),y.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}S={data:r,width:y.width,height:y.height,colorSpace:a,bitsPerComponent:8,filter:v,index:n,alias:s}}return S}}(bn.API),bn.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var s,l=NW(e,{checkCrc:!0}),f=l.width,a=l.height,y=l.channels,v=l.palette,S=l.depth;s=v&&y===1?function(be){for(var me=be.width,ve=be.height,Re=be.data,le=be.palette,G=be.depth,Ae=!1,we=[],lt=[],pt=void 0,At=!1,Ze=0,tt=0;tt<le.length;tt++){var Ot=H4(le[tt],4),St=Ot[0],ne=Ot[1],Ee=Ot[2],Ne=Ot[3];we.push(St,ne,Ee),Ne!=null&&(Ne===0?(Ze++,lt.length<1&&lt.push(tt)):Ne<255&&(At=!0))}if(At||Ze>1){Ae=!0,lt=void 0;var qe=me*ve;pt=new Uint8Array(qe);for(var Je=new DataView(Re.buffer),gt=0;gt<qe;gt++){var bt=Uw(Je,gt,G),ft=H4(le[bt],4)[3];pt[gt]=ft}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:Re,alphaBytes:pt,needSMask:Ae,palette:we,mask:lt}}(l):y===2||y===4?function(be){for(var me=be.data,ve=be.width,Re=be.height,le=be.channels,G=be.depth,Ae=le===2?"DeviceGray":"DeviceRGB",we=le-1,lt=ve*Re,pt=we,At=lt*pt,Ze=1*lt,tt=Math.ceil(At*G/8),Ot=Math.ceil(Ze*G/8),St=new Uint8Array(tt),ne=new Uint8Array(Ot),Ee=new DataView(me.buffer),Ne=new DataView(St.buffer),qe=new DataView(ne.buffer),Je=!1,gt=0;gt<lt;gt++){for(var bt=gt*le,ft=0;ft<pt;ft++)KI(Ne,Uw(Ee,bt+ft,G),gt*pt+ft,G);var Ct=Uw(Ee,bt+pt,G);Ct<(1<<G)-1&&(Je=!0),KI(qe,Ct,1*gt,G)}return{colorSpace:Ae,colorsPerPixel:we,colorBytes:St,alphaBytes:ne,needSMask:Je}}(l):function(be){var me=be.data,ve=be.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:ve,colorsPerPixel:ve==="DeviceGray"?1:3,colorBytes:me instanceof Uint8Array?me:new Uint8Array(me.buffer),needSMask:!1}}(l);var P,D,E,F=s,z=F.colorSpace,W=F.colorsPerPixel,$=F.colorBytes,Y=F.alphaBytes,Q=F.needSMask,K=F.palette,xe=F.mask,de=null;return n!==bn.API.image_compression.NONE&&typeof ES=="function"?(de=function(be){var me;switch(be){case bn.API.image_compression.FAST:me=11;break;case bn.API.image_compression.MEDIUM:me=13;break;case bn.API.image_compression.SLOW:me=14;break;default:me=12}return me}(n),P=this.decode.FLATE_DECODE,D="/Predictor ".concat(de," "),e=HI($,f*W,W,n),Q&&(E=HI(Y,f,1,n))):(P=void 0,D="",e=$,Q&&(E=Y)),D+="/Colors ".concat(W," /BitsPerComponent ").concat(S," /Columns ").concat(f),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:r,data:e,index:t,filter:P,decodeParameters:D,transparency:xe,palette:K,sMask:E,predictor:de,width:f,height:a,bitsPerComponent:S,colorSpace:z}}},function(e){e.processGIF89A=function(t,r,n,s){var l=new rZ(t),f=l.width,a=l.height,y=[];l.decodeAndBlitFrameRGBA(0,y);var v={data:y,width:f,height:a},S=new Vw(100).encode(v,100);return e.processJPEG.call(this,S,r,n,s)},e.processGIF87A=e.processGIF89A}(bn.API),Lc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Lc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){mo.log("bit decode error:"+r)}},Lc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var l=this.datav.getUint8(this.pos++,!0),f=n*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var y=this.palette[l>>7-a&1];this.data[f+4*a]=y.blue,this.data[f+4*a+1]=y.green,this.data[f+4*a+2]=y.red,this.data[f+4*a+3]=255}r!==0&&(this.pos+=4-r)}},Lc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var l=this.datav.getUint8(this.pos++,!0),f=n*this.width*4+2*s*4,a=l>>4,y=15&l,v=this.palette[a];if(this.data[f]=v.blue,this.data[f+1]=v.green,this.data[f+2]=v.red,this.data[f+3]=255,2*s+1>=this.width)break;v=this.palette[y],this.data[f+4]=v.blue,this.data[f+4+1]=v.green,this.data[f+4+2]=v.red,this.data[f+4+3]=255}t!==0&&(this.pos+=4-t)}},Lc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*n;if(s<this.palette.length){var f=this.palette[s];this.data[l]=f.red,this.data[l+1]=f.green,this.data[l+2]=f.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}e!==0&&(this.pos+=4-e)}},Lc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var f=(l&t)/t*255|0,a=(l>>5&t)/t*255|0,y=(l>>10&t)/t*255|0,v=l>>15?255:0,S=n*this.width*4+4*s;this.data[S]=y,this.data[S+1]=a,this.data[S+2]=f,this.data[S+3]=v}this.pos+=e}},Lc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,l=0;l<this.width;l++){var f=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(f&t)/t*255|0,y=(f>>5&r)/r*255|0,v=(f>>11)/t*255|0,S=s*this.width*4+4*l;this.data[S]=v,this.data[S+1]=y,this.data[S+2]=a,this.data[S+3]=255}this.pos+=e}},Lc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=t*this.width*4+4*r;this.data[f]=l,this.data[f+1]=s,this.data[f+2]=n,this.data[f+3]=255}this.pos+=this.width%4}},Lc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),f=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=l,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=f}},Lc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var l=new Lc(t,!1),f=l.width,a=l.height,y={data:l.getData(),width:f,height:a},v=new Vw(100).encode(y,100);return e.processJPEG.call(this,v,r,n,s)}}(bn.API),QI.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var l=new QI(t),f=l.width,a=l.height,y={data:l.getData(),width:f,height:a},v=new Vw(100).encode(y,100);return e.processJPEG.call(this,v,r,n,s)}}(bn.API),bn.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,l=new Uint8Array(s/4*3),f=new Uint8Array(s/4),a=0,y=0,v=0;v<s;v+=4){var S=n[v],P=n[v+1],D=n[v+2],E=n[v+3];l[a++]=S,l[a++]=P,l[a++]=D,f[y++]=E}var F=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(f),data:F,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},bn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},cm=bn.API,x1=cm.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),f=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:s.metadata.Unicode.widths,y=a.fof?a.fof:1,v=t.kerning?t.kerning:s.metadata.Unicode.kerning,S=v.fof?v.fof:1,P=t.doKerning!==!1,D=0,E=e.length,F=0,z=a[0]||y,W=[];for(r=0;r<E;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?W.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+f*(1e3/l)||0)/1e3):(D=P&&Ji(v[n])==="object"&&!isNaN(parseInt(v[n][F],10))?v[n][F]/S:0,W.push((a[n]||z)/y+D)),F=n;return W},VI=cm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return cm.processArabic&&(e=cm.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:x1.apply(this,arguments).reduce(function(l,f){return l+f},0)},qI=function(e,t,r,n){for(var s=[],l=0,f=e.length,a=0;l!==f&&a+t[l]<r;)a+=t[l],l++;s.push(e.slice(0,l));var y=l;for(a=0;l!==f;)a+t[l]>n&&(s.push(e.slice(y,l)),a=0,y=l),a+=t[l],l++;return y!==l&&s.push(e.slice(y,l)),s},GI=function(e,t,r){r||(r={});var n,s,l,f,a,y,v,S=[],P=[S],D=r.textIndent||0,E=0,F=0,z=e.split(" "),W=x1.apply(this,[" ",r])[0];if(y=r.lineIndent===-1?z[0].length+2:r.lineIndent||0){var $=Array(y).join(" "),Y=[];z.map(function(K){(K=K.split(/\s*\n/)).length>1?Y=Y.concat(K.map(function(xe,de){return(de&&xe.length?`
`:"")+xe})):Y.push(K[0])}),z=Y,y=VI.apply(this,[$,r])}for(l=0,f=z.length;l<f;l++){var Q=0;if(n=z[l],y&&n[0]==`
`&&(n=n.substr(1),Q=1),D+E+(F=(s=x1.apply(this,[n,r])).reduce(function(K,xe){return K+xe},0))>t||Q){if(F>t){for(a=qI.apply(this,[n,s,t-(D+E),t]),S.push(a.shift()),S=[a.pop()];a.length;)P.push([a.shift()]);F=s.slice(n.length-(S[0]?S[0].length:0)).reduce(function(K,xe){return K+xe},0)}else S=[n];P.push(S),D=F+y,E=W}else S.push(n),D+=E+F,E=W}return v=y?function(K,xe){return(xe?$:"")+K.join(" ")}:function(K){return K.join(" ")},P.map(v)},cm.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(S){if(S.widths&&S.kerning)return{widths:S.widths,kerning:S.kerning};var P=this.internal.getFont(S.fontName,S.fontStyle),D="Unicode";return P.metadata[D]?{widths:P.metadata[D].widths||{0:1},kerning:P.metadata[D].kerning||{}}:{font:P.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var f=1*this.internal.scaleFactor*t/s;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,l.lineIndent=r.lineIndent;var a,y,v=[];for(a=0,y=n.length;a<y;a++)v=v.concat(GI.apply(this,[n[a],f,l]));return v},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},l=0;l<16;l++)n[r[l]]=t[l],s[t[l]]=r[l];var f=function(D){return"0x"+parseInt(D,10).toString(16)},a=e.__fontmetrics__.compress=function(D){var E,F,z,W,$=["{"];for(var Y in D){if(E=D[Y],isNaN(parseInt(Y,10))?F="'"+Y+"'":(Y=parseInt(Y,10),F=(F=f(Y).slice(2)).slice(0,-1)+s[F.slice(-1)]),typeof E=="number")E<0?(z=f(E).slice(3),W="-"):(z=f(E).slice(2),W=""),z=W+z.slice(0,-1)+s[z.slice(-1)];else{if(Ji(E)!=="object")throw new Error("Don't know what to do with value type "+Ji(E)+".");z=a(E)}$.push(F+z)}return $.push("}"),$.join("")},y=e.__fontmetrics__.uncompress=function(D){if(typeof D!="string")throw new Error("Invalid argument passed to uncompress.");for(var E,F,z,W,$={},Y=1,Q=$,K=[],xe="",de="",be=D.length-1,me=1;me<be;me+=1)(W=D[me])=="'"?E?(z=E.join(""),E=void 0):E=[]:E?E.push(W):W=="{"?(K.push([Q,z]),Q={},z=void 0):W=="}"?((F=K.pop())[0][F[1]]=Q,z=void 0,Q=F[0]):W=="-"?Y=-1:z===void 0?n.hasOwnProperty(W)?(xe+=n[W],z=parseInt(xe,16)*Y,Y=1,xe=""):xe+=W:n.hasOwnProperty(W)?(de+=n[W],Q[z]=parseInt(de,16)*Y,Y=1,z=void 0,de=""):de+=W;return $},v={codePages:["WinAnsiEncoding"],WinAnsiEncoding:y("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},S={Unicode:{Courier:v,"Courier-Bold":v,"Courier-BoldOblique":v,"Courier-Oblique":v,Helvetica:v,"Helvetica-Bold":v,"Helvetica-BoldOblique":v,"Helvetica-Oblique":v,"Times-Roman":v,"Times-Bold":v,"Times-BoldItalic":v,"Times-Italic":v}},P={Unicode:{"Courier-Oblique":y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":y("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":y("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":y("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:y("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:y("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":y("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:y("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":y("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":y("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":y("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":y("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(D){var E=D.font,F=P.Unicode[E.postScriptName];F&&(E.metadata.Unicode={},E.metadata.Unicode.widths=F.widths,E.metadata.Unicode.kerning=F.kerning);var z=S.Unicode[E.postScriptName];z&&(E.metadata.Unicode.encoding=z,E.encoding=z.codePages[0])}])}(bn.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),l=0;l<n;l++)s[l]=r.charCodeAt(l);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,l=r.instance;if(!s.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=l.existsFileInVFS(s.postScriptName)===!1?l.loadFile(s.postScriptName):l.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(f,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Q1(a)),f.metadata=e.API.TTFFont.open(a),f.metadata.Unicode=f.metadata.Unicode||{encoding:{},kerning:{},widths:[]},f.metadata.glyIdsUsed=[0]})(s,n)}}])}(bn),bn.API.addSvgAsImage=function(e,t,r,n,s,l,f,a){if(isNaN(t)||isNaN(r))throw mo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw mo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var y=document.createElement("canvas");y.width=n,y.height=s;var v=y.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,y.width,y.height);var S={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},P=this;return($n.canvg?Promise.resolve($n.canvg):ww(()=>import("./index.es-BvNtyCrU.js"),[])).catch(function(D){return Promise.reject(new Error("Could not load canvg: "+D))}).then(function(D){return D.default?D.default:D}).then(function(D){return D.fromString(v,e,S)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(D){return D.render(S)}).then(function(){P.addImage(y.toDataURL("image/jpeg",1),t,r,n,s,f,a)})},bn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},bn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,l,f={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(f),y=[],v=0,S=0,P=0;function D(F,z){var W,$=!1;for(W=0;W<F.length;W+=1)F[W]===z&&($=!0);return $}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(f)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var E=a.length;for(P=0;P<E;P+=1)r[a[P]].value=r[a[P]].defaultValue,r[a[P]].explicitSet=!1}if(Ji(e)==="object"){for(s in e)if(l=e[s],D(a,s)&&l!==void 0){if(r[s].type==="boolean"&&typeof l=="boolean")r[s].value=l;else if(r[s].type==="name"&&D(r[s].valueSet,l))r[s].value=l;else if(r[s].type==="integer"&&Number.isInteger(l))r[s].value=l;else if(r[s].type==="array"){for(v=0;v<l.length;v+=1)if(n=!0,l[v].length===1&&typeof l[v][0]=="number")y.push(String(l[v]-1));else if(l[v].length>1){for(S=0;S<l[v].length;S+=1)typeof l[v][S]!="number"&&(n=!1);n===!0&&y.push([l[v][0]-1,l[v][1]-1].join(" "))}r[s].value="["+y.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var F,z=[];for(F in r)r[F].explicitSet===!0&&(r[F].type==="name"?z.push("/"+F+" /"+r[F].value):z.push("/"+F+" "+r[F].value));z.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+z.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(n)),f=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),y=unescape(encodeURIComponent("</x:xmpmeta>")),v=l.length+f.length+a.length+s.length+y.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+v+" >>"),this.internal.write("stream"),this.internal.write(s+l+f+a+y),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(bn.API),function(e){var t=e.API,r=t.pdfEscape16=function(l,f){for(var a,y=f.metadata.Unicode.widths,v=["","0","00","000","0000"],S=[""],P=0,D=l.length;P<D;++P){if(a=f.metadata.characterToGlyph(l.charCodeAt(P)),f.metadata.glyIdsUsed.push(a),f.metadata.toUnicode[a]=l.charCodeAt(P),y.indexOf(a)==-1&&(y.push(a),y.push([parseInt(f.metadata.widthOfGlyph(a),10)])),a=="0")return S.join("");a=a.toString(16),S.push(v[4-a.length],a)}return S.join("")},n=function(l){var f,a,y,v,S,P,D;for(S=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,y=[],P=0,D=(a=Object.keys(l).sort(function(E,F){return E-F})).length;P<D;P++)f=a[P],y.length>=100&&(S+=`
`+y.length+` beginbfchar
`+y.join(`
`)+`
endbfchar`,y=[]),l[f]!==void 0&&l[f]!==null&&typeof l[f].toString=="function"&&(v=("0000"+l[f].toString(16)).slice(-4),f=("0000"+(+f).toString(16)).slice(-4),y.push("<"+f+"><"+v+">"));return y.length&&(S+=`
`+y.length+` beginbfchar
`+y.join(`
`)+`
endbfchar
`),S+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(f){var a=f.font,y=f.out,v=f.newObject,S=f.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var P=a.metadata.Unicode.widths,D=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),E="",F=0;F<D.length;F++)E+=String.fromCharCode(D[F]);var z=v();S({data:E,addLength1:!0,objectId:z}),y("endobj");var W=v();S({data:n(a.metadata.toUnicode),addLength1:!0,objectId:W}),y("endobj");var $=v();y("<<"),y("/Type /FontDescriptor"),y("/FontName /"+gm(a.fontName)),y("/FontFile2 "+z+" 0 R"),y("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),y("/Flags "+a.metadata.flags),y("/StemV "+a.metadata.stemV),y("/ItalicAngle "+a.metadata.italicAngle),y("/Ascent "+a.metadata.ascender),y("/Descent "+a.metadata.decender),y("/CapHeight "+a.metadata.capHeight),y(">>"),y("endobj");var Y=v();y("<<"),y("/Type /Font"),y("/BaseFont /"+gm(a.fontName)),y("/FontDescriptor "+$+" 0 R"),y("/W "+e.API.PDFObject.convert(P)),y("/CIDToGIDMap /Identity"),y("/DW 1000"),y("/Subtype /CIDFontType2"),y("/CIDSystemInfo"),y("<<"),y("/Supplement 0"),y("/Registry (Adobe)"),y("/Ordering ("+a.encoding+")"),y(">>"),y(">>"),y("endobj"),a.objectNumber=v(),y("<<"),y("/Type /Font"),y("/Subtype /Type0"),y("/ToUnicode "+W+" 0 R"),y("/BaseFont /"+gm(a.fontName)),y("/Encoding /"+a.encoding),y("/DescendantFonts ["+Y+" 0 R]"),y(">>"),y("endobj"),a.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(f){var a=f.font,y=f.out,v=f.newObject,S=f.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var P=a.metadata.rawData,D="",E=0;E<P.length;E++)D+=String.fromCharCode(P[E]);var F=v();S({data:D,addLength1:!0,objectId:F}),y("endobj");var z=v();S({data:n(a.metadata.toUnicode),addLength1:!0,objectId:z}),y("endobj");var W=v();y("<<"),y("/Descent "+a.metadata.decender),y("/CapHeight "+a.metadata.capHeight),y("/StemV "+a.metadata.stemV),y("/Type /FontDescriptor"),y("/FontFile2 "+F+" 0 R"),y("/Flags 96"),y("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),y("/FontName /"+gm(a.fontName)),y("/ItalicAngle "+a.metadata.italicAngle),y("/Ascent "+a.metadata.ascender),y(">>"),y("endobj"),a.objectNumber=v();for(var $=0;$<a.metadata.hmtx.widths.length;$++)a.metadata.hmtx.widths[$]=parseInt(a.metadata.hmtx.widths[$]*(1e3/a.metadata.head.unitsPerEm));y("<</Subtype/TrueType/Type/Font/ToUnicode "+z+" 0 R/BaseFont/"+gm(a.fontName)+"/FontDescriptor "+W+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),y("endobj"),a.isAlreadyPutted=!0}})(l)}]);var s=function(l){var f,a=l.text||"",y=l.x,v=l.y,S=l.options||{},P=l.mutex||{},D=P.pdfEscape,E=P.activeFontKey,F=P.fonts,z=E,W="",$=0,Y="",Q=F[z].encoding;if(F[z].encoding!=="Identity-H")return{text:a,x:y,y:v,options:S,mutex:P};for(Y=a,z=E,Array.isArray(a)&&(Y=a[0]),$=0;$<Y.length;$+=1)F[z].metadata.hasOwnProperty("cmap")&&(f=F[z].metadata.cmap.unicode.codeMap[Y[$].charCodeAt(0)]),f||Y[$].charCodeAt(0)<256&&F[z].metadata.hasOwnProperty("Unicode")?W+=Y[$]:W+="";var K="";return parseInt(z.slice(1))<14||Q==="WinAnsiEncoding"?K=D(W,z).split("").map(function(xe){return xe.charCodeAt(0).toString(16)}).join(""):Q==="Identity-H"&&(K=r(W,F[z])),P.isHex=!0,{text:K,x:y,y:v,options:S,mutex:P}};t.events.push(["postProcessText",function(l){var f=l.text||"",a=[],y={text:f,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(f)){var v=0;for(v=0;v<f.length;v+=1)Array.isArray(f[v])&&f[v].length===3?a.push([s(Object.assign({},y,{text:f[v][0]})).text,f[v][1],f[v][2]]):a.push(s(Object.assign({},y,{text:f[v]})).text);l.text=a}else l.text=s(Object.assign({},y,{text:f})).text}])}(bn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(bn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,l,f,a,y,v,S,P=t,D=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],E=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],F={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},z={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},W=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],$=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Y=!1,Q=0;this.__bidiEngine__={};var K=function(le){var G=le.charCodeAt(),Ae=G>>8,we=z[Ae];return we!==void 0?P[256*we+(255&G)]:Ae===252||Ae===253?"AL":$.test(Ae)?"L":Ae===8?"R":"N"},xe=function(le){for(var G,Ae=0;Ae<le.length;Ae++){if((G=K(le.charAt(Ae)))==="L")return!1;if(G==="R")return!0}return!1},de=function(le,G,Ae,we){var lt,pt,At,Ze,tt=G[we];switch(tt){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Y=!1;break;case"N":case"AN":break;case"EN":Y&&(tt="AN");break;case"AL":Y=!0,tt="R";break;case"WS":case"BN":tt="N";break;case"CS":we<1||we+1>=G.length||(lt=Ae[we-1])!=="EN"&&lt!=="AN"||(pt=G[we+1])!=="EN"&&pt!=="AN"?tt="N":Y&&(pt="AN"),tt=pt===lt?pt:"N";break;case"ES":tt=(lt=we>0?Ae[we-1]:"B")==="EN"&&we+1<G.length&&G[we+1]==="EN"?"EN":"N";break;case"ET":if(we>0&&Ae[we-1]==="EN"){tt="EN";break}if(Y){tt="N";break}for(At=we+1,Ze=G.length;At<Ze&&G[At]==="ET";)At++;tt=At<Ze&&G[At]==="EN"?"EN":"N";break;case"NSM":if(f&&!a){for(Ze=G.length,At=we+1;At<Ze&&G[At]==="NSM";)At++;if(At<Ze){var Ot=le[we],St=Ot>=1425&&Ot<=2303||Ot===64286;if(lt=G[At],St&&(lt==="R"||lt==="AL")){tt="R";break}}}tt=we<1||(lt=G[we-1])==="B"?"N":Ae[we-1];break;case"B":Y=!1,s=!0,tt=Q;break;case"S":l=!0,tt="N"}return tt},be=function(le,G,Ae){var we=le.split("");return Ae&&me(we,Ae,{hiLevel:Q}),we.reverse(),G&&G.reverse(),we.join("")},me=function(le,G,Ae){var we,lt,pt,At,Ze,tt=-1,Ot=le.length,St=0,ne=[],Ee=Q?E:D,Ne=[];for(Y=!1,s=!1,l=!1,lt=0;lt<Ot;lt++)Ne[lt]=K(le[lt]);for(pt=0;pt<Ot;pt++){if(Ze=St,ne[pt]=de(le,Ne,ne,pt),we=240&(St=Ee[Ze][F[ne[pt]]]),St&=15,G[pt]=At=Ee[St][5],we>0)if(we===16){for(lt=tt;lt<pt;lt++)G[lt]=1;tt=-1}else tt=-1;if(Ee[St][6])tt===-1&&(tt=pt);else if(tt>-1){for(lt=tt;lt<pt;lt++)G[lt]=At;tt=-1}Ne[pt]==="B"&&(G[pt]=0),Ae.hiLevel|=At}l&&function(qe,Je,gt){for(var bt=0;bt<gt;bt++)if(qe[bt]==="S"){Je[bt]=Q;for(var ft=bt-1;ft>=0&&qe[ft]==="WS";ft--)Je[ft]=Q}}(Ne,G,Ot)},ve=function(le,G,Ae,we,lt){if(!(lt.hiLevel<le)){if(le===1&&Q===1&&!s)return G.reverse(),void(Ae&&Ae.reverse());for(var pt,At,Ze,tt,Ot=G.length,St=0;St<Ot;){if(we[St]>=le){for(Ze=St+1;Ze<Ot&&we[Ze]>=le;)Ze++;for(tt=St,At=Ze-1;tt<At;tt++,At--)pt=G[tt],G[tt]=G[At],G[At]=pt,Ae&&(pt=Ae[tt],Ae[tt]=Ae[At],Ae[At]=pt);St=Ze}St++}}},Re=function(le,G,Ae){var we=le.split(""),lt={hiLevel:Q};return Ae||(Ae=[]),me(we,Ae,lt),function(pt,At,Ze){if(Ze.hiLevel!==0&&S)for(var tt,Ot=0;Ot<pt.length;Ot++)At[Ot]===1&&(tt=W.indexOf(pt[Ot]))>=0&&(pt[Ot]=W[tt+1])}(we,Ae,lt),ve(2,we,G,Ae,lt),ve(1,we,G,Ae,lt),we.join("")};return this.__bidiEngine__.doBidiReorder=function(le,G,Ae){if(function(lt,pt){if(pt)for(var At=0;At<lt.length;At++)pt[At]=At;a===void 0&&(a=xe(lt)),v===void 0&&(v=xe(lt))}(le,G),f||!y||v)if(f&&y&&a^v)Q=a?1:0,le=be(le,G,Ae);else if(!f&&y&&v)Q=a?1:0,le=Re(le,G,Ae),le=be(le,G);else if(!f||a||y||v){if(f&&!y&&a^v)le=be(le,G),a?(Q=0,le=Re(le,G,Ae)):(Q=1,le=Re(le,G,Ae),le=be(le,G));else if(f&&a&&!y&&v)Q=1,le=Re(le,G,Ae),le=be(le,G);else if(!f&&!y&&a^v){var we=S;a?(Q=1,le=Re(le,G,Ae),Q=0,S=!1,le=Re(le,G,Ae),S=we):(Q=0,le=Re(le,G,Ae),le=be(le,G),Q=1,S=!1,le=Re(le,G,Ae),S=we,le=be(le,G))}}else Q=0,le=Re(le,G,Ae);else Q=a?1:0,le=Re(le,G,Ae);return le},this.__bidiEngine__.setOptions=function(le){le&&(f=le.isInputVisual,y=le.isOutputVisual,a=le.isInputRtl,v=le.isOutputRtl,S=le.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var l=n.options||{};n.mutex,l.lang;var f=[];if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(f=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?f.push([r.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):f.push([r.doBidiReorder(s[a])]);n.text=f}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(bn),bn.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new cd(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new yZ(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new nZ(this.contents),this.head=new oZ(this),this.name=new cZ(this),this.cmap=new BN(this),this.toUnicode={},this.hhea=new aZ(this),this.maxp=new hZ(this),this.hmtx=new fZ(this),this.post=new lZ(this),this.os2=new sZ(this),this.loca=new gZ(this),this.glyf=new dZ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var f,a,y,v;for(v=[],f=0,a=(y=this.bbox).length;f<a;f++)t=y[f],v.push(Math.round(t*this.scaleFactor));return v}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,l,f,a;for(f=0,l=0,a=(t=""+t).length;0<=a?l<a:l>a;l=0<=a?++l:--l)s=t.charCodeAt(l),f+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return f*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Wc,cd=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,l,f,a,y;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),l=this.readByte(),f=this.readByte(),a=this.readByte(),y=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^l)+65536*(255^f)+256*(255^a)+(255^y)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*l+65536*f+256*a+y},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,l;for(l=[],n=0,s=t.length;n<s;n++)r=t[n],l.push(this.writeByte(r));return l},e}(),nZ=function(){var e;function t(r){var n,s,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,l=this.tableCount;0<=l?s<l:s>l;s=0<=l?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,l,f,a,y,v,S,P,D,E,F,z;for(z in E=Object.keys(r).length,y=Math.log(2),P=16*Math.floor(Math.log(E)/y),f=Math.floor(P/y),S=16*E-P,(s=new cd).writeInt(this.scalarType),s.writeShort(E),s.writeShort(P),s.writeShort(f),s.writeShort(S),l=16*E,v=s.pos+l,a=null,F=[],r)for(D=r[z],s.writeString(z),s.writeInt(e(D)),s.writeInt(v),s.writeInt(D.length),F=F.concat(D),z==="head"&&(a=v),v+=D.length;v%4;)F.push(0),v++;return s.write(F),n=2981146554-e(s.data),s.pos=a+8,s.writeUInt32(n),s.data},e=function(r){var n,s,l,f;for(r=zN.call(r);r.length%4;)r.push(0);for(l=new cd(r),s=0,n=0,f=r.length;n<f;n=n+=4)s+=l.readUInt32();return 4294967295&s},t}(),iZ={}.hasOwnProperty,Lh=function(e,t){for(var r in t)iZ.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Wc=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var oZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new cd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),eM=function(){function e(t,r){var n,s,l,f,a,y,v,S,P,D,E,F,z,W,$,Y,Q;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),P=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(y=0;y<256;++y)this.codeMap[y]=t.readByte();break;case 4:for(E=t.readUInt16(),D=E/2,t.pos+=6,l=function(){var K,xe;for(xe=[],y=K=0;0<=D?K<D:K>D;y=0<=D?++K:--K)xe.push(t.readUInt16());return xe}(),t.pos+=2,z=function(){var K,xe;for(xe=[],y=K=0;0<=D?K<D:K>D;y=0<=D?++K:--K)xe.push(t.readUInt16());return xe}(),v=function(){var K,xe;for(xe=[],y=K=0;0<=D?K<D:K>D;y=0<=D?++K:--K)xe.push(t.readUInt16());return xe}(),S=function(){var K,xe;for(xe=[],y=K=0;0<=D?K<D:K>D;y=0<=D?++K:--K)xe.push(t.readUInt16());return xe}(),s=(this.length-t.pos+this.offset)/2,a=function(){var K,xe;for(xe=[],y=K=0;0<=s?K<s:K>s;y=0<=s?++K:--K)xe.push(t.readUInt16());return xe}(),y=$=0,Q=l.length;$<Q;y=++$)for(W=l[y],n=Y=F=z[y];F<=W?Y<=W:Y>=W;n=F<=W?++Y:--Y)S[y]===0?f=n+v[y]:(f=a[S[y]/2+(n-F)-(D-y)]||0)!==0&&(f+=v[y]),this.codeMap[n]=65535&f}t.pos=P}return e.encode=function(t,r){var n,s,l,f,a,y,v,S,P,D,E,F,z,W,$,Y,Q,K,xe,de,be,me,ve,Re,le,G,Ae,we,lt,pt,At,Ze,tt,Ot,St,ne,Ee,Ne,qe,Je,gt,bt,ft,Ct,Ut,gr;switch(we=new cd,f=Object.keys(t).sort(function(rr,It){return rr-It}),r){case"macroman":for(z=0,W=function(){var rr=[];for(F=0;F<256;++F)rr.push(0);return rr}(),Y={0:0},l={},lt=0,tt=f.length;lt<tt;lt++)Y[ft=t[s=f[lt]]]==null&&(Y[ft]=++z),l[s]={old:t[s],new:Y[t[s]]},W[s]=Y[t[s]];return we.writeUInt16(1),we.writeUInt16(0),we.writeUInt32(12),we.writeUInt16(0),we.writeUInt16(262),we.writeUInt16(0),we.write(W),{charMap:l,subtable:we.data,maxGlyphID:z+1};case"unicode":for(G=[],P=[],Q=0,Y={},n={},$=v=null,pt=0,Ot=f.length;pt<Ot;pt++)Y[xe=t[s=f[pt]]]==null&&(Y[xe]=++Q),n[s]={old:xe,new:Y[xe]},a=Y[xe]-s,$!=null&&a===v||($&&P.push($),G.push(s),v=a),$=s;for($&&P.push($),P.push(65535),G.push(65535),Re=2*(ve=G.length),me=2*Math.pow(Math.log(ve)/Math.LN2,2),D=Math.log(me/2)/Math.LN2,be=2*ve-me,y=[],de=[],E=[],F=At=0,St=G.length;At<St;F=++At){if(le=G[F],S=P[F],le===65535){y.push(0),de.push(0);break}if(le-(Ae=n[le].new)>=32768)for(y.push(0),de.push(2*(E.length+ve-F)),s=Ze=le;le<=S?Ze<=S:Ze>=S;s=le<=S?++Ze:--Ze)E.push(n[s].new);else y.push(Ae-le),de.push(0)}for(we.writeUInt16(3),we.writeUInt16(1),we.writeUInt32(12),we.writeUInt16(4),we.writeUInt16(16+8*ve+2*E.length),we.writeUInt16(0),we.writeUInt16(Re),we.writeUInt16(me),we.writeUInt16(D),we.writeUInt16(be),gt=0,ne=P.length;gt<ne;gt++)s=P[gt],we.writeUInt16(s);for(we.writeUInt16(0),bt=0,Ee=G.length;bt<Ee;bt++)s=G[bt],we.writeUInt16(s);for(Ct=0,Ne=y.length;Ct<Ne;Ct++)a=y[Ct],we.writeUInt16(a);for(Ut=0,qe=de.length;Ut<qe;Ut++)K=de[Ut],we.writeUInt16(K);for(gr=0,Je=E.length;gr<Je;gr++)z=E[gr],we.writeUInt16(z);return{charMap:n,subtable:we.data,maxGlyphID:Q+1}}},e}(),BN=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new eM(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,s;return r==null&&(r="macroman"),n=eM.encode(t,r),(s=new cd).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},e}(),aZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),sZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),lZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var l;for(n=t.readUInt16(),this.glyphNameIndex=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var f,a,y;for(y=[],l=f=0,a=this.file.maxp.numGlyphs;0<=a?f<a:f>a;l=0<=a?++f:--f)y.push(t.readUInt32());return y}).call(this)}},e}(),uZ=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,s,l,f,a,y,v,S,P,D;for(t.pos=this.offset,t.readShort(),r=t.readShort(),a=t.readShort(),n=[],l=0;0<=r?l<r:l>r;l=0<=r?++l:--l)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(y={},l=S=0,P=n.length;S<P;l=++S)s=n[l],t.pos=s.offset,v=t.readString(s.length),f=new uZ(v,s),y[D=s.nameID]==null&&(y[D]=[]),y[s.nameID].push(f);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},e}(),hZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),fZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,s,l,f,a,y;for(t.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var v,S;for(S=[],r=v=0;0<=s?v<s:v>s;r=0<=s?++v:--v)S.push(t.readInt16());return S}(),this.widths=(function(){var v,S,P,D;for(D=[],v=0,S=(P=this.metrics).length;v<S;v++)l=P[v],D.push(l.advance);return D}).call(this),n=this.widths[this.widths.length-1],y=[],r=f=0;0<=s?f<s:f>s;r=0<=s?++f:--f)y.push(this.widths.push(n));return y},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),zN=[].slice,dZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,s,l,f,a,y,v,S,P;return t in this.cache?this.cache[t]:(l=this.file.loca,r=this.file.contents,n=l.indexOf(t),(s=l.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,f=(a=new cd(r.read(s))).readShort(),v=a.readShort(),P=a.readShort(),y=a.readShort(),S=a.readShort(),this.cache[t]=f===-1?new mZ(a,v,P,y,S):new pZ(a,f,v,P,y,S),this.cache[t]))},e.prototype.encode=function(t,r,n){var s,l,f,a,y;for(f=[],l=[],a=0,y=r.length;a<y;a++)s=t[r[a]],l.push(f.length),s&&(f=f.concat(s.encode(n)));return l.push(f.length),{table:f,offsets:l}},e}(),pZ=function(){function e(t,r,n,s,l,f){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=l,this.yMax=f,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),mZ=function(){function e(t,r,n,s,l){var f,a;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],f=this.raw;a=f.readShort(),this.glyphOffsets.push(f.pos),this.glyphIDs.push(f.readUInt16()),32&a;)f.pos+=1&a?4:2,128&a?f.pos+=8:64&a?f.pos+=4:8&a&&(f.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new cd(zN.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),gZ=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Lh(e,Wc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,l;for(l=[],n=0,s=this.length;n<s;n+=2)l.push(2*t.readUInt16());return l}).call(this):(function(){var s,l;for(l=[],n=0,s=this.length;n<s;n+=4)l.push(t.readUInt32());return l}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),s=0,l=0,f=0;f<n.length;++f)if(n[f]=s,l<r.length&&r[l]==f){++l,n[f]=s;var a=this.offsets[f],y=this.offsets[f+1]-a;y>0&&(s+=y)}for(var v=new Array(4*n.length),S=0;S<n.length;++S)v[4*S+3]=255&n[S],v[4*S+2]=(65280&n[S])>>8,v[4*S+1]=(16711680&n[S])>>16,v[4*S]=(4278190080&n[S])>>24;return v},e}(),yZ=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,l;for(r in s=this.font.cmap.tables[0].codeMap,t={},l=this.subset)n=l[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,l,f,a,y;for(s={},f=0,a=t.length;f<a;f++)s[l=t[f]]=this.font.glyf.glyphFor(l);for(l in r=[],s)(n=s[l])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(l in y=this.glyphsFor(r))n=y[l],s[l]=n;return s},e.prototype.encode=function(t,r){var n,s,l,f,a,y,v,S,P,D,E,F,z,W,$;for(s in n=BN.encode(this.generateCmap(),"unicode"),f=this.glyphsFor(t),E={0:0},$=n.charMap)E[(y=$[s]).old]=y.new;for(F in D=n.maxGlyphID,f)F in E||(E[F]=D++);return S=function(Y){var Q,K;for(Q in K={},Y)K[Y[Q]]=Q;return K}(E),P=Object.keys(S).sort(function(Y,Q){return Y-Q}),z=function(){var Y,Q,K;for(K=[],Y=0,Q=P.length;Y<Q;Y++)a=P[Y],K.push(S[a]);return K}(),l=this.font.glyf.encode(f,z,E),v=this.font.loca.encode(l.offsets,z),W={cmap:this.font.cmap.raw(),glyf:l.table,loca:v,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(W["OS/2"]=this.font.os2.raw()),this.font.directory.encode(W)},e}();bn.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,l,f;if(Array.isArray(r))return"["+function(){var a,y,v;for(v=[],a=0,y=r.length;a<y;a++)n=r[a],v.push(t.convert(n));return v}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in l=["<<"],r)f=r[s],l.push("/"+s+" "+t.convert(f));return l.push(">>"),l.join(`
`)}return""+r},t}();var vZ={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(ec,function(){var r=function(k,V){var pe={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},We={on:function(Ye,yt,Jt){if(pe[Ye]===void 0)throw new Error("Invalid event type: "+Ye);pe[Ye].push({selector:yt,fn:Jt})},render:function(Ye){V.store.featureChanged(Ye)}},nt=function(Ye,yt){for(var Jt=pe[Ye],ur=Jt.length;ur--;){var Cr=Jt[ur];if(Cr.selector(yt)){Cr.fn.call(We,yt)||V.store.render(),V.ui.updateMapClasses();break}}};return k.start.call(We),{render:k.render,stop:function(){k.stop&&k.stop()},trash:function(){k.trash&&(k.trash(),V.store.render())},combineFeatures:function(){k.combineFeatures&&k.combineFeatures()},uncombineFeatures:function(){k.uncombineFeatures&&k.uncombineFeatures()},drag:function(Ye){nt("drag",Ye)},click:function(Ye){nt("click",Ye)},mousemove:function(Ye){nt("mousemove",Ye)},mousedown:function(Ye){nt("mousedown",Ye)},mouseup:function(Ye){nt("mouseup",Ye)},mouseout:function(Ye){nt("mouseout",Ye)},keydown:function(Ye){nt("keydown",Ye)},keyup:function(Ye){nt("keyup",Ye)},touchstart:function(Ye){nt("touchstart",Ye)},touchmove:function(Ye){nt("touchmove",Ye)},touchend:function(Ye){nt("touchend",Ye)},tap:function(Ye){nt("tap",Ye)}}};function n(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function s(k){if(k.__esModule)return k;var V=k.default;if(typeof V=="function"){var pe=function We(){if(this instanceof We){var nt=[null];nt.push.apply(nt,arguments);var Ye=Function.bind.apply(V,nt);return new Ye}return V.apply(this,arguments)};pe.prototype=V.prototype}else pe={};return Object.defineProperty(pe,"__esModule",{value:!0}),Object.keys(k).forEach(function(We){var nt=Object.getOwnPropertyDescriptor(k,We);Object.defineProperty(pe,We,nt.get?nt:{enumerable:!0,get:function(){return k[We]}})}),pe}var l={},f={RADIUS:6378137},a=f;function y(k){var V=0;if(k&&k.length>0){V+=Math.abs(v(k[0]));for(var pe=1;pe<k.length;pe++)V-=Math.abs(v(k[pe]))}return V}function v(k){var V,pe,We,nt,Ye,yt,Jt=0,ur=k.length;if(ur>2){for(yt=0;yt<ur;yt++)yt===ur-2?(We=ur-2,nt=ur-1,Ye=0):yt===ur-1?(We=ur-1,nt=0,Ye=1):(We=yt,nt=yt+1,Ye=yt+2),V=k[We],pe=k[nt],Jt+=(S(k[Ye][0])-S(V[0]))*Math.sin(S(pe[1]));Jt=Jt*a.RADIUS*a.RADIUS/2}return Jt}function S(k){return k*Math.PI/180}l.geometry=function k(V){var pe,We=0;switch(V.type){case"Polygon":return y(V.coordinates);case"MultiPolygon":for(pe=0;pe<V.coordinates.length;pe++)We+=y(V.coordinates[pe]);return We;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(pe=0;pe<V.geometries.length;pe++)We+=k(V.geometries[pe]);return We}},l.ring=v;var P={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},D={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},E={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},F={POLYGON:"polygon",LINE:"line_string",POINT:"point"},z={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},W={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},$={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},Y={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},Q={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},K={ACTIVE:"true",INACTIVE:"false"},xe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],de=-85,be=Object.freeze({__proto__:null,classes:P,sources:D,cursors:E,types:F,geojsonTypes:z,modes:W,events:$,updateActions:Y,meta:Q,activeStates:K,interactions:xe,LAT_MIN:-90,LAT_RENDERED_MIN:de,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),me={Point:0,LineString:1,MultiLineString:1,Polygon:2};function ve(k,V){var pe=me[k.geometry.type]-me[V.geometry.type];return pe===0&&k.geometry.type===z.POLYGON?k.area-V.area:pe}function Re(k){return k.map(function(V){return V.geometry.type===z.POLYGON&&(V.area=l.geometry({type:z.FEATURE,property:{},geometry:V.geometry})),V}).sort(ve).map(function(V){return delete V.area,V})}function le(k,V){return V===void 0&&(V=0),[[k.point.x-V,k.point.y-V],[k.point.x+V,k.point.y+V]]}function G(k){if(this._items={},this._nums={},this._length=k?k.length:0,k)for(var V=0,pe=k.length;V<pe;V++)this.add(k[V]),k[V]!==void 0&&(typeof k[V]=="string"?this._items[k[V]]=V:this._nums[k[V]]=V)}G.prototype.add=function(k){return this.has(k)||(this._length++,typeof k=="string"?this._items[k]=this._length:this._nums[k]=this._length),this},G.prototype.delete=function(k){return this.has(k)===!1||(this._length--,delete this._items[k],delete this._nums[k]),this},G.prototype.has=function(k){return(typeof k=="string"||typeof k=="number")&&(this._items[k]!==void 0||this._nums[k]!==void 0)},G.prototype.values=function(){var k=this,V=[];return Object.keys(this._items).forEach(function(pe){V.push({k:pe,v:k._items[pe]})}),Object.keys(this._nums).forEach(function(pe){V.push({k:JSON.parse(pe),v:k._nums[pe]})}),V.sort(function(pe,We){return pe.v-We.v}).map(function(pe){return pe.k})},G.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Ae=[Q.FEATURE,Q.MIDPOINT,Q.VERTEX],we={click:function(k,V,pe){return lt(k,V,pe,pe.options.clickBuffer)},touch:function(k,V,pe){return lt(k,V,pe,pe.options.touchBuffer)}};function lt(k,V,pe,We){if(pe.map===null)return[];var nt=k?le(k,We):V,Ye={};pe.options.styles&&(Ye.layers=pe.options.styles.map(function(Cr){return Cr.id}).filter(function(Cr){return pe.map.getLayer(Cr)!=null}));var yt=pe.map.queryRenderedFeatures(nt,Ye).filter(function(Cr){return Ae.indexOf(Cr.properties.meta)!==-1}),Jt=new G,ur=[];return yt.forEach(function(Cr){var xr=Cr.properties.id;Jt.has(xr)||(Jt.add(xr),ur.push(Cr))}),Re(ur)}function pt(k,V){var pe=we.click(k,null,V),We={mouse:E.NONE};return pe[0]&&(We.mouse=pe[0].properties.active===K.ACTIVE?E.MOVE:E.POINTER,We.feature=pe[0].properties.meta),V.events.currentModeName().indexOf("draw")!==-1&&(We.mouse=E.ADD),V.ui.queueMapClasses(We),V.ui.updateMapClasses(),pe[0]}function At(k,V){var pe=k.x-V.x,We=k.y-V.y;return Math.sqrt(pe*pe+We*We)}function Ze(k,V,pe){pe===void 0&&(pe={});var We=pe.fineTolerance!=null?pe.fineTolerance:4,nt=pe.grossTolerance!=null?pe.grossTolerance:12,Ye=pe.interval!=null?pe.interval:500;k.point=k.point||V.point,k.time=k.time||V.time;var yt=At(k.point,V.point);return yt<We||yt<nt&&V.time-k.time<Ye}function tt(k,V,pe){pe===void 0&&(pe={});var We=pe.tolerance!=null?pe.tolerance:25,nt=pe.interval!=null?pe.interval:250;return k.point=k.point||V.point,k.time=k.time||V.time,At(k.point,V.point)<We&&V.time-k.time<nt}var Ot={exports:{}},St=Ot.exports=function(k,V){if(V||(V=16),k===void 0&&(k=128),k<=0)return"0";for(var pe=Math.log(Math.pow(2,k))/Math.log(V),We=2;pe===1/0;We*=2)pe=Math.log(Math.pow(2,k/We))/Math.log(V)*We;var nt=pe-Math.floor(pe),Ye="";for(We=0;We<Math.floor(pe);We++)Ye=Math.floor(Math.random()*V).toString(V)+Ye;if(nt){var yt=Math.pow(V,nt);Ye=Math.floor(Math.random()*yt).toString(V)+Ye}var Jt=parseInt(Ye,V);return Jt!==1/0&&Jt>=Math.pow(2,k)?St(k,V):Ye};St.rack=function(k,V,pe){var We=function(Ye){var yt=0;do{if(yt++>10){if(!pe)throw new Error("too many ID collisions, use more bits");k+=pe}var Jt=St(k,V)}while(Object.hasOwnProperty.call(nt,Jt));return nt[Jt]=Ye,Jt},nt=We.hats={};return We.get=function(Ye){return We.hats[Ye]},We.set=function(Ye,yt){return We.hats[Ye]=yt,We},We.bits=k||128,We.base=V||16,We};var ne=n(Ot.exports),Ee=function(k,V){this.ctx=k,this.properties=V.properties||{},this.coordinates=V.geometry.coordinates,this.id=V.id||ne(),this.type=V.geometry.type};Ee.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},Ee.prototype.incomingCoords=function(k){this.setCoordinates(k)},Ee.prototype.setCoordinates=function(k){this.coordinates=k,this.changed()},Ee.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},Ee.prototype.setProperty=function(k,V){this.properties[k]=V},Ee.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:z.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},Ee.prototype.internal=function(k){var V={id:this.id,meta:Q.FEATURE,"meta:type":this.type,active:K.INACTIVE,mode:k};if(this.ctx.options.userProperties)for(var pe in this.properties)V["user_"+pe]=this.properties[pe];return{type:z.FEATURE,properties:V,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Ne=function(k,V){Ee.call(this,k,V)};(Ne.prototype=Object.create(Ee.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},Ne.prototype.updateCoordinate=function(k,V,pe){this.coordinates=arguments.length===3?[V,pe]:[k,V],this.changed()},Ne.prototype.getCoordinate=function(){return this.getCoordinates()};var qe=function(k,V){Ee.call(this,k,V)};(qe.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length>1},qe.prototype.addCoordinate=function(k,V,pe){this.changed();var We=parseInt(k,10);this.coordinates.splice(We,0,[V,pe])},qe.prototype.getCoordinate=function(k){var V=parseInt(k,10);return JSON.parse(JSON.stringify(this.coordinates[V]))},qe.prototype.removeCoordinate=function(k){this.changed(),this.coordinates.splice(parseInt(k,10),1)},qe.prototype.updateCoordinate=function(k,V,pe){var We=parseInt(k,10);this.coordinates[We]=[V,pe],this.changed()};var Je=function(k,V){Ee.call(this,k,V),this.coordinates=this.coordinates.map(function(pe){return pe.slice(0,-1)})};(Je.prototype=Object.create(Ee.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(k){return k.length>2})},Je.prototype.incomingCoords=function(k){this.coordinates=k.map(function(V){return V.slice(0,-1)}),this.changed()},Je.prototype.setCoordinates=function(k){this.coordinates=k,this.changed()},Je.prototype.addCoordinate=function(k,V,pe){this.changed();var We=k.split(".").map(function(nt){return parseInt(nt,10)});this.coordinates[We[0]].splice(We[1],0,[V,pe])},Je.prototype.removeCoordinate=function(k){this.changed();var V=k.split(".").map(function(We){return parseInt(We,10)}),pe=this.coordinates[V[0]];pe&&(pe.splice(V[1],1),pe.length<3&&this.coordinates.splice(V[0],1))},Je.prototype.getCoordinate=function(k){var V=k.split(".").map(function(We){return parseInt(We,10)}),pe=this.coordinates[V[0]];return JSON.parse(JSON.stringify(pe[V[1]]))},Je.prototype.getCoordinates=function(){return this.coordinates.map(function(k){return k.concat([k[0]])})},Je.prototype.updateCoordinate=function(k,V,pe){this.changed();var We=k.split("."),nt=parseInt(We[0],10),Ye=parseInt(We[1],10);this.coordinates[nt]===void 0&&(this.coordinates[nt]=[]),this.coordinates[nt][Ye]=[V,pe]};var gt={MultiPoint:Ne,MultiLineString:qe,MultiPolygon:Je},bt=function(k,V,pe,We,nt){var Ye=pe.split("."),yt=parseInt(Ye[0],10),Jt=Ye[1]?Ye.slice(1).join("."):null;return k[yt][V](Jt,We,nt)},ft=function(k,V){if(Ee.call(this,k,V),delete this.coordinates,this.model=gt[V.geometry.type],this.model===void 0)throw new TypeError(V.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(V.geometry.coordinates)};function Ct(k){this.map=k.map,this.drawConfig=JSON.parse(JSON.stringify(k.options||{})),this._ctx=k}(ft.prototype=Object.create(Ee.prototype))._coordinatesToFeatures=function(k){var V=this,pe=this.model.bind(this);return k.map(function(We){return new pe(V.ctx,{id:ne(),type:z.FEATURE,properties:{},geometry:{coordinates:We,type:V.type.replace("Multi","")}})})},ft.prototype.isValid=function(){return this.features.every(function(k){return k.isValid()})},ft.prototype.setCoordinates=function(k){this.features=this._coordinatesToFeatures(k),this.changed()},ft.prototype.getCoordinate=function(k){return bt(this.features,"getCoordinate",k)},ft.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(k){return k.type===z.POLYGON?k.getCoordinates():k.coordinates})))},ft.prototype.updateCoordinate=function(k,V,pe){bt(this.features,"updateCoordinate",k,V,pe),this.changed()},ft.prototype.addCoordinate=function(k,V,pe){bt(this.features,"addCoordinate",k,V,pe),this.changed()},ft.prototype.removeCoordinate=function(k){bt(this.features,"removeCoordinate",k),this.changed()},ft.prototype.getFeatures=function(){return this.features},Ct.prototype.setSelected=function(k){return this._ctx.store.setSelected(k)},Ct.prototype.setSelectedCoordinates=function(k){var V=this;this._ctx.store.setSelectedCoordinates(k),k.reduce(function(pe,We){return pe[We.feature_id]===void 0&&(pe[We.feature_id]=!0,V._ctx.store.get(We.feature_id).changed()),pe},{})},Ct.prototype.getSelected=function(){return this._ctx.store.getSelected()},Ct.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},Ct.prototype.isSelected=function(k){return this._ctx.store.isSelected(k)},Ct.prototype.getFeature=function(k){return this._ctx.store.get(k)},Ct.prototype.select=function(k){return this._ctx.store.select(k)},Ct.prototype.deselect=function(k){return this._ctx.store.deselect(k)},Ct.prototype.deleteFeature=function(k,V){return V===void 0&&(V={}),this._ctx.store.delete(k,V)},Ct.prototype.addFeature=function(k){return this._ctx.store.add(k)},Ct.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},Ct.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},Ct.prototype.setActionableState=function(k){k===void 0&&(k={});var V={trash:k.trash||!1,combineFeatures:k.combineFeatures||!1,uncombineFeatures:k.uncombineFeatures||!1};return this._ctx.events.actionable(V)},Ct.prototype.changeMode=function(k,V,pe){return V===void 0&&(V={}),pe===void 0&&(pe={}),this._ctx.events.changeMode(k,V,pe)},Ct.prototype.updateUIClasses=function(k){return this._ctx.ui.queueMapClasses(k)},Ct.prototype.activateUIButton=function(k){return this._ctx.ui.setActiveButton(k)},Ct.prototype.featuresAt=function(k,V,pe){if(pe===void 0&&(pe="click"),pe!=="click"&&pe!=="touch")throw new Error("invalid buffer type");return we[pe](k,V,this._ctx)},Ct.prototype.newFeature=function(k){var V=k.geometry.type;return V===z.POINT?new Ne(this._ctx,k):V===z.LINE_STRING?new qe(this._ctx,k):V===z.POLYGON?new Je(this._ctx,k):new ft(this._ctx,k)},Ct.prototype.isInstanceOf=function(k,V){if(k===z.POINT)return V instanceof Ne;if(k===z.LINE_STRING)return V instanceof qe;if(k===z.POLYGON)return V instanceof Je;if(k==="MultiFeature")return V instanceof ft;throw new Error("Unknown feature class: "+k)},Ct.prototype.doRender=function(k){return this._ctx.store.featureChanged(k)},Ct.prototype.onSetup=function(){},Ct.prototype.onDrag=function(){},Ct.prototype.onClick=function(){},Ct.prototype.onMouseMove=function(){},Ct.prototype.onMouseDown=function(){},Ct.prototype.onMouseUp=function(){},Ct.prototype.onMouseOut=function(){},Ct.prototype.onKeyUp=function(){},Ct.prototype.onKeyDown=function(){},Ct.prototype.onTouchStart=function(){},Ct.prototype.onTouchMove=function(){},Ct.prototype.onTouchEnd=function(){},Ct.prototype.onTap=function(){},Ct.prototype.onStop=function(){},Ct.prototype.onTrash=function(){},Ct.prototype.onCombineFeature=function(){},Ct.prototype.onUncombineFeature=function(){},Ct.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ut={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},gr=Object.keys(Ut);function rr(k){var V=Object.keys(k);return function(pe,We){We===void 0&&(We={});var nt={},Ye=V.reduce(function(yt,Jt){return yt[Jt]=k[Jt],yt},new Ct(pe));return{start:function(){var yt=this;nt=Ye.onSetup(We),gr.forEach(function(Jt){var ur,Cr=Ut[Jt],xr=function(){return!1};k[Cr]&&(xr=function(){return!0}),yt.on(Jt,xr,(ur=Cr,function(ar){return Ye[ur](nt,ar)}))})},stop:function(){Ye.onStop(nt)},trash:function(){Ye.onTrash(nt)},combineFeatures:function(){Ye.onCombineFeatures(nt)},uncombineFeatures:function(){Ye.onUncombineFeatures(nt)},render:function(yt,Jt){Ye.toDisplayFeatures(nt,yt,Jt)}}}}function It(k){return[].concat(k).filter(function(V){return V!==void 0})}function Ue(){var k=this;if(!(k.ctx.map&&k.ctx.map.getSource(D.HOT)!==void 0))return ur();var V=k.ctx.events.currentModeName();k.ctx.ui.queueMapClasses({mode:V});var pe=[],We=[];k.isDirty?We=k.getAllIds():(pe=k.getChangedIds().filter(function(Cr){return k.get(Cr)!==void 0}),We=k.sources.hot.filter(function(Cr){return Cr.properties.id&&pe.indexOf(Cr.properties.id)===-1&&k.get(Cr.properties.id)!==void 0}).map(function(Cr){return Cr.properties.id})),k.sources.hot=[];var nt=k.sources.cold.length;k.sources.cold=k.isDirty?[]:k.sources.cold.filter(function(Cr){var xr=Cr.properties.id||Cr.properties.parent;return pe.indexOf(xr)===-1});var Ye=nt!==k.sources.cold.length||We.length>0;function yt(Cr,xr){var ar=k.get(Cr).internal(V);k.ctx.events.currentModeRender(ar,function(an){k.sources[xr].push(an)})}if(pe.forEach(function(Cr){return yt(Cr,"hot")}),We.forEach(function(Cr){return yt(Cr,"cold")}),Ye&&k.ctx.map.getSource(D.COLD).setData({type:z.FEATURE_COLLECTION,features:k.sources.cold}),k.ctx.map.getSource(D.HOT).setData({type:z.FEATURE_COLLECTION,features:k.sources.hot}),k._emitSelectionChange&&(k.ctx.map.fire($.SELECTION_CHANGE,{features:k.getSelected().map(function(Cr){return Cr.toGeoJSON()}),points:k.getSelectedCoordinates().map(function(Cr){return{type:z.FEATURE,properties:{},geometry:{type:z.POINT,coordinates:Cr.coordinates}}})}),k._emitSelectionChange=!1),k._deletedFeaturesToEmit.length){var Jt=k._deletedFeaturesToEmit.map(function(Cr){return Cr.toGeoJSON()});k._deletedFeaturesToEmit=[],k.ctx.map.fire($.DELETE,{features:Jt})}function ur(){k.isDirty=!1,k.clearChangedIds()}ur(),k.ctx.map.fire($.RENDER,{})}function Lr(k){var V,pe=this;this._features={},this._featureIds=new G,this._selectedFeatureIds=new G,this._selectedCoordinates=[],this._changedFeatureIds=new G,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=k,this.sources={hot:[],cold:[]},this.render=function(){V||(V=requestAnimationFrame(function(){V=null,Ue.call(pe)}))},this.isDirty=!1}function Nr(k,V){var pe=k._selectedCoordinates.filter(function(We){return k._selectedFeatureIds.has(We.feature_id)});k._selectedCoordinates.length===pe.length||V.silent||(k._emitSelectionChange=!0),k._selectedCoordinates=pe}Lr.prototype.createRenderBatch=function(){var k=this,V=this.render,pe=0;return this.render=function(){pe++},function(){k.render=V,pe>0&&k.render()}},Lr.prototype.setDirty=function(){return this.isDirty=!0,this},Lr.prototype.featureChanged=function(k){return this._changedFeatureIds.add(k),this},Lr.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Lr.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Lr.prototype.getAllIds=function(){return this._featureIds.values()},Lr.prototype.add=function(k){return this.featureChanged(k.id),this._features[k.id]=k,this._featureIds.add(k.id),this},Lr.prototype.delete=function(k,V){var pe=this;return V===void 0&&(V={}),It(k).forEach(function(We){pe._featureIds.has(We)&&(pe._featureIds.delete(We),pe._selectedFeatureIds.delete(We),V.silent||pe._deletedFeaturesToEmit.indexOf(pe._features[We])===-1&&pe._deletedFeaturesToEmit.push(pe._features[We]),delete pe._features[We],pe.isDirty=!0)}),Nr(this,V),this},Lr.prototype.get=function(k){return this._features[k]},Lr.prototype.getAll=function(){var k=this;return Object.keys(this._features).map(function(V){return k._features[V]})},Lr.prototype.select=function(k,V){var pe=this;return V===void 0&&(V={}),It(k).forEach(function(We){pe._selectedFeatureIds.has(We)||(pe._selectedFeatureIds.add(We),pe._changedFeatureIds.add(We),V.silent||(pe._emitSelectionChange=!0))}),this},Lr.prototype.deselect=function(k,V){var pe=this;return V===void 0&&(V={}),It(k).forEach(function(We){pe._selectedFeatureIds.has(We)&&(pe._selectedFeatureIds.delete(We),pe._changedFeatureIds.add(We),V.silent||(pe._emitSelectionChange=!0))}),Nr(this,V),this},Lr.prototype.clearSelected=function(k){return k===void 0&&(k={}),this.deselect(this._selectedFeatureIds.values(),{silent:k.silent}),this},Lr.prototype.setSelected=function(k,V){var pe=this;return V===void 0&&(V={}),k=It(k),this.deselect(this._selectedFeatureIds.values().filter(function(We){return k.indexOf(We)===-1}),{silent:V.silent}),this.select(k.filter(function(We){return!pe._selectedFeatureIds.has(We)}),{silent:V.silent}),this},Lr.prototype.setSelectedCoordinates=function(k){return this._selectedCoordinates=k,this._emitSelectionChange=!0,this},Lr.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Lr.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Lr.prototype.getSelected=function(){var k=this;return this._selectedFeatureIds.values().map(function(V){return k.get(V)})},Lr.prototype.getSelectedCoordinates=function(){var k=this;return this._selectedCoordinates.map(function(V){return{coordinates:k.get(V.feature_id).getCoordinate(V.coord_path)}})},Lr.prototype.isSelected=function(k){return this._selectedFeatureIds.has(k)},Lr.prototype.setFeatureProperty=function(k,V,pe){this.get(k).setProperty(V,pe),this.featureChanged(k)},Lr.prototype.storeMapConfig=function(){var k=this;xe.forEach(function(V){k.ctx.map[V]&&(k._mapInitialConfig[V]=k.ctx.map[V].isEnabled())})},Lr.prototype.restoreMapConfig=function(){var k=this;Object.keys(this._mapInitialConfig).forEach(function(V){k._mapInitialConfig[V]?k.ctx.map[V].enable():k.ctx.map[V].disable()})},Lr.prototype.getInitialConfigValue=function(k){return this._mapInitialConfig[k]===void 0||this._mapInitialConfig[k]};var Pr=function(){for(var k=arguments,V={},pe=0;pe<arguments.length;pe++){var We=k[pe];for(var nt in We)Ht.call(We,nt)&&(V[nt]=We[nt])}return V},Ht=Object.prototype.hasOwnProperty,Er=n(Pr),vr=["mode","feature","mouse"];function dr(k){var V=null,pe=null,We={onRemove:function(){return k.map.off("load",We.connect),clearInterval(pe),We.removeLayers(),k.store.restoreMapConfig(),k.ui.removeButtons(),k.events.removeEventListeners(),k.ui.clearMapClasses(),k.boxZoomInitial&&k.map.boxZoom.enable(),k.map=null,k.container=null,k.store=null,V&&V.parentNode&&V.parentNode.removeChild(V),V=null,this},connect:function(){k.map.off("load",We.connect),clearInterval(pe),We.addLayers(),k.store.storeMapConfig(),k.events.addEventListeners()},onAdd:function(nt){var Ye=nt.fire;return nt.fire=function(yt,Jt){var ur=arguments;return Ye.length===1&&arguments.length!==1&&(ur=[Er({},{type:yt},Jt)]),Ye.apply(nt,ur)},k.map=nt,k.events=function(yt){var Jt=Object.keys(yt.options.modes).reduce(function(Zt,Ir){return Zt[Ir]=rr(yt.options.modes[Ir]),Zt},{}),ur={},Cr={},xr={},ar=null,an=null;xr.drag=function(Zt,Ir){Ir({point:Zt.point,time:new Date().getTime()})?(yt.ui.queueMapClasses({mouse:E.DRAG}),an.drag(Zt)):Zt.originalEvent.stopPropagation()},xr.mousedrag=function(Zt){xr.drag(Zt,function(Ir){return!Ze(ur,Ir)})},xr.touchdrag=function(Zt){xr.drag(Zt,function(Ir){return!tt(Cr,Ir)})},xr.mousemove=function(Zt){if((Zt.originalEvent.buttons!==void 0?Zt.originalEvent.buttons:Zt.originalEvent.which)===1)return xr.mousedrag(Zt);var Ir=pt(Zt,yt);Zt.featureTarget=Ir,an.mousemove(Zt)},xr.mousedown=function(Zt){ur={time:new Date().getTime(),point:Zt.point};var Ir=pt(Zt,yt);Zt.featureTarget=Ir,an.mousedown(Zt)},xr.mouseup=function(Zt){var Ir=pt(Zt,yt);Zt.featureTarget=Ir,Ze(ur,{point:Zt.point,time:new Date().getTime()})?an.click(Zt):an.mouseup(Zt)},xr.mouseout=function(Zt){an.mouseout(Zt)},xr.touchstart=function(Zt){if(yt.options.touchEnabled){Cr={time:new Date().getTime(),point:Zt.point};var Ir=we.touch(Zt,null,yt)[0];Zt.featureTarget=Ir,an.touchstart(Zt)}},xr.touchmove=function(Zt){if(yt.options.touchEnabled)return an.touchmove(Zt),xr.touchdrag(Zt)},xr.touchend=function(Zt){if(Zt.originalEvent.preventDefault(),yt.options.touchEnabled){var Ir=we.touch(Zt,null,yt)[0];Zt.featureTarget=Ir,tt(Cr,{time:new Date().getTime(),point:Zt.point})?an.tap(Zt):an.touchend(Zt)}};var jr=function(Zt){return!(Zt===8||Zt===46||Zt>=48&&Zt<=57)};function yn(Zt,Ir,xn){xn===void 0&&(xn={}),an.stop();var Jn=Jt[Zt];if(Jn===void 0)throw new Error(Zt+" is not valid");ar=Zt;var Pn=Jn(yt,Ir);an=r(Pn,yt),xn.silent||yt.map.fire($.MODE_CHANGE,{mode:Zt}),yt.store.setDirty(),yt.store.render()}xr.keydown=function(Zt){(Zt.srcElement||Zt.target).classList.contains("mapboxgl-canvas")&&(Zt.keyCode!==8&&Zt.keyCode!==46||!yt.options.controls.trash?jr(Zt.keyCode)?an.keydown(Zt):Zt.keyCode===49&&yt.options.controls.point?yn(W.DRAW_POINT):Zt.keyCode===50&&yt.options.controls.line_string?yn(W.DRAW_LINE_STRING):Zt.keyCode===51&&yt.options.controls.polygon&&yn(W.DRAW_POLYGON):(Zt.preventDefault(),an.trash()))},xr.keyup=function(Zt){jr(Zt.keyCode)&&an.keyup(Zt)},xr.zoomend=function(){yt.store.changeZoom()},xr.data=function(Zt){if(Zt.dataType==="style"){var Ir=yt.setup,xn=yt.map,Jn=yt.options,Pn=yt.store;Jn.styles.some(function(ii){return xn.getLayer(ii.id)})||(Ir.addLayers(),Pn.setDirty(),Pn.render())}};var Vr={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){ar=yt.options.defaultMode,an=r(Jt[ar](yt),yt)},changeMode:yn,actionable:function(Zt){var Ir=!1;Object.keys(Zt).forEach(function(xn){if(Vr[xn]===void 0)throw new Error("Invalid action type");Vr[xn]!==Zt[xn]&&(Ir=!0),Vr[xn]=Zt[xn]}),Ir&&yt.map.fire($.ACTIONABLE,{actions:Vr})},currentModeName:function(){return ar},currentModeRender:function(Zt,Ir){return an.render(Zt,Ir)},fire:function(Zt,Ir){xr[Zt]&&xr[Zt](Ir)},addEventListeners:function(){yt.map.on("mousemove",xr.mousemove),yt.map.on("mousedown",xr.mousedown),yt.map.on("mouseup",xr.mouseup),yt.map.on("data",xr.data),yt.map.on("touchmove",xr.touchmove),yt.map.on("touchstart",xr.touchstart),yt.map.on("touchend",xr.touchend),yt.container.addEventListener("mouseout",xr.mouseout),yt.options.keybindings&&(yt.container.addEventListener("keydown",xr.keydown),yt.container.addEventListener("keyup",xr.keyup))},removeEventListeners:function(){yt.map.off("mousemove",xr.mousemove),yt.map.off("mousedown",xr.mousedown),yt.map.off("mouseup",xr.mouseup),yt.map.off("data",xr.data),yt.map.off("touchmove",xr.touchmove),yt.map.off("touchstart",xr.touchstart),yt.map.off("touchend",xr.touchend),yt.container.removeEventListener("mouseout",xr.mouseout),yt.options.keybindings&&(yt.container.removeEventListener("keydown",xr.keydown),yt.container.removeEventListener("keyup",xr.keyup))},trash:function(Zt){an.trash(Zt)},combineFeatures:function(){an.combineFeatures()},uncombineFeatures:function(){an.uncombineFeatures()},getMode:function(){return ar}}}(k),k.ui=function(yt){var Jt={},ur=null,Cr={mode:null,feature:null,mouse:null},xr={mode:null,feature:null,mouse:null};function ar(Zt){xr=Er(xr,Zt)}function an(){var Zt,Ir;if(yt.container){var xn=[],Jn=[];vr.forEach(function(Pn){xr[Pn]!==Cr[Pn]&&(xn.push(Pn+"-"+Cr[Pn]),xr[Pn]!==null&&Jn.push(Pn+"-"+xr[Pn]))}),xn.length>0&&(Zt=yt.container.classList).remove.apply(Zt,xn),Jn.length>0&&(Ir=yt.container.classList).add.apply(Ir,Jn),Cr=Er(Cr,xr)}}function jr(Zt,Ir){Ir===void 0&&(Ir={});var xn=document.createElement("button");return xn.className=P.CONTROL_BUTTON+" "+Ir.className,xn.setAttribute("title",Ir.title),Ir.container.appendChild(xn),xn.addEventListener("click",function(Jn){if(Jn.preventDefault(),Jn.stopPropagation(),Jn.target===ur)return yn(),void Ir.onDeactivate();Vr(Zt),Ir.onActivate()},!0),xn}function yn(){ur&&(ur.classList.remove(P.ACTIVE_BUTTON),ur=null)}function Vr(Zt){yn();var Ir=Jt[Zt];Ir&&Ir&&Zt!=="trash"&&(Ir.classList.add(P.ACTIVE_BUTTON),ur=Ir)}return{setActiveButton:Vr,queueMapClasses:ar,updateMapClasses:an,clearMapClasses:function(){ar({mode:null,feature:null,mouse:null}),an()},addButtons:function(){var Zt=yt.options.controls,Ir=document.createElement("div");return Ir.className=P.CONTROL_GROUP+" "+P.CONTROL_BASE,Zt&&(Zt[F.LINE]&&(Jt[F.LINE]=jr(F.LINE,{container:Ir,className:P.CONTROL_BUTTON_LINE,title:"LineString tool "+(yt.options.keybindings?"(l)":""),onActivate:function(){return yt.events.changeMode(W.DRAW_LINE_STRING)},onDeactivate:function(){return yt.events.trash()}})),Zt[F.POLYGON]&&(Jt[F.POLYGON]=jr(F.POLYGON,{container:Ir,className:P.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(yt.options.keybindings?"(p)":""),onActivate:function(){return yt.events.changeMode(W.DRAW_POLYGON)},onDeactivate:function(){return yt.events.trash()}})),Zt[F.POINT]&&(Jt[F.POINT]=jr(F.POINT,{container:Ir,className:P.CONTROL_BUTTON_POINT,title:"Marker tool "+(yt.options.keybindings?"(m)":""),onActivate:function(){return yt.events.changeMode(W.DRAW_POINT)},onDeactivate:function(){return yt.events.trash()}})),Zt.trash&&(Jt.trash=jr("trash",{container:Ir,className:P.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){yt.events.trash()}})),Zt.combine_features&&(Jt.combine_features=jr("combineFeatures",{container:Ir,className:P.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){yt.events.combineFeatures()}})),Zt.uncombine_features&&(Jt.uncombine_features=jr("uncombineFeatures",{container:Ir,className:P.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){yt.events.uncombineFeatures()}}))),Ir},removeButtons:function(){Object.keys(Jt).forEach(function(Zt){var Ir=Jt[Zt];Ir.parentNode&&Ir.parentNode.removeChild(Ir),delete Jt[Zt]})}}}(k),k.container=nt.getContainer(),k.store=new Lr(k),V=k.ui.addButtons(),k.options.boxSelect&&(k.boxZoomInitial=nt.boxZoom.isEnabled(),nt.boxZoom.disable(),nt.dragPan.disable(),nt.dragPan.enable()),nt.loaded()?We.connect():(nt.on("load",We.connect),pe=setInterval(function(){nt.loaded()&&We.connect()},16)),k.events.start(),V},addLayers:function(){k.map.addSource(D.COLD,{data:{type:z.FEATURE_COLLECTION,features:[]},type:"geojson"}),k.map.addSource(D.HOT,{data:{type:z.FEATURE_COLLECTION,features:[]},type:"geojson"}),k.options.styles.forEach(function(nt){k.map.addLayer(nt)}),k.store.setDirty(!0),k.store.render()},removeLayers:function(){k.options.styles.forEach(function(nt){k.map.getLayer(nt.id)&&k.map.removeLayer(nt.id)}),k.map.getSource(D.COLD)&&k.map.removeSource(D.COLD),k.map.getSource(D.HOT)&&k.map.removeSource(D.HOT)}};return k.setup=We,We}var qr=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function En(k){return function(V){var pe=V.featureTarget;return!!pe&&!!pe.properties&&pe.properties.meta===k}}function cn(k){return!!k.originalEvent&&!!k.originalEvent.shiftKey&&k.originalEvent.button===0}function Jr(k){return!!k.featureTarget&&!!k.featureTarget.properties&&k.featureTarget.properties.active===K.ACTIVE&&k.featureTarget.properties.meta===Q.FEATURE}function An(k){return!!k.featureTarget&&!!k.featureTarget.properties&&k.featureTarget.properties.active===K.INACTIVE&&k.featureTarget.properties.meta===Q.FEATURE}function en(k){return k.featureTarget===void 0}function Ur(k){return!!k.featureTarget&&!!k.featureTarget.properties&&k.featureTarget.properties.meta===Q.FEATURE}function Br(k){var V=k.featureTarget;return!!V&&!!V.properties&&V.properties.meta===Q.VERTEX}function _r(k){return!!k.originalEvent&&k.originalEvent.shiftKey===!0}function ot(k){return k.keyCode===27}function ae(k){return k.keyCode===13}var oe=Object.freeze({__proto__:null,isOfMetaType:En,isShiftMousedown:cn,isActiveFeature:Jr,isInactiveFeature:An,noTarget:en,isFeature:Ur,isVertex:Br,isShiftDown:_r,isEscapeKey:ot,isEnterKey:ae,isTrue:function(){return!0}}),ye=De;function De(k,V){this.x=k,this.y=V}De.prototype={clone:function(){return new De(this.x,this.y)},add:function(k){return this.clone()._add(k)},sub:function(k){return this.clone()._sub(k)},multByPoint:function(k){return this.clone()._multByPoint(k)},divByPoint:function(k){return this.clone()._divByPoint(k)},mult:function(k){return this.clone()._mult(k)},div:function(k){return this.clone()._div(k)},rotate:function(k){return this.clone()._rotate(k)},rotateAround:function(k,V){return this.clone()._rotateAround(k,V)},matMult:function(k){return this.clone()._matMult(k)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(k){return this.x===k.x&&this.y===k.y},dist:function(k){return Math.sqrt(this.distSqr(k))},distSqr:function(k){var V=k.x-this.x,pe=k.y-this.y;return V*V+pe*pe},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(k){return Math.atan2(this.y-k.y,this.x-k.x)},angleWith:function(k){return this.angleWithSep(k.x,k.y)},angleWithSep:function(k,V){return Math.atan2(this.x*V-this.y*k,this.x*k+this.y*V)},_matMult:function(k){var V=k[0]*this.x+k[1]*this.y,pe=k[2]*this.x+k[3]*this.y;return this.x=V,this.y=pe,this},_add:function(k){return this.x+=k.x,this.y+=k.y,this},_sub:function(k){return this.x-=k.x,this.y-=k.y,this},_mult:function(k){return this.x*=k,this.y*=k,this},_div:function(k){return this.x/=k,this.y/=k,this},_multByPoint:function(k){return this.x*=k.x,this.y*=k.y,this},_divByPoint:function(k){return this.x/=k.x,this.y/=k.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var k=this.y;return this.y=this.x,this.x=-k,this},_rotate:function(k){var V=Math.cos(k),pe=Math.sin(k),We=V*this.x-pe*this.y,nt=pe*this.x+V*this.y;return this.x=We,this.y=nt,this},_rotateAround:function(k,V){var pe=Math.cos(k),We=Math.sin(k),nt=V.x+pe*(this.x-V.x)-We*(this.y-V.y),Ye=V.y+We*(this.x-V.x)+pe*(this.y-V.y);return this.x=nt,this.y=Ye,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},De.convert=function(k){return k instanceof De?k:Array.isArray(k)?new De(k[0],k[1]):k};var Ve=n(ye);function rt(k,V){var pe=V.getBoundingClientRect();return new Ve(k.clientX-pe.left-(V.clientLeft||0),k.clientY-pe.top-(V.clientTop||0))}function ht(k,V,pe,We){return{type:z.FEATURE,properties:{meta:Q.VERTEX,parent:k,coord_path:pe,active:We?K.ACTIVE:K.INACTIVE},geometry:{type:z.POINT,coordinates:V}}}function ct(k,V,pe){var We=V.geometry.coordinates,nt=pe.geometry.coordinates;if(We[1]>85||We[1]<de||nt[1]>85||nt[1]<de)return null;var Ye={lng:(We[0]+nt[0])/2,lat:(We[1]+nt[1])/2};return{type:z.FEATURE,properties:{meta:Q.MIDPOINT,parent:k,lng:Ye.lng,lat:Ye.lat,coord_path:pe.properties.coord_path},geometry:{type:z.POINT,coordinates:[Ye.lng,Ye.lat]}}}function Lt(k,V,pe){V===void 0&&(V={}),pe===void 0&&(pe=null);var We,nt=k.geometry,Ye=nt.type,yt=nt.coordinates,Jt=k.properties&&k.properties.id,ur=[];function Cr(ar,an){var jr="",yn=null;ar.forEach(function(Vr,Zt){var Ir=an!=null?an+"."+Zt:String(Zt),xn=ht(Jt,Vr,Ir,xr(Ir));if(V.midpoints&&yn){var Jn=ct(Jt,yn,xn);Jn&&ur.push(Jn)}yn=xn;var Pn=JSON.stringify(Vr);jr!==Pn&&ur.push(xn),Zt===0&&(jr=Pn)})}function xr(ar){return!!V.selectedPaths&&V.selectedPaths.indexOf(ar)!==-1}return Ye===z.POINT?ur.push(ht(Jt,yt,pe,xr(pe))):Ye===z.POLYGON?yt.forEach(function(ar,an){Cr(ar,pe!==null?pe+"."+an:String(an))}):Ye===z.LINE_STRING?Cr(yt,pe):Ye.indexOf(z.MULTI_PREFIX)===0&&(We=Ye.replace(z.MULTI_PREFIX,""),yt.forEach(function(ar,an){var jr={type:z.FEATURE,properties:k.properties,geometry:{type:We,coordinates:ar}};ur=ur.concat(Lt(jr,V,an))})),ur}var wt={enable:function(k){setTimeout(function(){k.map&&k.map.doubleClickZoom&&k._ctx&&k._ctx.store&&k._ctx.store.getInitialConfigValue&&k._ctx.store.getInitialConfigValue("doubleClickZoom")&&k.map.doubleClickZoom.enable()},0)},disable:function(k){setTimeout(function(){k.map&&k.map.doubleClickZoom&&k.map.doubleClickZoom.disable()},0)}},st={exports:{}},Ft=function(k){if(!k||!k.type)return null;var V=it[k.type];if(!V)return null;if(V==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:k}]};if(V==="feature")return{type:"FeatureCollection",features:[k]};if(V==="featurecollection")return k},it={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},hr=n(Ft),Xr=Object.freeze({__proto__:null,default:function k(V){switch(V&&V.type||null){case"FeatureCollection":return V.features=V.features.reduce(function(pe,We){return pe.concat(k(We))},[]),V;case"Feature":return V.geometry?k(V.geometry).map(function(pe){var We={type:"Feature",properties:JSON.parse(JSON.stringify(V.properties)),geometry:pe};return V.id!==void 0&&(We.id=V.id),We}):[V];case"MultiPoint":return V.coordinates.map(function(pe){return{type:"Point",coordinates:pe}});case"MultiPolygon":return V.coordinates.map(function(pe){return{type:"Polygon",coordinates:pe}});case"MultiLineString":return V.coordinates.map(function(pe){return{type:"LineString",coordinates:pe}});case"GeometryCollection":return V.geometries.map(k).reduce(function(pe,We){return pe.concat(We)},[]);case"Point":case"Polygon":case"LineString":return[V]}}}),wr=Ft,er=s(Xr),nn=function(k){return function V(pe){return Array.isArray(pe)&&pe.length&&typeof pe[0]=="number"?[pe]:pe.reduce(function(We,nt){return Array.isArray(nt)&&Array.isArray(nt[0])?We.concat(V(nt)):(We.push(nt),We)},[])}(k)};er instanceof Function||(er=er.default);var Hn={exports:{}},Dn=Hn.exports=function(k){return new hn(k)};function hn(k){this.value=k}function Dr(k,V,pe){var We=[],nt=[],Ye=!0;return function yt(Jt){var ur=pe?fn(Jt):Jt,Cr={},xr=!0,ar={node:ur,node_:Jt,path:[].concat(We),parent:nt[nt.length-1],parents:nt,key:We.slice(-1)[0],isRoot:We.length===0,level:We.length,circular:null,update:function(yn,Vr){ar.isRoot||(ar.parent.node[ar.key]=yn),ar.node=yn,Vr&&(xr=!1)},delete:function(yn){delete ar.parent.node[ar.key],yn&&(xr=!1)},remove:function(yn){Bi(ar.parent.node)?ar.parent.node.splice(ar.key,1):delete ar.parent.node[ar.key],yn&&(xr=!1)},keys:null,before:function(yn){Cr.before=yn},after:function(yn){Cr.after=yn},pre:function(yn){Cr.pre=yn},post:function(yn){Cr.post=yn},stop:function(){Ye=!1},block:function(){xr=!1}};if(!Ye)return ar;function an(){if(typeof ar.node=="object"&&ar.node!==null){ar.keys&&ar.node_===ar.node||(ar.keys=qn(ar.node)),ar.isLeaf=ar.keys.length==0;for(var yn=0;yn<nt.length;yn++)if(nt[yn].node_===Jt){ar.circular=nt[yn];break}}else ar.isLeaf=!0,ar.keys=null;ar.notLeaf=!ar.isLeaf,ar.notRoot=!ar.isRoot}an();var jr=V.call(ar,ar.node);return jr!==void 0&&ar.update&&ar.update(jr),Cr.before&&Cr.before.call(ar,ar.node),xr&&(typeof ar.node!="object"||ar.node===null||ar.circular||(nt.push(ar),an(),Gn(ar.keys,function(yn,Vr){We.push(yn),Cr.pre&&Cr.pre.call(ar,ar.node[yn],yn);var Zt=yt(ar.node[yn]);pe&&yo.call(ar.node,yn)&&(ar.node[yn]=Zt.node),Zt.isLast=Vr==ar.keys.length-1,Zt.isFirst=Vr==0,Cr.post&&Cr.post.call(ar,Zt),We.pop()}),nt.pop()),Cr.after&&Cr.after.call(ar,ar.node)),ar}(k).node}function fn(k){if(typeof k=="object"&&k!==null){var V;if(Bi(k))V=[];else if(nr(k)==="[object Date]")V=new Date(k.getTime?k.getTime():k);else if(function(nt){return nr(nt)==="[object RegExp]"}(k))V=new RegExp(k);else if(function(nt){return nr(nt)==="[object Error]"}(k))V={message:k.message};else if(function(nt){return nr(nt)==="[object Boolean]"}(k))V=new Boolean(k);else if(function(nt){return nr(nt)==="[object Number]"}(k))V=new Number(k);else if(function(nt){return nr(nt)==="[object String]"}(k))V=new String(k);else if(Object.create&&Object.getPrototypeOf)V=Object.create(Object.getPrototypeOf(k));else if(k.constructor===Object)V={};else{var pe=k.constructor&&k.constructor.prototype||k.__proto__||{},We=function(){};We.prototype=pe,V=new We}return Gn(qn(k),function(nt){V[nt]=k[nt]}),V}return k}hn.prototype.get=function(k){for(var V=this.value,pe=0;pe<k.length;pe++){var We=k[pe];if(!V||!yo.call(V,We)){V=void 0;break}V=V[We]}return V},hn.prototype.has=function(k){for(var V=this.value,pe=0;pe<k.length;pe++){var We=k[pe];if(!V||!yo.call(V,We))return!1;V=V[We]}return!0},hn.prototype.set=function(k,V){for(var pe=this.value,We=0;We<k.length-1;We++){var nt=k[We];yo.call(pe,nt)||(pe[nt]={}),pe=pe[nt]}return pe[k[We]]=V,V},hn.prototype.map=function(k){return Dr(this.value,k,!0)},hn.prototype.forEach=function(k){return this.value=Dr(this.value,k,!1),this.value},hn.prototype.reduce=function(k,V){var pe=arguments.length===1,We=pe?this.value:V;return this.forEach(function(nt){this.isRoot&&pe||(We=k.call(this,We,nt))}),We},hn.prototype.paths=function(){var k=[];return this.forEach(function(V){k.push(this.path)}),k},hn.prototype.nodes=function(){var k=[];return this.forEach(function(V){k.push(this.node)}),k},hn.prototype.clone=function(){var k=[],V=[];return function pe(We){for(var nt=0;nt<k.length;nt++)if(k[nt]===We)return V[nt];if(typeof We=="object"&&We!==null){var Ye=fn(We);return k.push(We),V.push(Ye),Gn(qn(We),function(yt){Ye[yt]=pe(We[yt])}),k.pop(),V.pop(),Ye}return We}(this.value)};var qn=Object.keys||function(k){var V=[];for(var pe in k)V.push(pe);return V};function nr(k){return Object.prototype.toString.call(k)}var Bi=Array.isArray||function(k){return Object.prototype.toString.call(k)==="[object Array]"},Gn=function(k,V){if(k.forEach)return k.forEach(V);for(var pe=0;pe<k.length;pe++)V(k[pe],pe,k)};Gn(qn(hn.prototype),function(k){Dn[k]=function(V){var pe=[].slice.call(arguments,1),We=new hn(V);return We[k].apply(We,pe)}});var yo=Object.hasOwnProperty||function(k,V){return V in k},Xo=Hn.exports,lr=$r;function $r(k){if(!(this instanceof $r))return new $r(k);this._bbox=k||[1/0,1/0,-1/0,-1/0],this._valid=!!k}$r.prototype.include=function(k){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],k[0]),this._bbox[1]=Math.min(this._bbox[1],k[1]),this._bbox[2]=Math.max(this._bbox[2],k[0]),this._bbox[3]=Math.max(this._bbox[3],k[1]),this},$r.prototype.equals=function(k){var V;return V=k instanceof $r?k.bbox():k,this._bbox[0]==V[0]&&this._bbox[1]==V[1]&&this._bbox[2]==V[2]&&this._bbox[3]==V[3]},$r.prototype.center=function(k){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},$r.prototype.union=function(k){var V;return this._valid=!0,V=k instanceof $r?k.bbox():k,this._bbox[0]=Math.min(this._bbox[0],V[0]),this._bbox[1]=Math.min(this._bbox[1],V[1]),this._bbox[2]=Math.max(this._bbox[2],V[2]),this._bbox[3]=Math.max(this._bbox[3],V[3]),this},$r.prototype.bbox=function(){return this._valid?this._bbox:null},$r.prototype.contains=function(k){if(!k)return this._fastContains();if(!this._valid)return null;var V=k[0],pe=k[1];return this._bbox[0]<=V&&this._bbox[1]<=pe&&this._bbox[2]>=V&&this._bbox[3]>=pe},$r.prototype.intersect=function(k){return this._valid?(V=k instanceof $r?k.bbox():k,!(this._bbox[0]>V[2]||this._bbox[2]<V[0]||this._bbox[3]<V[1]||this._bbox[1]>V[3])):null;var V},$r.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var k="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",k)},$r.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var Sn=function(k){if(!k)return[];var V=er(wr(k)),pe=[];return V.features.forEach(function(We){We.geometry&&(pe=pe.concat(nn(We.geometry.coordinates)))}),pe},ro=Xo,Hs=lr,ca={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},Tn=Object.keys(ca);function ha(k){for(var V=Hs(),pe=Sn(k),We=0;We<pe.length;We++)V.include(pe[We]);return V}st.exports=function(k){return ha(k).bbox()},st.exports.polygon=function(k){return ha(k).polygon()},st.exports.bboxify=function(k){return ro(k).map(function(V){V&&Tn.some(function(pe){return!!V[pe]&&ca[pe].indexOf(V.type)!==-1})&&(V.bbox=ha(V).bbox(),this.update(V))})};var Sl=n(st.exports),Si=-90;function Ws(k,V){var pe=Si,We=90,nt=Si,Ye=90,yt=270,Jt=-270;k.forEach(function(Cr){var xr=Sl(Cr),ar=xr[1],an=xr[3],jr=xr[0],yn=xr[2];ar>pe&&(pe=ar),an<We&&(We=an),an>nt&&(nt=an),ar<Ye&&(Ye=ar),jr<yt&&(yt=jr),yn>Jt&&(Jt=yn)});var ur=V;return pe+ur.lat>85&&(ur.lat=85-pe),nt+ur.lat>90&&(ur.lat=90-nt),We+ur.lat<-85&&(ur.lat=-85-We),Ye+ur.lat<Si&&(ur.lat=Si-Ye),yt+ur.lng<=-270&&(ur.lng+=360*Math.ceil(Math.abs(ur.lng)/360)),Jt+ur.lng>=270&&(ur.lng-=360*Math.ceil(Math.abs(ur.lng)/360)),ur}function Zs(k,V){var pe=Ws(k.map(function(We){return We.toGeoJSON()}),V);k.forEach(function(We){var nt,Ye=We.getCoordinates(),yt=function(ur){var Cr={lng:ur[0]+pe.lng,lat:ur[1]+pe.lat};return[Cr.lng,Cr.lat]},Jt=function(ur){return ur.map(function(Cr){return yt(Cr)})};We.type===z.POINT?nt=yt(Ye):We.type===z.LINE_STRING||We.type===z.MULTI_POINT?nt=Ye.map(yt):We.type===z.POLYGON||We.type===z.MULTI_LINE_STRING?nt=Ye.map(Jt):We.type===z.MULTI_POLYGON&&(nt=Ye.map(function(ur){return ur.map(function(Cr){return Jt(Cr)})})),We.incomingCoords(nt)})}var Un={onSetup:function(k){var V=this,pe={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:k.featureIds||[]};return this.setSelected(pe.initiallySelectedFeatureIds.filter(function(We){return V.getFeature(We)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),pe},fireUpdate:function(){this.map.fire($.UPDATE,{action:Y.MOVE,features:this.getSelected().map(function(k){return k.toGeoJSON()})})},fireActionable:function(){var k=this,V=this.getSelected(),pe=V.filter(function(Jt){return k.isInstanceOf("MultiFeature",Jt)}),We=!1;if(V.length>1){We=!0;var nt=V[0].type.replace("Multi","");V.forEach(function(Jt){Jt.type.replace("Multi","")!==nt&&(We=!1)})}var Ye=pe.length>0,yt=V.length>0;this.setActionableState({combineFeatures:We,uncombineFeatures:Ye,trash:yt})},getUniqueIds:function(k){return k.length?k.map(function(V){return V.properties.id}).filter(function(V){return V!==void 0}).reduce(function(V,pe){return V.add(pe),V},new G).values():[]},stopExtendedInteractions:function(k){k.boxSelectElement&&(k.boxSelectElement.parentNode&&k.boxSelectElement.parentNode.removeChild(k.boxSelectElement),k.boxSelectElement=null),this.map.dragPan.enable(),k.boxSelecting=!1,k.canBoxSelect=!1,k.dragMoving=!1,k.canDragMove=!1},onStop:function(){wt.enable(this)},onMouseMove:function(k,V){return Ur(V)&&k.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(k),!0},onMouseOut:function(k){return!k.dragMoving||this.fireUpdate()}};Un.onTap=Un.onClick=function(k,V){return en(V)?this.clickAnywhere(k,V):En(Q.VERTEX)(V)?this.clickOnVertex(k,V):Ur(V)?this.clickOnFeature(k,V):void 0},Un.clickAnywhere=function(k){var V=this,pe=this.getSelectedIds();pe.length&&(this.clearSelectedFeatures(),pe.forEach(function(We){return V.doRender(We)})),wt.enable(this),this.stopExtendedInteractions(k)},Un.clickOnVertex=function(k,V){this.changeMode(W.DIRECT_SELECT,{featureId:V.featureTarget.properties.parent,coordPath:V.featureTarget.properties.coord_path,startPos:V.lngLat}),this.updateUIClasses({mouse:E.MOVE})},Un.startOnActiveFeature=function(k,V){this.stopExtendedInteractions(k),this.map.dragPan.disable(),this.doRender(V.featureTarget.properties.id),k.canDragMove=!0,k.dragMoveLocation=V.lngLat},Un.clickOnFeature=function(k,V){var pe=this;wt.disable(this),this.stopExtendedInteractions(k);var We=_r(V),nt=this.getSelectedIds(),Ye=V.featureTarget.properties.id,yt=this.isSelected(Ye);if(!We&&yt&&this.getFeature(Ye).type!==z.POINT)return this.changeMode(W.DIRECT_SELECT,{featureId:Ye});yt&&We?(this.deselect(Ye),this.updateUIClasses({mouse:E.POINTER}),nt.length===1&&wt.enable(this)):!yt&&We?(this.select(Ye),this.updateUIClasses({mouse:E.MOVE})):yt||We||(nt.forEach(function(Jt){return pe.doRender(Jt)}),this.setSelected(Ye),this.updateUIClasses({mouse:E.MOVE})),this.doRender(Ye)},Un.onMouseDown=function(k,V){return Jr(V)?this.startOnActiveFeature(k,V):this.drawConfig.boxSelect&&cn(V)?this.startBoxSelect(k,V):void 0},Un.startBoxSelect=function(k,V){this.stopExtendedInteractions(k),this.map.dragPan.disable(),k.boxSelectStartLocation=rt(V.originalEvent,this.map.getContainer()),k.canBoxSelect=!0},Un.onTouchStart=function(k,V){if(Jr(V))return this.startOnActiveFeature(k,V)},Un.onDrag=function(k,V){return k.canDragMove?this.dragMove(k,V):this.drawConfig.boxSelect&&k.canBoxSelect?this.whileBoxSelect(k,V):void 0},Un.whileBoxSelect=function(k,V){k.boxSelecting=!0,this.updateUIClasses({mouse:E.ADD}),k.boxSelectElement||(k.boxSelectElement=document.createElement("div"),k.boxSelectElement.classList.add(P.BOX_SELECT),this.map.getContainer().appendChild(k.boxSelectElement));var pe=rt(V.originalEvent,this.map.getContainer()),We=Math.min(k.boxSelectStartLocation.x,pe.x),nt=Math.max(k.boxSelectStartLocation.x,pe.x),Ye=Math.min(k.boxSelectStartLocation.y,pe.y),yt=Math.max(k.boxSelectStartLocation.y,pe.y),Jt="translate("+We+"px, "+Ye+"px)";k.boxSelectElement.style.transform=Jt,k.boxSelectElement.style.WebkitTransform=Jt,k.boxSelectElement.style.width=nt-We+"px",k.boxSelectElement.style.height=yt-Ye+"px"},Un.dragMove=function(k,V){k.dragMoving=!0,V.originalEvent.stopPropagation();var pe={lng:V.lngLat.lng-k.dragMoveLocation.lng,lat:V.lngLat.lat-k.dragMoveLocation.lat};Zs(this.getSelected(),pe),k.dragMoveLocation=V.lngLat},Un.onTouchEnd=Un.onMouseUp=function(k,V){var pe=this;if(k.dragMoving)this.fireUpdate();else if(k.boxSelecting){var We=[k.boxSelectStartLocation,rt(V.originalEvent,this.map.getContainer())],nt=this.featuresAt(null,We,"click"),Ye=this.getUniqueIds(nt).filter(function(yt){return!pe.isSelected(yt)});Ye.length&&(this.select(Ye),Ye.forEach(function(yt){return pe.doRender(yt)}),this.updateUIClasses({mouse:E.MOVE}))}this.stopExtendedInteractions(k)},Un.toDisplayFeatures=function(k,V,pe){V.properties.active=this.isSelected(V.properties.id)?K.ACTIVE:K.INACTIVE,pe(V),this.fireActionable(),V.properties.active===K.ACTIVE&&V.geometry.type!==z.POINT&&Lt(V).forEach(pe)},Un.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},Un.onCombineFeatures=function(){var k=this.getSelected();if(!(k.length===0||k.length<2)){for(var V=[],pe=[],We=k[0].type.replace("Multi",""),nt=0;nt<k.length;nt++){var Ye=k[nt];if(Ye.type.replace("Multi","")!==We)return;Ye.type.includes("Multi")?Ye.getCoordinates().forEach(function(Jt){V.push(Jt)}):V.push(Ye.getCoordinates()),pe.push(Ye.toGeoJSON())}if(pe.length>1){var yt=this.newFeature({type:z.FEATURE,properties:pe[0].properties,geometry:{type:"Multi"+We,coordinates:V}});this.addFeature(yt),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([yt.id]),this.map.fire($.COMBINE_FEATURES,{createdFeatures:[yt.toGeoJSON()],deletedFeatures:pe})}this.fireActionable()}},Un.onUncombineFeatures=function(){var k=this,V=this.getSelected();if(V.length!==0){for(var pe=[],We=[],nt=function(yt){var Jt=V[yt];k.isInstanceOf("MultiFeature",Jt)&&(Jt.getFeatures().forEach(function(ur){k.addFeature(ur),ur.properties=Jt.properties,pe.push(ur.toGeoJSON()),k.select([ur.id])}),k.deleteFeature(Jt.id,{silent:!0}),We.push(Jt.toGeoJSON()))},Ye=0;Ye<V.length;Ye++)nt(Ye);pe.length>1&&this.map.fire($.UNCOMBINE_FEATURES,{createdFeatures:pe,deletedFeatures:We}),this.fireActionable()}};var Xs=En(Q.VERTEX),Yo=En(Q.MIDPOINT),Kn={fireUpdate:function(){this.map.fire($.UPDATE,{action:Y.CHANGE_COORDINATES,features:this.getSelected().map(function(k){return k.toGeoJSON()})})},fireActionable:function(k){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:k.selectedCoordPaths.length>0})},startDragging:function(k,V){this.map.dragPan.disable(),k.canDragMove=!0,k.dragMoveLocation=V.lngLat},stopDragging:function(k){this.map.dragPan.enable(),k.dragMoving=!1,k.canDragMove=!1,k.dragMoveLocation=null},onVertex:function(k,V){this.startDragging(k,V);var pe=V.featureTarget.properties,We=k.selectedCoordPaths.indexOf(pe.coord_path);_r(V)||We!==-1?_r(V)&&We===-1&&k.selectedCoordPaths.push(pe.coord_path):k.selectedCoordPaths=[pe.coord_path];var nt=this.pathsToCoordinates(k.featureId,k.selectedCoordPaths);this.setSelectedCoordinates(nt)},onMidpoint:function(k,V){this.startDragging(k,V);var pe=V.featureTarget.properties;k.feature.addCoordinate(pe.coord_path,pe.lng,pe.lat),this.fireUpdate(),k.selectedCoordPaths=[pe.coord_path]},pathsToCoordinates:function(k,V){return V.map(function(pe){return{feature_id:k,coord_path:pe}})},onFeature:function(k,V){k.selectedCoordPaths.length===0?this.startDragging(k,V):this.stopDragging(k)},dragFeature:function(k,V,pe){Zs(this.getSelected(),pe),k.dragMoveLocation=V.lngLat},dragVertex:function(k,V,pe){for(var We=k.selectedCoordPaths.map(function(Jt){return k.feature.getCoordinate(Jt)}),nt=Ws(We.map(function(Jt){return{type:z.FEATURE,properties:{},geometry:{type:z.POINT,coordinates:Jt}}}),pe),Ye=0;Ye<We.length;Ye++){var yt=We[Ye];k.feature.updateCoordinate(k.selectedCoordPaths[Ye],yt[0]+nt.lng,yt[1]+nt.lat)}},clickNoTarget:function(){this.changeMode(W.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(W.SIMPLE_SELECT)},clickActiveFeature:function(k){k.selectedCoordPaths=[],this.clearSelectedCoordinates(),k.feature.changed()},onSetup:function(k){var V=k.featureId,pe=this.getFeature(V);if(!pe)throw new Error("You must provide a featureId to enter direct_select mode");if(pe.type===z.POINT)throw new TypeError("direct_select mode doesn't handle point features");var We={featureId:V,feature:pe,dragMoveLocation:k.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:k.coordPath?[k.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(V,We.selectedCoordPaths)),this.setSelected(V),wt.disable(this),this.setActionableState({trash:!0}),We},onStop:function(){wt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(k,V,pe){k.featureId===V.properties.id?(V.properties.active=K.ACTIVE,pe(V),Lt(V,{map:this.map,midpoints:!0,selectedPaths:k.selectedCoordPaths}).forEach(pe)):(V.properties.active=K.INACTIVE,pe(V)),this.fireActionable(k)},onTrash:function(k){k.selectedCoordPaths.sort(function(V,pe){return pe.localeCompare(V,"en",{numeric:!0})}).forEach(function(V){return k.feature.removeCoordinate(V)}),this.fireUpdate(),k.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(k),k.feature.isValid()===!1&&(this.deleteFeature([k.featureId]),this.changeMode(W.SIMPLE_SELECT,{}))},onMouseMove:function(k,V){var pe=Jr(V),We=Xs(V),nt=Yo(V),Ye=k.selectedCoordPaths.length===0;return pe&&Ye||We&&!Ye?this.updateUIClasses({mouse:E.MOVE}):this.updateUIClasses({mouse:E.NONE}),(We||pe||nt)&&k.dragMoving&&this.fireUpdate(),this.stopDragging(k),!0},onMouseOut:function(k){return k.dragMoving&&this.fireUpdate(),!0}};Kn.onTouchStart=Kn.onMouseDown=function(k,V){return Xs(V)?this.onVertex(k,V):Jr(V)?this.onFeature(k,V):Yo(V)?this.onMidpoint(k,V):void 0},Kn.onDrag=function(k,V){if(k.canDragMove===!0){k.dragMoving=!0,V.originalEvent.stopPropagation();var pe={lng:V.lngLat.lng-k.dragMoveLocation.lng,lat:V.lngLat.lat-k.dragMoveLocation.lat};k.selectedCoordPaths.length>0?this.dragVertex(k,V,pe):this.dragFeature(k,V,pe),k.dragMoveLocation=V.lngLat}},Kn.onClick=function(k,V){return en(V)?this.clickNoTarget(k,V):Jr(V)?this.clickActiveFeature(k,V):An(V)?this.clickInactive(k,V):void this.stopDragging(k)},Kn.onTap=function(k,V){return en(V)?this.clickNoTarget(k,V):Jr(V)?this.clickActiveFeature(k,V):An(V)?this.clickInactive(k,V):void 0},Kn.onTouchEnd=Kn.onMouseUp=function(k){k.dragMoving&&this.fireUpdate(),this.stopDragging(k)};var Da={};function As(k,V){return!!k.lngLat&&k.lngLat.lng===V[0]&&k.lngLat.lat===V[1]}Da.onSetup=function(){var k=this.newFeature({type:z.FEATURE,properties:{},geometry:{type:z.POINT,coordinates:[]}});return this.addFeature(k),this.clearSelectedFeatures(),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(F.POINT),this.setActionableState({trash:!0}),{point:k}},Da.stopDrawingAndRemove=function(k){this.deleteFeature([k.point.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT)},Da.onTap=Da.onClick=function(k,V){this.updateUIClasses({mouse:E.MOVE}),k.point.updateCoordinate("",V.lngLat.lng,V.lngLat.lat),this.map.fire($.CREATE,{features:[k.point.toGeoJSON()]}),this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.point.id]})},Da.onStop=function(k){this.activateUIButton(),k.point.getCoordinate().length||this.deleteFeature([k.point.id],{silent:!0})},Da.toDisplayFeatures=function(k,V,pe){var We=V.properties.id===k.point.id;if(V.properties.active=We?K.ACTIVE:K.INACTIVE,!We)return pe(V)},Da.onTrash=Da.stopDrawingAndRemove,Da.onKeyUp=function(k,V){if(ot(V)||ae(V))return this.stopDrawingAndRemove(k,V)};var Xa={onSetup:function(){var k=this.newFeature({type:z.FEATURE,properties:{},geometry:{type:z.POLYGON,coordinates:[[]]}});return this.addFeature(k),this.clearSelectedFeatures(),wt.disable(this),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(F.POLYGON),this.setActionableState({trash:!0}),{polygon:k,currentVertexPosition:0}},clickAnywhere:function(k,V){if(k.currentVertexPosition>0&&As(V,k.polygon.coordinates[0][k.currentVertexPosition-1]))return this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.polygon.id]});this.updateUIClasses({mouse:E.ADD}),k.polygon.updateCoordinate("0."+k.currentVertexPosition,V.lngLat.lng,V.lngLat.lat),k.currentVertexPosition++,k.polygon.updateCoordinate("0."+k.currentVertexPosition,V.lngLat.lng,V.lngLat.lat)},clickOnVertex:function(k){return this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.polygon.id]})},onMouseMove:function(k,V){k.polygon.updateCoordinate("0."+k.currentVertexPosition,V.lngLat.lng,V.lngLat.lat),Br(V)&&this.updateUIClasses({mouse:E.POINTER})}};Xa.onTap=Xa.onClick=function(k,V){return Br(V)?this.clickOnVertex(k,V):this.clickAnywhere(k,V)},Xa.onKeyUp=function(k,V){ot(V)?(this.deleteFeature([k.polygon.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT)):ae(V)&&this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.polygon.id]})},Xa.onStop=function(k){this.updateUIClasses({mouse:E.NONE}),wt.enable(this),this.activateUIButton(),this.getFeature(k.polygon.id)!==void 0&&(k.polygon.removeCoordinate("0."+k.currentVertexPosition),k.polygon.isValid()?this.map.fire($.CREATE,{features:[k.polygon.toGeoJSON()]}):(this.deleteFeature([k.polygon.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT,{},{silent:!0})))},Xa.toDisplayFeatures=function(k,V,pe){var We=V.properties.id===k.polygon.id;if(V.properties.active=We?K.ACTIVE:K.INACTIVE,!We)return pe(V);if(V.geometry.coordinates.length!==0){var nt=V.geometry.coordinates[0].length;if(!(nt<3)){if(V.properties.meta=Q.FEATURE,pe(ht(k.polygon.id,V.geometry.coordinates[0][0],"0.0",!1)),nt>3){var Ye=V.geometry.coordinates[0].length-3;pe(ht(k.polygon.id,V.geometry.coordinates[0][Ye],"0."+Ye,!1))}if(nt<=4){var yt=[[V.geometry.coordinates[0][0][0],V.geometry.coordinates[0][0][1]],[V.geometry.coordinates[0][1][0],V.geometry.coordinates[0][1][1]]];if(pe({type:z.FEATURE,properties:V.properties,geometry:{coordinates:yt,type:z.LINE_STRING}}),nt===3)return}return pe(V)}}},Xa.onTrash=function(k){this.deleteFeature([k.polygon.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT)};var Bo={onSetup:function(k){var V,pe,We=(k=k||{}).featureId,nt="forward";if(We){if(!(V=this.getFeature(We)))throw new Error("Could not find a feature with the provided featureId");var Ye=k.from;if(Ye&&Ye.type==="Feature"&&Ye.geometry&&Ye.geometry.type==="Point"&&(Ye=Ye.geometry),Ye&&Ye.type==="Point"&&Ye.coordinates&&Ye.coordinates.length===2&&(Ye=Ye.coordinates),!Ye||!Array.isArray(Ye))throw new Error("Please use the `from` property to indicate which point to continue the line from");var yt=V.coordinates.length-1;if(V.coordinates[yt][0]===Ye[0]&&V.coordinates[yt][1]===Ye[1])pe=yt+1,V.addCoordinate.apply(V,[pe].concat(V.coordinates[yt]));else{if(V.coordinates[0][0]!==Ye[0]||V.coordinates[0][1]!==Ye[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");nt="backwards",pe=0,V.addCoordinate.apply(V,[pe].concat(V.coordinates[0]))}}else V=this.newFeature({type:z.FEATURE,properties:{},geometry:{type:z.LINE_STRING,coordinates:[]}}),pe=0,this.addFeature(V);return this.clearSelectedFeatures(),wt.disable(this),this.updateUIClasses({mouse:E.ADD}),this.activateUIButton(F.LINE),this.setActionableState({trash:!0}),{line:V,currentVertexPosition:pe,direction:nt}},clickAnywhere:function(k,V){if(k.currentVertexPosition>0&&As(V,k.line.coordinates[k.currentVertexPosition-1])||k.direction==="backwards"&&As(V,k.line.coordinates[k.currentVertexPosition+1]))return this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.line.id]});this.updateUIClasses({mouse:E.ADD}),k.line.updateCoordinate(k.currentVertexPosition,V.lngLat.lng,V.lngLat.lat),k.direction==="forward"?(k.currentVertexPosition++,k.line.updateCoordinate(k.currentVertexPosition,V.lngLat.lng,V.lngLat.lat)):k.line.addCoordinate(0,V.lngLat.lng,V.lngLat.lat)},clickOnVertex:function(k){return this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.line.id]})},onMouseMove:function(k,V){k.line.updateCoordinate(k.currentVertexPosition,V.lngLat.lng,V.lngLat.lat),Br(V)&&this.updateUIClasses({mouse:E.POINTER})}};Bo.onTap=Bo.onClick=function(k,V){if(Br(V))return this.clickOnVertex(k,V);this.clickAnywhere(k,V)},Bo.onKeyUp=function(k,V){ae(V)?this.changeMode(W.SIMPLE_SELECT,{featureIds:[k.line.id]}):ot(V)&&(this.deleteFeature([k.line.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT))},Bo.onStop=function(k){wt.enable(this),this.activateUIButton(),this.getFeature(k.line.id)!==void 0&&(k.line.removeCoordinate(""+k.currentVertexPosition),k.line.isValid()?this.map.fire($.CREATE,{features:[k.line.toGeoJSON()]}):(this.deleteFeature([k.line.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT,{},{silent:!0})))},Bo.onTrash=function(k){this.deleteFeature([k.line.id],{silent:!0}),this.changeMode(W.SIMPLE_SELECT)},Bo.toDisplayFeatures=function(k,V,pe){var We=V.properties.id===k.line.id;if(V.properties.active=We?K.ACTIVE:K.INACTIVE,!We)return pe(V);V.geometry.coordinates.length<2||(V.properties.meta=Q.FEATURE,pe(ht(k.line.id,V.geometry.coordinates[k.direction==="forward"?V.geometry.coordinates.length-2:1],""+(k.direction==="forward"?V.geometry.coordinates.length-2:1),!1)),pe(V))};var Ps={simple_select:Un,direct_select:Kn,draw_point:Da,draw_polygon:Xa,draw_line_string:Bo},lo={defaultMode:W.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:qr,modes:Ps,controls:{},userProperties:!1},pc={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},mc={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function wa(k,V){return k.map(function(pe){return pe.source?pe:Er(pe,{id:pe.id+"."+V,source:V==="hot"?D.HOT:D.COLD})})}var Ys={exports:{}};(function(k,V){var pe="__lodash_hash_undefined__",We=9007199254740991,nt="[object Arguments]",Ye="[object Array]",yt="[object Boolean]",Jt="[object Date]",ur="[object Error]",Cr="[object Function]",xr="[object Map]",ar="[object Number]",an="[object Object]",jr="[object Promise]",yn="[object RegExp]",Vr="[object Set]",Zt="[object String]",Ir="[object Symbol]",xn="[object WeakMap]",Jn="[object ArrayBuffer]",Pn="[object DataView]",ii=/^\[object .+?Constructor\]$/,Gu=/^(?:0|[1-9]\d*)$/,Wr={};Wr["[object Float32Array]"]=Wr["[object Float64Array]"]=Wr["[object Int8Array]"]=Wr["[object Int16Array]"]=Wr["[object Int32Array]"]=Wr["[object Uint8Array]"]=Wr["[object Uint8ClampedArray]"]=Wr["[object Uint16Array]"]=Wr["[object Uint32Array]"]=!0,Wr[nt]=Wr[Ye]=Wr[Jn]=Wr[yt]=Wr[Pn]=Wr[Jt]=Wr[ur]=Wr[Cr]=Wr[xr]=Wr[ar]=Wr[an]=Wr[yn]=Wr[Vr]=Wr[Zt]=Wr[xn]=!1;var vo=typeof ec=="object"&&ec&&ec.Object===Object&&ec,vn=typeof self=="object"&&self&&self.Object===Object&&self,sn=vo||vn||Function("return this")(),Ka=V&&!V.nodeType&&V,tn=Ka&&k&&!k.nodeType&&k,Ks=tn&&tn.exports===Ka,co=Ks&&vo.process,Is=function(){try{return co&&co.binding&&co.binding("util")}catch{}}(),To=Is&&Is.isTypedArray;function Cl(_t,Tt){for(var br=-1,kr=_t==null?0:_t.length;++br<kr;)if(Tt(_t[br],br,_t))return!0;return!1}function Ra(_t){var Tt=-1,br=Array(_t.size);return _t.forEach(function(kr,Wn){br[++Tt]=[Wn,kr]}),br}function pu(_t){var Tt=-1,br=Array(_t.size);return _t.forEach(function(kr){br[++Tt]=kr}),br}var mu,ds,Js,Sa=Array.prototype,gi=Function.prototype,zo=Object.prototype,O=sn["__core-js_shared__"],ue=gi.toString,Le=zo.hasOwnProperty,ut=(mu=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+mu:"",Et=zo.toString,Wt=RegExp("^"+ue.call(Le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),or=Ks?sn.Buffer:void 0,Or=sn.Symbol,Zr=sn.Uint8Array,wn=zo.propertyIsEnumerable,Rn=Sa.splice,_n=Or?Or.toStringTag:void 0,_i=Object.getOwnPropertySymbols,fi=or?or.isBuffer:void 0,Fn=(ds=Object.keys,Js=Object,function(_t){return ds(Js(_t))}),qi=_o(sn,"DataView"),Ci=_o(sn,"Map"),Ui=_o(sn,"Promise"),Ja=_o(sn,"Set"),Qs=_o(sn,"WeakMap"),gu=_o(Object,"create"),Kc=Ko(qi),yu=Ko(Ci),Na=Ko(Ui),Ul=Ko(Ja),El=Ko(Qs),Qa=Or?Or.prototype:void 0,no=Qa?Qa.valueOf:void 0;function $o(_t){var Tt=-1,br=_t==null?0:_t.length;for(this.clear();++Tt<br;){var kr=_t[Tt];this.set(kr[0],kr[1])}}function ki(_t){var Tt=-1,br=_t==null?0:_t.length;for(this.clear();++Tt<br;){var kr=_t[Tt];this.set(kr[0],kr[1])}}function ps(_t){var Tt=-1,br=_t==null?0:_t.length;for(this.clear();++Tt<br;){var kr=_t[Tt];this.set(kr[0],kr[1])}}function el(_t){var Tt=-1,br=_t==null?0:_t.length;for(this.__data__=new ps;++Tt<br;)this.add(_t[Tt])}function Li(_t){var Tt=this.__data__=new ki(_t);this.size=Tt.size}function Vl(_t,Tt){var br=Ms(_t),kr=!br&&Gi(_t),Wn=!br&&!kr&&gs(_t),Yr=!br&&!kr&&!Wn&&Gl(_t),Cn=br||kr||Wn||Yr,Bn=Cn?function(Di,Io){for(var es=-1,fa=Array(Di);++es<Di;)fa[es]=Io(es);return fa}(_t.length,String):[],ui=Bn.length;for(var ci in _t)!Le.call(_t,ci)||Cn&&(ci=="length"||Wn&&(ci=="offset"||ci=="parent")||Yr&&(ci=="buffer"||ci=="byteLength"||ci=="byteOffset")||nl(ci,ui))||Bn.push(ci);return Bn}function tl(_t,Tt){for(var br=_t.length;br--;)if(il(_t[br][0],Tt))return br;return-1}function ms(_t){return _t==null?_t===void 0?"[object Undefined]":"[object Null]":_n&&_n in Object(_t)?function(Tt){var br=Le.call(Tt,_n),kr=Tt[_n];try{Tt[_n]=void 0;var Wn=!0}catch{}var Yr=Et.call(Tt);return Wn&&(br?Tt[_n]=kr:delete Tt[_n]),Yr}(_t):function(Tt){return Et.call(Tt)}(_t)}function ho(_t){return ks(_t)&&ms(_t)==nt}function jo(_t,Tt,br,kr,Wn){return _t===Tt||(_t==null||Tt==null||!ks(_t)&&!ks(Tt)?_t!=_t&&Tt!=Tt:function(Yr,Cn,Bn,ui,ci,Di){var Io=Ms(Yr),es=Ms(Cn),fa=Io?Ye:Po(Yr),ol=es?Ye:Po(Cn),Wl=(fa=fa==nt?an:fa)==an,yc=(ol=ol==nt?an:ol)==an,Zl=fa==ol;if(Zl&&gs(Yr)){if(!gs(Cn))return!1;Io=!0,Wl=!1}if(Zl&&!Wl)return Di||(Di=new Li),Io||Gl(Yr)?Tl(Yr,Cn,Bn,ui,ci,Di):function(oi,ai,al,Hi,_c,Fa,ys){switch(al){case Pn:if(oi.byteLength!=ai.byteLength||oi.byteOffset!=ai.byteOffset)return!1;oi=oi.buffer,ai=ai.buffer;case Jn:return!(oi.byteLength!=ai.byteLength||!Fa(new Zr(oi),new Zr(ai)));case yt:case Jt:case ar:return il(+oi,+ai);case ur:return oi.name==ai.name&&oi.message==ai.message;case yn:case Zt:return oi==ai+"";case xr:var Ca=Ra;case Vr:var Pl=1&Hi;if(Ca||(Ca=pu),oi.size!=ai.size&&!Pl)return!1;var Xl=ys.get(oi);if(Xl)return Xl==ai;Hi|=2,ys.set(oi,ai);var Ls=Tl(Ca(oi),Ca(ai),Hi,_c,Fa,ys);return ys.delete(oi),Ls;case Ir:if(no)return no.call(oi)==no.call(ai)}return!1}(Yr,Cn,fa,Bn,ui,ci,Di);if(!(1&Bn)){var Al=Wl&&Le.call(Yr,"__wrapped__"),Wu=yc&&Le.call(Cn,"__wrapped__");if(Al||Wu){var vc=Al?Yr.value():Yr,Jc=Wu?Cn.value():Cn;return Di||(Di=new Li),ci(vc,Jc,Bn,ui,Di)}}return Zl?(Di||(Di=new Li),function(oi,ai,al,Hi,_c,Fa){var ys=1&al,Ca=rl(oi),Pl=Ca.length,Xl=rl(ai).length;if(Pl!=Xl&&!ys)return!1;for(var Ls=Pl;Ls--;){var ts=Ca[Ls];if(!(ys?ts in ai:Le.call(ai,ts)))return!1}var bc=Fa.get(oi);if(bc&&Fa.get(ai))return bc==ai;var vs=!0;Fa.set(oi,ai),Fa.set(ai,oi);for(var bo=ys;++Ls<Pl;){var Jo=oi[ts=Ca[Ls]],Il=ai[ts];if(Hi)var Mn=ys?Hi(Il,Jo,ts,ai,oi,Fa):Hi(Jo,Il,ts,oi,ai,Fa);if(!(Mn===void 0?Jo===Il||_c(Jo,Il,al,Hi,Fa):Mn)){vs=!1;break}bo||(bo=ts=="constructor")}if(vs&&!bo){var Ds=oi.constructor,Yl=ai.constructor;Ds==Yl||!("constructor"in oi)||!("constructor"in ai)||typeof Ds=="function"&&Ds instanceof Ds&&typeof Yl=="function"&&Yl instanceof Yl||(vs=!1)}return Fa.delete(oi),Fa.delete(ai),vs}(Yr,Cn,Bn,ui,ci,Di)):!1}(_t,Tt,br,kr,jo,Wn))}function gc(_t){return!(!_u(_t)||function(Tt){return!!ut&&ut in Tt}(_t))&&(Oa(_t)?Wt:ii).test(Ko(_t))}function Hu(_t){if(br=(Tt=_t)&&Tt.constructor,kr=typeof br=="function"&&br.prototype||zo,Tt!==kr)return Fn(_t);var Tt,br,kr,Wn=[];for(var Yr in Object(_t))Le.call(_t,Yr)&&Yr!="constructor"&&Wn.push(Yr);return Wn}function Tl(_t,Tt,br,kr,Wn,Yr){var Cn=1&br,Bn=_t.length,ui=Tt.length;if(Bn!=ui&&!(Cn&&ui>Bn))return!1;var ci=Yr.get(_t);if(ci&&Yr.get(Tt))return ci==Tt;var Di=-1,Io=!0,es=2&br?new el:void 0;for(Yr.set(_t,Tt),Yr.set(Tt,_t);++Di<Bn;){var fa=_t[Di],ol=Tt[Di];if(kr)var Wl=Cn?kr(ol,fa,Di,Tt,_t,Yr):kr(fa,ol,Di,_t,Tt,Yr);if(Wl!==void 0){if(Wl)continue;Io=!1;break}if(es){if(!Cl(Tt,function(yc,Zl){if(Al=Zl,!es.has(Al)&&(fa===yc||Wn(fa,yc,br,kr,Yr)))return es.push(Zl);var Al})){Io=!1;break}}else if(fa!==ol&&!Wn(fa,ol,br,kr,Yr)){Io=!1;break}}return Yr.delete(_t),Yr.delete(Tt),Io}function rl(_t){return function(Tt,br,kr){var Wn=br(Tt);return Ms(Tt)?Wn:function(Yr,Cn){for(var Bn=-1,ui=Cn.length,ci=Yr.length;++Bn<ui;)Yr[ci+Bn]=Cn[Bn];return Yr}(Wn,kr(Tt))}(_t,Hl,ql)}function Ao(_t,Tt){var br,kr,Wn=_t.__data__;return((kr=typeof(br=Tt))=="string"||kr=="number"||kr=="symbol"||kr=="boolean"?br!=="__proto__":br===null)?Wn[typeof Tt=="string"?"string":"hash"]:Wn.map}function _o(_t,Tt){var br=function(kr,Wn){return kr==null?void 0:kr[Wn]}(_t,Tt);return gc(br)?br:void 0}$o.prototype.clear=function(){this.__data__=gu?gu(null):{},this.size=0},$o.prototype.delete=function(_t){var Tt=this.has(_t)&&delete this.__data__[_t];return this.size-=Tt?1:0,Tt},$o.prototype.get=function(_t){var Tt=this.__data__;if(gu){var br=Tt[_t];return br===pe?void 0:br}return Le.call(Tt,_t)?Tt[_t]:void 0},$o.prototype.has=function(_t){var Tt=this.__data__;return gu?Tt[_t]!==void 0:Le.call(Tt,_t)},$o.prototype.set=function(_t,Tt){var br=this.__data__;return this.size+=this.has(_t)?0:1,br[_t]=gu&&Tt===void 0?pe:Tt,this},ki.prototype.clear=function(){this.__data__=[],this.size=0},ki.prototype.delete=function(_t){var Tt=this.__data__,br=tl(Tt,_t);return!(br<0)&&(br==Tt.length-1?Tt.pop():Rn.call(Tt,br,1),--this.size,!0)},ki.prototype.get=function(_t){var Tt=this.__data__,br=tl(Tt,_t);return br<0?void 0:Tt[br][1]},ki.prototype.has=function(_t){return tl(this.__data__,_t)>-1},ki.prototype.set=function(_t,Tt){var br=this.__data__,kr=tl(br,_t);return kr<0?(++this.size,br.push([_t,Tt])):br[kr][1]=Tt,this},ps.prototype.clear=function(){this.size=0,this.__data__={hash:new $o,map:new(Ci||ki),string:new $o}},ps.prototype.delete=function(_t){var Tt=Ao(this,_t).delete(_t);return this.size-=Tt?1:0,Tt},ps.prototype.get=function(_t){return Ao(this,_t).get(_t)},ps.prototype.has=function(_t){return Ao(this,_t).has(_t)},ps.prototype.set=function(_t,Tt){var br=Ao(this,_t),kr=br.size;return br.set(_t,Tt),this.size+=br.size==kr?0:1,this},el.prototype.add=el.prototype.push=function(_t){return this.__data__.set(_t,pe),this},el.prototype.has=function(_t){return this.__data__.has(_t)},Li.prototype.clear=function(){this.__data__=new ki,this.size=0},Li.prototype.delete=function(_t){var Tt=this.__data__,br=Tt.delete(_t);return this.size=Tt.size,br},Li.prototype.get=function(_t){return this.__data__.get(_t)},Li.prototype.has=function(_t){return this.__data__.has(_t)},Li.prototype.set=function(_t,Tt){var br=this.__data__;if(br instanceof ki){var kr=br.__data__;if(!Ci||kr.length<199)return kr.push([_t,Tt]),this.size=++br.size,this;br=this.__data__=new ps(kr)}return br.set(_t,Tt),this.size=br.size,this};var ql=_i?function(_t){return _t==null?[]:(_t=Object(_t),function(Tt,br){for(var kr=-1,Wn=Tt==null?0:Tt.length,Yr=0,Cn=[];++kr<Wn;){var Bn=Tt[kr];br(Bn,kr,Tt)&&(Cn[Yr++]=Bn)}return Cn}(_i(_t),function(Tt){return wn.call(_t,Tt)}))}:function(){return[]},Po=ms;function nl(_t,Tt){return!!(Tt=Tt??We)&&(typeof _t=="number"||Gu.test(_t))&&_t>-1&&_t%1==0&&_t<Tt}function Ko(_t){if(_t!=null){try{return ue.call(_t)}catch{}try{return _t+""}catch{}}return""}function il(_t,Tt){return _t===Tt||_t!=_t&&Tt!=Tt}(qi&&Po(new qi(new ArrayBuffer(1)))!=Pn||Ci&&Po(new Ci)!=xr||Ui&&Po(Ui.resolve())!=jr||Ja&&Po(new Ja)!=Vr||Qs&&Po(new Qs)!=xn)&&(Po=function(_t){var Tt=ms(_t),br=Tt==an?_t.constructor:void 0,kr=br?Ko(br):"";if(kr)switch(kr){case Kc:return Pn;case yu:return xr;case Na:return jr;case Ul:return Vr;case El:return xn}return Tt});var Gi=ho(function(){return arguments}())?ho:function(_t){return ks(_t)&&Le.call(_t,"callee")&&!wn.call(_t,"callee")},Ms=Array.isArray,gs=fi||function(){return!1};function Oa(_t){if(!_u(_t))return!1;var Tt=ms(_t);return Tt==Cr||Tt=="[object GeneratorFunction]"||Tt=="[object AsyncFunction]"||Tt=="[object Proxy]"}function vu(_t){return typeof _t=="number"&&_t>-1&&_t%1==0&&_t<=We}function _u(_t){var Tt=typeof _t;return _t!=null&&(Tt=="object"||Tt=="function")}function ks(_t){return _t!=null&&typeof _t=="object"}var Gl=To?function(_t){return function(Tt){return _t(Tt)}}(To):function(_t){return ks(_t)&&vu(_t.length)&&!!Wr[ms(_t)]};function Hl(_t){return(Tt=_t)!=null&&vu(Tt.length)&&!Oa(Tt)?Vl(_t):Hu(_t);var Tt}k.exports=function(_t,Tt){return jo(_t,Tt)}})(Ys,Ys.exports);var Ya=n(Ys.exports);function fs(k,V){return k.length===V.length&&JSON.stringify(k.map(function(pe){return pe}).sort())===JSON.stringify(V.map(function(pe){return pe}).sort())}var uo={Polygon:Je,LineString:qe,Point:Ne,MultiPolygon:ft,MultiLineString:ft,MultiPoint:ft},qu=Object.freeze({__proto__:null,CommonSelectors:oe,constrainFeatureMovement:Ws,createMidPoint:ct,createSupplementaryPoints:Lt,createVertex:ht,doubleClickZoom:wt,euclideanDistance:At,featuresAt:we,getFeatureAtAndSetCursors:pt,isClick:Ze,isEventAtCoordinates:As,isTap:tt,mapEventToBoundingBox:le,ModeHandler:r,moveFeatures:Zs,sortFeatures:Re,stringSetsAreEqual:fs,StringSet:G,theme:qr,toDenseArray:It}),$l=function(k,V){var pe={options:k=function(nt){nt===void 0&&(nt={});var Ye=Er(nt);return nt.controls||(Ye.controls={}),nt.displayControlsDefault===!1?Ye.controls=Er(mc,nt.controls):Ye.controls=Er(pc,nt.controls),(Ye=Er(lo,Ye)).styles=wa(Ye.styles,"cold").concat(wa(Ye.styles,"hot")),Ye}(k)};V=function(nt,Ye){return Ye.modes=W,Ye.getFeatureIdsAt=function(yt){return we.click({point:yt},null,nt).map(function(Jt){return Jt.properties.id})},Ye.getSelectedIds=function(){return nt.store.getSelectedIds()},Ye.getSelected=function(){return{type:z.FEATURE_COLLECTION,features:nt.store.getSelectedIds().map(function(yt){return nt.store.get(yt)}).map(function(yt){return yt.toGeoJSON()})}},Ye.getSelectedPoints=function(){return{type:z.FEATURE_COLLECTION,features:nt.store.getSelectedCoordinates().map(function(yt){return{type:z.FEATURE,properties:{},geometry:{type:z.POINT,coordinates:yt.coordinates}}})}},Ye.set=function(yt){if(yt.type===void 0||yt.type!==z.FEATURE_COLLECTION||!Array.isArray(yt.features))throw new Error("Invalid FeatureCollection");var Jt=nt.store.createRenderBatch(),ur=nt.store.getAllIds().slice(),Cr=Ye.add(yt),xr=new G(Cr);return(ur=ur.filter(function(ar){return!xr.has(ar)})).length&&Ye.delete(ur),Jt(),Cr},Ye.add=function(yt){var Jt=JSON.parse(JSON.stringify(hr(yt))).features.map(function(ur){if(ur.id=ur.id||ne(),ur.geometry===null)throw new Error("Invalid geometry: null");if(nt.store.get(ur.id)===void 0||nt.store.get(ur.id).type!==ur.geometry.type){var Cr=uo[ur.geometry.type];if(Cr===void 0)throw new Error("Invalid geometry type: "+ur.geometry.type+".");var xr=new Cr(nt,ur);nt.store.add(xr)}else{var ar=nt.store.get(ur.id);ar.properties=ur.properties,Ya(ar.properties,ur.properties)||nt.store.featureChanged(ar.id),Ya(ar.getCoordinates(),ur.geometry.coordinates)||ar.incomingCoords(ur.geometry.coordinates)}return ur.id});return nt.store.render(),Jt},Ye.get=function(yt){var Jt=nt.store.get(yt);if(Jt)return Jt.toGeoJSON()},Ye.getAll=function(){return{type:z.FEATURE_COLLECTION,features:nt.store.getAll().map(function(yt){return yt.toGeoJSON()})}},Ye.delete=function(yt){return nt.store.delete(yt,{silent:!0}),Ye.getMode()!==W.DIRECT_SELECT||nt.store.getSelectedIds().length?nt.store.render():nt.events.changeMode(W.SIMPLE_SELECT,void 0,{silent:!0}),Ye},Ye.deleteAll=function(){return nt.store.delete(nt.store.getAllIds(),{silent:!0}),Ye.getMode()===W.DIRECT_SELECT?nt.events.changeMode(W.SIMPLE_SELECT,void 0,{silent:!0}):nt.store.render(),Ye},Ye.changeMode=function(yt,Jt){return Jt===void 0&&(Jt={}),yt===W.SIMPLE_SELECT&&Ye.getMode()===W.SIMPLE_SELECT?(fs(Jt.featureIds||[],nt.store.getSelectedIds())||(nt.store.setSelected(Jt.featureIds,{silent:!0}),nt.store.render()),Ye):(yt===W.DIRECT_SELECT&&Ye.getMode()===W.DIRECT_SELECT&&Jt.featureId===nt.store.getSelectedIds()[0]||nt.events.changeMode(yt,Jt,{silent:!0}),Ye)},Ye.getMode=function(){return nt.events.getMode()},Ye.trash=function(){return nt.events.trash({silent:!0}),Ye},Ye.combineFeatures=function(){return nt.events.combineFeatures({silent:!0}),Ye},Ye.uncombineFeatures=function(){return nt.events.uncombineFeatures({silent:!0}),Ye},Ye.setFeatureProperty=function(yt,Jt,ur){return nt.store.setFeatureProperty(yt,Jt,ur),Ye},Ye}(pe,V),pe.api=V;var We=dr(pe);return V.onAdd=We.onAdd,V.onRemove=We.onRemove,V.types=F,V.options=k,V};function jl(k){$l(k,this)}return jl.modes=Ps,jl.constants=be,jl.lib=qu,jl})})(vZ);const _Z=kh(Ar.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"})),bZ=kh(Ar.jsx("path",{d:"m2 9 4 12h12l4-12-10-7z"}));var tc={},cv={},xZ=typeof ec=="object"&&ec&&ec.Object===Object&&ec,$N=xZ,wZ=$N,SZ=typeof self=="object"&&self&&self.Object===Object&&self,CZ=wZ||SZ||Function("return this")(),Dh=CZ,EZ=Dh,TZ=EZ.Symbol,hv=TZ,tM=hv,jN=Object.prototype,AZ=jN.hasOwnProperty,PZ=jN.toString,P0=tM?tM.toStringTag:void 0;function IZ(e){var t=AZ.call(e,P0),r=e[P0];try{e[P0]=void 0;var n=!0}catch{}var s=PZ.call(e);return n&&(t?e[P0]=r:delete e[P0]),s}var MZ=IZ,kZ=Object.prototype,LZ=kZ.toString;function DZ(e){return LZ.call(e)}var RZ=DZ,rM=hv,NZ=MZ,OZ=RZ,FZ="[object Null]",BZ="[object Undefined]",nM=rM?rM.toStringTag:void 0;function zZ(e){return e==null?e===void 0?BZ:FZ:nM&&nM in Object(e)?NZ(e):OZ(e)}var Ep=zZ,$Z=Array.isArray,Zc=$Z;function jZ(e){return e!=null&&typeof e=="object"}var _f=jZ,UZ=Ep,VZ=Zc,qZ=_f,GZ="[object String]";function HZ(e){return typeof e=="string"||!VZ(e)&&qZ(e)&&UZ(e)==GZ}var WZ=HZ;function ZZ(e){return function(t,r,n){for(var s=-1,l=Object(t),f=n(t),a=f.length;a--;){var y=f[e?a:++s];if(r(l[y],y,l)===!1)break}return t}}var XZ=ZZ,YZ=XZ,KZ=YZ(),JZ=KZ;function QZ(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var eX=QZ,tX=Ep,rX=_f,nX="[object Arguments]";function iX(e){return rX(e)&&tX(e)==nX}var oX=iX,iM=oX,aX=_f,UN=Object.prototype,sX=UN.hasOwnProperty,lX=UN.propertyIsEnumerable,uX=iM(function(){return arguments}())?iM:function(e){return aX(e)&&sX.call(e,"callee")&&!lX.call(e,"callee")},VN=uX,q_={exports:{}};function cX(){return!1}var hX=cX;q_.exports;(function(e,t){var r=Dh,n=hX,s=t&&!t.nodeType&&t,l=s&&!0&&e&&!e.nodeType&&e,f=l&&l.exports===s,a=f?r.Buffer:void 0,y=a?a.isBuffer:void 0,v=y||n;e.exports=v})(q_,q_.exports);var HE=q_.exports,fX=9007199254740991,dX=/^(?:0|[1-9]\d*)$/;function pX(e,t){var r=typeof e;return t=t??fX,!!t&&(r=="number"||r!="symbol"&&dX.test(e))&&e>-1&&e%1==0&&e<t}var qN=pX,mX=9007199254740991;function gX(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mX}var WE=gX,yX=Ep,vX=WE,_X=_f,bX="[object Arguments]",xX="[object Array]",wX="[object Boolean]",SX="[object Date]",CX="[object Error]",EX="[object Function]",TX="[object Map]",AX="[object Number]",PX="[object Object]",IX="[object RegExp]",MX="[object Set]",kX="[object String]",LX="[object WeakMap]",DX="[object ArrayBuffer]",RX="[object DataView]",NX="[object Float32Array]",OX="[object Float64Array]",FX="[object Int8Array]",BX="[object Int16Array]",zX="[object Int32Array]",$X="[object Uint8Array]",jX="[object Uint8ClampedArray]",UX="[object Uint16Array]",VX="[object Uint32Array]",Ro={};Ro[NX]=Ro[OX]=Ro[FX]=Ro[BX]=Ro[zX]=Ro[$X]=Ro[jX]=Ro[UX]=Ro[VX]=!0;Ro[bX]=Ro[xX]=Ro[DX]=Ro[wX]=Ro[RX]=Ro[SX]=Ro[CX]=Ro[EX]=Ro[TX]=Ro[AX]=Ro[PX]=Ro[IX]=Ro[MX]=Ro[kX]=Ro[LX]=!1;function qX(e){return _X(e)&&vX(e.length)&&!!Ro[yX(e)]}var GX=qX;function HX(e){return function(t){return e(t)}}var ZE=HX,G_={exports:{}};G_.exports;(function(e,t){var r=$N,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,l=s&&s.exports===n,f=l&&r.process,a=function(){try{var y=s&&s.require&&s.require("util").types;return y||f&&f.binding&&f.binding("util")}catch{}}();e.exports=a})(G_,G_.exports);var XE=G_.exports,WX=GX,ZX=ZE,oM=XE,aM=oM&&oM.isTypedArray,XX=aM?ZX(aM):WX,GN=XX,YX=eX,KX=VN,JX=Zc,QX=HE,eY=qN,tY=GN,rY=Object.prototype,nY=rY.hasOwnProperty;function iY(e,t){var r=JX(e),n=!r&&KX(e),s=!r&&!n&&QX(e),l=!r&&!n&&!s&&tY(e),f=r||n||s||l,a=f?YX(e.length,String):[],y=a.length;for(var v in e)(t||nY.call(e,v))&&!(f&&(v=="length"||s&&(v=="offset"||v=="parent")||l&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||eY(v,y)))&&a.push(v);return a}var HN=iY,oY=Object.prototype;function aY(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||oY;return e===r}var YE=aY;function sY(e,t){return function(r){return e(t(r))}}var WN=sY,lY=WN,uY=lY(Object.keys,Object),cY=uY,hY=YE,fY=cY,dY=Object.prototype,pY=dY.hasOwnProperty;function mY(e){if(!hY(e))return fY(e);var t=[];for(var r in Object(e))pY.call(e,r)&&r!="constructor"&&t.push(r);return t}var gY=mY;function yY(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Dg=yY,vY=Ep,_Y=Dg,bY="[object AsyncFunction]",xY="[object Function]",wY="[object GeneratorFunction]",SY="[object Proxy]";function CY(e){if(!_Y(e))return!1;var t=vY(e);return t==xY||t==wY||t==bY||t==SY}var ZN=CY,EY=ZN,TY=WE;function AY(e){return e!=null&&TY(e.length)&&!EY(e)}var pb=AY,PY=HN,IY=gY,MY=pb;function kY(e){return MY(e)?PY(e):IY(e)}var fv=kY,LY=JZ,DY=fv;function RY(e,t){return e&&LY(e,t,DY)}var XN=RY;function NY(e){return e}var YN=NY,OY=YN;function FY(e){return typeof e=="function"?e:OY}var BY=FY,zY=XN,$Y=BY;function jY(e,t){return e&&zY(e,$Y(t))}var KE=jY,UY=WN,VY=UY(Object.getPrototypeOf,Object),JE=VY,qY=Ep,GY=JE,HY=_f,WY="[object Object]",ZY=Function.prototype,XY=Object.prototype,KN=ZY.toString,YY=XY.hasOwnProperty,KY=KN.call(Object);function JY(e){if(!HY(e)||qY(e)!=WY)return!1;var t=GY(e);if(t===null)return!0;var r=YY.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&KN.call(r)==KY}var QY=JY;function eK(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var JN=eK;function tK(){this.__data__=[],this.size=0}var rK=tK;function nK(e,t){return e===t||e!==e&&t!==t}var QE=nK,iK=QE;function oK(e,t){for(var r=e.length;r--;)if(iK(e[r][0],t))return r;return-1}var mb=oK,aK=mb,sK=Array.prototype,lK=sK.splice;function uK(e){var t=this.__data__,r=aK(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():lK.call(t,r,1),--this.size,!0}var cK=uK,hK=mb;function fK(e){var t=this.__data__,r=hK(t,e);return r<0?void 0:t[r][1]}var dK=fK,pK=mb;function mK(e){return pK(this.__data__,e)>-1}var gK=mK,yK=mb;function vK(e,t){var r=this.__data__,n=yK(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var _K=vK,bK=rK,xK=cK,wK=dK,SK=gK,CK=_K;function Rg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Rg.prototype.clear=bK;Rg.prototype.delete=xK;Rg.prototype.get=wK;Rg.prototype.has=SK;Rg.prototype.set=CK;var gb=Rg,EK=gb;function TK(){this.__data__=new EK,this.size=0}var AK=TK;function PK(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var IK=PK;function MK(e){return this.__data__.get(e)}var kK=MK;function LK(e){return this.__data__.has(e)}var DK=LK,RK=Dh,NK=RK["__core-js_shared__"],OK=NK,qw=OK,sM=function(){var e=/[^.]+$/.exec(qw&&qw.keys&&qw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function FK(e){return!!sM&&sM in e}var BK=FK,zK=Function.prototype,$K=zK.toString;function jK(e){if(e!=null){try{return $K.call(e)}catch{}try{return e+""}catch{}}return""}var QN=jK,UK=ZN,VK=BK,qK=Dg,GK=QN,HK=/[\\^$.*+?()[\]{}|]/g,WK=/^\[object .+?Constructor\]$/,ZK=Function.prototype,XK=Object.prototype,YK=ZK.toString,KK=XK.hasOwnProperty,JK=RegExp("^"+YK.call(KK).replace(HK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function QK(e){if(!qK(e)||VK(e))return!1;var t=UK(e)?JK:WK;return t.test(GK(e))}var eJ=QK;function tJ(e,t){return e==null?void 0:e[t]}var rJ=tJ,nJ=eJ,iJ=rJ;function oJ(e,t){var r=iJ(e,t);return nJ(r)?r:void 0}var Tp=oJ,aJ=Tp,sJ=Dh,lJ=aJ(sJ,"Map"),e3=lJ,uJ=Tp,cJ=uJ(Object,"create"),yb=cJ,lM=yb;function hJ(){this.__data__=lM?lM(null):{},this.size=0}var fJ=hJ;function dJ(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var pJ=dJ,mJ=yb,gJ="__lodash_hash_undefined__",yJ=Object.prototype,vJ=yJ.hasOwnProperty;function _J(e){var t=this.__data__;if(mJ){var r=t[e];return r===gJ?void 0:r}return vJ.call(t,e)?t[e]:void 0}var bJ=_J,xJ=yb,wJ=Object.prototype,SJ=wJ.hasOwnProperty;function CJ(e){var t=this.__data__;return xJ?t[e]!==void 0:SJ.call(t,e)}var EJ=CJ,TJ=yb,AJ="__lodash_hash_undefined__";function PJ(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=TJ&&t===void 0?AJ:t,this}var IJ=PJ,MJ=fJ,kJ=pJ,LJ=bJ,DJ=EJ,RJ=IJ;function Ng(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ng.prototype.clear=MJ;Ng.prototype.delete=kJ;Ng.prototype.get=LJ;Ng.prototype.has=DJ;Ng.prototype.set=RJ;var NJ=Ng,uM=NJ,OJ=gb,FJ=e3;function BJ(){this.size=0,this.__data__={hash:new uM,map:new(FJ||OJ),string:new uM}}var zJ=BJ;function $J(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var jJ=$J,UJ=jJ;function VJ(e,t){var r=e.__data__;return UJ(t)?r[typeof t=="string"?"string":"hash"]:r.map}var vb=VJ,qJ=vb;function GJ(e){var t=qJ(this,e).delete(e);return this.size-=t?1:0,t}var HJ=GJ,WJ=vb;function ZJ(e){return WJ(this,e).get(e)}var XJ=ZJ,YJ=vb;function KJ(e){return YJ(this,e).has(e)}var JJ=KJ,QJ=vb;function eQ(e,t){var r=QJ(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var tQ=eQ,rQ=zJ,nQ=HJ,iQ=XJ,oQ=JJ,aQ=tQ;function Og(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Og.prototype.clear=rQ;Og.prototype.delete=nQ;Og.prototype.get=iQ;Og.prototype.has=oQ;Og.prototype.set=aQ;var t3=Og,sQ=gb,lQ=e3,uQ=t3,cQ=200;function hQ(e,t){var r=this.__data__;if(r instanceof sQ){var n=r.__data__;if(!lQ||n.length<cQ-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new uQ(n)}return r.set(e,t),this.size=r.size,this}var fQ=hQ,dQ=gb,pQ=AK,mQ=IK,gQ=kK,yQ=DK,vQ=fQ;function Fg(e){var t=this.__data__=new dQ(e);this.size=t.size}Fg.prototype.clear=pQ;Fg.prototype.delete=mQ;Fg.prototype.get=gQ;Fg.prototype.has=yQ;Fg.prototype.set=vQ;var r3=Fg,_Q="__lodash_hash_undefined__";function bQ(e){return this.__data__.set(e,_Q),this}var xQ=bQ;function wQ(e){return this.__data__.has(e)}var SQ=wQ,CQ=t3,EQ=xQ,TQ=SQ;function H_(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new CQ;++t<r;)this.add(e[t])}H_.prototype.add=H_.prototype.push=EQ;H_.prototype.has=TQ;var AQ=H_;function PQ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var IQ=PQ;function MQ(e,t){return e.has(t)}var kQ=MQ,LQ=AQ,DQ=IQ,RQ=kQ,NQ=1,OQ=2;function FQ(e,t,r,n,s,l){var f=r&NQ,a=e.length,y=t.length;if(a!=y&&!(f&&y>a))return!1;var v=l.get(e),S=l.get(t);if(v&&S)return v==t&&S==e;var P=-1,D=!0,E=r&OQ?new LQ:void 0;for(l.set(e,t),l.set(t,e);++P<a;){var F=e[P],z=t[P];if(n)var W=f?n(z,F,P,t,e,l):n(F,z,P,e,t,l);if(W!==void 0){if(W)continue;D=!1;break}if(E){if(!DQ(t,function($,Y){if(!RQ(E,Y)&&(F===$||s(F,$,r,n,l)))return E.push(Y)})){D=!1;break}}else if(!(F===z||s(F,z,r,n,l))){D=!1;break}}return l.delete(e),l.delete(t),D}var e8=FQ,BQ=Dh,zQ=BQ.Uint8Array,t8=zQ;function $Q(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var jQ=$Q;function UQ(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var VQ=UQ,cM=hv,hM=t8,qQ=QE,GQ=e8,HQ=jQ,WQ=VQ,ZQ=1,XQ=2,YQ="[object Boolean]",KQ="[object Date]",JQ="[object Error]",QQ="[object Map]",eee="[object Number]",tee="[object RegExp]",ree="[object Set]",nee="[object String]",iee="[object Symbol]",oee="[object ArrayBuffer]",aee="[object DataView]",fM=cM?cM.prototype:void 0,Gw=fM?fM.valueOf:void 0;function see(e,t,r,n,s,l,f){switch(r){case aee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case oee:return!(e.byteLength!=t.byteLength||!l(new hM(e),new hM(t)));case YQ:case KQ:case eee:return qQ(+e,+t);case JQ:return e.name==t.name&&e.message==t.message;case tee:case nee:return e==t+"";case QQ:var a=HQ;case ree:var y=n&ZQ;if(a||(a=WQ),e.size!=t.size&&!y)return!1;var v=f.get(e);if(v)return v==t;n|=XQ,f.set(e,t);var S=GQ(a(e),a(t),n,s,l,f);return f.delete(e),S;case iee:if(Gw)return Gw.call(e)==Gw.call(t)}return!1}var lee=see;function uee(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var r8=uee,cee=r8,hee=Zc;function fee(e,t,r){var n=t(e);return hee(e)?n:cee(n,r(e))}var n8=fee;function dee(e,t){for(var r=-1,n=e==null?0:e.length,s=0,l=[];++r<n;){var f=e[r];t(f,r,e)&&(l[s++]=f)}return l}var pee=dee;function mee(){return[]}var i8=mee,gee=pee,yee=i8,vee=Object.prototype,_ee=vee.propertyIsEnumerable,dM=Object.getOwnPropertySymbols,bee=dM?function(e){return e==null?[]:(e=Object(e),gee(dM(e),function(t){return _ee.call(e,t)}))}:yee,n3=bee,xee=n8,wee=n3,See=fv;function Cee(e){return xee(e,See,wee)}var o8=Cee,pM=o8,Eee=1,Tee=Object.prototype,Aee=Tee.hasOwnProperty;function Pee(e,t,r,n,s,l){var f=r&Eee,a=pM(e),y=a.length,v=pM(t),S=v.length;if(y!=S&&!f)return!1;for(var P=y;P--;){var D=a[P];if(!(f?D in t:Aee.call(t,D)))return!1}var E=l.get(e),F=l.get(t);if(E&&F)return E==t&&F==e;var z=!0;l.set(e,t),l.set(t,e);for(var W=f;++P<y;){D=a[P];var $=e[D],Y=t[D];if(n)var Q=f?n(Y,$,D,t,e,l):n($,Y,D,e,t,l);if(!(Q===void 0?$===Y||s($,Y,r,n,l):Q)){z=!1;break}W||(W=D=="constructor")}if(z&&!W){var K=e.constructor,xe=t.constructor;K!=xe&&"constructor"in e&&"constructor"in t&&!(typeof K=="function"&&K instanceof K&&typeof xe=="function"&&xe instanceof xe)&&(z=!1)}return l.delete(e),l.delete(t),z}var Iee=Pee,Mee=Tp,kee=Dh,Lee=Mee(kee,"DataView"),Dee=Lee,Ree=Tp,Nee=Dh,Oee=Ree(Nee,"Promise"),Fee=Oee,Bee=Tp,zee=Dh,$ee=Bee(zee,"Set"),jee=$ee,Uee=Tp,Vee=Dh,qee=Uee(Vee,"WeakMap"),Gee=qee,DS=Dee,RS=e3,NS=Fee,OS=jee,FS=Gee,a8=Ep,Bg=QN,mM="[object Map]",Hee="[object Object]",gM="[object Promise]",yM="[object Set]",vM="[object WeakMap]",_M="[object DataView]",Wee=Bg(DS),Zee=Bg(RS),Xee=Bg(NS),Yee=Bg(OS),Kee=Bg(FS),Vd=a8;(DS&&Vd(new DS(new ArrayBuffer(1)))!=_M||RS&&Vd(new RS)!=mM||NS&&Vd(NS.resolve())!=gM||OS&&Vd(new OS)!=yM||FS&&Vd(new FS)!=vM)&&(Vd=function(e){var t=a8(e),r=t==Hee?e.constructor:void 0,n=r?Bg(r):"";if(n)switch(n){case Wee:return _M;case Zee:return mM;case Xee:return gM;case Yee:return yM;case Kee:return vM}return t});var _b=Vd,Hw=r3,Jee=e8,Qee=lee,ete=Iee,bM=_b,xM=Zc,wM=HE,tte=GN,rte=1,SM="[object Arguments]",CM="[object Array]",w1="[object Object]",nte=Object.prototype,EM=nte.hasOwnProperty;function ite(e,t,r,n,s,l){var f=xM(e),a=xM(t),y=f?CM:bM(e),v=a?CM:bM(t);y=y==SM?w1:y,v=v==SM?w1:v;var S=y==w1,P=v==w1,D=y==v;if(D&&wM(e)){if(!wM(t))return!1;f=!0,S=!1}if(D&&!S)return l||(l=new Hw),f||tte(e)?Jee(e,t,r,n,s,l):Qee(e,t,y,r,n,s,l);if(!(r&rte)){var E=S&&EM.call(e,"__wrapped__"),F=P&&EM.call(t,"__wrapped__");if(E||F){var z=E?e.value():e,W=F?t.value():t;return l||(l=new Hw),s(z,W,r,n,l)}}return D?(l||(l=new Hw),ete(e,t,r,n,s,l)):!1}var ote=ite,ate=ote,TM=_f;function s8(e,t,r,n,s){return e===t?!0:e==null||t==null||!TM(e)&&!TM(t)?e!==e&&t!==t:ate(e,t,r,n,s8,s)}var l8=s8,ste=r3,lte=l8,ute=1,cte=2;function hte(e,t,r,n){var s=r.length,l=s,f=!n;if(e==null)return!l;for(e=Object(e);s--;){var a=r[s];if(f&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++s<l;){a=r[s];var y=a[0],v=e[y],S=a[1];if(f&&a[2]){if(v===void 0&&!(y in e))return!1}else{var P=new ste;if(n)var D=n(v,S,y,e,t,P);if(!(D===void 0?lte(S,v,ute|cte,n,P):D))return!1}}return!0}var fte=hte,dte=Dg;function pte(e){return e===e&&!dte(e)}var u8=pte,mte=u8,gte=fv;function yte(e){for(var t=gte(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,mte(s)]}return t}var vte=yte;function _te(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var c8=_te,bte=fte,xte=vte,wte=c8;function Ste(e){var t=xte(e);return t.length==1&&t[0][2]?wte(t[0][0],t[0][1]):function(r){return r===e||bte(r,e,t)}}var Cte=Ste,Ete=Ep,Tte=_f,Ate="[object Symbol]";function Pte(e){return typeof e=="symbol"||Tte(e)&&Ete(e)==Ate}var i3=Pte,Ite=Zc,Mte=i3,kte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Lte=/^\w*$/;function Dte(e,t){if(Ite(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Mte(e)?!0:Lte.test(e)||!kte.test(e)||t!=null&&e in Object(t)}var o3=Dte,h8=t3,Rte="Expected a function";function a3(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Rte);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],l=r.cache;if(l.has(s))return l.get(s);var f=e.apply(this,n);return r.cache=l.set(s,f)||l,f};return r.cache=new(a3.Cache||h8),r}a3.Cache=h8;var Nte=a3,Ote=Nte,Fte=500;function Bte(e){var t=Ote(e,function(n){return r.size===Fte&&r.clear(),n}),r=t.cache;return t}var zte=Bte,$te=zte,jte=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ute=/\\(\\)?/g,Vte=$te(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(jte,function(r,n,s,l){t.push(s?l.replace(Ute,"$1"):n||r)}),t}),qte=Vte,AM=hv,Gte=JN,Hte=Zc,Wte=i3,PM=AM?AM.prototype:void 0,IM=PM?PM.toString:void 0;function f8(e){if(typeof e=="string")return e;if(Hte(e))return Gte(e,f8)+"";if(Wte(e))return IM?IM.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Zte=f8,Xte=Zte;function Yte(e){return e==null?"":Xte(e)}var Kte=Yte,Jte=Zc,Qte=o3,ere=qte,tre=Kte;function rre(e,t){return Jte(e)?e:Qte(e,t)?[e]:ere(tre(e))}var d8=rre,nre=i3;function ire(e){if(typeof e=="string"||nre(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var bb=ire,ore=d8,are=bb;function sre(e,t){t=ore(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[are(t[r++])];return r&&r==n?e:void 0}var p8=sre,lre=p8;function ure(e,t,r){var n=e==null?void 0:lre(e,t);return n===void 0?r:n}var cre=ure;function hre(e,t){return e!=null&&t in Object(e)}var fre=hre,dre=d8,pre=VN,mre=Zc,gre=qN,yre=WE,vre=bb;function _re(e,t,r){t=dre(t,e);for(var n=-1,s=t.length,l=!1;++n<s;){var f=vre(t[n]);if(!(l=e!=null&&r(e,f)))break;e=e[f]}return l||++n!=s?l:(s=e==null?0:e.length,!!s&&yre(s)&&gre(f,s)&&(mre(e)||pre(e)))}var bre=_re,xre=fre,wre=bre;function Sre(e,t){return e!=null&&wre(e,t,xre)}var Cre=Sre,Ere=l8,Tre=cre,Are=Cre,Pre=o3,Ire=u8,Mre=c8,kre=bb,Lre=1,Dre=2;function Rre(e,t){return Pre(e)&&Ire(t)?Mre(kre(e),t):function(r){var n=Tre(r,e);return n===void 0&&n===t?Are(r,e):Ere(t,n,Lre|Dre)}}var Nre=Rre;function Ore(e){return function(t){return t==null?void 0:t[e]}}var Fre=Ore,Bre=p8;function zre(e){return function(t){return Bre(t,e)}}var $re=zre,jre=Fre,Ure=$re,Vre=o3,qre=bb;function Gre(e){return Vre(e)?jre(qre(e)):Ure(e)}var Hre=Gre,Wre=Cte,Zre=Nre,Xre=YN,Yre=Zc,Kre=Hre;function Jre(e){return typeof e=="function"?e:e==null?Xre:typeof e=="object"?Yre(e)?Zre(e[0],e[1]):Wre(e):Kre(e)}var Qre=Jre,ene=pb;function tne(e,t){return function(r,n){if(r==null)return r;if(!ene(r))return e(r,n);for(var s=r.length,l=t?s:-1,f=Object(r);(t?l--:++l<s)&&n(f[l],l,f)!==!1;);return r}}var rne=tne,nne=XN,ine=rne,one=ine(nne),ane=one,sne=ane,lne=pb;function une(e,t){var r=-1,n=lne(e)?Array(e.length):[];return sne(e,function(s,l,f){n[++r]=t(s,l,f)}),n}var cne=une,hne=JN,fne=Qre,dne=cne,pne=Zc;function mne(e,t){var r=pne(e)?hne:dne;return r(e,fne(t))}var gne=mne;Object.defineProperty(cv,"__esModule",{value:!0});cv.flattenNames=void 0;var yne=WZ,vne=xb(yne),_ne=KE,bne=xb(_ne),xne=QY,wne=xb(xne),Sne=gne,Cne=xb(Sne);function xb(e){return e&&e.__esModule?e:{default:e}}var Ene=cv.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[];return(0,Cne.default)(t,function(n){Array.isArray(n)?e(n).map(function(s){return r.push(s)}):(0,wne.default)(n)?(0,bne.default)(n,function(s,l){s===!0&&r.push(l),r.push(l+"-"+s)}):(0,vne.default)(n)&&r.push(n)}),r};cv.default=Ene;var dv={};function Tne(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Ane=Tne,Pne=Tp,Ine=function(){try{var e=Pne(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Mne=Ine,MM=Mne;function kne(e,t,r){t=="__proto__"&&MM?MM(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var m8=kne,Lne=m8,Dne=QE,Rne=Object.prototype,Nne=Rne.hasOwnProperty;function One(e,t,r){var n=e[t];(!(Nne.call(e,t)&&Dne(n,r))||r===void 0&&!(t in e))&&Lne(e,t,r)}var g8=One,Fne=g8,Bne=m8;function zne(e,t,r,n){var s=!r;r||(r={});for(var l=-1,f=t.length;++l<f;){var a=t[l],y=n?n(r[a],e[a],a,r,e):void 0;y===void 0&&(y=e[a]),s?Bne(r,a,y):Fne(r,a,y)}return r}var wb=zne,$ne=wb,jne=fv;function Une(e,t){return e&&$ne(t,jne(t),e)}var Vne=Une;function qne(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Gne=qne,Hne=Dg,Wne=YE,Zne=Gne,Xne=Object.prototype,Yne=Xne.hasOwnProperty;function Kne(e){if(!Hne(e))return Zne(e);var t=Wne(e),r=[];for(var n in e)n=="constructor"&&(t||!Yne.call(e,n))||r.push(n);return r}var Jne=Kne,Qne=HN,eie=Jne,tie=pb;function rie(e){return tie(e)?Qne(e,!0):eie(e)}var s3=rie,nie=wb,iie=s3;function oie(e,t){return e&&nie(t,iie(t),e)}var aie=oie,W_={exports:{}};W_.exports;(function(e,t){var r=Dh,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,l=s&&s.exports===n,f=l?r.Buffer:void 0,a=f?f.allocUnsafe:void 0;function y(v,S){if(S)return v.slice();var P=v.length,D=a?a(P):new v.constructor(P);return v.copy(D),D}e.exports=y})(W_,W_.exports);var sie=W_.exports;function lie(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var uie=lie,cie=wb,hie=n3;function fie(e,t){return cie(e,hie(e),t)}var die=fie,pie=r8,mie=JE,gie=n3,yie=i8,vie=Object.getOwnPropertySymbols,_ie=vie?function(e){for(var t=[];e;)pie(t,gie(e)),e=mie(e);return t}:yie,y8=_ie,bie=wb,xie=y8;function wie(e,t){return bie(e,xie(e),t)}var Sie=wie,Cie=n8,Eie=y8,Tie=s3;function Aie(e){return Cie(e,Tie,Eie)}var Pie=Aie,Iie=Object.prototype,Mie=Iie.hasOwnProperty;function kie(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Mie.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Lie=kie,kM=t8;function Die(e){var t=new e.constructor(e.byteLength);return new kM(t).set(new kM(e)),t}var l3=Die,Rie=l3;function Nie(e,t){var r=t?Rie(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var Oie=Nie,Fie=/\w*$/;function Bie(e){var t=new e.constructor(e.source,Fie.exec(e));return t.lastIndex=e.lastIndex,t}var zie=Bie,LM=hv,DM=LM?LM.prototype:void 0,RM=DM?DM.valueOf:void 0;function $ie(e){return RM?Object(RM.call(e)):{}}var jie=$ie,Uie=l3;function Vie(e,t){var r=t?Uie(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var qie=Vie,Gie=l3,Hie=Oie,Wie=zie,Zie=jie,Xie=qie,Yie="[object Boolean]",Kie="[object Date]",Jie="[object Map]",Qie="[object Number]",eoe="[object RegExp]",toe="[object Set]",roe="[object String]",noe="[object Symbol]",ioe="[object ArrayBuffer]",ooe="[object DataView]",aoe="[object Float32Array]",soe="[object Float64Array]",loe="[object Int8Array]",uoe="[object Int16Array]",coe="[object Int32Array]",hoe="[object Uint8Array]",foe="[object Uint8ClampedArray]",doe="[object Uint16Array]",poe="[object Uint32Array]";function moe(e,t,r){var n=e.constructor;switch(t){case ioe:return Gie(e);case Yie:case Kie:return new n(+e);case ooe:return Hie(e,r);case aoe:case soe:case loe:case uoe:case coe:case hoe:case foe:case doe:case poe:return Xie(e,r);case Jie:return new n;case Qie:case roe:return new n(e);case eoe:return Wie(e);case toe:return new n;case noe:return Zie(e)}}var goe=moe,yoe=Dg,NM=Object.create,voe=function(){function e(){}return function(t){if(!yoe(t))return{};if(NM)return NM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),_oe=voe,boe=_oe,xoe=JE,woe=YE;function Soe(e){return typeof e.constructor=="function"&&!woe(e)?boe(xoe(e)):{}}var Coe=Soe,Eoe=_b,Toe=_f,Aoe="[object Map]";function Poe(e){return Toe(e)&&Eoe(e)==Aoe}var Ioe=Poe,Moe=Ioe,koe=ZE,OM=XE,FM=OM&&OM.isMap,Loe=FM?koe(FM):Moe,Doe=Loe,Roe=_b,Noe=_f,Ooe="[object Set]";function Foe(e){return Noe(e)&&Roe(e)==Ooe}var Boe=Foe,zoe=Boe,$oe=ZE,BM=XE,zM=BM&&BM.isSet,joe=zM?$oe(zM):zoe,Uoe=joe,Voe=r3,qoe=Ane,Goe=g8,Hoe=Vne,Woe=aie,Zoe=sie,Xoe=uie,Yoe=die,Koe=Sie,Joe=o8,Qoe=Pie,eae=_b,tae=Lie,rae=goe,nae=Coe,iae=Zc,oae=HE,aae=Doe,sae=Dg,lae=Uoe,uae=fv,cae=s3,hae=1,fae=2,dae=4,v8="[object Arguments]",pae="[object Array]",mae="[object Boolean]",gae="[object Date]",yae="[object Error]",_8="[object Function]",vae="[object GeneratorFunction]",_ae="[object Map]",bae="[object Number]",b8="[object Object]",xae="[object RegExp]",wae="[object Set]",Sae="[object String]",Cae="[object Symbol]",Eae="[object WeakMap]",Tae="[object ArrayBuffer]",Aae="[object DataView]",Pae="[object Float32Array]",Iae="[object Float64Array]",Mae="[object Int8Array]",kae="[object Int16Array]",Lae="[object Int32Array]",Dae="[object Uint8Array]",Rae="[object Uint8ClampedArray]",Nae="[object Uint16Array]",Oae="[object Uint32Array]",Co={};Co[v8]=Co[pae]=Co[Tae]=Co[Aae]=Co[mae]=Co[gae]=Co[Pae]=Co[Iae]=Co[Mae]=Co[kae]=Co[Lae]=Co[_ae]=Co[bae]=Co[b8]=Co[xae]=Co[wae]=Co[Sae]=Co[Cae]=Co[Dae]=Co[Rae]=Co[Nae]=Co[Oae]=!0;Co[yae]=Co[_8]=Co[Eae]=!1;function i_(e,t,r,n,s,l){var f,a=t&hae,y=t&fae,v=t&dae;if(r&&(f=s?r(e,n,s,l):r(e)),f!==void 0)return f;if(!sae(e))return e;var S=iae(e);if(S){if(f=tae(e),!a)return Xoe(e,f)}else{var P=eae(e),D=P==_8||P==vae;if(oae(e))return Zoe(e,a);if(P==b8||P==v8||D&&!s){if(f=y||D?{}:nae(e),!a)return y?Koe(e,Woe(f,e)):Yoe(e,Hoe(f,e))}else{if(!Co[P])return s?e:{};f=rae(e,P,a)}}l||(l=new Voe);var E=l.get(e);if(E)return E;l.set(e,f),lae(e)?e.forEach(function(W){f.add(i_(W,t,r,W,e,l))}):aae(e)&&e.forEach(function(W,$){f.set($,i_(W,t,r,$,e,l))});var F=v?y?Qoe:Joe:y?cae:uae,z=S?void 0:F(e);return qoe(z||e,function(W,$){z&&($=W,W=e[$]),Goe(f,$,i_(W,t,r,$,e,l))}),f}var Fae=i_,Bae=Fae,zae=1,$ae=4;function jae(e){return Bae(e,zae|$ae)}var Uae=jae;Object.defineProperty(dv,"__esModule",{value:!0});dv.mergeClasses=void 0;var Vae=KE,qae=x8(Vae),Gae=Uae,Hae=x8(Gae),Wae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function x8(e){return e&&e.__esModule?e:{default:e}}var Zae=dv.mergeClasses=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=t.default&&(0,Hae.default)(t.default)||{};return r.map(function(s){var l=t[s];return l&&(0,qae.default)(l,function(f,a){n[a]||(n[a]={}),n[a]=Wae({},n[a],l[a])}),s}),n};dv.default=Zae;var pv={};Object.defineProperty(pv,"__esModule",{value:!0});pv.autoprefix=void 0;var Xae=KE,$M=Kae(Xae),Yae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function Kae(e){return e&&e.__esModule?e:{default:e}}var Jae={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var r=t&&t.split(" ");return{position:"absolute",top:r&&r[0],right:r&&r[1],bottom:r&&r[2],left:r&&r[3]}},extend:function(t,r){var n=r[t];return n||{extend:t}}},Qae=pv.autoprefix=function(t){var r={};return(0,$M.default)(t,function(n,s){var l={};(0,$M.default)(n,function(f,a){var y=Jae[a];y?l=Yae({},l,y(f)):l[a]=f}),r[s]=l}),r};pv.default=Qae;var mv={};Object.defineProperty(mv,"__esModule",{value:!0});mv.hover=void 0;var ese=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tse=vt,Ww=rse(tse);function rse(e){return e&&e.__esModule?e:{default:e}}function nse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ise(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ose=mv.hover=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){ise(s,n);function s(){var l,f,a,y;nse(this,s);for(var v=arguments.length,S=Array(v),P=0;P<v;P++)S[P]=arguments[P];return y=(f=(a=jM(this,(l=s.__proto__||Object.getPrototypeOf(s)).call.apply(l,[this].concat(S))),a),a.state={hover:!1},a.handleMouseOver=function(){return a.setState({hover:!0})},a.handleMouseOut=function(){return a.setState({hover:!1})},a.render=function(){return Ww.default.createElement(r,{onMouseOver:a.handleMouseOver,onMouseOut:a.handleMouseOut},Ww.default.createElement(t,ese({},a.props,a.state)))},f),jM(a,y)}return s}(Ww.default.Component)};mv.default=ose;var gv={};Object.defineProperty(gv,"__esModule",{value:!0});gv.active=void 0;var ase=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sse=vt,Zw=lse(sse);function lse(e){return e&&e.__esModule?e:{default:e}}function use(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function cse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hse=gv.active=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){cse(s,n);function s(){var l,f,a,y;use(this,s);for(var v=arguments.length,S=Array(v),P=0;P<v;P++)S[P]=arguments[P];return y=(f=(a=UM(this,(l=s.__proto__||Object.getPrototypeOf(s)).call.apply(l,[this].concat(S))),a),a.state={active:!1},a.handleMouseDown=function(){return a.setState({active:!0})},a.handleMouseUp=function(){return a.setState({active:!1})},a.render=function(){return Zw.default.createElement(r,{onMouseDown:a.handleMouseDown,onMouseUp:a.handleMouseUp},Zw.default.createElement(t,ase({},a.props,a.state)))},f),UM(a,y)}return s}(Zw.default.Component)};gv.default=hse;var u3={};Object.defineProperty(u3,"__esModule",{value:!0});var fse=function(t,r){var n={},s=function(f){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;n[f]=a};return t===0&&s("first-child"),t===r-1&&s("last-child"),(t===0||t%2===0)&&s("even"),Math.abs(t%2)===1&&s("odd"),s("nth-child",t),n};u3.default=fse;Object.defineProperty(tc,"__esModule",{value:!0});tc.ReactCSS=tc.loop=tc.handleActive=c3=tc.handleHover=tc.hover=void 0;var dse=cv,pse=zg(dse),mse=dv,gse=zg(mse),yse=pv,vse=zg(yse),_se=mv,w8=zg(_se),bse=gv,xse=zg(bse),wse=u3,Sse=zg(wse);function zg(e){return e&&e.__esModule?e:{default:e}}tc.hover=w8.default;var c3=tc.handleHover=w8.default;tc.handleActive=xse.default;tc.loop=Sse.default;var Cse=tc.ReactCSS=function(t){for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];var l=(0,pse.default)(n),f=(0,gse.default)(t,l);return(0,vse.default)(f)},jn=tc.default=Cse,Ese=function(t,r,n,s,l){var f=l.clientWidth,a=l.clientHeight,y=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,v=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,S=y-(l.getBoundingClientRect().left+window.pageXOffset),P=v-(l.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var D=void 0;if(P<0?D=0:P>a?D=1:D=Math.round(P*100/a)/100,r.a!==D)return{h:r.h,s:r.s,l:r.l,a:D,source:"rgb"}}else{var E=void 0;if(S<0?E=0:S>f?E=1:E=Math.round(S*100/f)/100,s!==E)return{h:r.h,s:r.s,l:r.l,a:E,source:"rgb"}}return null},Xw={},Tse=function(t,r,n,s){if(typeof document>"u"&&!s)return null;var l=s?new s:document.createElement("canvas");l.width=n*2,l.height=n*2;var f=l.getContext("2d");return f?(f.fillStyle=t,f.fillRect(0,0,l.width,l.height),f.fillStyle=r,f.fillRect(0,0,n,n),f.translate(n,n),f.fillRect(0,0,n,n),l.toDataURL()):null},Ase=function(t,r,n,s){var l=t+"-"+r+"-"+n+(s?"-server":"");if(Xw[l])return Xw[l];var f=Tse(t,r,n,s);return Xw[l]=f,f},VM=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$g=function(t){var r=t.white,n=t.grey,s=t.size,l=t.renderers,f=t.borderRadius,a=t.boxShadow,y=t.children,v=jn({default:{grid:{borderRadius:f,boxShadow:a,absolute:"0px 0px 0px 0px",background:"url("+Ase(r,n,s,l.canvas)+") center left"}}});return vt.isValidElement(y)?Oe.cloneElement(y,VM({},y.props,{style:VM({},y.props.style,v.grid)})):Oe.createElement("div",{style:v.grid})};$g.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var Pse=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ise=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Mse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function kse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h3=function(e){kse(t,e);function t(){var r,n,s,l;Mse(this,t);for(var f=arguments.length,a=Array(f),y=0;y<f;y++)a[y]=arguments[y];return l=(n=(s=qM(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),s),s.handleChange=function(v){var S=Ese(v,s.props.hsl,s.props.direction,s.props.a,s.container);S&&typeof s.props.onChange=="function"&&s.props.onChange(S,v)},s.handleMouseDown=function(v){s.handleChange(v),window.addEventListener("mousemove",s.handleChange),window.addEventListener("mouseup",s.handleMouseUp)},s.handleMouseUp=function(){s.unbindEventListeners()},s.unbindEventListeners=function(){window.removeEventListener("mousemove",s.handleChange),window.removeEventListener("mouseup",s.handleMouseUp)},n),qM(s,l)}return Ise(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var n=this,s=this.props.rgb,l=jn({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+s.r+","+s.g+","+s.b+`, 0) 0%,
           rgba(`+s.r+","+s.g+","+s.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:s.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+s.r+","+s.g+","+s.b+`, 0) 0%,
           rgba(`+s.r+","+s.g+","+s.b+", 1) 100%)"},pointer:{left:0,top:s.a*100+"%"}},overwrite:Pse({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return Oe.createElement("div",{style:l.alpha},Oe.createElement("div",{style:l.checkboard},Oe.createElement($g,{renderers:this.props.renderers})),Oe.createElement("div",{style:l.gradient}),Oe.createElement("div",{style:l.container,ref:function(a){return n.container=a},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Oe.createElement("div",{style:l.pointer},this.props.pointer?Oe.createElement(this.props.pointer,this.props):Oe.createElement("div",{style:l.slider}))))}}]),t}(vt.PureComponent||vt.Component),Lse=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Dse(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nse(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ose(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Fse=1,S8=38,Bse=40,zse=[S8,Bse],$se=function(t){return zse.indexOf(t)>-1},jse=function(t){return Number(String(t).replace(/%/g,""))},Use=1,wi=function(e){Ose(t,e);function t(r){Rse(this,t);var n=Nse(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(s){n.setUpdatedValue(s.target.value,s)},n.handleKeyDown=function(s){var l=jse(s.target.value);if(!isNaN(l)&&$se(s.keyCode)){var f=n.getArrowOffset(),a=s.keyCode===S8?l+f:l-f;n.setUpdatedValue(a,s)}},n.handleDrag=function(s){if(n.props.dragLabel){var l=Math.round(n.props.value+s.movementX);l>=0&&l<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(l),s)}},n.handleMouseDown=function(s){n.props.dragLabel&&(s.preventDefault(),n.handleDrag(s),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(r.value).toUpperCase(),blurValue:String(r.value).toUpperCase()},n.inputId="rc-editable-input-"+Use++,n}return Lse(t,[{key:"componentDidUpdate",value:function(n,s){this.props.value!==this.state.value&&(n.value!==this.props.value||s.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(n){return Dse({},this.props.label,n)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Fse}},{key:"setUpdatedValue",value:function(n,s){var l=this.props.label?this.getValueObjectWithLabel(n):n;this.props.onChange&&this.props.onChange(l,s),this.setState({value:n})}},{key:"render",value:function(){var n=this,s=jn({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return Oe.createElement("div",{style:s.wrap},Oe.createElement("input",{id:this.inputId,style:s.input,ref:function(f){return n.input=f},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?Oe.createElement("label",{htmlFor:this.inputId,style:s.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(vt.PureComponent||vt.Component),Vse=function(t,r,n,s){var l=s.clientWidth,f=s.clientHeight,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,y=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=a-(s.getBoundingClientRect().left+window.pageXOffset),S=y-(s.getBoundingClientRect().top+window.pageYOffset);if(r==="vertical"){var P=void 0;if(S<0)P=359;else if(S>f)P=0;else{var D=-(S*100/f)+100;P=360*D/100}if(n.h!==P)return{h:P,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var E=void 0;if(v<0)E=0;else if(v>l)E=359;else{var F=v*100/l;E=360*F/100}if(n.h!==E)return{h:E,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},qse=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Gse(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GM(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Hse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var jg=function(e){Hse(t,e);function t(){var r,n,s,l;Gse(this,t);for(var f=arguments.length,a=Array(f),y=0;y<f;y++)a[y]=arguments[y];return l=(n=(s=GM(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(a))),s),s.handleChange=function(v){var S=Vse(v,s.props.direction,s.props.hsl,s.container);S&&typeof s.props.onChange=="function"&&s.props.onChange(S,v)},s.handleMouseDown=function(v){s.handleChange(v),window.addEventListener("mousemove",s.handleChange),window.addEventListener("mouseup",s.handleMouseUp)},s.handleMouseUp=function(){s.unbindEventListeners()},n),GM(s,l)}return qse(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,s=this.props.direction,l=s===void 0?"horizontal":s,f=jn({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:l==="vertical"});return Oe.createElement("div",{style:f.hue},Oe.createElement("div",{className:"hue-"+l,style:f.container,ref:function(y){return n.container=y},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Oe.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),Oe.createElement("div",{style:f.pointer},this.props.pointer?Oe.createElement(this.props.pointer,this.props):Oe.createElement("div",{style:f.slider}))))}}]),t}(vt.PureComponent||vt.Component);function Wse(){this.__data__=[],this.size=0}function yv(e,t){return e===t||e!==e&&t!==t}function Sb(e,t){for(var r=e.length;r--;)if(yv(e[r][0],t))return r;return-1}var Zse=Array.prototype,Xse=Zse.splice;function Yse(e){var t=this.__data__,r=Sb(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Xse.call(t,r,1),--this.size,!0}function Kse(e){var t=this.__data__,r=Sb(t,e);return r<0?void 0:t[r][1]}function Jse(e){return Sb(this.__data__,e)>-1}function Qse(e,t){var r=this.__data__,n=Sb(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function bf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}bf.prototype.clear=Wse;bf.prototype.delete=Yse;bf.prototype.get=Kse;bf.prototype.has=Jse;bf.prototype.set=Qse;function ele(){this.__data__=new bf,this.size=0}function tle(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function rle(e){return this.__data__.get(e)}function nle(e){return this.__data__.has(e)}var C8=typeof global=="object"&&global&&global.Object===Object&&global,ile=typeof self=="object"&&self&&self.Object===Object&&self,Xc=C8||ile||Function("return this")(),hd=Xc.Symbol,E8=Object.prototype,ole=E8.hasOwnProperty,ale=E8.toString,I0=hd?hd.toStringTag:void 0;function sle(e){var t=ole.call(e,I0),r=e[I0];try{e[I0]=void 0;var n=!0}catch{}var s=ale.call(e);return n&&(t?e[I0]=r:delete e[I0]),s}var lle=Object.prototype,ule=lle.toString;function cle(e){return ule.call(e)}var hle="[object Null]",fle="[object Undefined]",HM=hd?hd.toStringTag:void 0;function Ap(e){return e==null?e===void 0?fle:hle:HM&&HM in Object(e)?sle(e):cle(e)}function lc(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var dle="[object AsyncFunction]",ple="[object Function]",mle="[object GeneratorFunction]",gle="[object Proxy]";function f3(e){if(!lc(e))return!1;var t=Ap(e);return t==ple||t==mle||t==dle||t==gle}var Yw=Xc["__core-js_shared__"],WM=function(){var e=/[^.]+$/.exec(Yw&&Yw.keys&&Yw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function yle(e){return!!WM&&WM in e}var vle=Function.prototype,_le=vle.toString;function Pp(e){if(e!=null){try{return _le.call(e)}catch{}try{return e+""}catch{}}return""}var ble=/[\\^$.*+?()[\]{}|]/g,xle=/^\[object .+?Constructor\]$/,wle=Function.prototype,Sle=Object.prototype,Cle=wle.toString,Ele=Sle.hasOwnProperty,Tle=RegExp("^"+Cle.call(Ele).replace(ble,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ale(e){if(!lc(e)||yle(e))return!1;var t=f3(e)?Tle:xle;return t.test(Pp(e))}function Ple(e,t){return e==null?void 0:e[t]}function Ip(e,t){var r=Ple(e,t);return Ale(r)?r:void 0}var Ry=Ip(Xc,"Map"),Ny=Ip(Object,"create");function Ile(){this.__data__=Ny?Ny(null):{},this.size=0}function Mle(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var kle="__lodash_hash_undefined__",Lle=Object.prototype,Dle=Lle.hasOwnProperty;function Rle(e){var t=this.__data__;if(Ny){var r=t[e];return r===kle?void 0:r}return Dle.call(t,e)?t[e]:void 0}var Nle=Object.prototype,Ole=Nle.hasOwnProperty;function Fle(e){var t=this.__data__;return Ny?t[e]!==void 0:Ole.call(t,e)}var Ble="__lodash_hash_undefined__";function zle(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ny&&t===void 0?Ble:t,this}function fp(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}fp.prototype.clear=Ile;fp.prototype.delete=Mle;fp.prototype.get=Rle;fp.prototype.has=Fle;fp.prototype.set=zle;function $le(){this.size=0,this.__data__={hash:new fp,map:new(Ry||bf),string:new fp}}function jle(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Cb(e,t){var r=e.__data__;return jle(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ule(e){var t=Cb(this,e).delete(e);return this.size-=t?1:0,t}function Vle(e){return Cb(this,e).get(e)}function qle(e){return Cb(this,e).has(e)}function Gle(e,t){var r=Cb(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function xf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xf.prototype.clear=$le;xf.prototype.delete=Ule;xf.prototype.get=Vle;xf.prototype.has=qle;xf.prototype.set=Gle;var Hle=200;function Wle(e,t){var r=this.__data__;if(r instanceof bf){var n=r.__data__;if(!Ry||n.length<Hle-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new xf(n)}return r.set(e,t),this.size=r.size,this}function Th(e){var t=this.__data__=new bf(e);this.size=t.size}Th.prototype.clear=ele;Th.prototype.delete=tle;Th.prototype.get=rle;Th.prototype.has=nle;Th.prototype.set=Wle;var Z_=function(){try{var e=Ip(Object,"defineProperty");return e({},"",{}),e}catch{}}();function d3(e,t,r){t=="__proto__"&&Z_?Z_(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function BS(e,t,r){(r!==void 0&&!yv(e[t],r)||r===void 0&&!(t in e))&&d3(e,t,r)}function Zle(e){return function(t,r,n){for(var s=-1,l=Object(t),f=n(t),a=f.length;a--;){var y=f[++s];if(r(l[y],y,l)===!1)break}return t}}var T8=Zle(),A8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ZM=A8&&typeof module=="object"&&module&&!module.nodeType&&module,Xle=ZM&&ZM.exports===A8,XM=Xle?Xc.Buffer:void 0;XM&&XM.allocUnsafe;function Yle(e,t){return e.slice()}var X_=Xc.Uint8Array;function Kle(e){var t=new e.constructor(e.byteLength);return new X_(t).set(new X_(e)),t}function Jle(e,t){var r=Kle(e.buffer);return new e.constructor(r,e.byteOffset,e.length)}function Qle(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var YM=Object.create,eue=function(){function e(){}return function(t){if(!lc(t))return{};if(YM)return YM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function P8(e,t){return function(r){return e(t(r))}}var I8=P8(Object.getPrototypeOf,Object),tue=Object.prototype;function p3(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||tue;return e===r}function rue(e){return typeof e.constructor=="function"&&!p3(e)?eue(I8(e)):{}}function fd(e){return e!=null&&typeof e=="object"}var nue="[object Arguments]";function KM(e){return fd(e)&&Ap(e)==nue}var M8=Object.prototype,iue=M8.hasOwnProperty,oue=M8.propertyIsEnumerable,Y_=KM(function(){return arguments}())?KM:function(e){return fd(e)&&iue.call(e,"callee")&&!oue.call(e,"callee")},Bu=Array.isArray,aue=9007199254740991;function m3(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=aue}function Ug(e){return e!=null&&m3(e.length)&&!f3(e)}function sue(e){return fd(e)&&Ug(e)}function lue(){return!1}var k8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,JM=k8&&typeof module=="object"&&module&&!module.nodeType&&module,uue=JM&&JM.exports===k8,QM=uue?Xc.Buffer:void 0,cue=QM?QM.isBuffer:void 0,K_=cue||lue,hue="[object Object]",fue=Function.prototype,due=Object.prototype,L8=fue.toString,pue=due.hasOwnProperty,mue=L8.call(Object);function gue(e){if(!fd(e)||Ap(e)!=hue)return!1;var t=I8(e);if(t===null)return!0;var r=pue.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&L8.call(r)==mue}var yue="[object Arguments]",vue="[object Array]",_ue="[object Boolean]",bue="[object Date]",xue="[object Error]",wue="[object Function]",Sue="[object Map]",Cue="[object Number]",Eue="[object Object]",Tue="[object RegExp]",Aue="[object Set]",Pue="[object String]",Iue="[object WeakMap]",Mue="[object ArrayBuffer]",kue="[object DataView]",Lue="[object Float32Array]",Due="[object Float64Array]",Rue="[object Int8Array]",Nue="[object Int16Array]",Oue="[object Int32Array]",Fue="[object Uint8Array]",Bue="[object Uint8ClampedArray]",zue="[object Uint16Array]",$ue="[object Uint32Array]",No={};No[Lue]=No[Due]=No[Rue]=No[Nue]=No[Oue]=No[Fue]=No[Bue]=No[zue]=No[$ue]=!0;No[yue]=No[vue]=No[Mue]=No[_ue]=No[kue]=No[bue]=No[xue]=No[wue]=No[Sue]=No[Cue]=No[Eue]=No[Tue]=No[Aue]=No[Pue]=No[Iue]=!1;function jue(e){return fd(e)&&m3(e.length)&&!!No[Ap(e)]}function Uue(e){return function(t){return e(t)}}var D8=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ly=D8&&typeof module=="object"&&module&&!module.nodeType&&module,Vue=ly&&ly.exports===D8,Kw=Vue&&C8.process,ek=function(){try{var e=ly&&ly.require&&ly.require("util").types;return e||Kw&&Kw.binding&&Kw.binding("util")}catch{}}(),tk=ek&&ek.isTypedArray,g3=tk?Uue(tk):jue;function zS(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var que=Object.prototype,Gue=que.hasOwnProperty;function Hue(e,t,r){var n=e[t];(!(Gue.call(e,t)&&yv(n,r))||r===void 0&&!(t in e))&&d3(e,t,r)}function Wue(e,t,r,n){var s=!r;r||(r={});for(var l=-1,f=t.length;++l<f;){var a=t[l],y=void 0;y===void 0&&(y=e[a]),s?d3(r,a,y):Hue(r,a,y)}return r}function Zue(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Xue=9007199254740991,Yue=/^(?:0|[1-9]\d*)$/;function y3(e,t){var r=typeof e;return t=t??Xue,!!t&&(r=="number"||r!="symbol"&&Yue.test(e))&&e>-1&&e%1==0&&e<t}var Kue=Object.prototype,Jue=Kue.hasOwnProperty;function R8(e,t){var r=Bu(e),n=!r&&Y_(e),s=!r&&!n&&K_(e),l=!r&&!n&&!s&&g3(e),f=r||n||s||l,a=f?Zue(e.length,String):[],y=a.length;for(var v in e)(t||Jue.call(e,v))&&!(f&&(v=="length"||s&&(v=="offset"||v=="parent")||l&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||y3(v,y)))&&a.push(v);return a}function Que(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var ece=Object.prototype,tce=ece.hasOwnProperty;function rce(e){if(!lc(e))return Que(e);var t=p3(e),r=[];for(var n in e)n=="constructor"&&(t||!tce.call(e,n))||r.push(n);return r}function N8(e){return Ug(e)?R8(e,!0):rce(e)}function nce(e){return Wue(e,N8(e))}function ice(e,t,r,n,s,l,f){var a=zS(e,r),y=zS(t,r),v=f.get(y);if(v){BS(e,r,v);return}var S=l?l(a,y,r+"",e,t,f):void 0,P=S===void 0;if(P){var D=Bu(y),E=!D&&K_(y),F=!D&&!E&&g3(y);S=y,D||E||F?Bu(a)?S=a:sue(a)?S=Qle(a):E?(P=!1,S=Yle(y)):F?(P=!1,S=Jle(y)):S=[]:gue(y)||Y_(y)?(S=a,Y_(a)?S=nce(a):(!lc(a)||f3(a))&&(S=rue(y))):P=!1}P&&(f.set(y,S),s(S,y,n,l,f),f.delete(y)),BS(e,r,S)}function O8(e,t,r,n,s){e!==t&&T8(t,function(l,f){if(s||(s=new Th),lc(l))ice(e,t,f,r,O8,n,s);else{var a=n?n(zS(e,f),l,f+"",e,t,s):void 0;a===void 0&&(a=l),BS(e,f,a)}},N8)}function Eb(e){return e}function oce(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var rk=Math.max;function ace(e,t,r){return t=rk(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,l=rk(n.length-t,0),f=Array(l);++s<l;)f[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(f),oce(e,this,a)}}function sce(e){return function(){return e}}var lce=Z_?function(e,t){return Z_(e,"toString",{configurable:!0,enumerable:!1,value:sce(t),writable:!0})}:Eb,uce=800,cce=16,hce=Date.now;function fce(e){var t=0,r=0;return function(){var n=hce(),s=cce-(n-r);if(r=n,s>0){if(++t>=uce)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var dce=fce(lce);function pce(e,t){return dce(ace(e,t,Eb),e+"")}function mce(e,t,r){if(!lc(r))return!1;var n=typeof t;return(n=="number"?Ug(r)&&y3(t,r.length):n=="string"&&t in r)?yv(r[t],e):!1}function gce(e){return pce(function(t,r){var n=-1,s=r.length,l=s>1?r[s-1]:void 0,f=s>2?r[2]:void 0;for(l=e.length>3&&typeof l=="function"?(s--,l):void 0,f&&mce(r[0],r[1],f)&&(l=s<3?void 0:l,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,l)}return t})}var uu=gce(function(e,t,r){O8(e,t,r)}),vv=function(t){var r=t.zDepth,n=t.radius,s=t.background,l=t.children,f=t.styles,a=f===void 0?{}:f,y=jn(uu({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+r+"px "+r*4+"px rgba(0,0,0,.24)",borderRadius:n,background:s}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},a),{"zDepth-1":r===1});return Oe.createElement("div",{style:y.wrap},Oe.createElement("div",{style:y.bg}),Oe.createElement("div",{style:y.content},l))};vv.propTypes={background:Rr.string,zDepth:Rr.oneOf([0,1,2,3,4,5]),radius:Rr.number,styles:Rr.object};vv.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var Jw=function(){return Xc.Date.now()},yce=/\s/;function vce(e){for(var t=e.length;t--&&yce.test(e.charAt(t)););return t}var _ce=/^\s+/;function bce(e){return e&&e.slice(0,vce(e)+1).replace(_ce,"")}var xce="[object Symbol]";function Tb(e){return typeof e=="symbol"||fd(e)&&Ap(e)==xce}var nk=NaN,wce=/^[-+]0x[0-9a-f]+$/i,Sce=/^0b[01]+$/i,Cce=/^0o[0-7]+$/i,Ece=parseInt;function ik(e){if(typeof e=="number")return e;if(Tb(e))return nk;if(lc(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=lc(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=bce(e);var r=Sce.test(e);return r||Cce.test(e)?Ece(e.slice(2),r?2:8):wce.test(e)?nk:+e}var Tce="Expected a function",Ace=Math.max,Pce=Math.min;function F8(e,t,r){var n,s,l,f,a,y,v=0,S=!1,P=!1,D=!0;if(typeof e!="function")throw new TypeError(Tce);t=ik(t)||0,lc(r)&&(S=!!r.leading,P="maxWait"in r,l=P?Ace(ik(r.maxWait)||0,t):l,D="trailing"in r?!!r.trailing:D);function E(de){var be=n,me=s;return n=s=void 0,v=de,f=e.apply(me,be),f}function F(de){return v=de,a=setTimeout($,t),S?E(de):f}function z(de){var be=de-y,me=de-v,ve=t-be;return P?Pce(ve,l-me):ve}function W(de){var be=de-y,me=de-v;return y===void 0||be>=t||be<0||P&&me>=l}function $(){var de=Jw();if(W(de))return Y(de);a=setTimeout($,z(de))}function Y(de){return a=void 0,D&&n?E(de):(n=s=void 0,f)}function Q(){a!==void 0&&clearTimeout(a),v=0,n=y=s=a=void 0}function K(){return a===void 0?f:Y(Jw())}function xe(){var de=Jw(),be=W(de);if(n=arguments,s=this,y=de,be){if(a===void 0)return F(y);if(P)return clearTimeout(a),a=setTimeout($,t),E(y)}return a===void 0&&(a=setTimeout($,t)),f}return xe.cancel=Q,xe.flush=K,xe}var Ice="Expected a function";function Mce(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(Ice);return lc(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),F8(e,t,{leading:n,maxWait:t,trailing:s})}var kce=function(t,r,n){var s=n.getBoundingClientRect(),l=s.width,f=s.height,a=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,y=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,v=a-(n.getBoundingClientRect().left+window.pageXOffset),S=y-(n.getBoundingClientRect().top+window.pageYOffset);v<0?v=0:v>l&&(v=l),S<0?S=0:S>f&&(S=f);var P=v/l,D=1-S/f;return{h:r.h,s:P,v:D,a:r.a,source:"hsv"}},Lce=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Dce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Nce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ab=function(e){Nce(t,e);function t(r){Dce(this,t);var n=Rce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));return n.handleChange=function(s){typeof n.props.onChange=="function"&&n.throttle(n.props.onChange,kce(s,n.props.hsl,n.container),s)},n.handleMouseDown=function(s){n.handleChange(s);var l=n.getContainerRenderWindow();l.addEventListener("mousemove",n.handleChange),l.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=Mce(function(s,l,f){s(l,f)},50),n}return Lce(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var n=this.container,s=window;!s.document.contains(n)&&s.parent!==s;)s=s.parent;return s}},{key:"unbindEventListeners",value:function(){var n=this.getContainerRenderWindow();n.removeEventListener("mousemove",this.handleChange),n.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var n=this,s=this.props.style||{},l=s.color,f=s.white,a=s.black,y=s.pointer,v=s.circle,S=jn({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:l,white:f,black:a,pointer:y,circle:v}},{custom:!!this.props.style});return Oe.createElement("div",{style:S.color,ref:function(D){return n.container=D},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},Oe.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),Oe.createElement("div",{style:S.white,className:"saturation-white"},Oe.createElement("div",{style:S.black,className:"saturation-black"}),Oe.createElement("div",{style:S.pointer},this.props.pointer?Oe.createElement(this.props.pointer,this.props):Oe.createElement("div",{style:S.circle}))))}}]),t}(vt.PureComponent||vt.Component);function Oce(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Fce=P8(Object.keys,Object),Bce=Object.prototype,zce=Bce.hasOwnProperty;function $ce(e){if(!p3(e))return Fce(e);var t=[];for(var r in Object(e))zce.call(e,r)&&r!="constructor"&&t.push(r);return t}function v3(e){return Ug(e)?R8(e):$ce(e)}function jce(e,t){return e&&T8(e,t,v3)}function Uce(e,t){return function(r,n){if(r==null)return r;if(!Ug(r))return e(r,n);for(var s=r.length,l=-1,f=Object(r);++l<s&&n(f[l],l,f)!==!1;);return r}}var B8=Uce(jce);function Vce(e){return typeof e=="function"?e:Eb}function qce(e,t){var r=Bu(e)?Oce:B8;return r(e,Vce(t))}function J_(e){"@babel/helpers - typeof";return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J_(e)}var Gce=/^\s+/,Hce=/\s+$/;function gn(e,t){if(e=e||"",t=t||{},e instanceof gn)return e;if(!(this instanceof gn))return new gn(e,t);var r=Wce(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}gn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),r,n,s,l,f,a;return r=t.r/255,n=t.g/255,s=t.b/255,r<=.03928?l=r/12.92:l=Math.pow((r+.055)/1.055,2.4),n<=.03928?f=n/12.92:f=Math.pow((n+.055)/1.055,2.4),s<=.03928?a=s/12.92:a=Math.pow((s+.055)/1.055,2.4),.2126*l+.7152*f+.0722*a},setAlpha:function(t){return this._a=z8(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=ak(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=ak(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.v*100);return this._a==1?"hsv("+r+", "+n+"%, "+s+"%)":"hsva("+r+", "+n+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var t=ok(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=ok(this._r,this._g,this._b),r=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.l*100);return this._a==1?"hsl("+r+", "+n+"%, "+s+"%)":"hsla("+r+", "+n+"%, "+s+"%, "+this._roundA+")"},toHex:function(t){return sk(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Kce(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Wo(this._r,255)*100)+"%",g:Math.round(Wo(this._g,255)*100)+"%",b:Math.round(Wo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Wo(this._r,255)*100)+"%, "+Math.round(Wo(this._g,255)*100)+"%, "+Math.round(Wo(this._b,255)*100)+"%)":"rgba("+Math.round(Wo(this._r,255)*100)+"%, "+Math.round(Wo(this._g,255)*100)+"%, "+Math.round(Wo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:uhe[sk(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var r="#"+lk(this._r,this._g,this._b,this._a),n=r,s=this._gradientType?"GradientType = 1, ":"";if(t){var l=gn(t);n="#"+lk(l._r,l._g,l._b,l._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+r+",endColorstr="+n+")"},toString:function(t){var r=!!t;t=t||this._format;var n=!1,s=this._a<1&&this._a>=0,l=!r&&s&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return l?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return gn(this.toString())},_applyModification:function(t,r){var n=t.apply(null,[this].concat([].slice.call(r)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(the,arguments)},brighten:function(){return this._applyModification(rhe,arguments)},darken:function(){return this._applyModification(nhe,arguments)},desaturate:function(){return this._applyModification(Jce,arguments)},saturate:function(){return this._applyModification(Qce,arguments)},greyscale:function(){return this._applyModification(ehe,arguments)},spin:function(){return this._applyModification(ihe,arguments)},_applyCombination:function(t,r){return t.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(she,arguments)},complement:function(){return this._applyCombination(ohe,arguments)},monochromatic:function(){return this._applyCombination(lhe,arguments)},splitcomplement:function(){return this._applyCombination(ahe,arguments)},triad:function(){return this._applyCombination(uk,[3])},tetrad:function(){return this._applyCombination(uk,[4])}};gn.fromRatio=function(e,t){if(J_(e)=="object"){var r={};for(var n in e)e.hasOwnProperty(n)&&(n==="a"?r[n]=e[n]:r[n]=U0(e[n]));e=r}return gn(e,t)};function Wce(e){var t={r:0,g:0,b:0},r=1,n=null,s=null,l=null,f=!1,a=!1;return typeof e=="string"&&(e=dhe(e)),J_(e)=="object"&&(Kh(e.r)&&Kh(e.g)&&Kh(e.b)?(t=Zce(e.r,e.g,e.b),f=!0,a=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Kh(e.h)&&Kh(e.s)&&Kh(e.v)?(n=U0(e.s),s=U0(e.v),t=Yce(e.h,n,s),f=!0,a="hsv"):Kh(e.h)&&Kh(e.s)&&Kh(e.l)&&(n=U0(e.s),l=U0(e.l),t=Xce(e.h,n,l),f=!0,a="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=z8(r),{ok:f,format:e.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}function Zce(e,t,r){return{r:Wo(e,255)*255,g:Wo(t,255)*255,b:Wo(r,255)*255}}function ok(e,t,r){e=Wo(e,255),t=Wo(t,255),r=Wo(r,255);var n=Math.max(e,t,r),s=Math.min(e,t,r),l,f,a=(n+s)/2;if(n==s)l=f=0;else{var y=n-s;switch(f=a>.5?y/(2-n-s):y/(n+s),n){case e:l=(t-r)/y+(t<r?6:0);break;case t:l=(r-e)/y+2;break;case r:l=(e-t)/y+4;break}l/=6}return{h:l,s:f,l:a}}function Xce(e,t,r){var n,s,l;e=Wo(e,360),t=Wo(t,100),r=Wo(r,100);function f(v,S,P){return P<0&&(P+=1),P>1&&(P-=1),P<1/6?v+(S-v)*6*P:P<1/2?S:P<2/3?v+(S-v)*(2/3-P)*6:v}if(t===0)n=s=l=r;else{var a=r<.5?r*(1+t):r+t-r*t,y=2*r-a;n=f(y,a,e+1/3),s=f(y,a,e),l=f(y,a,e-1/3)}return{r:n*255,g:s*255,b:l*255}}function ak(e,t,r){e=Wo(e,255),t=Wo(t,255),r=Wo(r,255);var n=Math.max(e,t,r),s=Math.min(e,t,r),l,f,a=n,y=n-s;if(f=n===0?0:y/n,n==s)l=0;else{switch(n){case e:l=(t-r)/y+(t<r?6:0);break;case t:l=(r-e)/y+2;break;case r:l=(e-t)/y+4;break}l/=6}return{h:l,s:f,v:a}}function Yce(e,t,r){e=Wo(e,360)*6,t=Wo(t,100),r=Wo(r,100);var n=Math.floor(e),s=e-n,l=r*(1-t),f=r*(1-s*t),a=r*(1-(1-s)*t),y=n%6,v=[r,f,l,l,a,r][y],S=[a,r,r,f,l,l][y],P=[l,l,a,r,r,f][y];return{r:v*255,g:S*255,b:P*255}}function sk(e,t,r,n){var s=[zc(Math.round(e).toString(16)),zc(Math.round(t).toString(16)),zc(Math.round(r).toString(16))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Kce(e,t,r,n,s){var l=[zc(Math.round(e).toString(16)),zc(Math.round(t).toString(16)),zc(Math.round(r).toString(16)),zc($8(n))];return s&&l[0].charAt(0)==l[0].charAt(1)&&l[1].charAt(0)==l[1].charAt(1)&&l[2].charAt(0)==l[2].charAt(1)&&l[3].charAt(0)==l[3].charAt(1)?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function lk(e,t,r,n){var s=[zc($8(n)),zc(Math.round(e).toString(16)),zc(Math.round(t).toString(16)),zc(Math.round(r).toString(16))];return s.join("")}gn.equals=function(e,t){return!e||!t?!1:gn(e).toRgbString()==gn(t).toRgbString()};gn.random=function(){return gn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Jce(e,t){t=t===0?0:t||10;var r=gn(e).toHsl();return r.s-=t/100,r.s=Pb(r.s),gn(r)}function Qce(e,t){t=t===0?0:t||10;var r=gn(e).toHsl();return r.s+=t/100,r.s=Pb(r.s),gn(r)}function ehe(e){return gn(e).desaturate(100)}function the(e,t){t=t===0?0:t||10;var r=gn(e).toHsl();return r.l+=t/100,r.l=Pb(r.l),gn(r)}function rhe(e,t){t=t===0?0:t||10;var r=gn(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),gn(r)}function nhe(e,t){t=t===0?0:t||10;var r=gn(e).toHsl();return r.l-=t/100,r.l=Pb(r.l),gn(r)}function ihe(e,t){var r=gn(e).toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,gn(r)}function ohe(e){var t=gn(e).toHsl();return t.h=(t.h+180)%360,gn(t)}function uk(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var r=gn(e).toHsl(),n=[gn(e)],s=360/t,l=1;l<t;l++)n.push(gn({h:(r.h+l*s)%360,s:r.s,l:r.l}));return n}function ahe(e){var t=gn(e).toHsl(),r=t.h;return[gn(e),gn({h:(r+72)%360,s:t.s,l:t.l}),gn({h:(r+216)%360,s:t.s,l:t.l})]}function she(e,t,r){t=t||6,r=r||30;var n=gn(e).toHsl(),s=360/r,l=[gn(e)];for(n.h=(n.h-(s*t>>1)+720)%360;--t;)n.h=(n.h+s)%360,l.push(gn(n));return l}function lhe(e,t){t=t||6;for(var r=gn(e).toHsv(),n=r.h,s=r.s,l=r.v,f=[],a=1/t;t--;)f.push(gn({h:n,s,v:l})),l=(l+a)%1;return f}gn.mix=function(e,t,r){r=r===0?0:r||50;var n=gn(e).toRgb(),s=gn(t).toRgb(),l=r/100,f={r:(s.r-n.r)*l+n.r,g:(s.g-n.g)*l+n.g,b:(s.b-n.b)*l+n.b,a:(s.a-n.a)*l+n.a};return gn(f)};gn.readability=function(e,t){var r=gn(e),n=gn(t);return(Math.max(r.getLuminance(),n.getLuminance())+.05)/(Math.min(r.getLuminance(),n.getLuminance())+.05)};gn.isReadable=function(e,t,r){var n=gn.readability(e,t),s,l;switch(l=!1,s=phe(r),s.level+s.size){case"AAsmall":case"AAAlarge":l=n>=4.5;break;case"AAlarge":l=n>=3;break;case"AAAsmall":l=n>=7;break}return l};gn.mostReadable=function(e,t,r){var n=null,s=0,l,f,a,y;r=r||{},f=r.includeFallbackColors,a=r.level,y=r.size;for(var v=0;v<t.length;v++)l=gn.readability(e,t[v]),l>s&&(s=l,n=gn(t[v]));return gn.isReadable(e,n,{level:a,size:y})||!f?n:(r.includeFallbackColors=!1,gn.mostReadable(e,["#fff","#000"],r))};var $S=gn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},uhe=gn.hexNames=che($S);function che(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function z8(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Wo(e,t){hhe(e)&&(e="100%");var r=fhe(e);return e=Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function Pb(e){return Math.min(1,Math.max(0,e))}function Iu(e){return parseInt(e,16)}function hhe(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function fhe(e){return typeof e=="string"&&e.indexOf("%")!=-1}function zc(e){return e.length==1?"0"+e:""+e}function U0(e){return e<=1&&(e=e*100+"%"),e}function $8(e){return Math.round(parseFloat(e)*255).toString(16)}function ck(e){return Iu(e)/255}var Dc=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",r="(?:"+t+")|(?:"+e+")",n="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",s="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Kh(e){return!!Dc.CSS_UNIT.exec(e)}function dhe(e){e=e.replace(Gce,"").replace(Hce,"").toLowerCase();var t=!1;if($S[e])e=$S[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Dc.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Dc.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Dc.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Dc.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Dc.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Dc.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Dc.hex8.exec(e))?{r:Iu(r[1]),g:Iu(r[2]),b:Iu(r[3]),a:ck(r[4]),format:t?"name":"hex8"}:(r=Dc.hex6.exec(e))?{r:Iu(r[1]),g:Iu(r[2]),b:Iu(r[3]),format:t?"name":"hex"}:(r=Dc.hex4.exec(e))?{r:Iu(r[1]+""+r[1]),g:Iu(r[2]+""+r[2]),b:Iu(r[3]+""+r[3]),a:ck(r[4]+""+r[4]),format:t?"name":"hex8"}:(r=Dc.hex3.exec(e))?{r:Iu(r[1]+""+r[1]),g:Iu(r[2]+""+r[2]),b:Iu(r[3]+""+r[3]),format:t?"name":"hex"}:!1}function phe(e){var t,r;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:t,size:r}}var hk=function(t){var r=["r","g","b","a","h","s","l","v"],n=0,s=0;return qce(r,function(l){if(t[l]&&(n+=1,isNaN(t[l])||(s+=1),l==="s"||l==="l")){var f=/^\d+%$/;f.test(t[l])&&(s+=1)}}),n===s?t:!1},V0=function(t,r){var n=t.hex?gn(t.hex):gn(t),s=n.toHsl(),l=n.toHsv(),f=n.toRgb(),a=n.toHex();s.s===0&&(s.h=r||0,l.h=r||0);var y=a==="000000"&&f.a===0;return{hsl:s,hex:y?"transparent":"#"+a,rgb:f,hsv:l,oldHue:t.h||r||s.h,source:t.source}},xd=function(t){if(t==="transparent")return!0;var r=String(t).charAt(0)==="#"?1:0;return t.length!==4+r&&t.length<7+r&&gn(t).isValid()},_3=function(t){if(!t)return"#fff";var r=V0(t);if(r.hex==="transparent")return"rgba(0,0,0,0.4)";var n=(r.rgb.r*299+r.rgb.g*587+r.rgb.b*114)/1e3;return n>=128?"#000":"#fff"},Qw=function(t,r){var n=t.replace("°","");return gn(r+" ("+n+")")._ok},M0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mhe=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function ghe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yhe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function vhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cu=function(t){var r=function(n){vhe(s,n);function s(l){ghe(this,s);var f=yhe(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));return f.handleChange=function(a,y){var v=hk(a);if(v){var S=V0(a,a.h||f.state.oldHue);f.setState(S),f.props.onChangeComplete&&f.debounce(f.props.onChangeComplete,S,y),f.props.onChange&&f.props.onChange(S,y)}},f.handleSwatchHover=function(a,y){var v=hk(a);if(v){var S=V0(a,a.h||f.state.oldHue);f.props.onSwatchHover&&f.props.onSwatchHover(S,y)}},f.state=M0({},V0(l.color,0)),f.debounce=F8(function(a,y,v){a(y,v)},100),f}return mhe(s,[{key:"render",value:function(){var f={};return this.props.onSwatchHover&&(f.onSwatchHover=this.handleSwatchHover),Oe.createElement(t,M0({},this.props,this.state,{onChange:this.handleChange},f))}}],[{key:"getDerivedStateFromProps",value:function(f,a){return M0({},V0(f.color,a.oldHue))}}]),s}(vt.PureComponent||vt.Component);return r.propTypes=M0({},t.propTypes),r.defaultProps=M0({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),r},_he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bhe=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function xhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fk(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function whe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var She=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(n){whe(s,n);function s(){var l,f,a,y;xhe(this,s);for(var v=arguments.length,S=Array(v),P=0;P<v;P++)S[P]=arguments[P];return y=(f=(a=fk(this,(l=s.__proto__||Object.getPrototypeOf(s)).call.apply(l,[this].concat(S))),a),a.state={focus:!1},a.handleFocus=function(){return a.setState({focus:!0})},a.handleBlur=function(){return a.setState({focus:!1})},f),fk(a,y)}return bhe(s,[{key:"render",value:function(){return Oe.createElement(r,{onFocus:this.handleFocus,onBlur:this.handleBlur},Oe.createElement(t,_he({},this.props,this.state)))}}]),s}(Oe.Component)},dk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Che=13,Ehe=function(t){var r=t.color,n=t.style,s=t.onClick,l=s===void 0?function(){}:s,f=t.onHover,a=t.title,y=a===void 0?r:a,v=t.children,S=t.focus,P=t.focusStyle,D=P===void 0?{}:P,E=r==="transparent",F=jn({default:{swatch:dk({background:r,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,S?D:{})}}),z=function(K){return l(r,K)},W=function(K){return K.keyCode===Che&&l(r,K)},$=function(K){return f(r,K)},Y={};return f&&(Y.onMouseOver=$),Oe.createElement("div",dk({style:F.swatch,onClick:z,title:y,tabIndex:0,onKeyDown:W},Y),v,E&&Oe.createElement($g,{borderRadius:F.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const Mp=She(Ehe);var The=function(t){var r=t.direction,n=jn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Oe.createElement("div",{style:n.picker})},Ahe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j8=function(t){var r=t.rgb,n=t.hsl,s=t.width,l=t.height,f=t.onChange,a=t.direction,y=t.style,v=t.renderers,S=t.pointer,P=t.className,D=P===void 0?"":P,E=jn({default:{picker:{position:"relative",width:s,height:l},alpha:{radius:"2px",style:y}}});return Oe.createElement("div",{style:E.picker,className:"alpha-picker "+D},Oe.createElement(h3,Ahe({},E.alpha,{rgb:r,hsl:n,pointer:S,renderers:v,onChange:f,direction:a})))};j8.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:The};cu(j8);function U8(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var Phe="__lodash_hash_undefined__";function Ihe(e){return this.__data__.set(e,Phe),this}function Mhe(e){return this.__data__.has(e)}function Q_(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new xf;++t<r;)this.add(e[t])}Q_.prototype.add=Q_.prototype.push=Ihe;Q_.prototype.has=Mhe;function khe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Lhe(e,t){return e.has(t)}var Dhe=1,Rhe=2;function V8(e,t,r,n,s,l){var f=r&Dhe,a=e.length,y=t.length;if(a!=y&&!(f&&y>a))return!1;var v=l.get(e),S=l.get(t);if(v&&S)return v==t&&S==e;var P=-1,D=!0,E=r&Rhe?new Q_:void 0;for(l.set(e,t),l.set(t,e);++P<a;){var F=e[P],z=t[P];if(n)var W=f?n(z,F,P,t,e,l):n(F,z,P,e,t,l);if(W!==void 0){if(W)continue;D=!1;break}if(E){if(!khe(t,function($,Y){if(!Lhe(E,Y)&&(F===$||s(F,$,r,n,l)))return E.push(Y)})){D=!1;break}}else if(!(F===z||s(F,z,r,n,l))){D=!1;break}}return l.delete(e),l.delete(t),D}function Nhe(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}function Ohe(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Fhe=1,Bhe=2,zhe="[object Boolean]",$he="[object Date]",jhe="[object Error]",Uhe="[object Map]",Vhe="[object Number]",qhe="[object RegExp]",Ghe="[object Set]",Hhe="[object String]",Whe="[object Symbol]",Zhe="[object ArrayBuffer]",Xhe="[object DataView]",pk=hd?hd.prototype:void 0,e5=pk?pk.valueOf:void 0;function Yhe(e,t,r,n,s,l,f){switch(r){case Xhe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Zhe:return!(e.byteLength!=t.byteLength||!l(new X_(e),new X_(t)));case zhe:case $he:case Vhe:return yv(+e,+t);case jhe:return e.name==t.name&&e.message==t.message;case qhe:case Hhe:return e==t+"";case Uhe:var a=Nhe;case Ghe:var y=n&Fhe;if(a||(a=Ohe),e.size!=t.size&&!y)return!1;var v=f.get(e);if(v)return v==t;n|=Bhe,f.set(e,t);var S=V8(a(e),a(t),n,s,l,f);return f.delete(e),S;case Whe:if(e5)return e5.call(e)==e5.call(t)}return!1}function Khe(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}function Jhe(e,t,r){var n=t(e);return Bu(e)?n:Khe(n,r(e))}function Qhe(e,t){for(var r=-1,n=e==null?0:e.length,s=0,l=[];++r<n;){var f=e[r];t(f,r,e)&&(l[s++]=f)}return l}function efe(){return[]}var tfe=Object.prototype,rfe=tfe.propertyIsEnumerable,mk=Object.getOwnPropertySymbols,nfe=mk?function(e){return e==null?[]:(e=Object(e),Qhe(mk(e),function(t){return rfe.call(e,t)}))}:efe;function gk(e){return Jhe(e,v3,nfe)}var ife=1,ofe=Object.prototype,afe=ofe.hasOwnProperty;function sfe(e,t,r,n,s,l){var f=r&ife,a=gk(e),y=a.length,v=gk(t),S=v.length;if(y!=S&&!f)return!1;for(var P=y;P--;){var D=a[P];if(!(f?D in t:afe.call(t,D)))return!1}var E=l.get(e),F=l.get(t);if(E&&F)return E==t&&F==e;var z=!0;l.set(e,t),l.set(t,e);for(var W=f;++P<y;){D=a[P];var $=e[D],Y=t[D];if(n)var Q=f?n(Y,$,D,t,e,l):n($,Y,D,e,t,l);if(!(Q===void 0?$===Y||s($,Y,r,n,l):Q)){z=!1;break}W||(W=D=="constructor")}if(z&&!W){var K=e.constructor,xe=t.constructor;K!=xe&&"constructor"in e&&"constructor"in t&&!(typeof K=="function"&&K instanceof K&&typeof xe=="function"&&xe instanceof xe)&&(z=!1)}return l.delete(e),l.delete(t),z}var jS=Ip(Xc,"DataView"),US=Ip(Xc,"Promise"),VS=Ip(Xc,"Set"),qS=Ip(Xc,"WeakMap"),yk="[object Map]",lfe="[object Object]",vk="[object Promise]",_k="[object Set]",bk="[object WeakMap]",xk="[object DataView]",ufe=Pp(jS),cfe=Pp(Ry),hfe=Pp(US),ffe=Pp(VS),dfe=Pp(qS),Vf=Ap;(jS&&Vf(new jS(new ArrayBuffer(1)))!=xk||Ry&&Vf(new Ry)!=yk||US&&Vf(US.resolve())!=vk||VS&&Vf(new VS)!=_k||qS&&Vf(new qS)!=bk)&&(Vf=function(e){var t=Ap(e),r=t==lfe?e.constructor:void 0,n=r?Pp(r):"";if(n)switch(n){case ufe:return xk;case cfe:return yk;case hfe:return vk;case ffe:return _k;case dfe:return bk}return t});var pfe=1,wk="[object Arguments]",Sk="[object Array]",S1="[object Object]",mfe=Object.prototype,Ck=mfe.hasOwnProperty;function gfe(e,t,r,n,s,l){var f=Bu(e),a=Bu(t),y=f?Sk:Vf(e),v=a?Sk:Vf(t);y=y==wk?S1:y,v=v==wk?S1:v;var S=y==S1,P=v==S1,D=y==v;if(D&&K_(e)){if(!K_(t))return!1;f=!0,S=!1}if(D&&!S)return l||(l=new Th),f||g3(e)?V8(e,t,r,n,s,l):Yhe(e,t,y,r,n,s,l);if(!(r&pfe)){var E=S&&Ck.call(e,"__wrapped__"),F=P&&Ck.call(t,"__wrapped__");if(E||F){var z=E?e.value():e,W=F?t.value():t;return l||(l=new Th),s(z,W,r,n,l)}}return D?(l||(l=new Th),sfe(e,t,r,n,s,l)):!1}function b3(e,t,r,n,s){return e===t?!0:e==null||t==null||!fd(e)&&!fd(t)?e!==e&&t!==t:gfe(e,t,r,n,b3,s)}var yfe=1,vfe=2;function _fe(e,t,r,n){var s=r.length,l=s;if(e==null)return!l;for(e=Object(e);s--;){var f=r[s];if(f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++s<l;){f=r[s];var a=f[0],y=e[a],v=f[1];if(f[2]){if(y===void 0&&!(a in e))return!1}else{var S=new Th,P;if(!(P===void 0?b3(v,y,yfe|vfe,n,S):P))return!1}}return!0}function q8(e){return e===e&&!lc(e)}function bfe(e){for(var t=v3(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,q8(s)]}return t}function G8(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function xfe(e){var t=bfe(e);return t.length==1&&t[0][2]?G8(t[0][0],t[0][1]):function(r){return r===e||_fe(r,e,t)}}var wfe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sfe=/^\w*$/;function x3(e,t){if(Bu(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Tb(e)?!0:Sfe.test(e)||!wfe.test(e)||t!=null&&e in Object(t)}var Cfe="Expected a function";function w3(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Cfe);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],l=r.cache;if(l.has(s))return l.get(s);var f=e.apply(this,n);return r.cache=l.set(s,f)||l,f};return r.cache=new(w3.Cache||xf),r}w3.Cache=xf;var Efe=500;function Tfe(e){var t=w3(e,function(n){return r.size===Efe&&r.clear(),n}),r=t.cache;return t}var Afe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pfe=/\\(\\)?/g,Ife=Tfe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Afe,function(r,n,s,l){t.push(s?l.replace(Pfe,"$1"):n||r)}),t}),Ek=hd?hd.prototype:void 0,Tk=Ek?Ek.toString:void 0;function H8(e){if(typeof e=="string")return e;if(Bu(e))return U8(e,H8)+"";if(Tb(e))return Tk?Tk.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Mfe(e){return e==null?"":H8(e)}function W8(e,t){return Bu(e)?e:x3(e,t)?[e]:Ife(Mfe(e))}function Ib(e){if(typeof e=="string"||Tb(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Z8(e,t){t=W8(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Ib(t[r++])];return r&&r==n?e:void 0}function kfe(e,t,r){var n=e==null?void 0:Z8(e,t);return n===void 0?r:n}function Lfe(e,t){return e!=null&&t in Object(e)}function Dfe(e,t,r){t=W8(t,e);for(var n=-1,s=t.length,l=!1;++n<s;){var f=Ib(t[n]);if(!(l=e!=null&&r(e,f)))break;e=e[f]}return l||++n!=s?l:(s=e==null?0:e.length,!!s&&m3(s)&&y3(f,s)&&(Bu(e)||Y_(e)))}function Rfe(e,t){return e!=null&&Dfe(e,t,Lfe)}var Nfe=1,Ofe=2;function Ffe(e,t){return x3(e)&&q8(t)?G8(Ib(e),t):function(r){var n=kfe(r,e);return n===void 0&&n===t?Rfe(r,e):b3(t,n,Nfe|Ofe)}}function Bfe(e){return function(t){return t==null?void 0:t[e]}}function zfe(e){return function(t){return Z8(t,e)}}function $fe(e){return x3(e)?Bfe(Ib(e)):zfe(e)}function jfe(e){return typeof e=="function"?e:e==null?Eb:typeof e=="object"?Bu(e)?Ffe(e[0],e[1]):xfe(e):$fe(e)}function Ufe(e,t){var r=-1,n=Ug(e)?Array(e.length):[];return B8(e,function(s,l,f){n[++r]=t(s,l,f)}),n}function kp(e,t){var r=Bu(e)?U8:Ufe;return r(e,jfe(t))}var Vfe=function(t){var r=t.colors,n=t.onClick,s=t.onSwatchHover,l=jn({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return Oe.createElement("div",{style:l.swatches},kp(r,function(f){return Oe.createElement(Mp,{key:f,color:f,style:l.swatch,onClick:n,onHover:s,focusStyle:{boxShadow:"0 0 4px "+f}})}),Oe.createElement("div",{style:l.clear}))},S3=function(t){var r=t.onChange,n=t.onSwatchHover,s=t.hex,l=t.colors,f=t.width,a=t.triangle,y=t.styles,v=y===void 0?{}:y,S=t.className,P=S===void 0?"":S,D=s==="transparent",E=function(W,$){xd(W)&&r({hex:W,source:"hex"},$)},F=jn(uu({default:{card:{width:f,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:s,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:_3(s),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+s+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},v),{"hide-triangle":a==="hide"});return Oe.createElement("div",{style:F.card,className:"block-picker "+P},Oe.createElement("div",{style:F.triangle}),Oe.createElement("div",{style:F.head},D&&Oe.createElement($g,{borderRadius:"6px 6px 0 0"}),Oe.createElement("div",{style:F.label},s)),Oe.createElement("div",{style:F.body},Oe.createElement(Vfe,{colors:l,onClick:E,onSwatchHover:n}),Oe.createElement(wi,{style:{input:F.input},value:s,onChange:E})))};S3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),colors:Rr.arrayOf(Rr.string),triangle:Rr.oneOf(["top","hide"]),styles:Rr.object};S3.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};cu(S3);var ym={100:"#ffcdd2",300:"#e57373",500:"#f44336",700:"#d32f2f",900:"#b71c1c"},vm={100:"#f8bbd0",300:"#f06292",500:"#e91e63",700:"#c2185b",900:"#880e4f"},_m={100:"#e1bee7",300:"#ba68c8",500:"#9c27b0",700:"#7b1fa2",900:"#4a148c"},bm={100:"#d1c4e9",300:"#9575cd",500:"#673ab7",700:"#512da8",900:"#311b92"},xm={100:"#c5cae9",300:"#7986cb",500:"#3f51b5",700:"#303f9f",900:"#1a237e"},wm={100:"#bbdefb",300:"#64b5f6",500:"#2196f3",700:"#1976d2",900:"#0d47a1"},Sm={100:"#b3e5fc",300:"#4fc3f7",500:"#03a9f4",700:"#0288d1",900:"#01579b"},Cm={100:"#b2ebf2",300:"#4dd0e1",500:"#00bcd4",700:"#0097a7",900:"#006064"},Em={100:"#b2dfdb",300:"#4db6ac",500:"#009688",700:"#00796b",900:"#004d40"},q0={100:"#c8e6c9",300:"#81c784",500:"#4caf50",700:"#388e3c"},Tm={100:"#dcedc8",300:"#aed581",500:"#8bc34a",700:"#689f38",900:"#33691e"},Am={100:"#f0f4c3",300:"#dce775",500:"#cddc39",700:"#afb42b",900:"#827717"},Pm={100:"#fff9c4",300:"#fff176",500:"#ffeb3b",700:"#fbc02d",900:"#f57f17"},Im={100:"#ffecb3",300:"#ffd54f",500:"#ffc107",700:"#ffa000",900:"#ff6f00"},Mm={100:"#ffe0b2",300:"#ffb74d",500:"#ff9800",700:"#f57c00",900:"#e65100"},km={100:"#ffccbc",300:"#ff8a65",500:"#ff5722",700:"#e64a19",900:"#bf360c"},Lm={100:"#d7ccc8",300:"#a1887f",500:"#795548",700:"#5d4037",900:"#3e2723"},Dm={100:"#cfd8dc",300:"#90a4ae",500:"#607d8b",700:"#455a64",900:"#263238"},X8=function(t){var r=t.color,n=t.onClick,s=t.onSwatchHover,l=t.hover,f=t.active,a=t.circleSize,y=t.circleSpacing,v=jn({default:{swatch:{width:a,height:a,marginRight:y,marginBottom:y,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(a/2+1)+"px "+r,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+r}}},{hover:l,active:f});return Oe.createElement("div",{style:v.swatch},Oe.createElement(Mp,{style:v.Swatch,color:r,onClick:n,onHover:s,focusStyle:{boxShadow:v.Swatch.boxShadow+", 0 0 5px "+r}}))};X8.defaultProps={circleSize:28,circleSpacing:14};const qfe=c3(X8);var C3=function(t){var r=t.width,n=t.onChange,s=t.onSwatchHover,l=t.colors,f=t.hex,a=t.circleSize,y=t.styles,v=y===void 0?{}:y,S=t.circleSpacing,P=t.className,D=P===void 0?"":P,E=jn(uu({default:{card:{width:r,display:"flex",flexWrap:"wrap",marginRight:-S,marginBottom:-S}}},v)),F=function(W,$){return n({hex:W,source:"hex"},$)};return Oe.createElement("div",{style:E.card,className:"circle-picker "+D},kp(l,function(z){return Oe.createElement(qfe,{key:z,color:z,onClick:F,onSwatchHover:s,active:f===z.toLowerCase(),circleSize:a,circleSpacing:S})}))};C3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),circleSize:Rr.number,circleSpacing:Rr.number,styles:Rr.object};C3.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[ym[500],vm[500],_m[500],bm[500],xm[500],wm[500],Sm[500],Cm[500],Em[500],q0[500],Tm[500],Am[500],Pm[500],Im[500],Mm[500],km[500],Lm[500],Dm[500]],styles:{}};cu(C3);function Ak(e){return e===void 0}var Y8={};Object.defineProperty(Y8,"__esModule",{value:!0});var Pk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gfe=vt,Ik=Hfe(Gfe);function Hfe(e){return e&&e.__esModule?e:{default:e}}function Wfe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var C1=24,Zfe=Y8.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,n=e.width,s=n===void 0?C1:n,l=e.height,f=l===void 0?C1:l,a=e.style,y=a===void 0?{}:a,v=Wfe(e,["fill","width","height","style"]);return Ik.default.createElement("svg",Pk({viewBox:"0 0 "+C1+" "+C1,style:Pk({fill:r,width:s,height:f},y)},v),Ik.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},Xfe=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function Yfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kfe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Jfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var K8=function(e){Jfe(t,e);function t(r){Yfe(this,t);var n=Kfe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){n.state.view==="hex"?n.setState({view:"rgb"}):n.state.view==="rgb"?n.setState({view:"hsl"}):n.state.view==="hsl"&&(n.props.hsl.a===1?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(s,l){s.hex?xd(s.hex)&&n.props.onChange({hex:s.hex,source:"hex"},l):s.r||s.g||s.b?n.props.onChange({r:s.r||n.props.rgb.r,g:s.g||n.props.rgb.g,b:s.b||n.props.rgb.b,source:"rgb"},l):s.a?(s.a<0?s.a=0:s.a>1&&(s.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(s.a*100)/100,source:"rgb"},l)):(s.h||s.s||s.l)&&(typeof s.s=="string"&&s.s.includes("%")&&(s.s=s.s.replace("%","")),typeof s.l=="string"&&s.l.includes("%")&&(s.l=s.l.replace("%","")),s.s==1?s.s=.01:s.l==1&&(s.l=.01),n.props.onChange({h:s.h||n.props.hsl.h,s:Number(Ak(s.s)?n.props.hsl.s:s.s),l:Number(Ak(s.l)?n.props.hsl.l:s.l),source:"hsl"},l))},n.showHighlight=function(s){s.currentTarget.style.background="#eee"},n.hideHighlight=function(s){s.currentTarget.style.background="transparent"},r.hsl.a!==1&&r.view==="hex"?n.state={view:"rgb"}:n.state={view:r.view},n}return Xfe(t,[{key:"render",value:function(){var n=this,s=jn({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),l=void 0;return this.state.view==="hex"?l=Oe.createElement("div",{style:s.fields,className:"flexbox-fix"},Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?l=Oe.createElement("div",{style:s.fields,className:"flexbox-fix"},Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),Oe.createElement("div",{style:s.alpha},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(l=Oe.createElement("div",{style:s.fields,className:"flexbox-fix"},Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),Oe.createElement("div",{style:s.field},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),Oe.createElement("div",{style:s.alpha},Oe.createElement(wi,{style:{input:s.input,label:s.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),Oe.createElement("div",{style:s.wrap,className:"flexbox-fix"},l,Oe.createElement("div",{style:s.toggle},Oe.createElement("div",{style:s.icon,onClick:this.toggleViews,ref:function(a){return n.icon=a}},Oe.createElement(Zfe,{style:s.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.hsl.a!==1&&s.view==="hex"?{view:"rgb"}:null}}]),t}(Oe.Component);K8.defaultProps={view:"hex"};var Mk=function(){var t=jn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Oe.createElement("div",{style:t.picker})},Qfe=function(){var t=jn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return Oe.createElement("div",{style:t.picker})},E3=function(t){var r=t.width,n=t.onChange,s=t.disableAlpha,l=t.rgb,f=t.hsl,a=t.hsv,y=t.hex,v=t.renderers,S=t.styles,P=S===void 0?{}:S,D=t.className,E=D===void 0?"":D,F=t.defaultView,z=jn(uu({default:{picker:{width:r,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+l.r+", "+l.g+", "+l.b+", "+l.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},P),{disableAlpha:s});return Oe.createElement("div",{style:z.picker,className:"chrome-picker "+E},Oe.createElement("div",{style:z.saturation},Oe.createElement(Ab,{style:z.Saturation,hsl:f,hsv:a,pointer:Qfe,onChange:n})),Oe.createElement("div",{style:z.body},Oe.createElement("div",{style:z.controls,className:"flexbox-fix"},Oe.createElement("div",{style:z.color},Oe.createElement("div",{style:z.swatch},Oe.createElement("div",{style:z.active}),Oe.createElement($g,{renderers:v}))),Oe.createElement("div",{style:z.toggles},Oe.createElement("div",{style:z.hue},Oe.createElement(jg,{style:z.Hue,hsl:f,pointer:Mk,onChange:n})),Oe.createElement("div",{style:z.alpha},Oe.createElement(h3,{style:z.Alpha,rgb:l,hsl:f,pointer:Mk,renderers:v,onChange:n})))),Oe.createElement(K8,{rgb:l,hsl:f,hex:y,view:F,onChange:n,disableAlpha:s})))};E3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),disableAlpha:Rr.bool,styles:Rr.object,defaultView:Rr.oneOf(["hex","rgb","hsl"])};E3.defaultProps={width:225,disableAlpha:!1,styles:{}};cu(E3);var ede=function(t){var r=t.color,n=t.onClick,s=n===void 0?function(){}:n,l=t.onSwatchHover,f=t.active,a=jn({default:{color:{background:r,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:_3(r),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:f,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Oe.createElement(Mp,{style:a.color,color:r,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+r}},Oe.createElement("div",{style:a.dot}))},tde=function(t){var r=t.hex,n=t.rgb,s=t.onChange,l=jn({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:r},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),f=function(y,v){y.r||y.g||y.b?s({r:y.r||n.r,g:y.g||n.g,b:y.b||n.b,source:"rgb"},v):s({hex:y.hex,source:"hex"},v)};return Oe.createElement("div",{style:l.fields,className:"flexbox-fix"},Oe.createElement("div",{style:l.active}),Oe.createElement(wi,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:r,onChange:f}),Oe.createElement(wi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:n.r,onChange:f}),Oe.createElement(wi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:n.g,onChange:f}),Oe.createElement(wi,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:n.b,onChange:f}))},T3=function(t){var r=t.onChange,n=t.onSwatchHover,s=t.colors,l=t.hex,f=t.rgb,a=t.styles,y=a===void 0?{}:a,v=t.className,S=v===void 0?"":v,P=jn(uu({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},y)),D=function(F,z){F.hex?xd(F.hex)&&r({hex:F.hex,source:"hex"},z):r(F,z)};return Oe.createElement(vv,{style:P.Compact,styles:y},Oe.createElement("div",{style:P.compact,className:"compact-picker "+S},Oe.createElement("div",null,kp(s,function(E){return Oe.createElement(ede,{key:E,color:E,active:E.toLowerCase()===l,onClick:D,onSwatchHover:n})}),Oe.createElement("div",{style:P.clear})),Oe.createElement(tde,{hex:l,rgb:f,onChange:D})))};T3.propTypes={colors:Rr.arrayOf(Rr.string),styles:Rr.object};T3.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};cu(T3);var rde=function(t){var r=t.hover,n=t.color,s=t.onClick,l=t.onSwatchHover,f={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},a=jn({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:f}},{hover:r});return Oe.createElement("div",{style:a.swatch},Oe.createElement(Mp,{color:n,onClick:s,onHover:l,focusStyle:f}))};const nde=c3(rde);var A3=function(t){var r=t.width,n=t.colors,s=t.onChange,l=t.onSwatchHover,f=t.triangle,a=t.styles,y=a===void 0?{}:a,v=t.className,S=v===void 0?"":v,P=jn(uu({default:{card:{width:r,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},y),{"hide-triangle":f==="hide","top-left-triangle":f==="top-left","top-right-triangle":f==="top-right","bottom-left-triangle":f==="bottom-left","bottom-right-triangle":f==="bottom-right"}),D=function(F,z){return s({hex:F,source:"hex"},z)};return Oe.createElement("div",{style:P.card,className:"github-picker "+S},Oe.createElement("div",{style:P.triangleShadow}),Oe.createElement("div",{style:P.triangle}),kp(n,function(E){return Oe.createElement(nde,{color:E,key:E,onClick:D,onSwatchHover:l})}))};A3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),colors:Rr.arrayOf(Rr.string),triangle:Rr.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:Rr.object};A3.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};cu(A3);var ide=function(t){var r=t.direction,n=jn({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:r==="vertical"});return Oe.createElement("div",{style:n.picker})},ode=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P3=function(t){var r=t.width,n=t.height,s=t.onChange,l=t.hsl,f=t.direction,a=t.pointer,y=t.styles,v=y===void 0?{}:y,S=t.className,P=S===void 0?"":S,D=jn(uu({default:{picker:{position:"relative",width:r,height:n},hue:{radius:"2px"}}},v)),E=function(z){return s({a:1,h:z.h,l:.5,s:1})};return Oe.createElement("div",{style:D.picker,className:"hue-picker "+P},Oe.createElement(jg,ode({},D.hue,{hsl:l,pointer:a,onChange:E,direction:f})))};P3.propTypes={styles:Rr.object};P3.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:ide,styles:{}};cu(P3);var ade=function(t){var r=t.onChange,n=t.hex,s=t.rgb,l=t.styles,f=l===void 0?{}:l,a=t.className,y=a===void 0?"":a,v=jn(uu({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},f)),S=function(D,E){D.hex?xd(D.hex)&&r({hex:D.hex,source:"hex"},E):(D.r||D.g||D.b)&&r({r:D.r||s.r,g:D.g||s.g,b:D.b||s.b,source:"rgb"},E)};return Oe.createElement(vv,{styles:f},Oe.createElement("div",{style:v.material,className:"material-picker "+y},Oe.createElement(wi,{style:{wrap:v.HEXwrap,input:v.HEXinput,label:v.HEXlabel},label:"hex",value:n,onChange:S}),Oe.createElement("div",{style:v.split,className:"flexbox-fix"},Oe.createElement("div",{style:v.third},Oe.createElement(wi,{style:{wrap:v.RGBwrap,input:v.RGBinput,label:v.RGBlabel},label:"r",value:s.r,onChange:S})),Oe.createElement("div",{style:v.third},Oe.createElement(wi,{style:{wrap:v.RGBwrap,input:v.RGBinput,label:v.RGBlabel},label:"g",value:s.g,onChange:S})),Oe.createElement("div",{style:v.third},Oe.createElement(wi,{style:{wrap:v.RGBwrap,input:v.RGBinput,label:v.RGBlabel},label:"b",value:s.b,onChange:S})))))};cu(ade);var sde=function(t){var r=t.onChange,n=t.rgb,s=t.hsv,l=t.hex,f=jn({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),a=function(v,S){v["#"]?xd(v["#"])&&r({hex:v["#"],source:"hex"},S):v.r||v.g||v.b?r({r:v.r||n.r,g:v.g||n.g,b:v.b||n.b,source:"rgb"},S):(v.h||v.s||v.v)&&r({h:v.h||s.h,s:v.s||s.s,v:v.v||s.v,source:"hsv"},S)};return Oe.createElement("div",{style:f.fields},Oe.createElement(wi,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"h",value:Math.round(s.h),onChange:a}),Oe.createElement(wi,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"s",value:Math.round(s.s*100),onChange:a}),Oe.createElement(wi,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"v",value:Math.round(s.v*100),onChange:a}),Oe.createElement("div",{style:f.divider}),Oe.createElement(wi,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"r",value:n.r,onChange:a}),Oe.createElement(wi,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"g",value:n.g,onChange:a}),Oe.createElement(wi,{style:{wrap:f.RGBwrap,input:f.RGBinput,label:f.RGBlabel},label:"b",value:n.b,onChange:a}),Oe.createElement("div",{style:f.divider}),Oe.createElement(wi,{style:{wrap:f.HEXwrap,input:f.HEXinput,label:f.HEXlabel},label:"#",value:l.replace("#",""),onChange:a}),Oe.createElement("div",{style:f.fieldSymbols},Oe.createElement("div",{style:f.symbol},"°"),Oe.createElement("div",{style:f.symbol},"%"),Oe.createElement("div",{style:f.symbol},"%")))},lde=function(t){var r=t.hsl,n=jn({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":r.l>.5});return Oe.createElement("div",{style:n.picker})},ude=function(){var t=jn({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return Oe.createElement("div",{style:t.pointer},Oe.createElement("div",{style:t.left},Oe.createElement("div",{style:t.leftInside})),Oe.createElement("div",{style:t.right},Oe.createElement("div",{style:t.rightInside})))},kk=function(t){var r=t.onClick,n=t.label,s=t.children,l=t.active,f=jn({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:l});return Oe.createElement("div",{style:f.button,onClick:r},n||s)},cde=function(t){var r=t.rgb,n=t.currentColor,s=jn({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+r.r+","+r.g+", "+r.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return Oe.createElement("div",null,Oe.createElement("div",{style:s.label},"new"),Oe.createElement("div",{style:s.swatches},Oe.createElement("div",{style:s.new}),Oe.createElement("div",{style:s.current})),Oe.createElement("div",{style:s.label},"current"))},hde=function(){function e(t,r){for(var n=0;n<r.length;n++){var s=r[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function fde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dde(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I3=function(e){pde(t,e);function t(r){fde(this,t);var n=dde(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:r.hex},n}return hde(t,[{key:"render",value:function(){var n=this.props,s=n.styles,l=s===void 0?{}:s,f=n.className,a=f===void 0?"":f,y=jn(uu({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},l));return Oe.createElement("div",{style:y.picker,className:"photoshop-picker "+a},Oe.createElement("div",{style:y.head},this.props.header),Oe.createElement("div",{style:y.body,className:"flexbox-fix"},Oe.createElement("div",{style:y.saturation},Oe.createElement(Ab,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:lde,onChange:this.props.onChange})),Oe.createElement("div",{style:y.hue},Oe.createElement(jg,{direction:"vertical",hsl:this.props.hsl,pointer:ude,onChange:this.props.onChange})),Oe.createElement("div",{style:y.controls},Oe.createElement("div",{style:y.top,className:"flexbox-fix"},Oe.createElement("div",{style:y.previews},Oe.createElement(cde,{rgb:this.props.rgb,currentColor:this.state.currentColor})),Oe.createElement("div",{style:y.actions},Oe.createElement(kk,{label:"OK",onClick:this.props.onAccept,active:!0}),Oe.createElement(kk,{label:"Cancel",onClick:this.props.onCancel}),Oe.createElement(sde,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(Oe.Component);I3.propTypes={header:Rr.string,styles:Rr.object};I3.defaultProps={header:"Color Picker",styles:{}};cu(I3);var mde=function(t){var r=t.onChange,n=t.rgb,s=t.hsl,l=t.hex,f=t.disableAlpha,a=jn({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:f}),y=function(S,P){S.hex?xd(S.hex)&&r({hex:S.hex,source:"hex"},P):S.r||S.g||S.b?r({r:S.r||n.r,g:S.g||n.g,b:S.b||n.b,a:n.a,source:"rgb"},P):S.a&&(S.a<0?S.a=0:S.a>100&&(S.a=100),S.a/=100,r({h:s.h,s:s.s,l:s.l,a:S.a,source:"rgb"},P))};return Oe.createElement("div",{style:a.fields,className:"flexbox-fix"},Oe.createElement("div",{style:a.double},Oe.createElement(wi,{style:{input:a.input,label:a.label},label:"hex",value:l.replace("#",""),onChange:y})),Oe.createElement("div",{style:a.single},Oe.createElement(wi,{style:{input:a.input,label:a.label},label:"r",value:n.r,onChange:y,dragLabel:"true",dragMax:"255"})),Oe.createElement("div",{style:a.single},Oe.createElement(wi,{style:{input:a.input,label:a.label},label:"g",value:n.g,onChange:y,dragLabel:"true",dragMax:"255"})),Oe.createElement("div",{style:a.single},Oe.createElement(wi,{style:{input:a.input,label:a.label},label:"b",value:n.b,onChange:y,dragLabel:"true",dragMax:"255"})),Oe.createElement("div",{style:a.alpha},Oe.createElement(wi,{style:{input:a.input,label:a.label},label:"a",value:Math.round(n.a*100),onChange:y,dragLabel:"true",dragMax:"100"})))},gde=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J8=function(t){var r=t.colors,n=t.onClick,s=n===void 0?function(){}:n,l=t.onSwatchHover,f=jn({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!r||!r.length}),a=function(v,S){s({hex:v,source:"hex"},S)};return Oe.createElement("div",{style:f.colors,className:"flexbox-fix"},r.map(function(y){var v=typeof y=="string"?{color:y}:y,S=""+v.color+(v.title||"");return Oe.createElement("div",{key:S,style:f.swatchWrap},Oe.createElement(Mp,gde({},v,{style:f.swatch,onClick:a,onHover:l,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+v.color}})))}))};J8.propTypes={colors:Rr.arrayOf(Rr.oneOfType([Rr.string,Rr.shape({color:Rr.string,title:Rr.string})])).isRequired};var yde=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M3=function(t){var r=t.width,n=t.rgb,s=t.hex,l=t.hsv,f=t.hsl,a=t.onChange,y=t.onSwatchHover,v=t.disableAlpha,S=t.presetColors,P=t.renderers,D=t.styles,E=D===void 0?{}:D,F=t.className,z=F===void 0?"":F,W=jn(uu({default:yde({picker:{width:r,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},E),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},E),{disableAlpha:v});return Oe.createElement("div",{style:W.picker,className:"sketch-picker "+z},Oe.createElement("div",{style:W.saturation},Oe.createElement(Ab,{style:W.Saturation,hsl:f,hsv:l,onChange:a})),Oe.createElement("div",{style:W.controls,className:"flexbox-fix"},Oe.createElement("div",{style:W.sliders},Oe.createElement("div",{style:W.hue},Oe.createElement(jg,{style:W.Hue,hsl:f,onChange:a})),Oe.createElement("div",{style:W.alpha},Oe.createElement(h3,{style:W.Alpha,rgb:n,hsl:f,renderers:P,onChange:a}))),Oe.createElement("div",{style:W.color},Oe.createElement($g,null),Oe.createElement("div",{style:W.activeColor}))),Oe.createElement(mde,{rgb:n,hsl:f,hex:s,onChange:a,disableAlpha:v}),Oe.createElement(J8,{colors:S,onClick:a,onSwatchHover:y}))};M3.propTypes={disableAlpha:Rr.bool,width:Rr.oneOfType([Rr.string,Rr.number]),styles:Rr.object};M3.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};cu(M3);var k0=function(t){var r=t.hsl,n=t.offset,s=t.onClick,l=s===void 0?function(){}:s,f=t.active,a=t.first,y=t.last,v=jn({default:{swatch:{height:"12px",background:"hsl("+r.h+", 50%, "+n*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:f,first:a,last:y}),S=function(D){return l({h:r.h,s:.5,l:n,source:"hsl"},D)};return Oe.createElement("div",{style:v.swatch,onClick:S})},vde=function(t){var r=t.onClick,n=t.hsl,s=jn({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),l=.1;return Oe.createElement("div",{style:s.swatches},Oe.createElement("div",{style:s.swatch},Oe.createElement(k0,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<l&&Math.abs(n.s-.5)<l,onClick:r,first:!0})),Oe.createElement("div",{style:s.swatch},Oe.createElement(k0,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<l&&Math.abs(n.s-.5)<l,onClick:r})),Oe.createElement("div",{style:s.swatch},Oe.createElement(k0,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<l&&Math.abs(n.s-.5)<l,onClick:r})),Oe.createElement("div",{style:s.swatch},Oe.createElement(k0,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<l&&Math.abs(n.s-.5)<l,onClick:r})),Oe.createElement("div",{style:s.swatch},Oe.createElement(k0,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<l&&Math.abs(n.s-.5)<l,onClick:r,last:!0})),Oe.createElement("div",{style:s.clear}))},_de=function(){var t=jn({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return Oe.createElement("div",{style:t.picker})},k3=function(t){var r=t.hsl,n=t.onChange,s=t.pointer,l=t.styles,f=l===void 0?{}:l,a=t.className,y=a===void 0?"":a,v=jn(uu({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},f));return Oe.createElement("div",{style:v.wrap||{},className:"slider-picker "+y},Oe.createElement("div",{style:v.hue},Oe.createElement(jg,{style:v.Hue,hsl:r,pointer:s,onChange:n})),Oe.createElement("div",{style:v.swatches},Oe.createElement(vde,{hsl:r,onClick:n})))};k3.propTypes={styles:Rr.object};k3.defaultProps={pointer:_de,styles:{}};cu(k3);var Q8={};Object.defineProperty(Q8,"__esModule",{value:!0});var Lk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bde=vt,Dk=xde(bde);function xde(e){return e&&e.__esModule?e:{default:e}}function wde(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var E1=24,Sde=Q8.default=function(e){var t=e.fill,r=t===void 0?"currentColor":t,n=e.width,s=n===void 0?E1:n,l=e.height,f=l===void 0?E1:l,a=e.style,y=a===void 0?{}:a,v=wde(e,["fill","width","height","style"]);return Dk.default.createElement("svg",Lk({viewBox:"0 0 "+E1+" "+E1,style:Lk({fill:r,width:s,height:f},y)},v),Dk.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Cde=function(t){var r=t.color,n=t.onClick,s=n===void 0?function(){}:n,l=t.onSwatchHover,f=t.first,a=t.last,y=t.active,v=jn({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:r,marginBottom:"1px"},check:{color:_3(r),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:f,last:a,active:y,"color-#FFFFFF":r==="#FFFFFF",transparent:r==="transparent"});return Oe.createElement(Mp,{color:r,style:v.color,onClick:s,onHover:l,focusStyle:{boxShadow:"0 0 4px "+r}},Oe.createElement("div",{style:v.check},Oe.createElement(Sde,null)))},Ede=function(t){var r=t.onClick,n=t.onSwatchHover,s=t.group,l=t.active,f=jn({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return Oe.createElement("div",{style:f.group},kp(s,function(a,y){return Oe.createElement(Cde,{key:a,color:a,active:a.toLowerCase()===l,first:y===0,last:y===s.length-1,onClick:r,onSwatchHover:n})}))},L3=function(t){var r=t.width,n=t.height,s=t.onChange,l=t.onSwatchHover,f=t.colors,a=t.hex,y=t.styles,v=y===void 0?{}:y,S=t.className,P=S===void 0?"":S,D=jn(uu({default:{picker:{width:r,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},v)),E=function(z,W){return s({hex:z,source:"hex"},W)};return Oe.createElement("div",{style:D.picker,className:"swatches-picker "+P},Oe.createElement(vv,null,Oe.createElement("div",{style:D.overflow},Oe.createElement("div",{style:D.body},kp(f,function(F){return Oe.createElement(Ede,{key:F.toString(),group:F,active:a,onClick:E,onSwatchHover:l})}),Oe.createElement("div",{style:D.clear})))))};L3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),height:Rr.oneOfType([Rr.string,Rr.number]),colors:Rr.arrayOf(Rr.arrayOf(Rr.string)),styles:Rr.object};L3.defaultProps={width:320,height:240,colors:[[ym[900],ym[700],ym[500],ym[300],ym[100]],[vm[900],vm[700],vm[500],vm[300],vm[100]],[_m[900],_m[700],_m[500],_m[300],_m[100]],[bm[900],bm[700],bm[500],bm[300],bm[100]],[xm[900],xm[700],xm[500],xm[300],xm[100]],[wm[900],wm[700],wm[500],wm[300],wm[100]],[Sm[900],Sm[700],Sm[500],Sm[300],Sm[100]],[Cm[900],Cm[700],Cm[500],Cm[300],Cm[100]],[Em[900],Em[700],Em[500],Em[300],Em[100]],["#194D33",q0[700],q0[500],q0[300],q0[100]],[Tm[900],Tm[700],Tm[500],Tm[300],Tm[100]],[Am[900],Am[700],Am[500],Am[300],Am[100]],[Pm[900],Pm[700],Pm[500],Pm[300],Pm[100]],[Im[900],Im[700],Im[500],Im[300],Im[100]],[Mm[900],Mm[700],Mm[500],Mm[300],Mm[100]],[km[900],km[700],km[500],km[300],km[100]],[Lm[900],Lm[700],Lm[500],Lm[300],Lm[100]],[Dm[900],Dm[700],Dm[500],Dm[300],Dm[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};cu(L3);var D3=function(t){var r=t.onChange,n=t.onSwatchHover,s=t.hex,l=t.colors,f=t.width,a=t.triangle,y=t.styles,v=y===void 0?{}:y,S=t.className,P=S===void 0?"":S,D=jn(uu({default:{card:{width:f,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},v),{"hide-triangle":a==="hide","top-left-triangle":a==="top-left","top-right-triangle":a==="top-right"}),E=function(z,W){xd(z)&&r({hex:z,source:"hex"},W)};return Oe.createElement("div",{style:D.card,className:"twitter-picker "+P},Oe.createElement("div",{style:D.triangleShadow}),Oe.createElement("div",{style:D.triangle}),Oe.createElement("div",{style:D.body},kp(l,function(F,z){return Oe.createElement(Mp,{key:z,color:F,hex:F,style:D.swatch,onClick:E,onHover:n,focusStyle:{boxShadow:"0 0 4px "+F}})}),Oe.createElement("div",{style:D.hash},"#"),Oe.createElement(wi,{label:null,style:{input:D.input},value:s.replace("#",""),onChange:E}),Oe.createElement("div",{style:D.clear})))};D3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),triangle:Rr.oneOf(["hide","top-left","top-right"]),colors:Rr.arrayOf(Rr.string),styles:Rr.object};D3.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};cu(D3);var R3=function(t){var r=jn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return Oe.createElement("div",{style:r.picker})};R3.propTypes={hsl:Rr.shape({h:Rr.number,s:Rr.number,l:Rr.number,a:Rr.number})};R3.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var N3=function(t){var r=jn({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return Oe.createElement("div",{style:r.picker})};N3.propTypes={hsl:Rr.shape({h:Rr.number,s:Rr.number,l:Rr.number,a:Rr.number})};N3.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Tde=function(t){var r=t.onChange,n=t.rgb,s=t.hsl,l=t.hex,f=t.hsv,a=function(E,F){if(E.hex)xd(E.hex)&&r({hex:E.hex,source:"hex"},F);else if(E.rgb){var z=E.rgb.split(",");Qw(E.rgb,"rgb")&&r({r:z[0],g:z[1],b:z[2],a:1,source:"rgb"},F)}else if(E.hsv){var W=E.hsv.split(",");Qw(E.hsv,"hsv")&&(W[2]=W[2].replace("%",""),W[1]=W[1].replace("%",""),W[0]=W[0].replace("°",""),W[1]==1?W[1]=.01:W[2]==1&&(W[2]=.01),r({h:Number(W[0]),s:Number(W[1]),v:Number(W[2]),source:"hsv"},F))}else if(E.hsl){var $=E.hsl.split(",");Qw(E.hsl,"hsl")&&($[2]=$[2].replace("%",""),$[1]=$[1].replace("%",""),$[0]=$[0].replace("°",""),P[1]==1?P[1]=.01:P[2]==1&&(P[2]=.01),r({h:Number($[0]),s:Number($[1]),v:Number($[2]),source:"hsl"},F))}},y=jn({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),v=n.r+", "+n.g+", "+n.b,S=Math.round(s.h)+"°, "+Math.round(s.s*100)+"%, "+Math.round(s.l*100)+"%",P=Math.round(f.h)+"°, "+Math.round(f.s*100)+"%, "+Math.round(f.v*100)+"%";return Oe.createElement("div",{style:y.wrap,className:"flexbox-fix"},Oe.createElement("div",{style:y.fields},Oe.createElement("div",{style:y.double},Oe.createElement(wi,{style:{input:y.input,label:y.label},label:"hex",value:l,onChange:a})),Oe.createElement("div",{style:y.column},Oe.createElement("div",{style:y.single},Oe.createElement(wi,{style:{input:y.input2,label:y.label2},label:"rgb",value:v,onChange:a})),Oe.createElement("div",{style:y.single},Oe.createElement(wi,{style:{input:y.input2,label:y.label2},label:"hsv",value:P,onChange:a})),Oe.createElement("div",{style:y.single},Oe.createElement(wi,{style:{input:y.input2,label:y.label2},label:"hsl",value:S,onChange:a})))))},O3=function(t){var r=t.width,n=t.onChange,s=t.rgb,l=t.hsl,f=t.hsv,a=t.hex,y=t.header,v=t.styles,S=v===void 0?{}:v,P=t.className,D=P===void 0?"":P,E=jn(uu({default:{picker:{width:r,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+s.r+", "+s.g+", "+s.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},S));return Oe.createElement("div",{style:E.picker,className:"google-picker "+D},Oe.createElement("div",{style:E.head},y),Oe.createElement("div",{style:E.swatch}),Oe.createElement("div",{style:E.saturation},Oe.createElement(Ab,{hsl:l,hsv:f,pointer:R3,onChange:n})),Oe.createElement("div",{style:E.body},Oe.createElement("div",{style:E.controls,className:"flexbox-fix"},Oe.createElement("div",{style:E.hue},Oe.createElement(jg,{style:E.Hue,hsl:l,radius:"4px",pointer:N3,onChange:n}))),Oe.createElement(Tde,{rgb:s,hsl:l,hex:a,hsv:f,onChange:n})))};O3.propTypes={width:Rr.oneOfType([Rr.string,Rr.number]),styles:Rr.object,header:Rr.string};O3.defaultProps={width:652,styles:{},header:"Color picker"};cu(O3);var Rk;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Rk||(Rk={}));const Ade=Object.freeze({x:0,y:0});var Wm;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Wm||(Wm={}));var Nk;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Nk||(Nk={}));var Qu;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Qu||(Qu={}));Qu.Space,Qu.Enter,Qu.Esc,Qu.Space,Qu.Enter,Qu.Tab;var Ok;(function(e){e[e.RightClick=2]="RightClick"})(Ok||(Ok={}));var Fk;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Fk||(Fk={}));var Bk;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bk||(Bk={}));Wm.Backward+"",Wm.Forward+"",Wm.Backward+"",Wm.Forward+"";var GS;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(GS||(GS={}));var HS;(function(e){e.Optimized="optimized"})(HS||(HS={}));GS.WhileDragging,HS.Optimized;({...Ade});var zk;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(zk||(zk={}));Qu.Down,Qu.Right,Qu.Up,Qu.Left;var ba={};function Pde(e,t,r){if(r===void 0&&(r=Array.prototype),e&&typeof r.find=="function")return r.find.call(e,t);for(var n=0;n<e.length;n++)if(Lp(e,n)){var s=e[n];if(t.call(void 0,s,n,e))return s}}function Vg(e,t){return t===void 0&&(t=Object),t&&typeof t.getOwnPropertyDescriptors=="function"&&(e=t.create(null,t.getOwnPropertyDescriptors(e))),t&&typeof t.freeze=="function"?t.freeze(e):e}function Lp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ide(e,t){if(e===null||typeof e!="object")throw new TypeError("target is not an object");for(var r in t)Lp(t,r)&&(e[r]=t[r]);return e}var eO=Vg({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});function Mde(e){return Lp(eO,e.toLowerCase())}var tO=Vg({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kde(e){return Lp(tO,e.toLowerCase())}var Oy=Vg({script:!1,style:!1,textarea:!0,title:!0});function Lde(e){var t=e.toLowerCase();return Lp(Oy,t)&&!Oy[t]}function Dde(e){var t=e.toLowerCase();return Lp(Oy,t)&&Oy[t]}function rO(e){return e===Fy.HTML}function Rde(e){return rO(e)||e===Fy.XML_XHTML_APPLICATION}var Fy=Vg({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Nde=Object.keys(Fy).map(function(e){return Fy[e]});function Ode(e){return Nde.indexOf(e)>-1}var Fde=Vg({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ba.assign=Ide;ba.find=Pde;ba.freeze=Vg;ba.HTML_BOOLEAN_ATTRIBUTES=eO;ba.HTML_RAW_TEXT_ELEMENTS=Oy;ba.HTML_VOID_ELEMENTS=tO;ba.hasDefaultHTMLNamespace=Rde;ba.hasOwn=Lp;ba.isHTMLBooleanAttribute=Mde;ba.isHTMLRawTextElement=Lde;ba.isHTMLEscapableRawTextElement=Dde;ba.isHTMLMimeType=rO;ba.isHTMLVoidElement=kde;ba.isValidMimeType=Ode;ba.MIME_TYPE=Fy;ba.NAMESPACE=Fde;var Dp={},Bde=ba;function nO(e,t){e.prototype=Object.create(Error.prototype,{constructor:{value:e},name:{value:e.name,enumerable:!0,writable:t}})}var By=Bde.freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),iO=Object.keys(By);function oO(e){return typeof e=="number"&&e>=1&&e<=25}function zde(e){return typeof e=="string"&&e.substring(e.length-By.Error.length)===By.Error}function _v(e,t){oO(e)?(this.name=iO[e],this.message=t||""):(this.message=e,this.name=zde(t)?t:By.Error),Error.captureStackTrace&&Error.captureStackTrace(this,_v)}nO(_v,!0);Object.defineProperties(_v.prototype,{code:{enumerable:!0,get:function(){var e=iO.indexOf(this.name);return oO(e)?e:0}}});var aO={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},t5=Object.entries(aO);for(var T1=0;T1<t5.length;T1++){var $de=t5[T1][0];_v[$de]=t5[T1][1]}function F3(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,F3)}nO(F3);Dp.DOMException=_v;Dp.DOMExceptionName=By;Dp.ExceptionCode=aO;Dp.ParseError=F3;var xa={},ni={};function sO(e){try{typeof e!="function"&&(e=RegExp);var t=new e("𝌆","u").exec("𝌆");return!!t&&t[0].length===2}catch{}return!1}var bv=sO();function dp(e){if(e.source[0]!=="[")throw new Error(e+" can not be used with chars");return e.source.slice(1,e.source.lastIndexOf("]"))}function _g(e,t){if(e.source[0]!=="[")throw new Error("/"+e.source+"/ can not be used with chars_without");if(!t||typeof t!="string")throw new Error(JSON.stringify(t)+" is not a valid search");if(e.source.indexOf(t)===-1)throw new Error('"'+t+'" is not is /'+e.source+"/");if(t==="-"&&e.source.indexOf(t)!==1)throw new Error('"'+t+'" is not at the first postion of /'+e.source+"/");return new RegExp(e.source.replace(t,""),bv?"u":"")}function pi(e){var t=this;return new RegExp(Array.prototype.slice.call(arguments).map(function(r){var n=typeof r=="string";if(n&&t===void 0&&r==="|")throw new Error("use regg instead of reg to wrap expressions with `|`!");return n?r:r.source}).join(""),bv?"mu":"m")}function On(e){if(arguments.length===0)throw new Error("no parameters provided");return pi.apply(On,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var jde="�",pp=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;bv&&(pp=pi("[",dp(pp),"\\u{10000}-\\u{10FFFF}","]"));var B3=/[\x20\x09\x0D\x0A]/,Ude=dp(B3),eo=pi(B3,"+"),sa=pi(B3,"*"),zy=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;bv&&(zy=pi("[",dp(zy),"\\u{10000}-\\u{10FFFF}","]"));var Vde=dp(zy),z3=pi("[",Vde,dp(/[-.0-9\xB7]/),dp(/[\u0300-\u036F\u203F-\u2040]/),"]"),uc=pi(zy,z3,"*"),$k=pi(z3,"+"),qde=pi("&",uc,";"),Gde=On(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),$y=On(qde,"|",Gde),jy=pi("%",uc,";"),$3=On(pi('"',On(/[^%&"]/,"|",jy,"|",$y),"*",'"'),"|",pi("'",On(/[^%&']/,"|",jy,"|",$y),"*","'")),Hde=On('"',On(/[^<&"]/,"|",$y),"*",'"',"|","'",On(/[^<&']/,"|",$y),"*","'"),Wde=_g(zy,":"),Zde=_g(z3,":"),jk=pi(Wde,Zde,"*"),xv=pi(jk,On(":",jk),"?"),Xde=pi("^",xv,"$"),Yde=pi("(",xv,")"),Uy=On(/"[^"]*"|'[^']*'/),Kde=pi(/^<\?/,"(",uc,")",On(eo,"(",pp,"*?)"),"?",/\?>/),Uk=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,Mb=On('"',Uk,'*"',"|","'",_g(Uk,"'"),"*'"),lO="<!--",uO="-->",Jde=pi(lO,On(_g(pp,"-"),"|",pi("-",_g(pp,"-"))),"*",uO),Vk="#PCDATA",Qde=On(pi(/\(/,sa,Vk,On(sa,/\|/,sa,xv),"*",sa,/\)\*/),"|",pi(/\(/,sa,Vk,sa,/\)/)),epe=/[?*+]?/,tpe=pi(/\([^>]+\)/,epe),rpe=On("EMPTY","|","ANY","|",Qde,"|",tpe),npe="<!ELEMENT",ipe=pi(npe,eo,On(xv,"|",jy),eo,On(rpe,"|",jy),sa,">"),ope=pi("NOTATION",eo,/\(/,sa,uc,On(sa,/\|/,sa,uc),"*",sa,/\)/),ape=pi(/\(/,sa,$k,On(sa,/\|/,sa,$k),"*",sa,/\)/),spe=On(ope,"|",ape),lpe=On(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",spe),upe=On(/#REQUIRED|#IMPLIED/,"|",On(On("#FIXED",eo),"?",Hde)),cpe=On(eo,uc,eo,lpe,eo,upe),hpe="<!ATTLIST",fpe=pi(hpe,eo,uc,cpe,"*",sa,">"),WS="about:legacy-compat",dpe=On('"'+WS+'"',"|","'"+WS+"'"),j3="SYSTEM",kb="PUBLIC",Lb=On(On(j3,eo,Uy),"|",On(kb,eo,Mb,eo,Uy)),ppe=pi("^",On(On(j3,eo,"(?<SystemLiteralOnly>",Uy,")"),"|",On(kb,eo,"(?<PubidLiteral>",Mb,")",eo,"(?<SystemLiteral>",Uy,")"))),mpe=On(eo,"NDATA",eo,uc),gpe=On($3,"|",On(Lb,mpe,"?")),cO="<!ENTITY",ype=pi(cO,eo,uc,eo,gpe,sa,">"),vpe=On($3,"|",Lb),_pe=pi(cO,eo,"%",eo,uc,eo,vpe,sa,">"),bpe=On(ype,"|",_pe),xpe=pi(kb,eo,Mb),wpe=pi("<!NOTATION",eo,uc,eo,On(Lb,"|",xpe),sa,">"),U3=pi(sa,"=",sa),qk=/1[.]\d+/,Spe=pi(eo,"version",U3,On("'",qk,"'","|",'"',qk,'"')),Gk=/[A-Za-z][-A-Za-z0-9._]*/,Cpe=On(eo,"encoding",U3,On('"',Gk,'"',"|","'",Gk,"'")),Epe=On(eo,"standalone",U3,On("'",On("yes","|","no"),"'","|",'"',On("yes","|","no"),'"')),Tpe=pi(/^<\?xml/,Spe,Cpe,"?",Epe,"?",sa,/\?>/),Ape="<!DOCTYPE",Ppe="<![CDATA[",Ipe="]]>",Mpe=/<!\[CDATA\[/,kpe=/\]\]>/,Lpe=pi(pp,"*?",kpe),Dpe=pi(Mpe,Lpe);ni.chars=dp;ni.chars_without=_g;ni.detectUnicodeSupport=sO;ni.reg=pi;ni.regg=On;ni.ABOUT_LEGACY_COMPAT=WS;ni.ABOUT_LEGACY_COMPAT_SystemLiteral=dpe;ni.AttlistDecl=fpe;ni.CDATA_START=Ppe;ni.CDATA_END=Ipe;ni.CDSect=Dpe;ni.Char=pp;ni.Comment=Jde;ni.COMMENT_START=lO;ni.COMMENT_END=uO;ni.DOCTYPE_DECL_START=Ape;ni.elementdecl=ipe;ni.EntityDecl=bpe;ni.EntityValue=$3;ni.ExternalID=Lb;ni.ExternalID_match=ppe;ni.Name=uc;ni.NotationDecl=wpe;ni.Reference=$y;ni.PEReference=jy;ni.PI=Kde;ni.PUBLIC=kb;ni.PubidLiteral=Mb;ni.QName=xv;ni.QName_exact=Xde;ni.QName_group=Yde;ni.S=eo;ni.SChar_s=Ude;ni.S_OPT=sa;ni.SYSTEM=j3;ni.SystemLiteral=Uy;ni.UNICODE_REPLACEMENT_CHARACTER=jde;ni.UNICODE_SUPPORT=bv;ni.XMLDecl=Tpe;var ic=ba,Ah=ic.find,Rpe=ic.hasDefaultHTMLNamespace,bg=ic.hasOwn,Npe=ic.isHTMLMimeType,Ope=ic.isHTMLRawTextElement,Fpe=ic.isHTMLVoidElement,G0=ic.MIME_TYPE,Mh=ic.NAMESPACE,Nl=Symbol(),hO=Dp,In=hO.DOMException,Bpe=hO.DOMExceptionName,yh=ni;function hu(e){if(e!==Nl)throw new TypeError("Illegal constructor")}function zpe(e){return e!==""}function $pe(e){return e?e.split(/[\t\n\f\r ]+/).filter(zpe):[]}function jpe(e,t){return bg(e,t)||(e[t]=!0),e}function Hk(e){if(!e)return[];var t=$pe(e);return Object.keys(t.reduce(jpe,{}))}function Upe(e){return function(t){return e&&e.indexOf(t)!==-1}}function fO(e){if(!yh.QName_exact.test(e))throw new In(In.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+e+'"')}function ZS(e,t){fO(t),e=e||null;var r=null,n=t;if(t.indexOf(":")>=0){var s=t.split(":");r=s[0],n=s[1]}if(r!==null&&e===null)throw new In(In.NAMESPACE_ERR,"prefix is non-null and namespace is null");if(r==="xml"&&e!==ic.NAMESPACE.XML)throw new In(In.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if((r==="xmlns"||t==="xmlns")&&e!==ic.NAMESPACE.XMLNS)throw new In(In.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(e===ic.NAMESPACE.XMLNS&&r!=="xmlns"&&t!=="xmlns")throw new In(In.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[e,r,n]}function qg(e,t){for(var r in e)bg(e,r)&&(t[r]=e[r])}function fu(e,t){var r=e.prototype;if(!(r instanceof t)){let n=function(){};n.prototype=t.prototype,n=new n,qg(r,n),e.prototype=r=n}r.constructor!=e&&(typeof e!="function"&&console.error("unknown Class:"+e),r.constructor=e)}var du={},$c=du.ELEMENT_NODE=1,xg=du.ATTRIBUTE_NODE=2,e2=du.TEXT_NODE=3,dO=du.CDATA_SECTION_NODE=4,pO=du.ENTITY_REFERENCE_NODE=5,Vpe=du.ENTITY_NODE=6,mO=du.PROCESSING_INSTRUCTION_NODE=7,gO=du.COMMENT_NODE=8,Vy=du.DOCUMENT_NODE=9,yO=du.DOCUMENT_TYPE_NODE=10,dd=du.DOCUMENT_FRAGMENT_NODE=11,qpe=du.NOTATION_NODE=12,ya=ic.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function vO(e,t){if(t.length<e.length)return vO(t,e);var r=null;for(var n in e){if(e[n]!==t[n])return r;r=e[n]}return r}function Wk(e){return e.guid||(e.guid=Math.random()),e.guid}function us(){}us.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e){for(var t=[],r=0;r<this.length;r++)Zm(this[r],t,e);return t.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}};us.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function tp(e,t){this._node=e,this._refresh=t,Db(this)}function Db(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var r=e._refresh(e._node);if(MO(e,"length",r.length),!e.$$length||r.length<e.$$length)for(var n=r.length;n in e;n++)bg(e,n)&&delete e[n];qg(r,e),e._inc=t}}tp.prototype.item=function(e){return Db(this),this[e]||null};fu(tp,us);function wg(){}function _O(e,t){for(var r=0;r<e.length;){if(e[r]===t)return r;r++}}function Gpe(e,t,r,n){if(n?t[_O(t,n)]=r:(t[t.length]=r,t.length++),e){r.ownerElement=e;var s=e.ownerDocument;s&&(n&&wO(s,e,n),Hpe(s,e,r))}}function Zk(e,t,r){var n=_O(t,r);if(n>=0){for(var s=t.length-1;n<=s;)t[n]=t[++n];if(t.length=s,e){var l=e.ownerDocument;l&&wO(l,e,r),r.ownerElement=null}}}wg.prototype={length:0,item:us.prototype.item,getNamedItem:function(e){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());for(var t=0;t<this.length;){var r=this[t];if(r.nodeName===e)return r;t++}return null},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!==this._ownerElement)throw new In(In.INUSE_ATTRIBUTE_ERR);var r=this.getNamedItemNS(e.namespaceURI,e.localName);return r===e?e:(Gpe(this._ownerElement,this,e,r),r)},setNamedItemNS:function(e){return this.setNamedItem(e)},removeNamedItem:function(e){var t=this.getNamedItem(e);if(!t)throw new In(In.NOT_FOUND_ERR,e);return Zk(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);if(!r)throw new In(In.NOT_FOUND_ERR,e?e+" : "+t:t);return Zk(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){e||(e=null);for(var r=0;r<this.length;){var n=this[r];if(n.localName===t&&n.namespaceURI===e)return n;r++}return null}};wg.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}};function bO(){}bO.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var n=G0.XML_APPLICATION;e===Mh.HTML?n=G0.XML_XHTML_APPLICATION:e===Mh.SVG&&(n=G0.XML_SVG_IMAGE);var s=new pd(Nl,{contentType:n});if(s.implementation=this,s.childNodes=new us,s.doctype=r||null,r&&s.appendChild(r),t){var l=s.createElementNS(e,t);s.appendChild(l)}return s},createDocumentType:function(e,t,r,n){fO(e);var s=new Ob(Nl);return s.name=e,s.nodeName=e,s.publicId=t||"",s.systemId=r||"",s.internalSubset=n||"",s.childNodes=new us,s},createHTMLDocument:function(e){var t=new pd(Nl,{contentType:G0.HTML});if(t.implementation=this,t.childNodes=new us,e!==!1){t.doctype=this.createDocumentType("html"),t.doctype.ownerDocument=t,t.appendChild(t.doctype);var r=t.createElement("html");t.appendChild(r);var n=t.createElement("head");if(r.appendChild(n),typeof e=="string"){var s=t.createElement("title");s.appendChild(t.createTextNode(e)),n.appendChild(s)}r.appendChild(t.createElement("body"))}return t}};function Ti(e){hu(e)}Ti.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var e=this.getRootNode();return e&&e.nodeType===e.DOCUMENT_NODE},contains:function(e){if(!e)return!1;var t=e;do{if(this===t)return!0;t=e.parentNode}while(t);return!1},getRootNode:function(e){var t=this;do{if(!t.parentNode)return t;t=t.parentNode}while(t)},isEqualNode:function(e){if(!e||this.nodeType!==e.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==e.name||this.publicId!==e.publicId||this.systemId!==e.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==e.namespaceURI||this.prefix!==e.prefix||this.localName!==e.localName||this.attributes.length!==e.attributes.length)return!1;for(var t=0;t<this.attributes.length;t++){var r=this.attributes.item(t);if(!r.isEqualNode(e.getAttributeNodeNS(r.namespaceURI,r.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==e.namespaceURI||this.localName!==e.localName||this.value!==e.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==e.target||this.data!==e.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==e.data)return!1;break}if(this.childNodes.length!==e.childNodes.length)return!1;for(var t=0;t<this.childNodes.length;t++)if(!this.childNodes[t].isEqualNode(e.childNodes[t]))return!1;return!0},isSameNode:function(e){return this===e},insertBefore:function(e,t){return t2(this,e,t)},replaceChild:function(e,t){t2(this,e,t,TO),t&&this.removeChild(t)},removeChild:function(e){return CO(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(e){return XS(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==e2&&e.nodeType==e2?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r){for(var n in r)if(bg(r,n)&&r[n]===e)return n}t=t.nodeType==xg?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&bg(r,e))return r[e];t=t.nodeType==xg?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return t==null},compareDocumentPosition:function(e){if(this===e)return 0;var t=e,r=this,n=null,s=null;if(t instanceof mp&&(n=t,t=n.ownerElement),r instanceof mp&&(s=r,r=s.ownerElement,n&&t&&r===t))for(var l=0,f;f=r.attributes[l];l++){if(f===n)return ya.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+ya.DOCUMENT_POSITION_PRECEDING;if(f===s)return ya.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+ya.DOCUMENT_POSITION_FOLLOWING}if(!t||!r||r.ownerDocument!==t.ownerDocument)return ya.DOCUMENT_POSITION_DISCONNECTED+ya.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(Wk(r.ownerDocument)>Wk(t.ownerDocument)?ya.DOCUMENT_POSITION_FOLLOWING:ya.DOCUMENT_POSITION_PRECEDING);if(s&&t===r)return ya.DOCUMENT_POSITION_CONTAINS+ya.DOCUMENT_POSITION_PRECEDING;if(n&&t===r)return ya.DOCUMENT_POSITION_CONTAINED_BY+ya.DOCUMENT_POSITION_FOLLOWING;for(var a=[],y=t.parentNode;y;){if(!s&&y===r)return ya.DOCUMENT_POSITION_CONTAINED_BY+ya.DOCUMENT_POSITION_FOLLOWING;a.push(y),y=y.parentNode}a.reverse();for(var v=[],S=r.parentNode;S;){if(!n&&S===t)return ya.DOCUMENT_POSITION_CONTAINS+ya.DOCUMENT_POSITION_PRECEDING;v.push(S),S=S.parentNode}v.reverse();var P=vO(a,v);for(var D in P.childNodes){var E=P.childNodes[D];if(E===r)return ya.DOCUMENT_POSITION_FOLLOWING;if(E===t)return ya.DOCUMENT_POSITION_PRECEDING;if(v.indexOf(E)>=0)return ya.DOCUMENT_POSITION_FOLLOWING;if(a.indexOf(E)>=0)return ya.DOCUMENT_POSITION_PRECEDING}return 0}};function xO(e){return e=="<"&&"&lt;"||e==">"&&"&gt;"||e=="&"&&"&amp;"||e=='"'&&"&quot;"||"&#"+e.charCodeAt()+";"}qg(du,Ti);qg(du,Ti.prototype);qg(ya,Ti);qg(ya,Ti.prototype);function uy(e,t){if(t(e))return!0;if(e=e.firstChild)do if(uy(e,t))return!0;while(e=e.nextSibling)}function pd(e,t){hu(e);var r=t||{};this.ownerDocument=this,this.contentType=r.contentType||G0.XML_APPLICATION,this.type=Npe(this.contentType)?"html":"xml"}function Hpe(e,t,r){e&&e._inc++;var n=r.namespaceURI;n===Mh.XMLNS&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function wO(e,t,r,n){e&&e._inc++;var s=r.namespaceURI;s===Mh.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function SO(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r&&!r.nextSibling)n[n.length++]=r;else{for(var s=t.firstChild,l=0;s;)n[l++]=s,s=s.nextSibling;n.length=l,delete n[n.length]}}}function CO(e,t){if(e!==t.parentNode)throw new In(In.NOT_FOUND_ERR,"child's parent is not parent");var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,SO(e.ownerDocument,e),t.parentNode=null,t.previousSibling=null,t.nextSibling=null,t}function Wpe(e){return e&&(e.nodeType===Ti.DOCUMENT_NODE||e.nodeType===Ti.DOCUMENT_FRAGMENT_NODE||e.nodeType===Ti.ELEMENT_NODE)}function Zpe(e){return e&&(e.nodeType===Ti.CDATA_SECTION_NODE||e.nodeType===Ti.COMMENT_NODE||e.nodeType===Ti.DOCUMENT_FRAGMENT_NODE||e.nodeType===Ti.DOCUMENT_TYPE_NODE||e.nodeType===Ti.ELEMENT_NODE||e.nodeType===Ti.PROCESSING_INSTRUCTION_NODE||e.nodeType===Ti.TEXT_NODE)}function md(e){return e&&e.nodeType===Ti.DOCUMENT_TYPE_NODE}function lf(e){return e&&e.nodeType===Ti.ELEMENT_NODE}function EO(e){return e&&e.nodeType===Ti.TEXT_NODE}function Xk(e,t){var r=e.childNodes||[];if(Ah(r,lf)||md(t))return!1;var n=Ah(r,md);return!(t&&n&&r.indexOf(n)>r.indexOf(t))}function Yk(e,t){var r=e.childNodes||[];function n(l){return lf(l)&&l!==t}if(Ah(r,n))return!1;var s=Ah(r,md);return!(t&&s&&r.indexOf(s)>r.indexOf(t))}function Xpe(e,t,r){if(!Wpe(e))throw new In(In.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new In(In.NOT_FOUND_ERR,"child not in parent");if(!Zpe(t)||md(t)&&e.nodeType!==Ti.DOCUMENT_NODE)throw new In(In.HIERARCHY_REQUEST_ERR,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function Ype(e,t,r){var n=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===Ti.DOCUMENT_FRAGMENT_NODE){var l=s.filter(lf);if(l.length>1||Ah(s,EO))throw new In(In.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(l.length===1&&!Xk(e,r))throw new In(In.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(lf(t)&&!Xk(e,r))throw new In(In.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(md(t)){if(Ah(n,md))throw new In(In.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var f=Ah(n,lf);if(r&&n.indexOf(f)<n.indexOf(r))throw new In(In.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!r&&f)throw new In(In.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function TO(e,t,r){var n=e.childNodes||[],s=t.childNodes||[];if(t.nodeType===Ti.DOCUMENT_FRAGMENT_NODE){var l=s.filter(lf);if(l.length>1||Ah(s,EO))throw new In(In.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(l.length===1&&!Yk(e,r))throw new In(In.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(lf(t)&&!Yk(e,r))throw new In(In.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(md(t)){if(Ah(n,function(y){return md(y)&&y!==r}))throw new In(In.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var f=Ah(n,lf);if(r&&n.indexOf(f)<n.indexOf(r))throw new In(In.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function t2(e,t,r,n){Xpe(e,t,r),e.nodeType===Ti.DOCUMENT_NODE&&(n||Ype)(e,t,r);var s=t.parentNode;if(s&&s.removeChild(t),t.nodeType===dd){var l=t.firstChild;if(l==null)return t;var f=t.lastChild}else l=f=t;var a=r?r.previousSibling:e.lastChild;l.previousSibling=a,f.nextSibling=r,a?a.nextSibling=l:e.firstChild=l,r==null?e.lastChild=f:r.previousSibling=f;do l.parentNode=e;while(l!==f&&(l=l.nextSibling));return SO(e.ownerDocument||e,e,t),t.nodeType==dd&&(t.firstChild=t.lastChild=null),t}pd.prototype={implementation:null,nodeName:"#document",nodeType:Vy,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType===dd){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return t2(this,e,t),e.ownerDocument=this,this.documentElement===null&&e.nodeType===$c&&(this.documentElement=e),e},removeChild:function(e){var t=CO(this,e);return t===this.documentElement&&(this.documentElement=null),t},replaceChild:function(e,t){t2(this,e,t,TO),e.ownerDocument=this,t&&this.removeChild(t),lf(e)&&(this.documentElement=e)},importNode:function(e,t){return IO(this,e,t)},getElementById:function(e){var t=null;return uy(this.documentElement,function(r){if(r.nodeType==$c&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new gd(Nl);t.ownerDocument=this,this.type==="html"&&(e=e.toLowerCase()),Rpe(this.contentType)&&(t.namespaceURI=Mh.HTML),t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new us;var r=t.attributes=new wg;return r._ownerElement=t,t},createDocumentFragment:function(){var e=new Sv(Nl);return e.ownerDocument=this,e.childNodes=new us,e},createTextNode:function(e){var t=new wv(Nl);return t.ownerDocument=this,t.childNodes=new us,t.appendData(e),t},createComment:function(e){var t=new Rb(Nl);return t.ownerDocument=this,t.childNodes=new us,t.appendData(e),t},createCDATASection:function(e){var t=new Nb(Nl);return t.ownerDocument=this,t.childNodes=new us,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new Bb(Nl);return r.ownerDocument=this,r.childNodes=new us,r.nodeName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){if(!yh.QName_exact.test(e))throw new In(In.INVALID_CHARACTER_ERR,'invalid character in name "'+e+'"');return this.type==="html"&&(e=e.toLowerCase()),this._createAttribute(e)},_createAttribute:function(e){var t=new mp(Nl);return t.ownerDocument=this,t.childNodes=new us,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){if(!yh.Name.test(e))throw new In(In.INVALID_CHARACTER_ERR,'not a valid xml name "'+e+'"');if(this.type==="html")throw new In("document is an html document",Bpe.NotSupportedError);var t=new Fb(Nl);return t.ownerDocument=this,t.childNodes=new us,t.nodeName=e,t},createElementNS:function(e,t){var r=ZS(e,t),n=new gd(Nl),s=n.attributes=new wg;return n.childNodes=new us,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=r[0],n.prefix=r[1],n.localName=r[2],s._ownerElement=n,n},createAttributeNS:function(e,t){var r=ZS(e,t),n=new mp(Nl);return n.ownerDocument=this,n.childNodes=new us,n.nodeName=t,n.name=t,n.specified=!0,n.namespaceURI=r[0],n.prefix=r[1],n.localName=r[2],n}};fu(pd,Ti);function gd(e){hu(e),this._nsMap=Object.create(null)}gd.prototype={nodeType:$c,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return this.ownerDocument.type==="html"&&this.namespaceURI===Mh.HTML},hasAttributes:function(){return!!(this.attributes&&this.attributes.length)},hasAttribute:function(e){return!!this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t?t.value:null},getAttributeNode:function(e){return this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase()),this.attributes.getNamedItem(e)},setAttribute:function(e,t){this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());var r=this.getAttributeNode(e);r?r.value=r.nodeValue=""+t:(r=this.ownerDocument._createAttribute(e),r.value=r.nodeValue=""+t,this.setAttributeNode(r))},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return this.getAttributeNodeNS(e,t)!=null},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r?r.value:null},setAttributeNS:function(e,t,r){var n=ZS(e,t),s=n[2],l=this.getAttributeNodeNS(e,s);l?l.value=l.nodeValue=""+r:(l=this.ownerDocument.createAttributeNS(e,t),l.value=l.nodeValue=""+r,this.setAttributeNode(l))},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByClassName:function(e){var t=Hk(e);return new tp(this,function(r){var n=[];return t.length>0&&uy(r,function(s){if(s!==r&&s.nodeType===$c){var l=s.getAttribute("class");if(l){var f=e===l;if(!f){var a=Hk(l);f=t.every(Upe(a))}f&&n.push(s)}}}),n})},getElementsByTagName:function(e){var t=(this.nodeType===Vy?this:this.ownerDocument).type==="html",r=e.toLowerCase();return new tp(this,function(n){var s=[];return uy(n,function(l){if(!(l===n||l.nodeType!==$c))if(e==="*")s.push(l);else{var f=l.getQualifiedName(),a=t&&l.namespaceURI===Mh.HTML?r:e;f===a&&s.push(l)}}),s})},getElementsByTagNameNS:function(e,t){return new tp(this,function(r){var n=[];return uy(r,function(s){s!==r&&s.nodeType===$c&&(e==="*"||s.namespaceURI===e)&&(t==="*"||s.localName==t)&&n.push(s)}),n})}};pd.prototype.getElementsByClassName=gd.prototype.getElementsByClassName;pd.prototype.getElementsByTagName=gd.prototype.getElementsByTagName;pd.prototype.getElementsByTagNameNS=gd.prototype.getElementsByTagNameNS;fu(gd,Ti);function mp(e){hu(e),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}mp.prototype.nodeType=xg;fu(mp,Ti);function Gg(e){hu(e)}Gg.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){var n=this.data.substring(0,e),s=this.data.substring(e+t);r=n+r+s,this.nodeValue=this.data=r,this.length=r.length}};fu(Gg,Ti);function wv(e){hu(e)}wv.prototype={nodeName:"#text",nodeType:e2,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};fu(wv,Gg);function Rb(e){hu(e)}Rb.prototype={nodeName:"#comment",nodeType:gO};fu(Rb,Gg);function Nb(e){hu(e)}Nb.prototype={nodeName:"#cdata-section",nodeType:dO};fu(Nb,wv);function Ob(e){hu(e)}Ob.prototype.nodeType=yO;fu(Ob,Ti);function V3(e){hu(e)}V3.prototype.nodeType=qpe;fu(V3,Ti);function q3(e){hu(e)}q3.prototype.nodeType=Vpe;fu(q3,Ti);function Fb(e){hu(e)}Fb.prototype.nodeType=pO;fu(Fb,Ti);function Sv(e){hu(e)}Sv.prototype.nodeName="#document-fragment";Sv.prototype.nodeType=dd;fu(Sv,Ti);function Bb(e){hu(e)}Bb.prototype.nodeType=mO;fu(Bb,Gg);function AO(){}AO.prototype.serializeToString=function(e,t){return PO.call(e,t)};Ti.prototype.toString=PO;function PO(e){var t=[],r=this.nodeType===Vy&&this.documentElement||this,n=r.prefix,s=r.namespaceURI;if(s&&n==null){var n=r.lookupPrefix(s);if(n==null)var l=[{namespace:s,prefix:null}]}return Zm(this,t,e,l),t.join("")}function Kk(e,t,r){var n=e.prefix||"",s=e.namespaceURI;if(!s||n==="xml"&&s===Mh.XML||s===Mh.XMLNS)return!1;for(var l=r.length;l--;){var f=r[l];if(f.prefix===n)return f.namespace!==s}return!0}function r5(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,xO),'"')}function Zm(e,t,r,n){n||(n=[]);var s=e.nodeType===Vy?e:e.ownerDocument,l=s.type==="html";if(r)if(e=r(e),e){if(typeof e=="string"){t.push(e);return}}else return;switch(e.nodeType){case $c:var f=e.attributes,a=f.length,Q=e.firstChild,y=e.tagName,v=y;if(!l&&!e.prefix&&e.namespaceURI){for(var S,P=0;P<f.length;P++)if(f.item(P).name==="xmlns"){S=f.item(P).value;break}if(!S)for(var D=n.length-1;D>=0;D--){var E=n[D];if(E.prefix===""&&E.namespace===e.namespaceURI){S=E.namespace;break}}if(S!==e.namespaceURI)for(var D=n.length-1;D>=0;D--){var E=n[D];if(E.namespace===e.namespaceURI){E.prefix&&(v=E.prefix+":"+y);break}}}t.push("<",v);for(var F=0;F<a;F++){var z=f.item(F);z.prefix=="xmlns"?n.push({prefix:z.localName,namespace:z.value}):z.nodeName=="xmlns"&&n.push({prefix:"",namespace:z.value})}for(var F=0;F<a;F++){var z=f.item(F);if(Kk(z,l,n)){var W=z.prefix||"",$=z.namespaceURI;r5(t,W?"xmlns:"+W:"xmlns",$),n.push({prefix:W,namespace:$})}Zm(z,t,r,n)}if(y===v&&Kk(e,l,n)){var W=e.prefix||"",$=e.namespaceURI;r5(t,W?"xmlns:"+W:"xmlns",$),n.push({prefix:W,namespace:$})}var Y=!Q;if(Y&&(l||e.namespaceURI===Mh.HTML)&&(Y=Fpe(y)),Y)t.push("/>");else{if(t.push(">"),l&&Ope(y))for(;Q;)Q.data?t.push(Q.data):Zm(Q,t,r,n.slice()),Q=Q.nextSibling;else for(;Q;)Zm(Q,t,r,n.slice()),Q=Q.nextSibling;t.push("</",v,">")}return;case Vy:case dd:for(var Q=e.firstChild;Q;)Zm(Q,t,r,n.slice()),Q=Q.nextSibling;return;case xg:return r5(t,e.name,e.value);case e2:return t.push(e.data.replace(/[<&>]/g,xO));case dO:return t.push(yh.CDATA_START,e.data,yh.CDATA_END);case gO:return t.push(yh.COMMENT_START,e.data,yh.COMMENT_END);case yO:var K=e.publicId,xe=e.systemId;t.push(yh.DOCTYPE_DECL_START," ",e.name),K?(t.push(" ",yh.PUBLIC," ",K),xe&&xe!=="."&&t.push(" ",xe)):xe&&xe!=="."&&t.push(" ",yh.SYSTEM," ",xe),e.internalSubset&&t.push(" [",e.internalSubset,"]"),t.push(">");return;case mO:return t.push("<?",e.target," ",e.data,"?>");case pO:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function IO(e,t,r){var n;switch(t.nodeType){case $c:n=t.cloneNode(!1),n.ownerDocument=e;case dd:break;case xg:r=!0;break}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var s=t.firstChild;s;)n.appendChild(IO(e,s,r)),s=s.nextSibling;return n}function XS(e,t,r){var n=new t.constructor(Nl);for(var s in t)if(bg(t,s)){var l=t[s];typeof l!="object"&&l!=n[s]&&(n[s]=l)}switch(t.childNodes&&(n.childNodes=new us),n.ownerDocument=e,n.nodeType){case $c:var f=t.attributes,a=n.attributes=new wg,y=f.length;a._ownerElement=n;for(var v=0;v<y;v++)n.setAttributeNode(XS(e,f.item(v),!0));break;case xg:r=!0}if(r)for(var S=t.firstChild;S;)n.appendChild(XS(e,S,r)),S=S.nextSibling;return n}function MO(e,t,r){e[t]=r}try{if(Object.defineProperty){let e=function(t){switch(t.nodeType){case $c:case dd:var r=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}};Object.defineProperty(tp.prototype,"length",{get:function(){return Db(this),this.$$length}}),Object.defineProperty(Ti.prototype,"textContent",{get:function(){return e(this)},set:function(t){switch(this.nodeType){case $c:case dd:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),MO=function(t,r,n){t["$$"+r]=n}}}catch{}xa._updateLiveList=Db;xa.Attr=mp;xa.CDATASection=Nb;xa.CharacterData=Gg;xa.Comment=Rb;xa.Document=pd;xa.DocumentFragment=Sv;xa.DocumentType=Ob;xa.DOMImplementation=bO;xa.Element=gd;xa.Entity=q3;xa.EntityReference=Fb;xa.LiveNodeList=tp;xa.NamedNodeMap=wg;xa.Node=Ti;xa.NodeList=us;xa.Notation=V3;xa.Text=wv;xa.ProcessingInstruction=Bb;xa.XMLSerializer=AO;var kO={};(function(e){var t=ba.freeze;e.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=t({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),e.entityMap=e.HTML_ENTITIES})(kO);var zb={},Hg=ba,Yn=ni,LO=Dp,Kpe=Hg.isHTMLEscapableRawTextElement,Jpe=Hg.isHTMLMimeType,Qpe=Hg.isHTMLRawTextElement,qy=Hg.hasOwn,Jk=Hg.NAMESPACE,Qk=LO.ParseError,eme=LO.DOMException,L0=0,$f=1,hm=2,D0=3,fm=4,dm=5,R0=6,A1=7;function DO(){}DO.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),RO(t,t=Object.create(null)),tme(e,t,r,n,this.errorHandler),n.endDocument()}};var G3=/&#?\w+;?/g;function tme(e,t,r,n,s){var l=Jpe(n.mimeType);e.indexOf(Yn.UNICODE_REPLACEMENT_CHARACTER)>=0&&s.warning("Unicode replacement character detected, source encoding issues?");function f(tt){if(tt>65535){tt-=65536;var Ot=55296+(tt>>10),St=56320+(tt&1023);return String.fromCharCode(Ot,St)}else return String.fromCharCode(tt)}function a(tt){var Ot=tt[tt.length-1]===";"?tt:tt+";";if(!l&&Ot!==tt)return s.error("EntityRef: expecting ;"),tt;var St=Yn.Reference.exec(Ot);if(!St||St[0].length!==Ot.length)return s.error("entity not matching Reference production: "+tt),tt;var ne=Ot.slice(1,-1);return qy(r,ne)?r[ne]:ne.charAt(0)==="#"?f(parseInt(ne.substring(1).replace("x","0x"))):(s.error("entity not found:"+tt),tt)}function y(tt){if(tt>W){var Ot=e.substring(W,tt).replace(G3,a);D&&E(W),n.characters(Ot,0,tt-W),W=tt}}var v=0,S=0,P=/\r\n?|\n|$/g,D=n.locator;function E(tt,Ot){for(;tt>=S&&(Ot=P.exec(e));)v=S,S=Ot.index+Ot[0].length,D.lineNumber++;D.columnNumber=tt-v+1}for(var F=[{currentNSMap:t}],z=[],W=0;;){try{var $=e.indexOf("<",W);if($<0){if(!l&&z.length>0)return s.fatalError("unclosed xml tag(s): "+z.join(", "));if(!e.substring(W).match(/^\s*$/)){var Y=n.doc,Q=Y.createTextNode(e.substring(W));if(Y.documentElement)return s.error("Extra content at the end of the document");Y.appendChild(Q),n.currentElement=Q}return}if($>W){var K=e.substring(W,$);!l&&z.length===0&&(K=K.replace(new RegExp(Yn.S_OPT.source,"g"),""),K&&s.error("Unexpected content outside root element: '"+K+"'")),y($)}switch(e.charAt($+1)){case"/":var we=e.indexOf(">",$+2),xe=e.substring($+2,we>0?we:void 0);if(!xe)return s.fatalError("end tag name missing");var de=we>0&&Yn.reg("^",Yn.QName_group,Yn.S_OPT,"$").exec(xe);if(!de)return s.fatalError('end tag name contains invalid characters: "'+xe+'"');if(!n.currentElement&&!n.doc.documentElement)return;var be=z[z.length-1]||n.currentElement.tagName||n.doc.documentElement.tagName||"";if(be!==de[1]){var me=de[1].toLowerCase();if(!l||be.toLowerCase()!==me)return s.fatalError('Opening and ending tag mismatch: "'+be+'" != "'+xe+'"')}var ve=F.pop();z.pop();var Re=ve.localNSMap;if(n.endElement(ve.uri,ve.localName,be),Re)for(var le in Re)qy(Re,le)&&n.endPrefixMapping(le);we++;break;case"?":D&&E($),we=ome(e,$,n,s);break;case"!":D&&E($),we=OO(e,$,n,s,l);break;default:D&&E($);var G=new FO,Ae=F[F.length-1].currentNSMap,we=rme(e,$,G,Ae,a,s,l),lt=G.length;if(G.closed||(l&&Hg.isHTMLVoidElement(G.tagName)?G.closed=!0:z.push(G.tagName)),D&&lt){for(var pt=eL(D,{}),At=0;At<lt;At++){var Ze=G[At];E(Ze.offset),Ze.locator=eL(D,{})}n.locator=pt,tL(G,n,Ae)&&F.push(G),n.locator=D}else tL(G,n,Ae)&&F.push(G);l&&!G.closed?we=nme(e,we,G.tagName,a,n):we++}}catch(tt){if(tt instanceof Qk)throw tt;if(tt instanceof eme)throw new Qk(tt.name+": "+tt.message,n.locator,tt);s.error("element parse error: "+tt),we=-1}we>W?W=we:y(Math.max($,W)+1)}}function eL(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function rme(e,t,r,n,s,l,f){function a(E,F,z){if(qy(r.attributeNames,E))return l.fatalError("Attribute "+E+" redefined");if(!f&&F.indexOf("<")>=0)return l.fatalError("Unescaped '<' not allowed in attributes values");r.addValue(E,F.replace(/[\t\n\r]/g," ").replace(G3,s),z)}for(var y,v,S=++t,P=L0;;){var D=e.charAt(S);switch(D){case"=":if(P===$f)y=e.slice(t,S),P=D0;else if(P===hm)P=D0;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(P===D0||P===$f)if(P===$f&&(l.warning('attribute value must after "="'),y=e.slice(t,S)),t=S+1,S=e.indexOf(D,t),S>0)v=e.slice(t,S),a(y,v,t-1),P=dm;else throw new Error("attribute value no end '"+D+"' match");else if(P==fm)v=e.slice(t,S),a(y,v,t),l.warning('attribute "'+y+'" missed start quot('+D+")!!"),t=S+1,P=dm;else throw new Error('attribute value must after "="');break;case"/":switch(P){case L0:r.setTagName(e.slice(t,S));case dm:case R0:case A1:P=A1,r.closed=!0;case fm:case $f:break;case hm:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return l.error("unexpected end of input"),P==L0&&r.setTagName(e.slice(t,S)),S;case">":switch(P){case L0:r.setTagName(e.slice(t,S));case dm:case R0:case A1:break;case fm:case $f:v=e.slice(t,S),v.slice(-1)==="/"&&(r.closed=!0,v=v.slice(0,-1));case hm:P===hm&&(v=y),P==fm?(l.warning('attribute "'+v+'" missed quot(")!'),a(y,v,t)):(f||l.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),a(v,v,t));break;case D0:if(!f)return l.fatalError(`AttValue: ' or " expected`)}return S;case"":D=" ";default:if(D<=" ")switch(P){case L0:r.setTagName(e.slice(t,S)),P=R0;break;case $f:y=e.slice(t,S),P=hm;break;case fm:var v=e.slice(t,S);l.warning('attribute "'+v+'" missed quot(")!!'),a(y,v,t);case dm:P=R0;break}else switch(P){case hm:f||l.warning('attribute "'+y+'" missed value!! "'+y+'" instead2!!'),a(y,y,t),t=S,P=$f;break;case dm:l.warning('attribute space is required"'+y+'"!!');case R0:P=$f,t=S;break;case D0:P=fm,t=S;break;case A1:throw new Error("elements closed character '/' and '>' must be connected to")}}S++}}function tL(e,t,r){for(var n=e.tagName,s=null,P=e.length;P--;){var l=e[P],f=l.qName,a=l.value,D=f.indexOf(":");if(D>0)var y=l.prefix=f.slice(0,D),v=f.slice(D+1),S=y==="xmlns"&&v;else v=f,y=null,S=f==="xmlns"&&"";l.localName=v,S!==!1&&(s==null&&(s=Object.create(null),RO(r,r=Object.create(null))),r[S]=s[S]=a,l.uri=Jk.XMLNS,t.startPrefixMapping(S,a))}for(var P=e.length;P--;)l=e[P],l.prefix&&(l.prefix==="xml"&&(l.uri=Jk.XML),l.prefix!=="xmlns"&&(l.uri=r[l.prefix]));var D=n.indexOf(":");D>0?(y=e.prefix=n.slice(0,D),v=e.localName=n.slice(D+1)):(y=null,v=e.localName=n);var E=e.uri=r[y||""];if(t.startElement(E,v,n,e),e.closed){if(t.endElement(E,v,n),s)for(y in s)qy(s,y)&&t.endPrefixMapping(y)}else return e.currentNSMap=r,e.localNSMap=s,!0}function nme(e,t,r,n,s){var l=Kpe(r);if(l||Qpe(r)){var f=e.indexOf("</"+r+">",t),a=e.substring(t+1,f);return l&&(a=a.replace(G3,n)),s.characters(a,0,a.length),f}return t+1}function RO(e,t){for(var r in e)qy(e,r)&&(t[r]=e[r])}function NO(e,t){var r=t;function n(S){return S=S||0,e.charAt(r+S)}function s(S){S=S||1,r+=S}function l(){for(var S=0;r<e.length;){var P=n();if(P!==" "&&P!==`
`&&P!=="	"&&P!=="\r")return S;S++,s()}return-1}function f(){return e.substring(r)}function a(S){return e.substring(r,r+S.length)===S}function y(S){return e.substring(r,r+S.length).toUpperCase()===S.toUpperCase()}function v(S){var P=Yn.reg("^",S),D=P.exec(f());return D?(s(D[0].length),D[0]):null}return{char:n,getIndex:function(){return r},getMatch:v,getSource:function(){return e},skip:s,skipBlanks:l,substringFromIndex:f,substringStartsWith:a,substringStartsWithCaseInsensitive:y}}function ime(e,t){function r(a,y){var v=Yn.PI.exec(a.substringFromIndex());return v?v[1].toLowerCase()==="xml"?y.fatalError("xml declaration is only allowed at the start of the document, but found at position "+a.getIndex()):(a.skip(v[0].length),v[0]):y.fatalError("processing instruction is not well-formed at position "+a.getIndex())}var n=e.getSource();if(e.char()==="["){e.skip(1);for(var s=e.getIndex();e.getIndex()<n.length;){if(e.skipBlanks(),e.char()==="]"){var l=n.substring(s,e.getIndex());return e.skip(1),l}var f=null;if(e.char()==="<"&&e.char(1)==="!")switch(e.char(2)){case"E":e.char(3)==="L"?f=e.getMatch(Yn.elementdecl):e.char(3)==="N"&&(f=e.getMatch(Yn.EntityDecl));break;case"A":f=e.getMatch(Yn.AttlistDecl);break;case"N":f=e.getMatch(Yn.NotationDecl);break;case"-":f=e.getMatch(Yn.Comment);break}else if(e.char()==="<"&&e.char(1)==="?")f=r(e,t);else if(e.char()==="%")f=e.getMatch(Yn.PEReference);else return t.fatalError("Error detected in Markup declaration");if(!f)return t.fatalError("Error in internal subset at position "+e.getIndex())}return t.fatalError("doctype internal subset is not well-formed, missing ]")}}function OO(e,t,r,n,s){var l=NO(e,t);switch(s?l.char(2).toUpperCase():l.char(2)){case"-":var f=l.getMatch(Yn.Comment);return f?(r.comment(f,Yn.COMMENT_START.length,f.length-Yn.COMMENT_START.length-Yn.COMMENT_END.length),l.getIndex()):n.fatalError("comment is not well-formed at position "+l.getIndex());case"[":var a=l.getMatch(Yn.CDSect);return a?!s&&!r.currentElement?n.fatalError("CDATA outside of element"):(r.startCDATA(),r.characters(a,Yn.CDATA_START.length,a.length-Yn.CDATA_START.length-Yn.CDATA_END.length),r.endCDATA(),l.getIndex()):n.fatalError("Invalid CDATA starting at position "+t);case"D":{if(r.doc&&r.doc.documentElement)return n.fatalError("Doctype not allowed inside or after documentElement at position "+l.getIndex());if(s?!l.substringStartsWithCaseInsensitive(Yn.DOCTYPE_DECL_START):!l.substringStartsWith(Yn.DOCTYPE_DECL_START))return n.fatalError("Expected "+Yn.DOCTYPE_DECL_START+" at position "+l.getIndex());if(l.skip(Yn.DOCTYPE_DECL_START.length),l.skipBlanks()<1)return n.fatalError("Expected whitespace after "+Yn.DOCTYPE_DECL_START+" at position "+l.getIndex());var y={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(y.name=l.getMatch(Yn.Name),!y.name)return n.fatalError("doctype name missing or contains unexpected characters at position "+l.getIndex());if(s&&y.name.toLowerCase()!=="html"&&n.warning("Unexpected DOCTYPE in HTML document at position "+l.getIndex()),l.skipBlanks(),l.substringStartsWith(Yn.PUBLIC)||l.substringStartsWith(Yn.SYSTEM)){var v=Yn.ExternalID_match.exec(l.substringFromIndex());if(!v)return n.fatalError("doctype external id is not well-formed at position "+l.getIndex());v.groups.SystemLiteralOnly!==void 0?y.systemId=v.groups.SystemLiteralOnly:(y.systemId=v.groups.SystemLiteral,y.publicId=v.groups.PubidLiteral),l.skip(v[0].length)}else if(s&&l.substringStartsWithCaseInsensitive(Yn.SYSTEM)){if(l.skip(Yn.SYSTEM.length),l.skipBlanks()<1)return n.fatalError("Expected whitespace after "+Yn.SYSTEM+" at position "+l.getIndex());if(y.systemId=l.getMatch(Yn.ABOUT_LEGACY_COMPAT_SystemLiteral),!y.systemId)return n.fatalError("Expected "+Yn.ABOUT_LEGACY_COMPAT+" in single or double quotes after "+Yn.SYSTEM+" at position "+l.getIndex())}return s&&y.systemId&&!Yn.ABOUT_LEGACY_COMPAT_SystemLiteral.test(y.systemId)&&n.warning("Unexpected doctype.systemId in HTML document at position "+l.getIndex()),s||(l.skipBlanks(),y.internalSubset=ime(l,n)),l.skipBlanks(),l.char()!==">"?n.fatalError("doctype not terminated with > at position "+l.getIndex()):(l.skip(1),r.startDTD(y.name,y.publicId,y.systemId,y.internalSubset),r.endDTD(),l.getIndex())}default:return n.fatalError('Not well-formed XML starting with "<!" at position '+t)}}function ome(e,t,r,n){var s=e.substring(t).match(Yn.PI);if(!s)return n.fatalError("Invalid processing instruction starting at position "+t);if(s[1].toLowerCase()==="xml"){if(t>0)return n.fatalError("processing instruction at position "+t+" is an xml declaration which is only at the start of the document");if(!Yn.XMLDecl.test(e.substring(t)))return n.fatalError("xml declaration is not well-formed")}return r.processingInstruction(s[1],s[2]),t+s[0].length}function FO(){this.attributeNames=Object.create(null)}FO.prototype={setTagName:function(e){if(!Yn.QName_exact.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!Yn.QName_exact.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};zb.XMLReader=DO;zb.parseUtils=NO;zb.parseDoctypeCommentOrCData=OO;var Rp=ba,ame=xa,sme=Dp,rL=kO,lme=zb,ume=ame.DOMImplementation,cme=Rp.hasDefaultHTMLNamespace,hme=Rp.isHTMLMimeType,fme=Rp.isValidMimeType,BO=Rp.MIME_TYPE,n5=Rp.NAMESPACE,nL=sme.ParseError,dme=lme.XMLReader;function pme(e){return e.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028\u2029]/g,`
`)}function mme(e){if(e=e||{},e.locator===void 0&&(e.locator=!0),this.assign=e.assign||Rp.assign,this.domHandler=e.domHandler||H3,this.onError=e.onError||e.errorHandler,e.errorHandler&&typeof e.errorHandler!="function")throw new TypeError("errorHandler object is no longer supported, switch to onError!");e.errorHandler&&e.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=e.normalizeLineEndings||pme,this.locator=!!e.locator,this.xmlns=this.assign(Object.create(null),e.xmlns)}mme.prototype.parseFromString=function(e,t){if(!fme(t))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+t+'" is not valid.');var r=this.assign(Object.create(null),this.xmlns),n=rL.XML_ENTITIES,s=r[""]||null;cme(t)?(n=rL.HTML_ENTITIES,s=n5.HTML):t===BO.XML_SVG_IMAGE&&(s=n5.SVG),r[""]=s,r.xml=r.xml||n5.XML;var l=new this.domHandler({mimeType:t,defaultNamespace:s,onError:this.onError}),f=this.locator?{}:void 0;this.locator&&l.setDocumentLocator(f);var a=new dme;a.errorHandler=l,a.domBuilder=l;var y=!Rp.isHTMLMimeType(t);return y&&typeof e!="string"&&a.errorHandler.fatalError("source is not a string"),a.parse(this.normalizeLineEndings(String(e)),r,n),l.doc.documentElement||a.errorHandler.fatalError("missing root element"),l.doc};function H3(e){var t=e||{};this.mimeType=t.mimeType||BO.XML_APPLICATION,this.defaultNamespace=t.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=t.onError}function pm(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}H3.prototype={startDocument:function(){var e=new ume;this.doc=hme(this.mimeType)?e.createHTMLDocument(!1):e.createDocument(this.defaultNamespace,"")},startElement:function(e,t,r,n){var s=this.doc,l=s.createElementNS(e,r||t),f=n.length;P1(this,l),this.currentElement=l,this.locator&&pm(this.locator,l);for(var a=0;a<f;a++){var e=n.getURI(a),y=n.getValue(a),r=n.getQName(a),v=s.createAttributeNS(e,r);this.locator&&pm(n.getLocator(a),v),v.value=v.nodeValue=y,l.setAttributeNode(v)}},endElement:function(e,t,r){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&pm(this.locator,r),P1(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=iL.apply(this,arguments),e){if(this.cdata)var n=this.doc.createCDATASection(e);else var n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&pm(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){e&&(e.lineNumber=0),this.locator=e},comment:function(e,t,r){e=iL.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&pm(this.locator,n),P1(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r,n){var s=this.doc.implementation;if(s&&s.createDocumentType){var l=s.createDocumentType(e,t,r,n);this.locator&&pm(this.locator,l),P1(this,l),this.doc.doctype=l}},reportError:function(e,t){if(typeof this.onError=="function")try{this.onError(e,t,this)}catch(r){throw new nL("Reporting "+e+' "'+t+'" caused '+r,this.locator)}else console.error("[xmldom "+e+"]	"+t,gme(this.locator))},warning:function(e){this.reportError("warning",e)},error:function(e){this.reportError("error",e)},fatalError:function(e){throw this.reportError("fatalError",e),new nL(e,this.locator)}};function gme(e){if(e)return`
@#[line:`+e.lineNumber+",col:"+e.columnNumber+"]"}function iL(e,t,r){return typeof e=="string"?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){H3.prototype[e]=function(){return null}});function P1(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}var Wg=ba;Wg.assign;Wg.hasDefaultHTMLNamespace;Wg.isHTMLMimeType;Wg.isValidMimeType;Wg.MIME_TYPE;Wg.NAMESPACE;var yme=xa,vme=yme.XMLSerializer;/**
 * wms-capabilities @0.6.0
 * @description WMS service Capabilities > JSON, based on openlayers 
 * @license BSD-2-Clause
 * @preserve
 */var di=e=>e!==void 0,zO=(e,t,r)=>t in e?e[t]:e[t]=r;const r2={ELEMENT:1,TEXT:3,CDATA_SECTION:4};function W3(e,t){return $O(e,t,[]).join("")}function $O(e,t,r){if(e.nodeType===r2.CDATA_SECTION||e.nodeType===r2.TEXT)r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)$O(n,t,r)}return r}function _me(e,t,r,n){for(var s=bme(t);s;s=xme(s)){var l=s.namespaceURI||null,f=e[l];if(di(f)){var a=f[s.localName];di(a)&&a.call(n,s,r)}}}function bme(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==r2.ELEMENT;)t=t.nextSibling;return t}function xme(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==r2.ELEMENT;)t=t.nextSibling;return t}function Us(e,t,r){return wme(e,t,r)}function wme(e,t,r){var n=di(r)?r:{},s,l;for(s=0,l=e.length;s<l;++s)n[e[s]]=t;return n}function jO(e,t){return function(r,n){var s=e.call(di(t)?t:this,r,n);if(di(s)){var l=n[n.length-1];l.push(s)}}}function Vs(e,t,r,n,s){return n.push(e),_me(t,r,n,s),n.pop()}function mn(e,t,r){return function(n,s){let l=e.call(di(r)?r:this,n,s);if(di(l)){var f=s[s.length-1],a=di(t)?t:n.localName;f[a]=l}}}function eu(e,t,r){return function(n,s){var l=e.call(di(r)?r:this,n,s);if(di(l)){var f=s[s.length-1],a=di(t)?t:n.localName,y=zO(f,a,[]);y.push(l)}}}const Sme=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function Cme(e){return e.replace(Sme,"")}function rp(e){const t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return di(t[1])||!1}function Xm(e){return of(W3(e,!1))}function of(e){const t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function i5(e){return n2(W3(e,!1))}function n2(e){const t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Fi(e){return Cme(W3(e,!1))}const Eme="http://www.w3.org/1999/xlink";function Z3(e){return e.getAttributeNS(Eme,"href")}function Tme(e,t){return Vs({},Jme,e,t)}function UO(e){return[of(e.getAttribute("minx")),of(e.getAttribute("miny")),of(e.getAttribute("maxx")),of(e.getAttribute("maxy"))]}function Ame(e,t){const r=UO(e),n=[of(e.getAttribute("resx")),of(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function Pme(e,t){const r=UO(e);if(!(!di(r[0])||!di(r[1])||!di(r[2])||!di(r[3])))return r}function Ime(e,t){const r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function Mme(e,t){const r=Vs({},Qme,e,t);if(!di(r))return;const n=r.westBoundLongitude,s=r.southBoundLatitude,l=r.eastBoundLongitude,f=r.northBoundLatitude;if(!(!di(n)||!di(s)||!di(l)||!di(f)))return[n,s,l,f]}function kme(e,t){return Vs({},Hme,e,t)}function Lme(e,t){return Vs({},Wme,e,t)}function Dme(e,t){return Vs({},Zme,e,t)}function Rme(e,t){return Vs({},Xme,e,t)}function Nme(e,t){return Vs({},Yme,e,t)}function Ome(e,t){return Vs([],Kme,e,t)}function Fme(e,t){const r=rp(e.getAttribute("queryable"));return Vs({queryable:di(r)?r:!1},GO,e,t)}function Bme(e,t){var r=t[t.length-1];const n=Vs({},GO,e,t);if(!di(n))return;let s=rp(e.getAttribute("queryable"));di(s)||(s=r.queryable),n.queryable=di(s)?s:!1;let l=n2(e.getAttribute("cascaded"));di(l)||(l=r.cascaded),n.cascaded=l;let f=rp(e.getAttribute("opaque"));di(f)||(f=r.opaque),n.opaque=di(f)?f:!1;let a=rp(e.getAttribute("noSubsets"));di(a)||(a=r.noSubsets),n.noSubsets=di(a)?a:!1;let y=of(e.getAttribute("fixedWidth"));di(y)||(y=r.fixedWidth),n.fixedWidth=y;let v=of(e.getAttribute("fixedHeight"));di(v)||(v=r.fixedHeight),n.fixedHeight=v;const S=["Style","CRS","AuthorityURL"];for(let D=0,E=S.length;D<E;D++){const F=S[D],z=r[F];if(di(z)){let W=zO(n,F,[]);W=W.concat(z),n[F]=W}}const P=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let D=0,E=P.length;D<E;D++){const F=P[D],z=n[F];if(!di(z)){const W=r[F];n[F]=W}}return n}function zme(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:rp(e.getAttribute("multipleValues")),nearestValue:rp(e.getAttribute("nearestValue")),current:rp(e.getAttribute("current")),values:Fi(e)}}function mf(e,t){return Vs({},oge,e,t)}function $me(e,t){return Vs({},ege,e,t)}function jme(e,t){return Vs({},rge,e,t)}function Ume(e,t){return Vs({},nge,e,t)}function o5(e,t){return Vs({},tge,e,t)}function VO(e,t){var r=mf(e,t);if(di(r)){const n=[n2(e.getAttribute("width")),n2(e.getAttribute("height"))];return r.size=n,r}}function Vme(e,t){var r=mf(e,t);if(di(r))return r.name=e.getAttribute("name"),r}function qme(e,t){var r=mf(e,t);if(di(r))return r.type=e.getAttribute("type"),r}function Gme(e,t){return Vs({},ige,e,t)}function qO(e,t){return Vs([],age,e,t)}const qs=[null,"http://www.opengis.net/wms"];Us(qs,{Service:mn(Lme),Capability:mn(kme)});const Hme=Us(qs,{Request:mn($me),Exception:mn(Ome),Layer:mn(Fme)}),Wme=Us(qs,{Name:mn(Fi),Title:mn(Fi),Abstract:mn(Fi),KeywordList:mn(qO),OnlineResource:mn(Z3),ContactInformation:mn(Dme),Fees:mn(Fi),AccessConstraints:mn(Fi),LayerLimit:mn(i5),MaxWidth:mn(i5),MaxHeight:mn(i5)}),Zme=Us(qs,{ContactPersonPrimary:mn(Rme),ContactPosition:mn(Fi),ContactAddress:mn(Nme),ContactVoiceTelephone:mn(Fi),ContactFacsimileTelephone:mn(Fi),ContactElectronicMailAddress:mn(Fi)}),Xme=Us(qs,{ContactPerson:mn(Fi),ContactOrganization:mn(Fi)}),Yme=Us(qs,{AddressType:mn(Fi),Address:mn(Fi),City:mn(Fi),StateOrProvince:mn(Fi),PostCode:mn(Fi),Country:mn(Fi)}),Kme=Us(qs,{Format:jO(Fi)}),GO=Us(qs,{Name:mn(Fi),Title:mn(Fi),Abstract:mn(Fi),KeywordList:mn(qO),CRS:eu(Fi),SRS:eu(Fi),EX_GeographicBoundingBox:mn(Mme),LatLonBoundingBox:mn(Pme),BoundingBox:eu(Ame),Dimension:eu(zme),Attribution:mn(Tme),AuthorityURL:eu(Vme),Identifier:eu(Fi),MetadataURL:eu(qme),DataURL:eu(mf),FeatureListURL:eu(mf),Style:eu(Gme),MinScaleDenominator:mn(Xm),MaxScaleDenominator:mn(Xm),ScaleHint:mn(Ime),Layer:eu(Bme)}),Jme=Us(qs,{Title:mn(Fi),OnlineResource:mn(Z3),LogoURL:mn(VO)}),Qme=Us(qs,{westBoundLongitude:mn(Xm),eastBoundLongitude:mn(Xm),southBoundLatitude:mn(Xm),northBoundLatitude:mn(Xm)}),ege=Us(qs,{GetCapabilities:mn(o5),GetMap:mn(o5),GetFeatureInfo:mn(o5)}),tge=Us(qs,{Format:eu(Fi),DCPType:eu(jme)}),rge=Us(qs,{HTTP:mn(Ume)}),nge=Us(qs,{Get:mn(mf),Post:mn(mf)}),ige=Us(qs,{Name:mn(Fi),Title:mn(Fi),Abstract:mn(Fi),LegendURL:eu(VO),StyleSheetURL:mn(mf),StyleURL:mn(mf)}),oge=Us(qs,{Format:mn(Fi),OnlineResource:mn(Z3)}),age=Us(qs,{Keyword:jO(Fi)}),sge=kh([Ar.jsx("circle",{cx:"7",cy:"14",r:"3"},"0"),Ar.jsx("circle",{cx:"11",cy:"6",r:"3"},"1"),Ar.jsx("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")]);function HO(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function lge(e,t){var r=HO(e);return function(n,s){return t(r(n),s,e)}}function uge(e){var t=Object.create(null),r=[];return e.forEach(function(n){for(var s in n)s in t||r.push(t[s]=s)}),r}function X3(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function n(v,S){var P,D,E=s(v,function(F,z){if(P)return P(F,z-1);D=F,P=S?lge(F,S):HO(F)});return E.columns=D,E}function s(v,S){var P={},D={},E=[],F=v.length,z=0,W=0,$,Y;function Q(){if(z>=F)return D;if(Y)return Y=!1,P;var xe=z,de;if(v.charCodeAt(xe)===34){for(var be=xe;be++<F;)if(v.charCodeAt(be)===34){if(v.charCodeAt(be+1)!==34)break;++be}return z=be+2,de=v.charCodeAt(be+1),de===13?(Y=!0,v.charCodeAt(be+2)===10&&++z):de===10&&(Y=!0),v.slice(xe+1,be).replace(/""/g,'"')}for(;z<F;){var me=1;if(de=v.charCodeAt(z++),de===10)Y=!0;else if(de===13)Y=!0,v.charCodeAt(z)===10&&(++z,++me);else if(de!==r)continue;return v.slice(xe,z-me)}return v.slice(xe)}for(;($=Q())!==D;){for(var K=[];$!==P&&$!==D;)K.push($),$=Q();S&&(K=S(K,W++))==null||E.push(K)}return E}function l(v,S){return S==null&&(S=uge(v)),[S.map(y).join(e)].concat(v.map(function(P){return S.map(function(D){return y(P[D])}).join(e)})).join(`
`)}function f(v){return v.map(a).join(`
`)}function a(v){return v.map(y).join(e)}function y(v){return v==null?"":t.test(v+="")?'"'+v.replace(/\"/g,'""')+'"':v}return{parse:n,parseRows:s,format:l,formatRows:f}}var $b=X3(","),cge=$b.parse,hge=$b.parseRows,fge=$b.format,dge=$b.formatRows,jb=X3("	"),pge=jb.parse,mge=jb.parseRows,gge=jb.format,yge=jb.formatRows;const vge=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:fge,csvFormatRows:dge,csvParse:cge,csvParseRows:hge,dsvFormat:X3,tsvFormat:gge,tsvFormatRows:yge,tsvParse:pge,tsvParseRows:mge},Symbol.toStringTag,{value:"Module"})),_ge=Pz(vge);var Cv={exports:{}};Cv.exports=bge;Cv.exports.pair=wge;Cv.exports.format=YS;Cv.exports.formatPair=xge;Cv.exports.coordToDMS=WO;function bge(e,t){var r=KS(e,t);return r===null?null:r.val}function xge(e){return YS(e.lat,"lat")+" "+YS(e.lon,"lon")}function YS(e,t){var r=WO(e,t);return r.whole+"° "+(r.minutes?r.minutes+"' ":"")+(r.seconds?r.seconds+'" ':"")+r.dir}function WO(e,t){var r={lat:["N","S"],lon:["E","W"]}[t]||"",n=r[e>=0?0:1],s=Math.abs(e),l=Math.floor(s),f=s-l,a=f*60,y=Math.floor(a),v=Math.floor((a-y)*60);return{whole:l,minutes:y,seconds:v,dir:n}}function KS(e,t){if(t||(t="NSEW"),typeof e!="string")return null;e=e.toUpperCase();var r=/^[\s\,]*([NSEW])?\s*([\-|\—|\―]?[0-9.]+)[°º˚]?\s*(?:([0-9.]+)['’′‘]\s*)?(?:([0-9.]+)(?:''|"|”|″)\s*)?([NSEW])?/,n=e.match(r);if(!n)return null;var s=n[0],l;if(n[1]&&n[5]?(l=n[1],s=s.slice(0,-1)):l=n[1]||n[5],l&&t.indexOf(l)===-1)return null;var f=n[2]?parseFloat(n[2]):0,a=n[3]?parseFloat(n[3])/60:0,y=n[4]?parseFloat(n[4])/3600:0,v=f<0?-1:1;return(l==="S"||l==="W")&&(v*=-1),{val:(Math.abs(f)+a+y)*v,dim:l,matched:s,remain:e.slice(s.length)}}function wge(e,t){e=e.trim();var r=KS(e,t);if(!r)return null;e=r.remain.trim();var n=KS(e,t);return!n||n.remain?null:r.dim?Sge(r.val,n.val,r.dim):[r.val,n.val]}function Sge(e,t,r){if(r==="N"||r==="S")return[e,t];if(r==="W"||r==="E")return[t,e]}var oL=_ge;oL.csvParse,oL.tsvParse;var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.purgeProps=Cge;Gs.first=ZO;Gs.last=XO;Gs.coordsToKey=JS;Gs.addToMap=Ege;Gs.removeFromMap=Tge;Gs.getFirstFromMap=Age;Gs.isRing=Pge;Gs.ringDirection=Ige;Gs.pointInsidePolygon=Mge;Gs.strArrayArrayToFloat=kge;Gs.strArrayToFloat=YO;function Cge(e,t){if(e){const r=Object.assign({},e);if(t)for(const n of t)delete r[n];return r}return{}}function ZO(e){return e[0]}function XO(e){return e[e.length-1]}function JS(e){return e.join(",")}function Ege(e,t,r){const n=e[t];n?n.push(r):e[t]=[r]}function Tge(e,t,r){const n=e[t];let s=-1;n&&(s=n.indexOf(r)),s>=0&&n.splice(s,1)}function Age(e,t){const r=e[t];return r&&r.length>0?r[0]:null}function Pge(e){return e.length>3&&JS(ZO(e))===JS(XO(e))}function Ige(e,t,r){t=t||0,r=r||1;const n=e.reduce((E,F,z)=>e[E][t||0]>F[t||0]?E:z,0),s=n<=0?e.length-2:n-1,l=n>=e.length-1?1:n+1,f=e[s][t],a=e[n][t],y=e[l][t],v=e[s][r],S=e[n][r],P=e[l][r];return(a-f)*(P-v)-(y-f)*(S-v)<0?"clockwise":"counterclockwise"}function Mge(e,t,r,n){r=r||0,n=n||1;let s=!1;for(let l=0,f=t.length-1;l<t.length;f=l++)(t[l][r]<=e[r]&&e[r]<t[f][r]||t[f][r]<=e[r]&&e[r]<t[l][r])&&e[n]<(t[f][n]-t[l][n])*(e[r]-t[l][r])/(t[f][r]-t[l][r])+t[l][n]&&(s=!s);return s}function kge(e){return e.map(YO)}function YO(e){return e.map(parseFloat)}var Y3={};Object.defineProperty(Y3,"__esModule",{value:!0});Y3.XmlParser=void 0;function aL(e){return e.match(/^(.+?)\[(.+?)\]>$/g)!==null}function sL(e){const t=/^(.+?)\[(.+?)\]>$/g.exec(e);return t?{evt:t[1]+">",exp:t[2]}:{evt:e}}function Lge(e){const t="return "+e.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",t)}class Dge{constructor(t){this.queryParent=!1,this.progressive=!1,this.parentMap=new WeakMap,t&&(this.queryParent=!!t.queryParent,this.progressive=t.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(t,r,n){n=n?n+".":"";const s=/<([^ >\/]+)(.*?)>/mg,l=[];let f=s.exec(t);for(;f;){const a=f[1],y={$tag:a},v=n+a,S=f[2].trim();let P=!1;(S.endsWith("/")||a.startsWith("?")||a.startsWith("!"))&&(P=!0);const D=/([^ ]+?)="(.+?)"/g,E=/([^ ]+?)='(.+?)'/g;let F=D.exec(S),z=!1;for(;F;)z=!0,y[F[1]]=F[2],F=D.exec(S);if(!z)for(F=E.exec(S);F;)z=!0,y[F[1]]=F[2],F=E.exec(S);if(!z&&S!==""&&(y.text=S),this.progressive&&this.emit(`<${v}>`,y,r),!P){const W=new RegExp(`([^]+?)</${a}>`,"g");W.lastIndex=s.lastIndex;const $=W.exec(t);if($&&$[1]){s.lastIndex=W.lastIndex;const Y=this.parse($[1],y,v);Y.length>0?y.$innerNodes=Y:y.$innerText=$[1]}}this.queryParent&&r&&this.parentMap.set(y,r),this.progressive&&this.emit(`</${v}>`,y,r),l.push(y),f=s.exec(t)}return l}getParent(t){return this.queryParent?this.parentMap.get(t):null}addListener(t,r){if(aL(t)){const n=sL(t);n.exp&&(r.condition=Lge(n.exp)),t=n.evt}this.$addListener(t,r)}removeListener(t,r){aL(t)&&(t=sL(t).evt),this.$removeListener(t,r)}on(t,r){this.addListener(t,r)}off(t,r){this.removeListener(t,r)}$addListener(t,r){const n=this.evtListeners[t];n?n.push(r):this.evtListeners[t]=[r]}$removeListener(t,r){const n=this.evtListeners[t];let s=-1;n&&(s=n.indexOf(r)),s>=0&&n.splice(s,1)}emit(t,...r){const n=this.evtListeners[t];if(n)for(const s of n)s.condition?s.condition.apply(null,r)===!0&&s.apply(null,r):s.apply(null,r)}}Y3.XmlParser=Dge;var Ub={},Zg={};Object.defineProperty(Zg,"__esModule",{value:!0});Zg.OsmObject=void 0;class Rge{constructor(t,r,n){this.type=t,this.id=r,this.refElems=n,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,n&&n.add(this.getCompositeId(),this)}addTags(t){this.tags=Object.assign(this.tags,t),this.hasTag=!0}addTag(t,r){this.tags[t]=r,this.hasTag=!0}addProp(t,r){this.props[t]=r}addProps(t){this.props=Object.assign(this.props,t)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}}Zg.OsmObject=Rge;Object.defineProperty(Ub,"__esModule",{value:!0});Ub.Node=void 0;const Nge=Zg,Oge=Gs;class Fge extends Nge.OsmObject{constructor(t,r){super("node",t,r)}setLatLng(t){this.latLng=t}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:(0,Oge.strArrayToFloat)([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}Ub.Node=Fge;var Vb={},Ev={};Object.defineProperty(Ev,"__esModule",{value:!0});Ev.LateBinder=void 0;class Bge{constructor(t,r,n,s){this.container=t,this.valueFunc=r,this.ctx=n,this.args=s}bind(){const t=this.valueFunc.apply(this.ctx,this.args),r=this.container.indexOf(this);if(r<0)return;const n=[r,1];t&&n.push(t),Array.prototype.splice.apply(this.container,n)}}Ev.LateBinder=Bge;const zge={},$ge={whitelist:["services","rest_area","escape","elevator"]},jge={blacklist:["coastline","cliff","ridge","arete","tree_row"]},Uge={},Vge={whitelist:["riverbank","dock","boatyard","dam"]},qge={},Gge={},Hge={whitelist:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},Wge={whitelist:["station","turntable","roundhouse","platform"]},Zge={},Xge={},Yge={blacklist:["cutline","embankment","pipeline"]},Kge={whitelist:["plant","substation","generator","transformer"]},Jge={},Qge={},e0e={blacklist:["taxiway"]},t0e={},r0e={},n0e={},i0e={},o0e={},a0e={},s0e={},l0e={},u0e={},c0e={building:zge,highway:$ge,natural:jge,landuse:Uge,waterway:Vge,amenity:qge,leisure:Gge,barrier:Hge,railway:Wge,area:Zge,boundary:Xge,man_made:Yge,power:Kge,place:Jge,shop:Qge,aeroway:e0e,tourism:t0e,historic:r0e,public_transport:n0e,office:i0e,"building:part":{},military:o0e,ruins:a0e,"area:highway":{},craft:s0e,golf:l0e,indoor:u0e};var h0e=ec&&ec.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vb,"__esModule",{value:!0});Vb.Way=void 0;const f0e=Zg,d0e=Ev,a5=Gs,p0e=h0e(c0e);class m0e extends f0e.OsmObject{constructor(t,r){super("way",t,r),this.latLngArray=[],this.isPolygon=!1}addLatLng(t){this.latLngArray.push(t)}setLatLngArray(t){this.latLngArray=t}addNodeRef(t){const r=new d0e.LateBinder(this.latLngArray,n=>{const s=this.refElems.get(`node/${n}`);if(s)return s.refCount++,s.getLatLng()},this,[t]);this.latLngArray.push(r),this.refElems.addBinder(r)}addTags(t){super.addTags(t);for(const[r,n]of Object.entries(t))this.analyzeTag(r,n)}addTag(t,r){super.addTag(t,r),this.analyzeTag(t,r)}toCoordsArray(){return this.latLngArray.map(t=>[t.lon,t.lat])}toFeatureArray(){let t=this.toCoordsArray();if(t.length>1){const r=(0,a5.strArrayArrayToFloat)(t),n={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:r}};return this.isPolygon&&(0,a5.isRing)(r)?((0,a5.ringDirection)(r)!=="counterclockwise"&&r.reverse(),n.geometry={type:"Polygon",coordinates:[r]},[n]):[n]}return[]}analyzeTag(t,r){const n=p0e.default[t];n&&(this.isPolygon=!0,n.whitelist?this.isPolygon=n.whitelist.indexOf(r)>=0:n.blacklist&&(this.isPolygon=!(n.blacklist.indexOf(r)>=0)))}}Vb.Way=m0e;var K3={},qb={};Object.defineProperty(qb,"__esModule",{value:!0});qb.WayCollection=void 0;const zi=Gs;class g0e extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(t){const r=t.toCoordsArray();r.length>0&&(this.push(r),(0,zi.addToMap)(this.firstMap,(0,zi.coordsToKey)((0,zi.first)(r)),r),(0,zi.addToMap)(this.lastMap,(0,zi.coordsToKey)((0,zi.last)(r)),r))}mergeWays(){const t=[];let r=this.shift();for(;r;){(0,zi.removeFromMap)(this.firstMap,(0,zi.coordsToKey)((0,zi.first)(r)),r),(0,zi.removeFromMap)(this.lastMap,(0,zi.coordsToKey)((0,zi.last)(r)),r);let n=r,s;do{let l=this.getNextWay(n);s=l.next;let f=l.mergeType;if(s)switch(this.splice(this.indexOf(s),1),(0,zi.removeFromMap)(this.firstMap,(0,zi.coordsToKey)((0,zi.first)(s)),s),(0,zi.removeFromMap)(this.lastMap,(0,zi.coordsToKey)((0,zi.last)(s)),s),f){case 0:n=n.concat(s.slice(1));break;case 1:s.reverse(),n=n.concat(s.slice(1));break;case 2:n.reverse(),n=n.concat(s.slice(1));break;case 3:n=s.concat(n.slice(1));break}}while(s);t.push((0,zi.strArrayArrayToFloat)(n)),r=this.shift()}return t}getNextWay(t){const r=(0,zi.coordsToKey)((0,zi.last)(t)),n=(0,zi.coordsToKey)((0,zi.first)(t));let s=this.length>0?this[0]:null;if(s){const l=(0,zi.coordsToKey)((0,zi.first)(s)),f=(0,zi.coordsToKey)((0,zi.last)(s));if(r===l)return{next:s,mergeType:0};if(r===f)return{next:s,mergeType:1};if(n===l)return{next:s,mergeType:2};if(n===f)return{next:s,mergeType:3}}return s=(0,zi.getFirstFromMap)(this.firstMap,r),s?{next:s,mergeType:0}:(s=(0,zi.getFirstFromMap)(this.lastMap,r),{next:s,mergeType:1})}toRings(t){const r=this.mergeWays(),n=[];let s=r.shift();for(;s;)(0,zi.isRing)(s)&&((0,zi.ringDirection)(s)!==t&&s.reverse(),n.push(s)),s=r.shift();return n}}qb.WayCollection=g0e;Object.defineProperty(K3,"__esModule",{value:!0});K3.Relation=void 0;const y0e=Zg,lL=Vb,v0e=Ub,s5=qb,l5=Ev,uL=Gs;class _0e extends y0e.OsmObject{constructor(t,r){super("relation",t,r),this.relations=[],this.nodes=[],this.bounds=void 0,this.ways=[],this.roles=[]}setBounds(t){this.bounds=t}addMember(t){switch(t.type){case"relation":let r=new l5.LateBinder(this.relations,s=>{const l=this.refElems.get(`relation/${s}`);if(l)return l.refCount++,l},this,[t.ref]);this.relations.push(r),this.refElems.addBinder(r);break;case"way":if(t.role||(t.role=""),t.geometry){const s=new lL.Way(t.ref,this.refElems);s.setLatLngArray(t.geometry),s.refCount++,this.ways.push(s),this.roles.push(t.role)}else if(t.nodes){const s=new lL.Way(t.ref,this.refElems);for(const l of t.nodes)s.addNodeRef(l);s.refCount++,this.ways.push(s),this.roles.push(t.role)}else{let s=new l5.LateBinder(this.ways,l=>{const f=this.refElems.get(`way/${l}`);if(f)return f.refCount++,f},this,[t.ref]);this.ways.push(s),this.roles.push(t.role),this.refElems.addBinder(s)}break;case"node":let n=null;if(t.lat&&t.lon){n=new v0e.Node(t.ref,this.refElems),n.setLatLng({lon:t.lon,lat:t.lat}),t.tags&&n.addTags(t.tags);for(const[s,l]of Object.entries(t))["id","type","lat","lon"].indexOf(s)<0&&n.addProp(s,l);n.refCount++,this.nodes.push(n)}else{let s=new l5.LateBinder(this.nodes,l=>{const f=this.refElems.get(`node/${l}`);if(f)return f.refCount++,f},this,[t.ref]);this.nodes.push(s),this.refElems.addBinder(s)}break}}constructStringGeometry(t){const r=t?t.mergeWays():[];return r.length===0?null:{type:"MultiLineString",coordinates:r}}constructPolygonGeometry(t,r){const n=t?t.toRings("counterclockwise"):[],s=r?r.toRings("clockwise"):[];if(n.length>0){const l=[];let f;for(f of n)l.push([f]);for(f=s.shift();f;){for(const a in n)if((0,uL.pointInsidePolygon)((0,uL.first)(f),n[a])){l[a].push(f);break}f=s.shift()}return l.length===1?{type:"Polygon",coordinates:l[0]}:{type:"MultiPolygon",coordinates:l}}return null}toFeatureArray(){const t=[],r=[];let n=[];for(const l of this.relations)if(l)for(let f=0;f<l.ways.length;f++){const a=l.ways[f];this.ways.push(a),this.roles.push(l.roles[f])}let s={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps(),geometry:null};if(this.bounds||delete s.bbox,this.roles.some(l=>l==="outer")){const l=new s5.WayCollection,f=new s5.WayCollection;for(let v=0;v<this.ways.length;v++){const S=this.ways[v],P=this.roles[v];P==="outer"?l.addWay(S):P==="inner"&&f.addWay(S)}let a=Object.assign({},s),y=this.constructPolygonGeometry(l,f);y&&(a.geometry=y,t.push(a))}else{const l=new s5.WayCollection;for(let a of this.ways)l.addWay(a);let f=this.constructStringGeometry(l);if(f){let a=Object.assign({},s);a.geometry=f,r.push(a)}}for(let l of this.nodes)n=n.concat(l.toFeatureArray());return[...t,...r,...n]}}K3.Relation=_0e;var J3={};Object.defineProperty(J3,"__esModule",{value:!0});J3.RefElements=void 0;class b0e extends Map{constructor(){super(),this.binders=[]}add(t,r){this.set(t,r)}addBinder(t){this.binders.push(t)}bindAll(){this.binders.forEach(t=>t.bind())}}J3.RefElements=b0e;var cL;(function(e){e.ABSOLUTE="absolute",e.RELATIVE_TO_GROUND="relativeToGround",e.CLAMP_TO_GROUND="clampToGround",e.CLAMP_TO_SEAFLOOR="clampToSeaFloor",e.RELATIVE_TO_SEAFLOOR="relativeToSeaFloor"})(cL||(cL={}));var x0e={value:()=>{}};function KO(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new o_(r)}function o_(e){this._=e}function w0e(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}o_.prototype=KO.prototype={constructor:o_,on:function(e,t){var r=this._,n=w0e(e+"",r),s,l=-1,f=n.length;if(arguments.length<2){for(;++l<f;)if((s=(e=n[l]).type)&&(s=S0e(r[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<f;)if(s=(e=n[l]).type)r[s]=hL(r[s],e.name,t);else if(t==null)for(s in r)r[s]=hL(r[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new o_(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,l;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],n=0,s=l.length;n<s;++n)l[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],s=0,l=n.length;s<l;++s)n[s].value.apply(t,r)}};function S0e(e,t){for(var r=0,n=e.length,s;r<n;++r)if((s=e[r]).name===t)return s.value}function hL(e,t,r){for(var n=0,s=e.length;n<s;++n)if(e[n].name===t){e[n]=x0e,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var QS="http://www.w3.org/1999/xhtml";const fL={svg:"http://www.w3.org/2000/svg",xhtml:QS,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Gb(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),fL.hasOwnProperty(t)?{space:fL[t],local:e}:e}function C0e(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===QS&&t.documentElement.namespaceURI===QS?t.createElement(e):t.createElementNS(r,e)}}function E0e(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function JO(e){var t=Gb(e);return(t.local?E0e:C0e)(t)}function T0e(){}function Q3(e){return e==null?T0e:function(){return this.querySelector(e)}}function A0e(e){typeof e!="function"&&(e=Q3(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var l=t[s],f=l.length,a=n[s]=new Array(f),y,v,S=0;S<f;++S)(y=l[S])&&(v=e.call(y,y.__data__,S,l))&&("__data__"in y&&(v.__data__=y.__data__),a[S]=v);return new Gc(n,this._parents)}function P0e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function I0e(){return[]}function QO(e){return e==null?I0e:function(){return this.querySelectorAll(e)}}function M0e(e){return function(){return P0e(e.apply(this,arguments))}}function k0e(e){typeof e=="function"?e=M0e(e):e=QO(e);for(var t=this._groups,r=t.length,n=[],s=[],l=0;l<r;++l)for(var f=t[l],a=f.length,y,v=0;v<a;++v)(y=f[v])&&(n.push(e.call(y,y.__data__,v,f)),s.push(y));return new Gc(n,s)}function eF(e){return function(){return this.matches(e)}}function tF(e){return function(t){return t.matches(e)}}var L0e=Array.prototype.find;function D0e(e){return function(){return L0e.call(this.children,e)}}function R0e(){return this.firstElementChild}function N0e(e){return this.select(e==null?R0e:D0e(typeof e=="function"?e:tF(e)))}var O0e=Array.prototype.filter;function F0e(){return Array.from(this.children)}function B0e(e){return function(){return O0e.call(this.children,e)}}function z0e(e){return this.selectAll(e==null?F0e:B0e(typeof e=="function"?e:tF(e)))}function $0e(e){typeof e!="function"&&(e=eF(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var l=t[s],f=l.length,a=n[s]=[],y,v=0;v<f;++v)(y=l[v])&&e.call(y,y.__data__,v,l)&&a.push(y);return new Gc(n,this._parents)}function rF(e){return new Array(e.length)}function j0e(){return new Gc(this._enter||this._groups.map(rF),this._parents)}function i2(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}i2.prototype={constructor:i2,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function U0e(e){return function(){return e}}function V0e(e,t,r,n,s,l){for(var f=0,a,y=t.length,v=l.length;f<v;++f)(a=t[f])?(a.__data__=l[f],n[f]=a):r[f]=new i2(e,l[f]);for(;f<y;++f)(a=t[f])&&(s[f]=a)}function q0e(e,t,r,n,s,l,f){var a,y,v=new Map,S=t.length,P=l.length,D=new Array(S),E;for(a=0;a<S;++a)(y=t[a])&&(D[a]=E=f.call(y,y.__data__,a,t)+"",v.has(E)?s[a]=y:v.set(E,y));for(a=0;a<P;++a)E=f.call(e,l[a],a,l)+"",(y=v.get(E))?(n[a]=y,y.__data__=l[a],v.delete(E)):r[a]=new i2(e,l[a]);for(a=0;a<S;++a)(y=t[a])&&v.get(D[a])===y&&(s[a]=y)}function G0e(e){return e.__data__}function H0e(e,t){if(!arguments.length)return Array.from(this,G0e);var r=t?q0e:V0e,n=this._parents,s=this._groups;typeof e!="function"&&(e=U0e(e));for(var l=s.length,f=new Array(l),a=new Array(l),y=new Array(l),v=0;v<l;++v){var S=n[v],P=s[v],D=P.length,E=W0e(e.call(S,S&&S.__data__,v,n)),F=E.length,z=a[v]=new Array(F),W=f[v]=new Array(F),$=y[v]=new Array(D);r(S,P,z,W,$,E,t);for(var Y=0,Q=0,K,xe;Y<F;++Y)if(K=z[Y]){for(Y>=Q&&(Q=Y+1);!(xe=W[Q])&&++Q<F;);K._next=xe||null}}return f=new Gc(f,n),f._enter=a,f._exit=y,f}function W0e(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Z0e(){return new Gc(this._exit||this._groups.map(rF),this._parents)}function X0e(e,t,r){var n=this.enter(),s=this,l=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),r==null?l.remove():r(l),n&&s?n.merge(s).order():s}function Y0e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,s=r.length,l=n.length,f=Math.min(s,l),a=new Array(s),y=0;y<f;++y)for(var v=r[y],S=n[y],P=v.length,D=a[y]=new Array(P),E,F=0;F<P;++F)(E=v[F]||S[F])&&(D[F]=E);for(;y<s;++y)a[y]=r[y];return new Gc(a,this._parents)}function K0e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],s=n.length-1,l=n[s],f;--s>=0;)(f=n[s])&&(l&&f.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(f,l),l=f);return this}function J0e(e){e||(e=Q0e);function t(P,D){return P&&D?e(P.__data__,D.__data__):!P-!D}for(var r=this._groups,n=r.length,s=new Array(n),l=0;l<n;++l){for(var f=r[l],a=f.length,y=s[l]=new Array(a),v,S=0;S<a;++S)(v=f[S])&&(y[S]=v);y.sort(t)}return new Gc(s,this._parents).order()}function Q0e(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eye(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function tye(){return Array.from(this)}function rye(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,l=n.length;s<l;++s){var f=n[s];if(f)return f}return null}function nye(){let e=0;for(const t of this)++e;return e}function iye(){return!this.node()}function oye(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var s=t[r],l=0,f=s.length,a;l<f;++l)(a=s[l])&&e.call(a,a.__data__,l,s);return this}function aye(e){return function(){this.removeAttribute(e)}}function sye(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lye(e,t){return function(){this.setAttribute(e,t)}}function uye(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function cye(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function hye(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function fye(e,t){var r=Gb(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?sye:aye:typeof t=="function"?r.local?hye:cye:r.local?uye:lye)(r,t))}function nF(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function dye(e){return function(){this.style.removeProperty(e)}}function pye(e,t,r){return function(){this.style.setProperty(e,t,r)}}function mye(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function gye(e,t,r){return arguments.length>1?this.each((t==null?dye:typeof t=="function"?mye:pye)(e,t,r??"")):Sg(this.node(),e)}function Sg(e,t){return e.style.getPropertyValue(t)||nF(e).getComputedStyle(e,null).getPropertyValue(t)}function yye(e){return function(){delete this[e]}}function vye(e,t){return function(){this[e]=t}}function _ye(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function bye(e,t){return arguments.length>1?this.each((t==null?yye:typeof t=="function"?_ye:vye)(e,t)):this.node()[e]}function iF(e){return e.trim().split(/^|\s+/)}function eT(e){return e.classList||new oF(e)}function oF(e){this._node=e,this._names=iF(e.getAttribute("class")||"")}oF.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function aF(e,t){for(var r=eT(e),n=-1,s=t.length;++n<s;)r.add(t[n])}function sF(e,t){for(var r=eT(e),n=-1,s=t.length;++n<s;)r.remove(t[n])}function xye(e){return function(){aF(this,e)}}function wye(e){return function(){sF(this,e)}}function Sye(e,t){return function(){(t.apply(this,arguments)?aF:sF)(this,e)}}function Cye(e,t){var r=iF(e+"");if(arguments.length<2){for(var n=eT(this.node()),s=-1,l=r.length;++s<l;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof t=="function"?Sye:t?xye:wye)(r,t))}function Eye(){this.textContent=""}function Tye(e){return function(){this.textContent=e}}function Aye(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Pye(e){return arguments.length?this.each(e==null?Eye:(typeof e=="function"?Aye:Tye)(e)):this.node().textContent}function Iye(){this.innerHTML=""}function Mye(e){return function(){this.innerHTML=e}}function kye(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Lye(e){return arguments.length?this.each(e==null?Iye:(typeof e=="function"?kye:Mye)(e)):this.node().innerHTML}function Dye(){this.nextSibling&&this.parentNode.appendChild(this)}function Rye(){return this.each(Dye)}function Nye(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oye(){return this.each(Nye)}function Fye(e){var t=typeof e=="function"?e:JO(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Bye(){return null}function zye(e,t){var r=typeof e=="function"?e:JO(e),n=t==null?Bye:typeof t=="function"?t:Q3(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function $ye(){var e=this.parentNode;e&&e.removeChild(this)}function jye(){return this.each($ye)}function Uye(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Vye(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qye(e){return this.select(e?Vye:Uye)}function Gye(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hye(e){return function(t){e.call(this,t,this.__data__)}}function Wye(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Zye(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,s=t.length,l;r<s;++r)l=t[r],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++n]=l;++n?t.length=n:delete this.__on}}}function Xye(e,t,r){return function(){var n=this.__on,s,l=Hye(t);if(n){for(var f=0,a=n.length;f<a;++f)if((s=n[f]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=l,s.options=r),s.value=t;return}}this.addEventListener(e.type,l,r),s={type:e.type,name:e.name,value:t,listener:l,options:r},n?n.push(s):this.__on=[s]}}function Yye(e,t,r){var n=Wye(e+""),s,l=n.length,f;if(arguments.length<2){var a=this.node().__on;if(a){for(var y=0,v=a.length,S;y<v;++y)for(s=0,S=a[y];s<l;++s)if((f=n[s]).type===S.type&&f.name===S.name)return S.value}return}for(a=t?Xye:Zye,s=0;s<l;++s)this.each(a(n[s],t,r));return this}function lF(e,t,r){var n=nF(e),s=n.CustomEvent;typeof s=="function"?s=new s(t,r):(s=n.document.createEvent("Event"),r?(s.initEvent(t,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Kye(e,t){return function(){return lF(this,e,t)}}function Jye(e,t){return function(){return lF(this,e,t.apply(this,arguments))}}function Qye(e,t){return this.each((typeof t=="function"?Jye:Kye)(e,t))}function*eve(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],s=0,l=n.length,f;s<l;++s)(f=n[s])&&(yield f)}var tve=[null];function Gc(e,t){this._groups=e,this._parents=t}function Tv(){return new Gc([[document.documentElement]],tve)}function rve(){return this}Gc.prototype=Tv.prototype={constructor:Gc,select:A0e,selectAll:k0e,selectChild:N0e,selectChildren:z0e,filter:$0e,data:H0e,enter:j0e,exit:Z0e,join:X0e,merge:Y0e,selection:rve,order:K0e,sort:J0e,call:eye,nodes:tye,node:rye,size:nye,empty:iye,each:oye,attr:fye,style:gye,property:bye,classed:Cye,text:Pye,html:Lye,raise:Rye,lower:Oye,append:Fye,insert:zye,remove:jye,clone:qye,datum:Gye,on:Yye,dispatch:Qye,[Symbol.iterator]:eve};function tT(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uF(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Av(){}var Gy=.7,o2=1/Gy,ug="\\s*([+-]?\\d+)\\s*",Hy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ph="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nve=/^#([0-9a-f]{3,8})$/,ive=new RegExp(`^rgb\\(${ug},${ug},${ug}\\)$`),ove=new RegExp(`^rgb\\(${Ph},${Ph},${Ph}\\)$`),ave=new RegExp(`^rgba\\(${ug},${ug},${ug},${Hy}\\)$`),sve=new RegExp(`^rgba\\(${Ph},${Ph},${Ph},${Hy}\\)$`),lve=new RegExp(`^hsl\\(${Hy},${Ph},${Ph}\\)$`),uve=new RegExp(`^hsla\\(${Hy},${Ph},${Ph},${Hy}\\)$`),dL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tT(Av,Wy,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:pL,formatHex:pL,formatHex8:cve,formatHsl:hve,formatRgb:mL,toString:mL});function pL(){return this.rgb().formatHex()}function cve(){return this.rgb().formatHex8()}function hve(){return cF(this).formatHsl()}function mL(){return this.rgb().formatRgb()}function Wy(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=nve.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?gL(t):r===3?new nu(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?I1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?I1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ive.exec(e))?new nu(t[1],t[2],t[3],1):(t=ove.exec(e))?new nu(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ave.exec(e))?I1(t[1],t[2],t[3],t[4]):(t=sve.exec(e))?I1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lve.exec(e))?_L(t[1],t[2]/100,t[3]/100,1):(t=uve.exec(e))?_L(t[1],t[2]/100,t[3]/100,t[4]):dL.hasOwnProperty(e)?gL(dL[e]):e==="transparent"?new nu(NaN,NaN,NaN,0):null}function gL(e){return new nu(e>>16&255,e>>8&255,e&255,1)}function I1(e,t,r,n){return n<=0&&(e=t=r=NaN),new nu(e,t,r,n)}function fve(e){return e instanceof Av||(e=Wy(e)),e?(e=e.rgb(),new nu(e.r,e.g,e.b,e.opacity)):new nu}function eC(e,t,r,n){return arguments.length===1?fve(e):new nu(e,t,r,n??1)}function nu(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}tT(nu,eC,uF(Av,{brighter(e){return e=e==null?o2:Math.pow(o2,e),new nu(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gy:Math.pow(Gy,e),new nu(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nu(np(this.r),np(this.g),np(this.b),a2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yL,formatHex:yL,formatHex8:dve,formatRgb:vL,toString:vL}));function yL(){return`#${Kd(this.r)}${Kd(this.g)}${Kd(this.b)}`}function dve(){return`#${Kd(this.r)}${Kd(this.g)}${Kd(this.b)}${Kd((isNaN(this.opacity)?1:this.opacity)*255)}`}function vL(){const e=a2(this.opacity);return`${e===1?"rgb(":"rgba("}${np(this.r)}, ${np(this.g)}, ${np(this.b)}${e===1?")":`, ${e})`}`}function a2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function np(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kd(e){return e=np(e),(e<16?"0":"")+e.toString(16)}function _L(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Fc(e,t,r,n)}function cF(e){if(e instanceof Fc)return new Fc(e.h,e.s,e.l,e.opacity);if(e instanceof Av||(e=Wy(e)),!e)return new Fc;if(e instanceof Fc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),l=Math.max(t,r,n),f=NaN,a=l-s,y=(l+s)/2;return a?(t===l?f=(r-n)/a+(r<n)*6:r===l?f=(n-t)/a+2:f=(t-r)/a+4,a/=y<.5?l+s:2-l-s,f*=60):a=y>0&&y<1?0:f,new Fc(f,a,y,e.opacity)}function pve(e,t,r,n){return arguments.length===1?cF(e):new Fc(e,t,r,n??1)}function Fc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}tT(Fc,pve,uF(Av,{brighter(e){return e=e==null?o2:Math.pow(o2,e),new Fc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gy:Math.pow(Gy,e),new Fc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new nu(u5(e>=240?e-240:e+120,s,n),u5(e,s,n),u5(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Fc(bL(this.h),M1(this.s),M1(this.l),a2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=a2(this.opacity);return`${e===1?"hsl(":"hsla("}${bL(this.h)}, ${M1(this.s)*100}%, ${M1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function bL(e){return e=(e||0)%360,e<0?e+360:e}function M1(e){return Math.max(0,Math.min(1,e||0))}function u5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hF=e=>()=>e;function mve(e,t){return function(r){return e+r*t}}function gve(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function yve(e){return(e=+e)==1?fF:function(t,r){return r-t?gve(t,r,e):hF(isNaN(t)?r:t)}}function fF(e,t){var r=t-e;return r?mve(e,r):hF(isNaN(e)?t:e)}const xL=function e(t){var r=yve(t);function n(s,l){var f=r((s=eC(s)).r,(l=eC(l)).r),a=r(s.g,l.g),y=r(s.b,l.b),v=fF(s.opacity,l.opacity);return function(S){return s.r=f(S),s.g=a(S),s.b=y(S),s.opacity=v(S),s+""}}return n.gamma=e,n}(1);function qf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var tC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,c5=new RegExp(tC.source,"g");function vve(e){return function(){return e}}function _ve(e){return function(t){return e(t)+""}}function bve(e,t){var r=tC.lastIndex=c5.lastIndex=0,n,s,l,f=-1,a=[],y=[];for(e=e+"",t=t+"";(n=tC.exec(e))&&(s=c5.exec(t));)(l=s.index)>r&&(l=t.slice(r,l),a[f]?a[f]+=l:a[++f]=l),(n=n[0])===(s=s[0])?a[f]?a[f]+=s:a[++f]=s:(a[++f]=null,y.push({i:f,x:qf(n,s)})),r=c5.lastIndex;return r<t.length&&(l=t.slice(r),a[f]?a[f]+=l:a[++f]=l),a.length<2?y[0]?_ve(y[0].x):vve(t):(t=y.length,function(v){for(var S=0,P;S<t;++S)a[(P=y[S]).i]=P.x(v);return a.join("")})}var wL=180/Math.PI,rC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function dF(e,t,r,n,s,l){var f,a,y;return(f=Math.sqrt(e*e+t*t))&&(e/=f,t/=f),(y=e*r+t*n)&&(r-=e*y,n-=t*y),(a=Math.sqrt(r*r+n*n))&&(r/=a,n/=a,y/=a),e*n<t*r&&(e=-e,t=-t,y=-y,f=-f),{translateX:s,translateY:l,rotate:Math.atan2(t,e)*wL,skewX:Math.atan(y)*wL,scaleX:f,scaleY:a}}var k1;function xve(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?rC:dF(t.a,t.b,t.c,t.d,t.e,t.f)}function wve(e){return e==null||(k1||(k1=document.createElementNS("http://www.w3.org/2000/svg","g")),k1.setAttribute("transform",e),!(e=k1.transform.baseVal.consolidate()))?rC:(e=e.matrix,dF(e.a,e.b,e.c,e.d,e.e,e.f))}function pF(e,t,r,n){function s(v){return v.length?v.pop()+" ":""}function l(v,S,P,D,E,F){if(v!==P||S!==D){var z=E.push("translate(",null,t,null,r);F.push({i:z-4,x:qf(v,P)},{i:z-2,x:qf(S,D)})}else(P||D)&&E.push("translate("+P+t+D+r)}function f(v,S,P,D){v!==S?(v-S>180?S+=360:S-v>180&&(v+=360),D.push({i:P.push(s(P)+"rotate(",null,n)-2,x:qf(v,S)})):S&&P.push(s(P)+"rotate("+S+n)}function a(v,S,P,D){v!==S?D.push({i:P.push(s(P)+"skewX(",null,n)-2,x:qf(v,S)}):S&&P.push(s(P)+"skewX("+S+n)}function y(v,S,P,D,E,F){if(v!==P||S!==D){var z=E.push(s(E)+"scale(",null,",",null,")");F.push({i:z-4,x:qf(v,P)},{i:z-2,x:qf(S,D)})}else(P!==1||D!==1)&&E.push(s(E)+"scale("+P+","+D+")")}return function(v,S){var P=[],D=[];return v=e(v),S=e(S),l(v.translateX,v.translateY,S.translateX,S.translateY,P,D),f(v.rotate,S.rotate,P,D),a(v.skewX,S.skewX,P,D),y(v.scaleX,v.scaleY,S.scaleX,S.scaleY,P,D),v=S=null,function(E){for(var F=-1,z=D.length,W;++F<z;)P[(W=D[F]).i]=W.x(E);return P.join("")}}}var Sve=pF(xve,"px, ","px)","deg)"),Cve=pF(wve,", ",")",")"),Cg=0,H0=0,N0=0,mF=1e3,s2,W0,l2=0,gp=0,Hb=0,Zy=typeof performance=="object"&&performance.now?performance:Date,gF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rT(){return gp||(gF(Eve),gp=Zy.now()+Hb)}function Eve(){gp=0}function u2(){this._call=this._time=this._next=null}u2.prototype=yF.prototype={constructor:u2,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?rT():+r)+(t==null?0:+t),!this._next&&W0!==this&&(W0?W0._next=this:s2=this,W0=this),this._call=e,this._time=r,nC()},stop:function(){this._call&&(this._call=null,this._time=1/0,nC())}};function yF(e,t,r){var n=new u2;return n.restart(e,t,r),n}function Tve(){rT(),++Cg;for(var e=s2,t;e;)(t=gp-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cg}function SL(){gp=(l2=Zy.now())+Hb,Cg=H0=0;try{Tve()}finally{Cg=0,Pve(),gp=0}}function Ave(){var e=Zy.now(),t=e-l2;t>mF&&(Hb-=t,l2=e)}function Pve(){for(var e,t=s2,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:s2=r);W0=e,nC(n)}function nC(e){if(!Cg){H0&&(H0=clearTimeout(H0));var t=e-gp;t>24?(e<1/0&&(H0=setTimeout(SL,e-Zy.now()-Hb)),N0&&(N0=clearInterval(N0))):(N0||(l2=Zy.now(),N0=setInterval(Ave,mF)),Cg=1,gF(SL))}}function CL(e,t,r){var n=new u2;return t=t==null?0:+t,n.restart(s=>{n.stop(),e(s+t)},t,r),n}var Ive=KO("start","end","cancel","interrupt"),Mve=[],vF=0,EL=1,iC=2,a_=3,TL=4,oC=5,s_=6;function Wb(e,t,r,n,s,l){var f=e.__transition;if(!f)e.__transition={};else if(r in f)return;kve(e,r,{name:t,index:n,group:s,on:Ive,tween:Mve,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:vF})}function nT(e,t){var r=Yc(e,t);if(r.state>vF)throw new Error("too late; already scheduled");return r}function Rh(e,t){var r=Yc(e,t);if(r.state>a_)throw new Error("too late; already running");return r}function Yc(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function kve(e,t,r){var n=e.__transition,s;n[t]=r,r.timer=yF(l,0,r.time);function l(v){r.state=EL,r.timer.restart(f,r.delay,r.time),r.delay<=v&&f(v-r.delay)}function f(v){var S,P,D,E;if(r.state!==EL)return y();for(S in n)if(E=n[S],E.name===r.name){if(E.state===a_)return CL(f);E.state===TL?(E.state=s_,E.timer.stop(),E.on.call("interrupt",e,e.__data__,E.index,E.group),delete n[S]):+S<t&&(E.state=s_,E.timer.stop(),E.on.call("cancel",e,e.__data__,E.index,E.group),delete n[S])}if(CL(function(){r.state===a_&&(r.state=TL,r.timer.restart(a,r.delay,r.time),a(v))}),r.state=iC,r.on.call("start",e,e.__data__,r.index,r.group),r.state===iC){for(r.state=a_,s=new Array(D=r.tween.length),S=0,P=-1;S<D;++S)(E=r.tween[S].value.call(e,e.__data__,r.index,r.group))&&(s[++P]=E);s.length=P+1}}function a(v){for(var S=v<r.duration?r.ease.call(null,v/r.duration):(r.timer.restart(y),r.state=oC,1),P=-1,D=s.length;++P<D;)s[P].call(e,S);r.state===oC&&(r.on.call("end",e,e.__data__,r.index,r.group),y())}function y(){r.state=s_,r.timer.stop(),delete n[t];for(var v in n)return;delete e.__transition}}function Lve(e,t){var r=e.__transition,n,s,l=!0,f;if(r){t=t==null?null:t+"";for(f in r){if((n=r[f]).name!==t){l=!1;continue}s=n.state>iC&&n.state<oC,n.state=s_,n.timer.stop(),n.on.call(s?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[f]}l&&delete e.__transition}}function Dve(e){return this.each(function(){Lve(this,e)})}function Rve(e,t){var r,n;return function(){var s=Rh(this,e),l=s.tween;if(l!==r){n=r=l;for(var f=0,a=n.length;f<a;++f)if(n[f].name===t){n=n.slice(),n.splice(f,1);break}}s.tween=n}}function Nve(e,t,r){var n,s;if(typeof r!="function")throw new Error;return function(){var l=Rh(this,e),f=l.tween;if(f!==n){s=(n=f).slice();for(var a={name:t,value:r},y=0,v=s.length;y<v;++y)if(s[y].name===t){s[y]=a;break}y===v&&s.push(a)}l.tween=s}}function Ove(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Yc(this.node(),r).tween,s=0,l=n.length,f;s<l;++s)if((f=n[s]).name===e)return f.value;return null}return this.each((t==null?Rve:Nve)(r,e,t))}function iT(e,t,r){var n=e._id;return e.each(function(){var s=Rh(this,n);(s.value||(s.value={}))[t]=r.apply(this,arguments)}),function(s){return Yc(s,n).value[t]}}function _F(e,t){var r;return(typeof t=="number"?qf:t instanceof Wy?xL:(r=Wy(t))?(t=r,xL):bve)(e,t)}function Fve(e){return function(){this.removeAttribute(e)}}function Bve(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zve(e,t,r){var n,s=r+"",l;return function(){var f=this.getAttribute(e);return f===s?null:f===n?l:l=t(n=f,r)}}function $ve(e,t,r){var n,s=r+"",l;return function(){var f=this.getAttributeNS(e.space,e.local);return f===s?null:f===n?l:l=t(n=f,r)}}function jve(e,t,r){var n,s,l;return function(){var f,a=r(this),y;return a==null?void this.removeAttribute(e):(f=this.getAttribute(e),y=a+"",f===y?null:f===n&&y===s?l:(s=y,l=t(n=f,a)))}}function Uve(e,t,r){var n,s,l;return function(){var f,a=r(this),y;return a==null?void this.removeAttributeNS(e.space,e.local):(f=this.getAttributeNS(e.space,e.local),y=a+"",f===y?null:f===n&&y===s?l:(s=y,l=t(n=f,a)))}}function Vve(e,t){var r=Gb(e),n=r==="transform"?Cve:_F;return this.attrTween(e,typeof t=="function"?(r.local?Uve:jve)(r,n,iT(this,"attr."+e,t)):t==null?(r.local?Bve:Fve)(r):(r.local?$ve:zve)(r,n,t))}function qve(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Gve(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Hve(e,t){var r,n;function s(){var l=t.apply(this,arguments);return l!==n&&(r=(n=l)&&Gve(e,l)),r}return s._value=t,s}function Wve(e,t){var r,n;function s(){var l=t.apply(this,arguments);return l!==n&&(r=(n=l)&&qve(e,l)),r}return s._value=t,s}function Zve(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Gb(e);return this.tween(r,(n.local?Hve:Wve)(n,t))}function Xve(e,t){return function(){nT(this,e).delay=+t.apply(this,arguments)}}function Yve(e,t){return t=+t,function(){nT(this,e).delay=t}}function Kve(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Xve:Yve)(t,e)):Yc(this.node(),t).delay}function Jve(e,t){return function(){Rh(this,e).duration=+t.apply(this,arguments)}}function Qve(e,t){return t=+t,function(){Rh(this,e).duration=t}}function e1e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Jve:Qve)(t,e)):Yc(this.node(),t).duration}function t1e(e,t){if(typeof t!="function")throw new Error;return function(){Rh(this,e).ease=t}}function r1e(e){var t=this._id;return arguments.length?this.each(t1e(t,e)):Yc(this.node(),t).ease}function n1e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Rh(this,e).ease=r}}function i1e(e){if(typeof e!="function")throw new Error;return this.each(n1e(this._id,e))}function o1e(e){typeof e!="function"&&(e=eF(e));for(var t=this._groups,r=t.length,n=new Array(r),s=0;s<r;++s)for(var l=t[s],f=l.length,a=n[s]=[],y,v=0;v<f;++v)(y=l[v])&&e.call(y,y.__data__,v,l)&&a.push(y);return new gf(n,this._parents,this._name,this._id)}function a1e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,s=r.length,l=Math.min(n,s),f=new Array(n),a=0;a<l;++a)for(var y=t[a],v=r[a],S=y.length,P=f[a]=new Array(S),D,E=0;E<S;++E)(D=y[E]||v[E])&&(P[E]=D);for(;a<n;++a)f[a]=t[a];return new gf(f,this._parents,this._name,this._id)}function s1e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function l1e(e,t,r){var n,s,l=s1e(t)?nT:Rh;return function(){var f=l(this,e),a=f.on;a!==n&&(s=(n=a).copy()).on(t,r),f.on=s}}function u1e(e,t){var r=this._id;return arguments.length<2?Yc(this.node(),r).on.on(e):this.each(l1e(r,e,t))}function c1e(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function h1e(){return this.on("end.remove",c1e(this._id))}function f1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Q3(e));for(var n=this._groups,s=n.length,l=new Array(s),f=0;f<s;++f)for(var a=n[f],y=a.length,v=l[f]=new Array(y),S,P,D=0;D<y;++D)(S=a[D])&&(P=e.call(S,S.__data__,D,a))&&("__data__"in S&&(P.__data__=S.__data__),v[D]=P,Wb(v[D],t,r,D,v,Yc(S,r)));return new gf(l,this._parents,t,r)}function d1e(e){var t=this._name,r=this._id;typeof e!="function"&&(e=QO(e));for(var n=this._groups,s=n.length,l=[],f=[],a=0;a<s;++a)for(var y=n[a],v=y.length,S,P=0;P<v;++P)if(S=y[P]){for(var D=e.call(S,S.__data__,P,y),E,F=Yc(S,r),z=0,W=D.length;z<W;++z)(E=D[z])&&Wb(E,t,r,z,D,F);l.push(D),f.push(S)}return new gf(l,f,t,r)}var p1e=Tv.prototype.constructor;function m1e(){return new p1e(this._groups,this._parents)}function g1e(e,t){var r,n,s;return function(){var l=Sg(this,e),f=(this.style.removeProperty(e),Sg(this,e));return l===f?null:l===r&&f===n?s:s=t(r=l,n=f)}}function bF(e){return function(){this.style.removeProperty(e)}}function y1e(e,t,r){var n,s=r+"",l;return function(){var f=Sg(this,e);return f===s?null:f===n?l:l=t(n=f,r)}}function v1e(e,t,r){var n,s,l;return function(){var f=Sg(this,e),a=r(this),y=a+"";return a==null&&(y=a=(this.style.removeProperty(e),Sg(this,e))),f===y?null:f===n&&y===s?l:(s=y,l=t(n=f,a))}}function _1e(e,t){var r,n,s,l="style."+t,f="end."+l,a;return function(){var y=Rh(this,e),v=y.on,S=y.value[l]==null?a||(a=bF(t)):void 0;(v!==r||s!==S)&&(n=(r=v).copy()).on(f,s=S),y.on=n}}function b1e(e,t,r){var n=(e+="")=="transform"?Sve:_F;return t==null?this.styleTween(e,g1e(e,n)).on("end.style."+e,bF(e)):typeof t=="function"?this.styleTween(e,v1e(e,n,iT(this,"style."+e,t))).each(_1e(this._id,e)):this.styleTween(e,y1e(e,n,t),r).on("end.style."+e,null)}function x1e(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function w1e(e,t,r){var n,s;function l(){var f=t.apply(this,arguments);return f!==s&&(n=(s=f)&&x1e(e,f,r)),n}return l._value=t,l}function S1e(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,w1e(e,t,r??""))}function C1e(e){return function(){this.textContent=e}}function E1e(e){return function(){var t=e(this);this.textContent=t??""}}function T1e(e){return this.tween("text",typeof e=="function"?E1e(iT(this,"text",e)):C1e(e==null?"":e+""))}function A1e(e){return function(t){this.textContent=e.call(this,t)}}function P1e(e){var t,r;function n(){var s=e.apply(this,arguments);return s!==r&&(t=(r=s)&&A1e(s)),t}return n._value=e,n}function I1e(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,P1e(e))}function M1e(){for(var e=this._name,t=this._id,r=xF(),n=this._groups,s=n.length,l=0;l<s;++l)for(var f=n[l],a=f.length,y,v=0;v<a;++v)if(y=f[v]){var S=Yc(y,t);Wb(y,e,r,v,f,{time:S.time+S.delay+S.duration,delay:0,duration:S.duration,ease:S.ease})}return new gf(n,this._parents,e,r)}function k1e(){var e,t,r=this,n=r._id,s=r.size();return new Promise(function(l,f){var a={value:f},y={value:function(){--s===0&&l()}};r.each(function(){var v=Rh(this,n),S=v.on;S!==e&&(t=(e=S).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(y)),v.on=t}),s===0&&l()})}var L1e=0;function gf(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function xF(){return++L1e}var Jh=Tv.prototype;gf.prototype={constructor:gf,select:f1e,selectAll:d1e,selectChild:Jh.selectChild,selectChildren:Jh.selectChildren,filter:o1e,merge:a1e,selection:m1e,transition:M1e,call:Jh.call,nodes:Jh.nodes,node:Jh.node,size:Jh.size,empty:Jh.empty,each:Jh.each,on:u1e,attr:Vve,attrTween:Zve,style:b1e,styleTween:S1e,text:T1e,textTween:I1e,remove:h1e,tween:Ove,delay:Kve,duration:e1e,ease:r1e,easeVarying:i1e,end:k1e,[Symbol.iterator]:Jh[Symbol.iterator]};function D1e(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var R1e={time:null,delay:0,duration:250,ease:D1e};function N1e(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function O1e(e){var t,r;e instanceof gf?(t=e._id,e=e._name):(t=xF(),(r=R1e).time=rT(),e=e==null?null:e+"");for(var n=this._groups,s=n.length,l=0;l<s;++l)for(var f=n[l],a=f.length,y,v=0;v<a;++v)(y=f[v])&&Wb(y,e,t,v,f,r||N1e(y,t));return new gf(n,this._parents,e,t)}Tv.prototype.interrupt=Dve;Tv.prototype.transition=O1e;function Z0(e,t,r){this.k=e,this.x=t,this.y=r}Z0.prototype={constructor:Z0,scale:function(e){return e===1?this:new Z0(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Z0(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Z0.prototype;const F1e=kh(Ar.jsx("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"})),B1e=kh(Ar.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"})),z1e=kh(Ar.jsx("path",{d:"m16.24 11.51 1.57-1.57-3.75-3.75-1.57 1.57-4.14-4.13c-.78-.78-2.05-.78-2.83 0l-1.9 1.9c-.78.78-.78 2.05 0 2.83l4.13 4.13L3 17.25V21h3.75l4.76-4.76 4.13 4.13c.95.95 2.23.6 2.83 0l1.9-1.9c.78-.78.78-2.05 0-2.83zm-7.06-.44L5.04 6.94l1.89-1.9L8.2 6.31 7.02 7.5l1.41 1.41 1.19-1.19 1.45 1.45zm7.88 7.89-4.13-4.13 1.9-1.9 1.45 1.45-1.19 1.19 1.41 1.41 1.19-1.19 1.27 1.27zm3.65-11.92c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.47-.47-1.12-.29-1.41 0l-1.83 1.83 3.75 3.75z"})),$1e=kh(Ar.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}));function Fs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var j1e=typeof Symbol=="function"&&Symbol.observable||"@@observable",AL=j1e,h5=()=>Math.random().toString(36).substring(7).split("").join("."),U1e={INIT:`@@redux/INIT${h5()}`,REPLACE:`@@redux/REPLACE${h5()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${h5()}`},c2=U1e;function oT(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function wF(e,t,r){if(typeof e!="function")throw new Error(Fs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fs(1));return r(wF)(e,t)}let n=e,s=t,l=new Map,f=l,a=0,y=!1;function v(){f===l&&(f=new Map,l.forEach((W,$)=>{f.set($,W)}))}function S(){if(y)throw new Error(Fs(3));return s}function P(W){if(typeof W!="function")throw new Error(Fs(4));if(y)throw new Error(Fs(5));let $=!0;v();const Y=a++;return f.set(Y,W),function(){if($){if(y)throw new Error(Fs(6));$=!1,v(),f.delete(Y),l=null}}}function D(W){if(!oT(W))throw new Error(Fs(7));if(typeof W.type>"u")throw new Error(Fs(8));if(typeof W.type!="string")throw new Error(Fs(17));if(y)throw new Error(Fs(9));try{y=!0,s=n(s,W)}finally{y=!1}return(l=f).forEach(Y=>{Y()}),W}function E(W){if(typeof W!="function")throw new Error(Fs(10));n=W,D({type:c2.REPLACE})}function F(){const W=P;return{subscribe($){if(typeof $!="object"||$===null)throw new Error(Fs(11));function Y(){const K=$;K.next&&K.next(S())}return Y(),{unsubscribe:W(Y)}},[AL](){return this}}}return D({type:c2.INIT}),{dispatch:D,subscribe:P,getState:S,replaceReducer:E,[AL]:F}}function V1e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:c2.INIT})>"u")throw new Error(Fs(12));if(typeof r(void 0,{type:c2.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fs(13))})}function q1e(e){const t=Object.keys(e),r={};for(let l=0;l<t.length;l++){const f=t[l];typeof e[f]=="function"&&(r[f]=e[f])}const n=Object.keys(r);let s;try{V1e(r)}catch(l){s=l}return function(f={},a){if(s)throw s;let y=!1;const v={};for(let S=0;S<n.length;S++){const P=n[S],D=r[P],E=f[P],F=D(E,a);if(typeof F>"u")throw a&&a.type,new Error(Fs(14));v[P]=F,y=y||F!==E}return y=y||n.length!==Object.keys(f).length,y?v:f}}function h2(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function G1e(...e){return t=>(r,n)=>{const s=t(r,n);let l=()=>{throw new Error(Fs(15))};const f={getState:s.getState,dispatch:(y,...v)=>l(y,...v)},a=e.map(y=>y(f));return l=h2(...a)(s.dispatch),{...s,dispatch:l}}}function H1e(e){return oT(e)&&"type"in e&&typeof e.type=="string"}var SF=Symbol.for("immer-nothing"),PL=Symbol.for("immer-draftable"),zu=Symbol.for("immer-state");function Bc(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Eg=Object.getPrototypeOf;function yp(e){return!!e&&!!e[zu]}function yf(e){var t;return e?CF(e)||Array.isArray(e)||!!e[PL]||!!((t=e.constructor)!=null&&t[PL])||Pv(e)||Xb(e):!1}var W1e=Object.prototype.constructor.toString();function CF(e){if(!e||typeof e!="object")return!1;const t=Eg(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===W1e}function f2(e,t){Zb(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Zb(e){const t=e[zu];return t?t.type_:Array.isArray(e)?1:Pv(e)?2:Xb(e)?3:0}function aC(e,t){return Zb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function EF(e,t,r){const n=Zb(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Z1e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pv(e){return e instanceof Map}function Xb(e){return e instanceof Set}function qd(e){return e.copy_||e.base_}function sC(e,t){if(Pv(e))return new Map(e);if(Xb(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=CF(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[zu];let s=Reflect.ownKeys(n);for(let l=0;l<s.length;l++){const f=s[l],a=n[f];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[f]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[f]})}return Object.create(Eg(e),n)}else{const n=Eg(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function aT(e,t=!1){return Yb(e)||yp(e)||!yf(e)||(Zb(e)>1&&Object.defineProperties(e,{set:{value:L1},add:{value:L1},clear:{value:L1},delete:{value:L1}}),Object.freeze(e),t&&Object.values(e).forEach(r=>aT(r,!0))),e}function L1(){Bc(2)}function Yb(e){return Object.isFrozen(e)}var X1e={};function vp(e){const t=X1e[e];return t||Bc(0,e),t}var Xy;function TF(){return Xy}function Y1e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function IL(e,t){t&&(vp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function lC(e){uC(e),e.drafts_.forEach(K1e),e.drafts_=null}function uC(e){e===Xy&&(Xy=e.parent_)}function ML(e){return Xy=Y1e(Xy,e)}function K1e(e){const t=e[zu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function kL(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[zu].modified_&&(lC(t),Bc(4)),yf(e)&&(e=d2(t,e),t.parent_||p2(t,e)),t.patches_&&vp("Patches").generateReplacementPatches_(r[zu].base_,e,t.patches_,t.inversePatches_)):e=d2(t,r,[]),lC(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==SF?e:void 0}function d2(e,t,r){if(Yb(t))return t;const n=t[zu];if(!n)return f2(t,(s,l)=>LL(e,n,t,s,l,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return p2(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let l=s,f=!1;n.type_===3&&(l=new Set(s),s.clear(),f=!0),f2(l,(a,y)=>LL(e,n,s,a,y,r,f)),p2(e,s,!1),r&&e.patches_&&vp("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function LL(e,t,r,n,s,l,f){if(yp(s)){const a=l&&t&&t.type_!==3&&!aC(t.assigned_,n)?l.concat(n):void 0,y=d2(e,s,a);if(EF(r,n,y),yp(y))e.canAutoFreeze_=!1;else return}else f&&r.add(s);if(yf(s)&&!Yb(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;d2(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Pv(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&p2(e,s)}}function p2(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aT(t,r)}function J1e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:TF(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,l=sT;r&&(s=[n],l=Yy);const{revoke:f,proxy:a}=Proxy.revocable(s,l);return n.draft_=a,n.revoke_=f,a}var sT={get(e,t){if(t===zu)return e;const r=qd(e);if(!aC(r,t))return Q1e(e,r,t);const n=r[t];return e.finalized_||!yf(n)?n:n===f5(e.base_,t)?(d5(e),e.copy_[t]=hC(n,e)):n},has(e,t){return t in qd(e)},ownKeys(e){return Reflect.ownKeys(qd(e))},set(e,t,r){const n=AF(qd(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=f5(qd(e),t),l=s==null?void 0:s[zu];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Z1e(r,s)&&(r!==void 0||aC(e.base_,t)))return!0;d5(e),cC(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return f5(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,d5(e),cC(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=qd(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Bc(11)},getPrototypeOf(e){return Eg(e.base_)},setPrototypeOf(){Bc(12)}},Yy={};f2(sT,(e,t)=>{Yy[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Yy.deleteProperty=function(e,t){return Yy.set.call(this,e,t,void 0)};Yy.set=function(e,t,r){return sT.set.call(this,e[0],t,r,e[0])};function f5(e,t){const r=e[zu];return(r?qd(r):e)[t]}function Q1e(e,t,r){var s;const n=AF(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function AF(e,t){if(!(t in e))return;let r=Eg(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Eg(r)}}function cC(e){e.modified_||(e.modified_=!0,e.parent_&&cC(e.parent_))}function d5(e){e.copy_||(e.copy_=sC(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var e_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const l=r;r=t;const f=this;return function(y=l,...v){return f.produce(y,S=>r.call(this,S,...v))}}typeof r!="function"&&Bc(6),n!==void 0&&typeof n!="function"&&Bc(7);let s;if(yf(t)){const l=ML(this),f=hC(t,void 0);let a=!0;try{s=r(f),a=!1}finally{a?lC(l):uC(l)}return IL(l,n),kL(s,l)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===SF&&(s=void 0),this.autoFreeze_&&aT(s,!0),n){const l=[],f=[];vp("Patches").generateReplacementPatches_(t,s,l,f),n(l,f)}return s}else Bc(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(f,...a)=>this.produceWithPatches(f,y=>t(y,...a));let n,s;return[this.produce(t,r,(f,a)=>{n=f,s=a}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){yf(e)||Bc(8),yp(e)&&(e=t_e(e));const t=ML(this),r=hC(e,void 0);return r[zu].isManual_=!0,uC(t),r}finishDraft(e,t){const r=e&&e[zu];(!r||!r.isManual_)&&Bc(9);const{scope_:n}=r;return IL(n,t),kL(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=vp("Patches").applyPatches_;return yp(e)?n(e,t):this.produce(e,s=>n(s,t))}};function hC(e,t){const r=Pv(e)?vp("MapSet").proxyMap_(e,t):Xb(e)?vp("MapSet").proxySet_(e,t):J1e(e,t);return(t?t.scope_:TF()).drafts_.push(r),r}function t_e(e){return yp(e)||Bc(10,e),PF(e)}function PF(e){if(!yf(e)||Yb(e))return e;const t=e[zu];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=sC(e,t.scope_.immer_.useStrictShallowCopy_)}else r=sC(e,!0);return f2(r,(n,s)=>{EF(r,n,PF(s))}),t&&(t.finalized_=!1),r}var r_e=new e_e,IF=r_e.produce;function MF(e){return({dispatch:r,getState:n})=>s=>l=>typeof l=="function"?l(r,n,e):s(l)}var n_e=MF(),i_e=MF,o_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?h2:h2.apply(null,arguments)};function DL(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(uf(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>H1e(n)&&n.type===e,r}var kF=class X0 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,X0.prototype)}static get[Symbol.species](){return X0}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new X0(...t[0].concat(this)):new X0(...t.concat(this))}};function RL(e){return yf(e)?IF(e,()=>{}):e}function D1(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function a_e(e){return typeof e=="boolean"}var s_e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:l=!0}=t??{};let f=new kF;return r&&(a_e(r)?f.push(n_e):f.push(i_e(r.extraArgument))),f},l_e="RTK_autoBatch",NL=e=>t=>{setTimeout(t,e)},u_e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,l=!1,f=!1;const a=new Set,y=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:NL(10):e.type==="callback"?e.queueNotification:NL(e.timeout),v=()=>{f=!1,l&&(l=!1,a.forEach(S=>S()))};return Object.assign({},n,{subscribe(S){const P=()=>s&&S(),D=n.subscribe(P);return a.add(S),()=>{D(),a.delete(S)}},dispatch(S){var P;try{return s=!((P=S==null?void 0:S.meta)!=null&&P[l_e]),l=!s,l&&(f||(f=!0,y(v))),n.dispatch(S)}finally{s=!0}}})},c_e=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new kF(e);return n&&s.push(u_e(typeof n=="object"?n:void 0)),s};function h_e(e){const t=s_e(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:l=void 0,enhancers:f=void 0}=e||{};let a;if(typeof r=="function")a=r;else if(oT(r))a=q1e(r);else throw new Error(uf(1));let y;typeof n=="function"?y=n(t):y=t();let v=h2;s&&(v=o_e({trace:!1,...typeof s=="object"&&s}));const S=G1e(...y),P=c_e(S);let D=typeof f=="function"?f(P):P();const E=v(...D);return wF(a,l,E)}function LF(e){const t={},r=[];let n;const s={addCase(l,f){const a=typeof l=="string"?l:l.type;if(!a)throw new Error(uf(28));if(a in t)throw new Error(uf(29));return t[a]=f,s},addAsyncThunk(l,f){return f.pending&&(t[l.pending.type]=f.pending),f.rejected&&(t[l.rejected.type]=f.rejected),f.fulfilled&&(t[l.fulfilled.type]=f.fulfilled),f.settled&&r.push({matcher:l.settled,reducer:f.settled}),s},addMatcher(l,f){return r.push({matcher:l,reducer:f}),s},addDefaultCase(l){return n=l,s}};return e(s),[t,r,n]}function f_e(e){return typeof e=="function"}function d_e(e,t){let[r,n,s]=LF(t),l;if(f_e(e))l=()=>RL(e());else{const a=RL(e);l=()=>a}function f(a=l(),y){let v=[r[y.type],...n.filter(({matcher:S})=>S(y)).map(({reducer:S})=>S)];return v.filter(S=>!!S).length===0&&(v=[s]),v.reduce((S,P)=>{if(P)if(yp(S)){const E=P(S,y);return E===void 0?S:E}else{if(yf(S))return IF(S,D=>P(D,y));{const D=P(S,y);if(D===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return D}}return S},a)}return f.getInitialState=l,f}var p_e=Symbol.for("rtk-slice-createasyncthunk");function m_e(e,t){return`${e}/${t}`}function g_e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[p_e];return function(s){const{name:l,reducerPath:f=l}=s;if(!l)throw new Error(uf(11));const a=(typeof s.reducers=="function"?s.reducers(__e()):s.reducers)||{},y=Object.keys(a),v={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},S={addCase(K,xe){const de=typeof K=="string"?K:K.type;if(!de)throw new Error(uf(12));if(de in v.sliceCaseReducersByType)throw new Error(uf(13));return v.sliceCaseReducersByType[de]=xe,S},addMatcher(K,xe){return v.sliceMatchers.push({matcher:K,reducer:xe}),S},exposeAction(K,xe){return v.actionCreators[K]=xe,S},exposeCaseReducer(K,xe){return v.sliceCaseReducersByName[K]=xe,S}};y.forEach(K=>{const xe=a[K],de={reducerName:K,type:m_e(l,K),createNotation:typeof s.reducers=="function"};x_e(xe)?S_e(de,xe,S,t):b_e(de,xe,S)});function P(){const[K={},xe=[],de=void 0]=typeof s.extraReducers=="function"?LF(s.extraReducers):[s.extraReducers],be={...K,...v.sliceCaseReducersByType};return d_e(s.initialState,me=>{for(let ve in be)me.addCase(ve,be[ve]);for(let ve of v.sliceMatchers)me.addMatcher(ve.matcher,ve.reducer);for(let ve of xe)me.addMatcher(ve.matcher,ve.reducer);de&&me.addDefaultCase(de)})}const D=K=>K,E=new Map,F=new WeakMap;let z;function W(K,xe){return z||(z=P()),z(K,xe)}function $(){return z||(z=P()),z.getInitialState()}function Y(K,xe=!1){function de(me){let ve=me[K];return typeof ve>"u"&&xe&&(ve=D1(F,de,$)),ve}function be(me=D){const ve=D1(E,xe,()=>new WeakMap);return D1(ve,me,()=>{const Re={};for(const[le,G]of Object.entries(s.selectors??{}))Re[le]=y_e(G,me,()=>D1(F,me,$),xe);return Re})}return{reducerPath:K,getSelectors:be,get selectors(){return be(de)},selectSlice:de}}const Q={name:l,reducer:W,actions:v.actionCreators,caseReducers:v.sliceCaseReducersByName,getInitialState:$,...Y(f),injectInto(K,{reducerPath:xe,...de}={}){const be=xe??f;return K.inject({reducerPath:be,reducer:W},de),{...Q,...Y(be,!0)}}};return Q}}function y_e(e,t,r,n){function s(l,...f){let a=t(l);return typeof a>"u"&&n&&(a=r()),e(a,...f)}return s.unwrapped=e,s}var v_e=g_e();function __e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function b_e({type:e,reducerName:t,createNotation:r},n,s){let l,f;if("reducer"in n){if(r&&!w_e(n))throw new Error(uf(17));l=n.reducer,f=n.prepare}else l=n;s.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,f?DL(e,f):DL(e))}function x_e(e){return e._reducerDefinitionType==="asyncThunk"}function w_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function S_e({type:e,reducerName:t},r,n,s){if(!s)throw new Error(uf(18));const{payloadCreator:l,fulfilled:f,pending:a,rejected:y,settled:v,options:S}=r,P=s(e,l,S);n.exposeAction(t,P),f&&n.addCase(P.fulfilled,f),a&&n.addCase(P.pending,a),y&&n.addCase(P.rejected,y),v&&n.addMatcher(P.settled,v),n.exposeCaseReducer(t,{fulfilled:f||R1,pending:a||R1,rejected:y||R1,settled:v||R1})}function R1(){}function uf(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wa=function(){return Wa=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},Wa.apply(this,arguments)};function C_e(e,t,r,n){function s(l){return l instanceof r?l:new r(function(f){f(l)})}return new(r||(r=Promise))(function(l,f){function a(S){try{v(n.next(S))}catch(P){f(P)}}function y(S){try{v(n.throw(S))}catch(P){f(P)}}function v(S){S.done?l(S.value):s(S.value).then(a,y)}v((n=n.apply(e,[])).next())})}function E_e(e,t){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,s,l,f=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return f.next=a(0),f.throw=a(1),f.return=a(2),typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function a(v){return function(S){return y([v,S])}}function y(v){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,v[0]&&(r=0)),r;)try{if(n=1,s&&(l=v[0]&2?s.return:v[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,v[1])).done)return l;switch(s=0,l&&(v=[v[0]&2,l.value]),v[0]){case 0:case 1:l=v;break;case 4:return r.label++,{value:v[1],done:!1};case 5:r.label++,s=v[1],v=[0];continue;case 7:v=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(v[0]===6||v[0]===2)){r=0;continue}if(v[0]===3&&(!l||v[1]>l[0]&&v[1]<l[3])){r.label=v[1];break}if(v[0]===6&&r.label<l[1]){r.label=l[1],l=v;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(v);break}l[2]&&r.ops.pop(),r.trys.pop();continue}v=t.call(e,r)}catch(S){v=[6,S],s=0}finally{n=l=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}function Yf(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,l;n<s;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return e.concat(l||Array.prototype.slice.call(t))}var T_e=function(){function e(t){var r=this,n=this;this.registeredElements={},this.baseLayers=[],this.firstSymbolLayer=void 0,this.eventHandlers={layerchange:[],viewportchange:[],addsource:[],addlayer:[]},this.wrapper={on:function(y,v,S,P){if(n.eventHandlers[y]){typeof S=="string"&&(P=S,S={}),n.eventHandlers[y].push({handler:v,options:S});var D=[y,v];P&&typeof P=="string"&&(n.initRegisteredElements(P),n.registeredElements[P].wrapperEvents.push(D))}},off:function(y,v){n.eventHandlers[y]&&(n.eventHandlers[y]=n.eventHandlers[y].filter(function(S){return Object.is(S.handler,v)?!1:S}))},fire:function(y,v){if(n.eventHandlers[y]){var S=v||window,P=new Event(y);n.eventHandlers[y].forEach(function(D){D.handler.call(S,P,n,v)})}},layerState:[],layerStateString:"",oldLayerStateStrings:{},buildLayerObject:function(y){if(y)return{id:y.id,type:y.type,visible:y.visibility!=="none",baseLayer:n.baseLayers.indexOf(y.id)!==-1}},buildLayerObjects:function(){return n.map.style._order.map(function(y){return n.wrapper.buildLayerObject(n.map.style._layers[y])}).filter(function(y){return typeof y<"u"})},refreshLayerState:function(){n.wrapper.layerState=n.wrapper.buildLayerObjects(),JSON.stringify(n.wrapper.layerState)!==n.wrapper.layerStateString&&(n.wrapper.fire("layerchange"),n.wrapper.layerStateString=JSON.stringify(n.wrapper.layerState))},viewportState:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0},viewportStateString:"{}",oldViewportStateString:"{}",getViewport:function(){return typeof n.map.getCenter=="function"?{center:function(y){var v=y.lng,S=y.lat;return{lng:v,lat:S}}(n.map.getCenter()),zoom:n.map.getZoom(),bearing:n.map.getBearing(),pitch:n.map.getPitch()}:{center:{lng:0,lat:0},zoom:0,bearing:0,pitch:0}},refreshViewport:function(){n.wrapper.viewportState=n.wrapper.getViewport()}},this.cancelled=!1,this.initRegisteredElements=function(y,v){(typeof n.registeredElements[y]>"u"||typeof v<"u"&&v)&&(n.registeredElements[y]={layers:[],sources:[],images:[],events:[],controls:[],wrapperEvents:[]})},this.addLayer=function(y,v,S){return n.map.style&&(S&&typeof S=="string"&&typeof y.id<"u"&&(n.initRegisteredElements(S),n.registeredElements[S].layers.push(y.id),y!=null&&y.source&&typeof(y==null?void 0:y.source)!="string"&&n.registeredElements[S].sources.push(y.id)),n.map.addLayer(y,v),n.wrapper.fire("addlayer",{layer_id:y.id})),r},this.addSource=function(y,v,S){return n.map.style&&(S&&typeof S=="string"&&typeof y<"u"&&(n.initRegisteredElements(S),n.registeredElements[S].sources.push(y)),n.map.addSource(y,v),n.wrapper.fire("addsource",{source_id:y})),r},this.addImage=function(y,v,S,P){return n.map.style?typeof S=="string"&&typeof P>"u"?n.addImage(y,v,void 0,S):(P&&typeof P=="string"&&typeof y<"u"&&(n.initRegisteredElements(P),n.registeredElements[P].images.push(y)),n.map.addImage(y,v,S),r):r},this.on=function(y,v,S,P){var D;if(typeof S=="string"&&typeof v=="function")return n.on.call(n,y,void 0,v,S);var E=[y,v,S];return v||(E=[y,S]),P&&typeof P=="string"&&(n.initRegisteredElements(P),n.registeredElements[P].events.push(E)),(D=n.map).on.apply(D,E),r},this.addControl=function(y,v,S){return S&&typeof S=="string"&&(n.initRegisteredElements(S),n.registeredElements[S].controls.push(y)),n.map.addControl(y,v),r},this.cleanup=function(y){n.map.style&&typeof n.registeredElements[y]<"u"&&(n.registeredElements[y].layers.forEach(function(v){n.map.style.getLayer(v)&&n.map.style.removeLayer(v)}),n.registeredElements[y].sources.forEach(function(v){n.map.style.getSource(v)&&n.map.style.removeSource(v)}),n.registeredElements[y].images.forEach(function(v){n.map.hasImage(v)&&n.map.style.removeImage(v)}),n.registeredElements[y].events.forEach(function(v){var S;(S=n.map).off.apply(S,v)}),n.registeredElements[y].controls.forEach(function(v){n.map.removeControl(v)}),n.registeredElements[y].wrapperEvents.forEach(function(v){var S;(S=n.wrapper).off.apply(S,v)}),n.initRegisteredElements(y,!0))};var s=["moveLayer","removeLayer","removeSource","setPaintProperty","setLayoutProperty"];s.forEach(function(y){r[y]=function(){for(var v,S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];return n.map&&n.map.style&&typeof n.map.style[y]=="function"&&(v=n.map.style)[y].apply(v,S),n.map._update?n.map._update(!0):void 0}});var l=["getLayer","getSource","listImages","getPaintProperty","getLayoutProperty","removeImage"];l.forEach(function(y){r[y]=function(){for(var v,S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];return n.map&&n.map.style?(v=n.map.style)[y].apply(v,S):!1}}),this.addNativeMaplibreFunctionsAndProps=function(){Object.getOwnPropertyNames(Object.getPrototypeOf(r.map)).forEach(function(y){typeof r[y]>"u"&&(r[y]=function(){for(var v,S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];return(v=n.map)[y].apply(v,S)})}),Object.keys(r.map).forEach(function(y){typeof r[y]>"u"&&(r[y]=n.map[y])})};var f=["getZoom","setZoom","getCenter","setCenter","getBearing","setBearing","getPitch","setPitch","jumpTo","flyTo","panTo","panBy","panBy","zoomTo","zoomIn","zoomOut","getPadding","setPadding","rotateTo","resetNorth","resetNorthPitch","snapToNorth","cameraForBounds","fitBounds","fitScreenCoordinates","getFreeCameraOptions","setFreeCameraOptions","easeTo","stop"];f.forEach(function(y){r[y]=function(){for(var v,S=[],P=0;P<arguments.length;P++)S[P]=arguments[P];if(typeof n.map[y]=="function")return(v=n.map[y]).call.apply(v,Yf([n.map],S,!1))}});var a=function(){return C_e(r,void 0,void 0,function(){return E_e(this,function(y){switch(y.label){case 0:return typeof t.mapOptions.style=="string"&&t.mapOptions.style.indexOf("mapbox://")===-1?[4,fetch(t.mapOptions.style).then(function(v){if(v.ok)return v.json();throw new Error("error loading map style.json")}).then(function(v){v.layers.forEach(function(S){n.baseLayers.push(S.id),!n.firstSymbolLayer&&S.type==="symbol"&&(n.firstSymbolLayer=S.id)}),n.styleJson=v,t.mapOptions.style=v}).catch(function(v){console.log(v)})]:[3,2];case 1:y.sent(),y.label=2;case 2:return n.map=new t$.Map(t.mapOptions),n.addNativeMaplibreFunctionsAndProps(),n.wrapper.refreshViewport(),n.wrapper.fire("viewportchange"),n.map.on("load",function(){n.addNativeMaplibreFunctionsAndProps()}),n.map.on("move",function(){n.wrapper.viewportState=n.wrapper.getViewport(),n.wrapper.fire("viewportchange")}),n.map.on("idle",function(){n.wrapper.refreshLayerState()}),n.map.on("data",function(){n.wrapper.refreshLayerState()}),typeof t.onReady=="function"&&t.onReady(n.map,n),[2]}})})};a()}return e}(),A_e=kg({palette:{mode:"light"}});kg({palette:{mode:"dark"}});var P_e=function(e){return Wa(Wa({},A_e),{palette:Wa({mode:e},{primary:{main:"#009EE0"},secondary:{main:"#747577"},text:{primary:"#000",contrast:"#fff"},topToolbar:{barColor:"#fff"},navigation:{buttonColor:"#747577",navColor:"#fff",navHover:"#f5f5f5"},GPS:{GPSActiveColor:"#009EE0",GPSInactiveColor:"#747577",GPSActiveBackgroundColor:"#fff"},compass:{compColor:"#fff",compHover:"#f5f5f5",compStroke:"#009ee0",compNorth:"#cf003f",compSouth:"#d3dcf0"}})})},I_e=function(e){var t,r=P_e(["light","dark"].includes(e)?e:"light");return kg(r,{components:{MuiTypography:{styleOverrides:{root:{}}},MuiAppBar:{styleOverrides:{root:{backgroundColor:r.palette.topToolbar.barColor}}},MuiButton:{variants:[{props:{variant:"navtools"},style:(t={minWidth:"20px",minHeight:"20px",fontWeight:600},t[r.breakpoints.down("md")]={width:"50px",height:"50px",fontSize:"1.4em"},t[r.breakpoints.up("md")]={width:"30px",height:"30px",fontSize:"1.2em"},t.color=r.palette.text.primary,t.backgroundColor=r.palette.navigation.navColor,t.borderRadius="23%",t.margin="0.15px",t.marginTop="4px",t[":hover"]={backgroundColor:r.palette.navigation.navHover},t)}]},MuiListItemText:{styleOverrides:{primary:function(n){var s=n.ownerState;return(s==null?void 0:s.variant)==="layerlist"?{fontSize:"0.9rem"}:{}},secondary:function(n){var s=n.ownerState;return(s==null?void 0:s.variant)==="layerlist"?{fontSize:"0.7rem"}:{}}}}}})},M_e={sourceOptions_tiles:["https://wms.wheregroup.com/tileserver/tile/world-0-14/{z}/{x}/{y}.pbf"]},k_e=Oe.createContext({});function L_e(e){var t=Oe.useState([]),r=t[0],n=t[1],s=Oe.useState([]),l=s[0],f=s[1],a=Oe.useState([]),y=a[0],v=a[1],S=Oe.useState(M_e.sourceOptions_tiles[0]),P=S[0],D=S[1],E=vt.useMemo(function(){return{layerId:"openmaptiles",sourceOptions:{type:"vector",tiles:[P]}}},[P]),F=function(Q){if(Q){var K=[],xe=[];Q.layers.forEach(function(de,be){de.type==="symbol"?xe.push(de):(be===0&&(de.id=Q.name||"background"),K.push(de))}),f(K),v(xe)}};vt.useEffect(function(){if(r.filter(function(K){return!(K!=null&&K.id)}).length){var Q=Yf([],r,!0);Q.forEach(function(K){K!=null&&K.id||(K.id=RE())}),n(Q)}},[r]);var z=vt.useCallback(function(Q,K){var xe,de=(xe=r==null?void 0:r.filter)===null||xe===void 0?void 0:xe.call(r,function(le){return le.id===Q});if(de.length>0){var be=Yf([],r,!0),me=de[0],ve=r.indexOf(me),Re=K(ve);Re>=0&&Re<=r.length-1&&(be.splice(ve,1),be.splice(Re,0,me),n(be))}},[r]),W=vt.useCallback(function(Q){z(Q,function(K){return K+1})},[z]),$=vt.useCallback(function(Q){z(Q,function(K){return K-1})},[z]),Y={layers:r,setLayers:n,backgroundLayers:l,setBackgroundLayers:f,symbolLayers:y,setSymbolLayers:v,updateStyle:F,vtLayerConfig:E,tileUrl:P,setTileUrl:D,moveUp:$,moveDown:W,moveLayer:z};return Oe.createElement(k_e.Provider,{value:Y},e.children)}var Kb=Oe.createContext({}),D_e=function(e){var t=e.children,r=vt.useState(void 0),n=r[0],s=r[1],l=vt.useState([]),f=l[0],a=l[1],y=vt.useRef([]),v=vt.useRef({}),S=function(E){if(E){typeof v.current[E]<"u"&&delete v.current[E];var F=y.current.indexOf(E);F>-1&&y.current.splice(F,1),a(Yf([],y.current,!0)),y.current.length===0&&n&&s(void 0)}else S("anonymous_map")},P=function(E){if(s(E),f.length===0){var F="anonymous_map";a(Yf(Yf([],f,!0),[F],!1)),v.current[F]=E}},D={map:n,setMap:P,maps:v.current,mapIds:f,registerMap:function(E,F){E&&F&&(v.current[E]=F,y.current.push(E),a(Yf([],y.current,!0)),(!n||(n==null?void 0:n.cancelled)===!0)&&s(F))},removeMap:S,mapExists:function(E){return E&&Object.keys(v.current).indexOf(E)===-1?!1:!(!E&&!n)},getMap:function(E){return E&&f.indexOf(E)!==-1?v.current[E]:!E&&n?n:null}};return Oe.createElement(Kb.Provider,{value:D},Oe.createElement(L_e,null,Oe.createElement(BV,{theme:I_e("light")},t)))},l_={mapId:void 0,options:{center:{lng:8.607,lat:53.1409349},zoom:11,container:"",style:{version:8,name:"blank",center:[0,0],zoom:0,sources:{},sprite:"https://wms.wheregroup.com/tileserver/sprites/osm-bright",glyphs:"https://wms.wheregroup.com/tileserver/fonts/{fontstack}/{range}.pbf",layers:[{id:"_background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]}}},DF=function(e){var t,r,n=vt.useRef(null),s=vt.useRef(null),l=vt.useContext(Kb),f=vt.useRef(e.mapId),a=vt.useRef(!1),y=vt.useRef((t=e.options)===null||t===void 0?void 0:t.style);return vt.useEffect(function(){var v=f.current;return function(){var S,P;a.current=!1,l.removeMap(v),n.current&&((P=(S=n.current.map)===null||S===void 0?void 0:S.remove)===null||P===void 0||P.call(S),n.current.cancelled=!0,n.current=null)}},[]),vt.useEffect(function(){var v,S;a.current||s.current&&(a.current=!0,n.current=new T_e({mapOptions:Wa(Wa(Wa({style:""},e.options),!((v=e==null?void 0:e.options)===null||v===void 0)&&v.style?{}:{style:(S=l_==null?void 0:l_.options)===null||S===void 0?void 0:S.style}),{container:s.current}),onReady:function(P,D){P.once("load",function(){D!=null&&D.cancelled?P.remove():(window._map=P,e.mapId?l.registerMap(e.mapId,D):l.setMap(D))})}}))},[e.options,e.mapId]),vt.useEffect(function(){var v,S;!((v=n.current)===null||v===void 0)&&v.map&&(!((S=e==null?void 0:e.options)===null||S===void 0)&&S.style)&&y.current!==e.options.style&&(y.current=e.options.style,n.current.map.setStyle(e.options.style))},[(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.style]),Oe.createElement("div",{ref:s,className:"mapContainer",style:e.style})};DF.defaultProps=l_;function RF(e){var t=vt.useContext(Kb),r=vt.useRef(!1),n=vt.useRef(null),s=vt.useState(),l=s[0],f=s[1],a=vt.useRef(void 0),y=vt.useState([]),v=y[0],S=y[1],P=vt.useRef(""),D=vt.useRef(RE()),E=vt.useCallback(function(z){var W,$;return!(!((W=e==null?void 0:e.filter)===null||W===void 0)&&W.includeBaseLayers)&&(z!=null&&z.baseLayer)?!1:typeof(($=e.filter)===null||$===void 0?void 0:$.matchLayerIds)<"u"?e.filter.matchLayerIds instanceof RegExp?e.filter.matchLayerIds.test(z.id):z.id.includes(e.filter.matchLayerIds):!0},[e.filter]),F=vt.useCallback(function(){if(n.current){var z=n.current.wrapper.layerState.filter(E),W=JSON.stringify(z);P.current!==W&&(P.current=W,S(z))}},[E]);return vt.useEffect(function(){var z=D.current;return function(){n.current&&(n.current.cleanup(z),n.current=null),r.current=!1}},[]),vt.useEffect(function(){var z,W,$,Y;if(!(!t.mapExists(e.mapId)||r.current)){if(r.current=!0,n.current=t.getMap(e.mapId),!n.current){r.current=!1;return}!((z=e==null?void 0:e.watch)===null||z===void 0)&&z.viewport&&(f(n.current.wrapper.viewportState),n.current.wrapper.on("viewportchange",function(){var Q,K;a.current!==((Q=n.current)===null||Q===void 0?void 0:Q.wrapper.viewportStateString)&&f((K=n.current)===null||K===void 0?void 0:K.wrapper.viewportState)},D.current)),!((W=e==null?void 0:e.watch)===null||W===void 0)&&W.layers&&(F(),n.current.wrapper.on("layerchange",F,{includeBaseLayers:($=e==null?void 0:e.filter)===null||$===void 0?void 0:$.includeBaseLayers,matchLayerIds:(Y=e==null?void 0:e.filter)===null||Y===void 0?void 0:Y.matchLayerIds},D.current))}},[t.mapIds,t,e.mapId,F,e]),{layers:v,viewport:l}}RF.defaultProps={mapId:void 0,watch:{layers:!0,sources:!1,viewport:!1},filter:{includeBaseLayers:!1}};function NF(e){var t=vt.useContext(Kb),r=vt.useState({map:void 0,ready:!1}),n=r[0],s=r[1],l=RF({mapId:e==null?void 0:e.mapId,watch:{viewport:!1,layers:!!(e!=null&&e.waitForLayer),sources:!1},filter:{includeBaseLayers:!0}}),f=vt.useRef(null),a=vt.useRef(RE()),y=function(){f.current&&f.current.cleanup(a.current)};return vt.useEffect(function(){return function(){y(),f.current=null}},[]),vt.useEffect(function(){var v;if(f.current&&f.current.cancelled===!0&&(f.current=null,s({map:void 0,ready:!1})),!(f.current||!t.mapExists(e==null?void 0:e.mapId))){if(e!=null&&e.waitForLayer){var S=!1;if((v=l==null?void 0:l.layers)===null||v===void 0||v.forEach(function(P){P.id===(e==null?void 0:e.waitForLayer)&&(S=!0)}),!S)return}f.current=t.getMap(e==null?void 0:e.mapId),s({map:f.current,ready:!0})}},[t.mapIds,l.layers,t,e]),{map:n.map,mapIsReady:n.ready,componentId:a.current,layers:l.layers,cleanup:y}}Oe.createContext({});Ln(hb)({marginTop:"15px"});Mg(zE)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Mg($E)({minWidth:"30px"});Mg(bd)({marginRight:"0px",padding:"0px"});Mg(WR)({padding:0,marginRight:"5px"});Mg(mU)(function(e){var t=e.open;return{display:t?"block":"none"}});Mg(hb)({marginLeft:"50px"});Ln(qR)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Ln(wp)({marginLeft:"61px"});Ln(zE)(function(e){return{paddingRight:e?"56px":0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"}});Ln(bd)({padding:"4px",marginTop:"-3px"});Ln($E)({minWidth:"30px"});Ln(WR)({padding:0});Ln(bd)({padding:"4px",marginTop:"-3px"});Ln(bd)({marginLeft:"20px"});Oe.createElement(Oe.Fragment,null);Ln("div")(function(){return{display:"flex",alignItems:"center"}});Ln(wp)(function(e){var t=e.theme;return{width:30,height:6,backgroundColor:t.palette.text.primary,borderRadius:3,position:"absolute",top:8,left:"calc(50% - 15px)"}});Ln(wp)(function(e){var t,r=e.theme;return t={zIndex:1e3,cursor:"pointer",transform:"scale(1)"},t[r.breakpoints.down("md")]={transform:"scale(1.6)"},t});Ln(wp)(function(e){var t,r=e.theme;return t={position:"absolute",right:"-10px",top:"-52px",width:"52px",height:"52px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},t[r.breakpoints.down("md")]={right:"0px",top:"-52px"},t.circle={fill:r.palette.compass.compColor,stroke:r.palette.compass.compStroke},t.path={fill:r.palette.compass.compStroke},t["&:hover circle"]={fill:r.palette.compass.compHover},t});Ln(wp)(function(e){var t=e.theme;return{display:"flex",flexDirection:"row","path:nth-of-type(2)":{fill:t.palette.compass.compSouth},"path:nth-of-type(1)":{fill:t.palette.compass.compNorth}}});Ln(Jq)(function(e){var t=e.theme;return{zIndex:1e3,color:t.palette.navigation.buttonColor,transform:"scale(1)"}});function cy(e){"@babel/helpers - typeof";return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}(function(){var e=/\s*/g,t=/^\s*|\s*$/g,r=/\s+/;function n(de){if(!de||!de.length)return 0;for(var be=0,me=0;be<de.length;be++)me=(me<<5)-me+de.charCodeAt(be)|0;return me}function s(de,be){return de.getElementsByTagName(be)}function l(de,be){return de.getAttribute(be)}function f(de,be){return parseFloat(l(de,be))}function a(de,be){var me=s(de,be);return me.length?me[0]:null}function y(de){return de.normalize&&de.normalize(),de}function v(de){for(var be=0,me=[];be<de.length;be++)me[be]=parseFloat(de[be]);return me}function S(de){return de&&y(de),de&&de.textContent||""}function P(de,be){var me={},ve,Re;for(Re=0;Re<be.length;Re++)ve=a(de,be[Re]),ve&&(me[be[Re]]=S(ve));return me}function D(de,be){for(var me in be)de[me]=be[me]}function E(de){return v(de.replace(e,"").split(","))}function F(de){for(var be=de.replace(t,"").split(r),me=[],ve=0;ve<be.length;ve++)me.push(E(be[ve]));return me}function z(de){var be=[f(de,"lon"),f(de,"lat")],me=a(de,"ele"),ve=a(de,"gpxtpx:hr")||a(de,"hr"),Re=a(de,"time"),le;return me&&(le=parseFloat(S(me)),isNaN(le)||be.push(le)),{coordinates:be,time:Re?S(Re):null,heartRate:ve?parseFloat(S(ve)):null}}function W(){return{type:"FeatureCollection",features:[]}}var $;if(typeof XMLSerializer<"u")$=new XMLSerializer;else{var Y=(typeof process>"u"?"undefined":cy(process))==="object"&&!process.browser,Q=(typeof Titanium>"u"?"undefined":cy(Titanium))==="object";if((typeof exports>"u"?"undefined":cy(exports))==="object"&&(Y||Q))$=vme;else throw new Error("Unable to initialize serializer")}function K(de){return de.xml!==void 0?de.xml:$.serializeToString(de)}var xe={kml:function(be){for(var me=W(),ve={},Re={},le={},G=["Polygon","LineString","Point","Track","gx:Track"],Ae=s(be,"Placemark"),we=s(be,"Style"),lt=s(be,"StyleMap"),pt=0;pt<we.length;pt++){var At=n(K(we[pt])).toString(16);ve["#"+l(we[pt],"id")]=At,Re[At]=we[pt]}for(var Ze=0;Ze<lt.length;Ze++){ve["#"+l(lt[Ze],"id")]=n(K(lt[Ze])).toString(16);for(var tt=s(lt[Ze],"Pair"),Ot={},St=0;St<tt.length;St++)Ot[S(a(tt[St],"key"))]=S(a(tt[St],"styleUrl"));le["#"+l(lt[Ze],"id")]=Ot}for(var ne=0;ne<Ae.length;ne++)me.features=me.features.concat(gt(Ae[ne]));function Ee(bt){var ft,Ct;return bt=bt||"",bt.substr(0,1)==="#"&&(bt=bt.substr(1)),(bt.length===6||bt.length===3)&&(ft=bt),bt.length===8&&(Ct=parseInt(bt.substr(0,2),16)/255,ft="#"+bt.substr(6,2)+bt.substr(4,2)+bt.substr(2,2)),[ft,isNaN(Ct)?void 0:Ct]}function Ne(bt){return v(bt.split(" "))}function qe(bt){var ft=s(bt,"coord"),Ct=[],Ut=[];ft.length===0&&(ft=s(bt,"gx:coord"));for(var gr=0;gr<ft.length;gr++)Ct.push(Ne(S(ft[gr])));for(var rr=s(bt,"when"),It=0;It<rr.length;It++)Ut.push(S(rr[It]));return{coords:Ct,times:Ut}}function Je(bt){var ft,Ct,Ut,gr,rr,It=[],Ue=[];if(a(bt,"MultiGeometry"))return Je(a(bt,"MultiGeometry"));if(a(bt,"MultiTrack"))return Je(a(bt,"MultiTrack"));if(a(bt,"gx:MultiTrack"))return Je(a(bt,"gx:MultiTrack"));for(Ut=0;Ut<G.length;Ut++)if(Ct=s(bt,G[Ut]),Ct){for(gr=0;gr<Ct.length;gr++)if(ft=Ct[gr],G[Ut]==="Point")It.push({type:"Point",coordinates:E(S(a(ft,"coordinates")))});else if(G[Ut]==="LineString")It.push({type:"LineString",coordinates:F(S(a(ft,"coordinates")))});else if(G[Ut]==="Polygon"){var Lr=s(ft,"LinearRing"),Nr=[];for(rr=0;rr<Lr.length;rr++)Nr.push(F(S(a(Lr[rr],"coordinates"))));It.push({type:"Polygon",coordinates:Nr})}else if(G[Ut]==="Track"||G[Ut]==="gx:Track"){var Pr=qe(ft);It.push({type:"LineString",coordinates:Pr.coords}),Pr.times.length&&Ue.push(Pr.times)}}return{geoms:It,coordTimes:Ue}}function gt(bt){var ft=Je(bt),Ct,Ut={},gr=S(a(bt,"name")),rr=S(a(bt,"address")),It=S(a(bt,"styleUrl")),Ue=S(a(bt,"description")),Lr=a(bt,"TimeSpan"),Nr=a(bt,"TimeStamp"),Pr=a(bt,"ExtendedData"),Ht=a(bt,"LineStyle"),Er=a(bt,"PolyStyle"),vr=a(bt,"visibility");if(!ft.geoms.length)return[];if(gr&&(Ut.name=gr),rr&&(Ut.address=rr),It){It[0]!=="#"&&(It="#"+It),Ut.styleUrl=It,ve[It]&&(Ut.styleHash=ve[It]),le[It]&&(Ut.styleMapHash=le[It],Ut.styleHash=ve[le[It].normal]);var dr=Re[Ut.styleHash];if(dr){Ht||(Ht=a(dr,"LineStyle")),Er||(Er=a(dr,"PolyStyle"));var qr=a(dr,"IconStyle");if(qr){var En=a(qr,"Icon");if(En){var cn=S(a(En,"href"));cn&&(Ut.icon=cn)}}}}if(Ue&&(Ut.description=Ue),Lr){var Jr=S(a(Lr,"begin")),An=S(a(Lr,"end"));Ut.timespan={begin:Jr,end:An}}if(Nr&&(Ut.timestamp=S(a(Nr,"when"))),Ht){var en=Ee(S(a(Ht,"color"))),Ur=en[0],Br=en[1],_r=parseFloat(S(a(Ht,"width")));Ur&&(Ut.stroke=Ur),isNaN(Br)||(Ut["stroke-opacity"]=Br),isNaN(_r)||(Ut["stroke-width"]=_r)}if(Er){var ot=Ee(S(a(Er,"color"))),ae=ot[0],oe=ot[1],ye=S(a(Er,"fill")),De=S(a(Er,"outline"));ae&&(Ut.fill=ae),isNaN(oe)||(Ut["fill-opacity"]=oe),ye&&(Ut["fill-opacity"]=ye==="1"?Ut["fill-opacity"]||1:0),De&&(Ut["stroke-opacity"]=De==="1"?Ut["stroke-opacity"]||1:0)}if(Pr){var Ve=s(Pr,"Data"),rt=s(Pr,"SimpleData");for(Ct=0;Ct<Ve.length;Ct++)Ut[Ve[Ct].getAttribute("name")]=S(a(Ve[Ct],"value"));for(Ct=0;Ct<rt.length;Ct++)Ut[rt[Ct].getAttribute("name")]=S(rt[Ct])}vr&&(Ut.visibility=S(vr)),ft.coordTimes.length&&(Ut.coordTimes=ft.coordTimes.length===1?ft.coordTimes[0]:ft.coordTimes);var ht={type:"Feature",geometry:ft.geoms.length===1?ft.geoms[0]:{type:"GeometryCollection",geometries:ft.geoms},properties:Ut};return l(bt,"id")&&(ht.id=l(bt,"id")),[ht]}return me},gpx:function(be){var me,ve=s(be,"trk"),Re=s(be,"rte"),le=s(be,"wpt"),G=W(),Ae;for(me=0;me<ve.length;me++)Ae=pt(ve[me]),Ae&&G.features.push(Ae);for(me=0;me<Re.length;me++)Ae=At(Re[me]),Ae&&G.features.push(Ae);for(me=0;me<le.length;me++)G.features.push(Ze(le[me]));function we(St,ne){for(var Ee=0;Ee<ne;Ee++)St.push(null);return St}function lt(St,ne){var Ee=s(St,ne),Ne=[],qe=[],Je=[],gt=Ee.length;if(gt<2)return{};for(var bt=0;bt<gt;bt++){var ft=z(Ee[bt]);Ne.push(ft.coordinates),ft.time&&qe.push(ft.time),(ft.heartRate||Je.length)&&(Je.length||we(Je,bt),Je.push(ft.heartRate||null))}return{line:Ne,times:qe,heartRates:Je}}function pt(St){for(var ne=s(St,"trkseg"),Ee=[],Ne=[],qe=[],Je,gt=0;gt<ne.length;gt++)if(Je=lt(ne[gt],"trkpt"),Je&&(Je.line&&Ee.push(Je.line),Je.times&&Je.times.length&&Ne.push(Je.times),qe.length||Je.heartRates&&Je.heartRates.length)){if(!qe.length)for(var bt=0;bt<gt;bt++)qe.push(we([],Ee[bt].length));Je.heartRates&&Je.heartRates.length?qe.push(Je.heartRates):qe.push(we([],Je.line.length||0))}if(Ee.length!==0){var ft=Ot(St);return D(ft,tt(a(St,"extensions"))),Ne.length&&(ft.coordTimes=Ee.length===1?Ne[0]:Ne),qe.length&&(ft.heartRates=Ee.length===1?qe[0]:qe),{type:"Feature",properties:ft,geometry:{type:Ee.length===1?"LineString":"MultiLineString",coordinates:Ee.length===1?Ee[0]:Ee}}}}function At(St){var ne=lt(St,"rtept");if(ne.line){var Ee=Ot(St);D(Ee,tt(a(St,"extensions")));var Ne={type:"Feature",properties:Ee,geometry:{type:"LineString",coordinates:ne.line}};return Ne}}function Ze(St){var ne=Ot(St);return D(ne,P(St,["sym"])),{type:"Feature",properties:ne,geometry:{type:"Point",coordinates:z(St).coordinates}}}function tt(St){var ne={};if(St){var Ee=a(St,"line");if(Ee){var Ne=S(a(Ee,"color")),qe=parseFloat(S(a(Ee,"opacity"))),Je=parseFloat(S(a(Ee,"width")));Ne&&(ne.stroke=Ne),isNaN(qe)||(ne["stroke-opacity"]=qe),isNaN(Je)||(ne["stroke-width"]=Je*96/25.4)}}return ne}function Ot(St){var ne=P(St,["name","cmt","desc","type","time","keywords"]),Ee=s(St,"link");Ee.length&&(ne.links=[]);for(var Ne=0,qe;Ne<Ee.length;Ne++)qe={href:l(Ee[Ne],"href")},D(qe,P(Ee[Ne],["text","type"])),ne.links.push(qe);return ne}return G}};return xe})();var R_e=Oe.createContext({});R_e.Provider;var N_e=function(){var e=Object.fromEntries(new URLSearchParams(window.location.search));return e.layers=JSON.parse(e!=null&&e.layers?e.layers:"[]"),e};N_e();var OF={visible:!0,urlParameters:{bbox:"{bbox-epsg-3857}",format:"image/png",service:"WMS",version:"1.1.1",request:"GetMap",srs:"EPSG:3857",width:256,height:256,styles:""},attribution:"",sourceOptions:{minZoom:0,maxZoom:20},layerOptions:{minZoom:0,maxZoom:20}},FF=function(e){var t=NF({mapId:e.mapId,waitForLayer:e.insertBeforeLayer}),r=vt.useRef(!1),n=vt.useRef(e.layerId||"MlWmsLayer-"+t.componentId),s=vt.useMemo(function(){var f,a=e.url;e.url.indexOf("?")!==-1&&(f=e.url.split("?"),a=f[0]);var y=new URLSearchParams(f==null?void 0:f[1]),v=Wa(Wa(Wa({},OF.urlParameters),Object.fromEntries(y)),e.urlParameters),S=new URLSearchParams(v),P=decodeURIComponent(S.toString())+"".replace(/%2F/g,"/").replace(/%3A/g,":");return a+"?"+P},[e.urlParameters,e.url]),l=vt.useCallback(function(){t.map&&(r.current=!0,t.map.map.getLayer(n.current)&&t.cleanup(),t.map.addSource(n.current,Wa({type:"raster",tiles:[s],tileSize:256,attribution:e.attribution},e.sourceOptions),t.componentId),t.map.addLayer(Wa({id:n.current,type:"raster",source:n.current},e.layerOptions),e.insertBeforeLayer,t.componentId),t.map.on("styledata",function(){var f;r.current&&!(!((f=t.map)===null||f===void 0)&&f.map.getLayer(n.current))&&(console.log("Recreate Layer "+n.current),l())},t.componentId),e.visible||t.map.map.setLayoutProperty(n.current,"visibility","none"))},[t.map,e,s]);return vt.useEffect(function(){r.current||l()},[l]),vt.useEffect(function(){var f,a,y,v;if(!(!t.map||!(!((v=(y=(a=(f=t.map)===null||f===void 0?void 0:f.map)===null||a===void 0?void 0:a.style)===null||y===void 0?void 0:y.sourceCaches)===null||v===void 0)&&v[n.current])||!r.current)){var S=t.map.map.getSource(n.current);S.tiles=[s],t.map.map.style.sourceCaches[n.current].clearTiles(),t.map.map.style.sourceCaches[n.current].update(t.map.map.transform),t.map.map.triggerRepaint()}},[t.map,s]),vt.useEffect(function(){!t.map||!r.current||(e.visible?t.map.map.setLayoutProperty(n.current,"visibility","visible"):t.map.map.setLayoutProperty(n.current,"visibility","none"))},[e.visible,t.map]),Oe.createElement(Oe.Fragment,null)};FF.defaultProps=Wa({},OF);Oe.createElement(sge,null),Oe.createElement(_Z,null),Oe.createElement(bZ,null);var O_e=Oe.createContext({});O_e.Provider;Ln(bd)({padding:"4px",marginTop:"-3px",background:"none","&:hover":{background:"none"}});Oe.createElement($1e,null),Oe.createElement(z1e,null),Oe.createElement(B1e,null),Oe.createElement(F1e,null);var _p;function BF(e,t,r){t.forEach(function(n){e(n,r),n.layers&&n.layers.length>0&&BF(e,n.layers,n)})}var F_e={mapConfigs:{}},zF=v_e({name:"mapConfig",initialState:F_e,reducers:{setMapConfig:function(e,t){var r=t.payload.mapConfig,n=t.payload.key;e.mapConfigs[n]=r},removeMapConfig:function(e,t){delete e.mapConfigs[t.payload.key]},setLayerInMapConfig:function(e,t){var r=t.payload,n=r.mapConfigKey,s=r.layer,l=e.mapConfigs[n];if(l){for(var f=0;f<l.layers.length;f++)if(l.layers[f].uuid===s.uuid){l.layers[f]=s;break}}},removeLayerFromMapConfig:function(e,t){var r=t.payload,n=r.mapConfigKey,s=r.layerUuid,l=e.mapConfigs[n];if(l){var f=l.layers.findIndex(function(a){return a.uuid===s});f!==-1&&(delete l.layers[f],BF(function(a,y){y&&y.layers&&(y.layers=y.layers.filter(function(v){return v.uuid!==s}))},l.layerOrder))}},updateLayerOrder:function(e,t){var r=t.payload,n=r.mapConfigKey,s=r.newOrder,l=e.mapConfigs[n];l&&(l.layerOrder=s)},setMasterVisible:function(e,t){var r,n=t.payload,s=n.mapConfigKey,l=n.layerId,f=n.masterVisible,a=e.mapConfigs[s];if(a){var y=a.layers.findIndex(function(P){return P.uuid===l});if(y!==-1){var v=a.layers[y];if(v){var S=Yf([],a.layers,!0);v.type==="folder"&&a.layerOrder.forEach(function(P){var D;P.uuid===l&&((D=P.layers)===null||D===void 0||D.forEach(function(E){var F,z=a.layers.findIndex(function($){return $.uuid===E.uuid}),W=S[z];S[z]=Wa(Wa({},W),{masterVisible:f}),(W==null?void 0:W.type)==="vt"&&(!((F=W==null?void 0:W.config)===null||F===void 0)&&F.layers)&&(W.config.layers=W.config.layers.map(function($){return Wa(Wa({},$),{masterVisible:f})}))}))}),v.type==="vt"&&(!((r=v==null?void 0:v.config)===null||r===void 0)&&r.layers)&&(v.config.layers=v.config.layers.map(function(P){return Wa(Wa({},P),{masterVisible:f})})),e.mapConfigs[s].layers=S}}}}}});h_e({reducer:{mapConfig:zF.reducer}});_p=zF.actions,_p.setMapConfig;_p.removeMapConfig;_p.setLayerInMapConfig;_p.removeLayerFromMapConfig;_p.updateLayerOrder;_p.setMasterVisible;Ln(qR)({marginLeft:"-100px",marginRight:"-21px",paddingLeft:"53px",borderRadius:"0px",boxShadow:"none",backgroundColor:"rgb(0, 0, 0, 0)"});Ln(wp)({marginLeft:"61px"});Ln(bd)({padding:"4px",marginTop:"-3px"});Ln(bd)({marginLeft:"20px"});Ln(zE)({paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:"4px"});Ln($E)({minWidth:"30px"});Ln(bd)({marginRight:"0px",padding:"0px"});Ln(wp)(function(e){var t=e.open;return{display:t?"block":"none"}});Ln(hb)({marginLeft:"50px"});Ln(hb)({marginTop:"15px"});const B_e="https://ows.terrestris.de/osm/service",z_e=({mapId:e})=>{const{map:t}=NF({mapId:e}),[r,n]=vt.useState(null);return vt.useEffect(()=>{if(!t)return;const s=l=>{l!=null&&l.error&&n(l.error.message||"Unbekannter Fehler")};return t.map.on("error",s),()=>{t.map.off("error",s)}},[t]),r?Ar.jsxs("div",{style:{position:"absolute",bottom:8,left:8,background:"#fff",padding:"4px 8px",fontSize:12,border:"1px solid #ccc"},children:["WMS Fehler: ",r]}):null},$_e=()=>{const e=vt.useMemo(()=>({layers:"OSM-WMS",format:"image/png",transparent:!1,version:"1.3.0"}),[]),[t,r]=vt.useState(!0),[n,s]=vt.useState(1);return Ar.jsxs(Ar.Fragment,{children:[Ar.jsxs("div",{className:"toolbar",children:[Ar.jsx("strong",{children:"OSM WMS Demo"})," ",Ar.jsx("button",{onClick:()=>r(l=>!l),style:{marginLeft:8},children:t?"Layer ausblenden":"Layer einblenden"}),Ar.jsxs("label",{style:{marginLeft:12,fontSize:12},children:["Opacity ",n.toFixed(2),Ar.jsx("input",{type:"range",min:0,max:1,step:.05,value:n,onChange:l=>s(Number(l.target.value)),style:{verticalAlign:"middle",marginLeft:4}})]})]}),Ar.jsx(DF,{mapId:"main",options:{center:[7,51],zoom:5,style:{version:8,sources:{empty:{type:"vector",tiles:[]}},layers:[]}}}),t&&Ar.jsx(FF,{mapId:"main",url:B_e,params:e,layerId:"osm-wms-basemap",options:{paint:{"raster-opacity":n}}}),Ar.jsx(z_e,{mapId:"main",layerId:"osm-wms-basemap"})]})},j_e=()=>Ar.jsx("div",{className:"mapShell",children:Ar.jsx($_e,{})});XD(document.getElementById("root")).render(Ar.jsx(Oe.StrictMode,{children:Ar.jsx(D_e,{children:Ar.jsx(j_e,{})})}));export{Ji as _,ec as c,OL as g};
